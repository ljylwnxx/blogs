<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Pinia ä¸ Vuex çš„åŒºåˆ«</title>
    <url>/2023/04/05/Pinia%E4%B8%8EVuex%20%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<h1 id="ä¸¤è€…åŒºåˆ«"><a href="#ä¸¤è€…åŒºåˆ«" class="headerlink" title="ä¸¤è€…åŒºåˆ«"></a>ä¸¤è€…åŒºåˆ«</h1><ol>
<li>Vuexçš„æ ¸å¿ƒæ¦‚å¿µæœ‰state,getters,mutations,actions,moudlesäº”ä¸ªéƒ¨åˆ†<br>Piniaçš„æ ¸å¿ƒæ¦‚å¿µæœ‰state,getter,actionä¸‰ä¸ªéƒ¨åˆ†</li>
<li>2 mutationÂ å·²è¢«å¼ƒç”¨ã€‚å®ƒä»¬ç»å¸¸è¢«è®¤ä¸ºæ˜¯æå…¶å†—ä½™çš„</li>
<li>3ä¸å†æœ‰åµŒå¥—ç»“æ„çš„moudlesï¼Œstoreçš„å‘½åå–å†³äºå®ƒçš„å®šä¹‰æ–¹å¼ï¼Œå®ç°ä¸€ç§æ‰å¹³æ¶æ„</li>
<li>Vuexå¯¹stateçš„ä¿®æ”¹æ¨èä½¿ç”¨mutationsä¸­çš„æ–¹æ³•è¿›è¡Œä¿®æ”¹,<br>Piniaç›´æ¥å¯¹stateè¿›è¡Œä¿®æ”¹</li>
<li>Piniaä¸­ getterï¼Œaction ä¹Ÿå¯é€šè¿‡ this è®¿é—®æ•´ä¸ª store å®ä¾‹<h1 id="main-jsä¸­"><a href="#main-jsä¸­" class="headerlink" title="main.jsä¸­"></a>main.jsä¸­</h1>åœ¨main.jsä¸­ï¼Œvuecliä¼šè‡ªåŠ¨å°†vuexæŒ‚è½½åˆ°appä¸Šï¼Œä½¿ç”¨viteéœ€è¦è‡ªå·±æ‰‹åŠ¨æŒ‚è½½pinia<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>  </span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>();  </span><br><span class="line">app.<span class="title function_">use</span>(pinia);</span><br></pre></td></tr></table></figure>
<h1 id="store-index-jsä¸­"><a href="#store-index-jsä¸­" class="headerlink" title="store/index.jsä¸­"></a>store/index.jsä¸­</h1>vuexæœ‰state,getter,mutation,action,moudleäº”ä¸ªéƒ¨åˆ†<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; receiveMessagePerson &#125; <span class="keyword">from</span> <span class="string">&#x27;./modules/receiveMessagePerson&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">memberOrAdmin</span>: <span class="string">&quot;member&quot;</span>,</span><br><span class="line">    <span class="attr">searchPerson</span>: []</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">setMemberOrAdmin</span>(<span class="params">context, data</span>)&#123;</span><br><span class="line">      context.<span class="property">memberOrAdmin</span> = data</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">getPerson</span>(<span class="params">context</span>)&#123;</span><br><span class="line">      <span class="keyword">let</span> userId = context.<span class="property">state</span>.<span class="property">PersonId</span></span><br><span class="line">      <span class="variable constant_">API</span>.<span class="title function_">getAllInformation</span>(&#123;userId&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        context.<span class="title function_">commit</span>(<span class="string">&#x27;setPerson&#x27;</span>,res.<span class="property">data</span>)</span><br><span class="line">      &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    receiveMessagePerson</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
Piniaæœ‰state,getter,actionä¸‰ä¸ªéƒ¨åˆ†<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTestStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;Test&#x27;</span>, &#123;</span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">      <span class="attr">cuont</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">double</span>(<span class="params">state</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">cuont</span>*<span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">increase</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">cuont</span>++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="åœ¨vueç»„ä»¶ä¸­"><a href="#åœ¨vueç»„ä»¶ä¸­" class="headerlink" title="åœ¨vueç»„ä»¶ä¸­"></a>åœ¨vueç»„ä»¶ä¸­</h1><h2 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h2>vue2ä¸­ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.***</span><br></pre></td></tr></table></figure>
vue3ä¸­ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">let</span> store = <span class="title function_">useStore</span>()</span><br><span class="line"><span class="keyword">let</span> *** = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> store.<span class="property">state</span>.***)</span><br><span class="line">store.<span class="title function_">commit</span>(<span class="string">&#x27;**&#x27;</span>, **)</span><br><span class="line">store.<span class="title function_">dispatch</span>(<span class="string">&#x27;**&#x27;</span>, **)</span><br></pre></td></tr></table></figure>
<h2 id="vuexæ‹†è§£"><a href="#vuexæ‹†è§£" class="headerlink" title="vuexæ‹†è§£"></a>vuexæ‹†è§£</h2>vue2ä¸­ï¼š<br>ä½¿ç”¨åˆ°mapState,mapGetter,mapMutations,mapActionsæ–¹æ³•,[_post/Vuexçš„namespacedå±æ€§.md]<br>vue3ä¸­ï¼š<h2 id="Pinia"><a href="#Pinia" class="headerlink" title="Pinia"></a>Pinia</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useTestStore &#125; <span class="keyword">from</span> <span class="string">&#x27;../store/index&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> store = <span class="title function_">useTestStore</span>()</span><br><span class="line">store.**(stateå˜é‡å)</span><br><span class="line">store.**(getterså˜é‡å)</span><br><span class="line">store.**(actionsæ–¹æ³•å)</span><br></pre></td></tr></table></figure>
çœå»äº†state,getters,commit,dispatchè¿™äº›å­—æ®µï¼Œæ›´æ–¹ä¾¿<h2 id="Piniaæ‹†è§£"><a href="#Piniaæ‹†è§£" class="headerlink" title="Piniaæ‹†è§£"></a>Piniaæ‹†è§£</h2>ç”¨åˆ°storeToRefs<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line">   <span class="comment">// stateå’Œgettersçš„å˜é‡éƒ½å¯ä»¥æ‹†è§£å‡ºæ¥</span></span><br><span class="line"><span class="keyword">let</span> &#123; **, ** &#125; = <span class="title function_">storeToRefs</span>(store) </span><br><span class="line"><span class="comment">// actionsçš„æ–¹æ³•æ‹†è§£å‡ºæ¥</span></span><br><span class="line"><span class="keyword">let</span> &#123; ** &#125; = store                   </span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vuex</tag>
      </tags>
  </entry>
  <entry>
    <title>Hooks</title>
    <url>/2022/12/08/Hooks/</url>
    <content><![CDATA[<h1 id="1ã€ä¸ºä»€ä¹ˆè¦å°è£…-Hooks-ï¼Ÿ"><a href="#1ã€ä¸ºä»€ä¹ˆè¦å°è£…-Hooks-ï¼Ÿ" class="headerlink" title="1ã€ä¸ºä»€ä¹ˆè¦å°è£… Hooks ï¼Ÿ"></a>1ã€ä¸ºä»€ä¹ˆè¦å°è£… Hooks ï¼Ÿ</h1><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨Vue2ä¸­ï¼ŒåŒä¸€ä¸ª.vueç»„ä»¶ä¸­ï¼Œå¦‚æœ dataã€methodsã€computedã€watch çš„ä½“é‡è¾ƒå¤§ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ä»£ç å°±ä¼šæ˜¾å¾—å¾ˆè‡ƒè‚¿ã€‚<br>æˆ‘ä»¬åº”è¯¥æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè§£å†³ä»£ç è‡ƒè‚¿çš„é—®é¢˜ï¼Œé™¤äº†æ‹†åˆ†ç»„ä»¶ï¼Œè¿˜æ˜¯æ‹†åˆ†ç»„ä»¶ã€‚</p>
<h2 id="ä½ ä¼šä¸ä¼šå¥½å¥‡ï¼Œåœ¨Vue3ä¸­æ˜¯å¦ä¼šå‡ºç°åŒæ ·çš„é—®é¢˜å‘¢ï¼Ÿåˆæ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿ"><a href="#ä½ ä¼šä¸ä¼šå¥½å¥‡ï¼Œåœ¨Vue3ä¸­æ˜¯å¦ä¼šå‡ºç°åŒæ ·çš„é—®é¢˜å‘¢ï¼Ÿåˆæ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿ" class="headerlink" title="ä½ ä¼šä¸ä¼šå¥½å¥‡ï¼Œåœ¨Vue3ä¸­æ˜¯å¦ä¼šå‡ºç°åŒæ ·çš„é—®é¢˜å‘¢ï¼Ÿåˆæ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿ"></a>ä½ ä¼šä¸ä¼šå¥½å¥‡ï¼Œåœ¨Vue3ä¸­æ˜¯å¦ä¼šå‡ºç°åŒæ ·çš„é—®é¢˜å‘¢ï¼Ÿåˆæ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿ</h2><p>è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯è‚¯å®šå­˜åœ¨åŒæ ·çš„é—®é¢˜ï¼ŒVue3ä¸­ï¼Œæ¯å½“æˆ‘ä»¬çš„ç»„ä»¶å˜å¾—æ›´å¤§çš„æ—¶å€™ï¼Œé€»è¾‘å…³æ³¨ç‚¹å°±è¶Šå¤šï¼Œè¿™æ ·å°±æ›´ä¸åˆ©äºæˆ‘ä»¬å¯¹ç»„ä»¶çš„ç†è§£å’Œé˜…è¯»ã€‚<br>ä½†æ˜¯ä¸Vue2ä¸åŒçš„ä¸€ç‚¹æ˜¯ï¼Œåœ¨Vue3ä¸­ï¼Œæˆ‘ä»¬é™¤äº†é€šè¿‡æ‹†åˆ†ç»„ä»¶çš„æ–¹æ³•æ¥è§£å†³ä»£ç è‡ƒè‚¿ï¼Œè¿˜å¯ä»¥ä½¿ç”¨Hookså°è£…æ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚</p>
<h2 id="å“ªä»€ä¹ˆæ˜¯Hookså°è£…å‘¢ï¼Ÿ"><a href="#å“ªä»€ä¹ˆæ˜¯Hookså°è£…å‘¢ï¼Ÿ" class="headerlink" title="å“ªä»€ä¹ˆæ˜¯Hookså°è£…å‘¢ï¼Ÿ"></a>å“ªä»€ä¹ˆæ˜¯Hookså°è£…å‘¢ï¼Ÿ</h2><p>Hookså°è£…ï¼Œå°±æ˜¯æŠŠä¸åŒçš„é€»è¾‘å…³æ³¨ç‚¹æŠ½ç¦»å‡ºæ¥ï¼Œä»¥è¾¾åˆ°ä¸šåŠ¡é€»è¾‘çš„ç‹¬ç«‹æ€§ã€‚è¿™ä¹Ÿæ˜¯Vue3 å¯¹æ¯”Vue2çš„æœ€å¤§äº®ç‚¹ä¹‹ä¸€ã€‚</p>
<h1 id="2ã€å¦‚ä½•å°è£…-Hooks-å‘¢ï¼Ÿ"><a href="#2ã€å¦‚ä½•å°è£…-Hooks-å‘¢ï¼Ÿ" class="headerlink" title="2ã€å¦‚ä½•å°è£… Hooks å‘¢ï¼Ÿ"></a>2ã€å¦‚ä½•å°è£… Hooks å‘¢ï¼Ÿ</h1><p>é¦–å…ˆæˆ‘ä»¬è¦åœ¨setup ç»„åˆçš„å¼€å‘æ¨¡å¼ä¸‹ï¼Œ<br>ç„¶åæŠŠå…·ä½“æŸä¸ªä¸šåŠ¡åŠŸèƒ½æ‰€ç”¨åˆ°çš„ refã€reactiveã€watchã€computedã€watchEffect ç­‰ï¼Œ<br>æå–åˆ°ä¸€ä¸ªä»¥ use* å¼€å¤´çš„è‡ªå®šä¹‰å‡½æ•°ä¸­å»ã€‚</p>
<h2 id="æŠŠå®ƒå°è£…åœ¨ä»¥use-å¼€å¤´çš„Hookså‡½æ•°ä¸­ï¼Œæœ‰ä»€ä¹ˆæ ·çš„å¥½å¤„å‘¢ï¼Ÿ"><a href="#æŠŠå®ƒå°è£…åœ¨ä»¥use-å¼€å¤´çš„Hookså‡½æ•°ä¸­ï¼Œæœ‰ä»€ä¹ˆæ ·çš„å¥½å¤„å‘¢ï¼Ÿ" class="headerlink" title="æŠŠå®ƒå°è£…åœ¨ä»¥use* å¼€å¤´çš„Hookså‡½æ•°ä¸­ï¼Œæœ‰ä»€ä¹ˆæ ·çš„å¥½å¤„å‘¢ï¼Ÿ"></a>æŠŠå®ƒå°è£…åœ¨ä»¥use* å¼€å¤´çš„Hookså‡½æ•°ä¸­ï¼Œæœ‰ä»€ä¹ˆæ ·çš„å¥½å¤„å‘¢ï¼Ÿ</h2><p>å…¶ä¸€äº«å—åˆ°å°è£…å¸¦æ¥çš„ä¾¿åˆ©æ€§ï¼Œè¿˜æœ‰åˆ©äºä»£ç é€»è¾‘çš„å¤ç”¨ã€‚<br>å…¶äºŒHookså‡½æ•°æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œè¢«å¤ç”¨æ—¶å¯ä»¥ä¿æŒä½œç”¨åŸŸçš„ç‹¬ç«‹æ€§ï¼Œå³ï¼šåŒä¸€ä¸ªHookså‡½æ•°è¢«å¤šæ¬¡å¤ç”¨ï¼Œå½¼æ­¤æ˜¯ä¸å¹²æ‰°çš„ã€‚</p>
<h1 id="3ã€åœ¨å“ªäº›æƒ…å†µä¸‹éœ€è¦å°è£…-Hookså‘¢ï¼Ÿæˆ‘æ€»ç»“äº†ä¸¤ç§åœºæ™¯ï¼š"><a href="#3ã€åœ¨å“ªäº›æƒ…å†µä¸‹éœ€è¦å°è£…-Hookså‘¢ï¼Ÿæˆ‘æ€»ç»“äº†ä¸¤ç§åœºæ™¯ï¼š" class="headerlink" title="3ã€åœ¨å“ªäº›æƒ…å†µä¸‹éœ€è¦å°è£… Hookså‘¢ï¼Ÿæˆ‘æ€»ç»“äº†ä¸¤ç§åœºæ™¯ï¼š"></a>3ã€åœ¨å“ªäº›æƒ…å†µä¸‹éœ€è¦å°è£… Hookså‘¢ï¼Ÿæˆ‘æ€»ç»“äº†ä¸¤ç§åœºæ™¯ï¼š</h1><p>ä¸€ç§æ˜¯åŠŸèƒ½ç±»Hooksï¼Œå³ä¸ºäº†é€»è¾‘å¤ç”¨çš„å°è£…ï¼›<br>å¦ä¸€ç§æ˜¯ä¸šåŠ¡ç±»Hooksï¼Œå³ä¸ºäº†é€»è¾‘è§£è€¦çš„å°è£…ã€‚<br>ä¸‹é¢æˆ‘ç»™ä¸¤ç»„ä»£ç ï¼Œè¯´æ˜è¿™ä¸¤ç§ä½¿ç”¨åœºæ™¯ã€‚</p>
<h1 id="4ã€ç¤ºä¾‹ï¼šåŠŸèƒ½ç±»-Hookså°è£…"><a href="#4ã€ç¤ºä¾‹ï¼šåŠŸèƒ½ç±»-Hookså°è£…" class="headerlink" title="4ã€ç¤ºä¾‹ï¼šåŠŸèƒ½ç±» Hookså°è£…"></a>4ã€ç¤ºä¾‹ï¼šåŠŸèƒ½ç±» Hookså°è£…</h1><p><img src="/2022/12/08/Hooks/%E6%A1%88%E4%BE%8B1.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h1 id="5ã€ç¤ºä¾‹ï¼šä¸šåŠ¡ç±»-Hookså°è£…"><a href="#5ã€ç¤ºä¾‹ï¼šä¸šåŠ¡ç±»-Hookså°è£…" class="headerlink" title="5ã€ç¤ºä¾‹ï¼šä¸šåŠ¡ç±» Hookså°è£…"></a>5ã€ç¤ºä¾‹ï¼šä¸šåŠ¡ç±» Hookså°è£…</h1><p><img src="/2022/12/08/Hooks/%E6%A1%88%E4%BE%8B2.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h2 id="å°è£…Hooksä¸èƒ½ä¸ºäº†å°è£…è€Œå°è£…ã€‚è¦è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š"><a href="#å°è£…Hooksä¸èƒ½ä¸ºäº†å°è£…è€Œå°è£…ã€‚è¦è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š" class="headerlink" title="å°è£…Hooksä¸èƒ½ä¸ºäº†å°è£…è€Œå°è£…ã€‚è¦è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š"></a>å°è£…Hooksä¸èƒ½ä¸ºäº†å°è£…è€Œå°è£…ã€‚è¦è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š</h2><ol>
<li>æ˜¯å¦æœ‰å¤ç”¨çš„ä»·å€¼ï¼Ÿ</li>
<li>æ˜¯å¦æœ‰åˆ©äºé€»è¾‘çš„åˆ†ç¦»ï¼Ÿ</li>
<li>æ˜¯å¦æœ‰åŠ©æå‡ä»£ç çš„å¯é˜…è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Ÿ</li>
</ol>
]]></content>
      <categories>
        <category>vue3</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue-æœç´¢å¼•æ“SEOä¼˜åŒ–</title>
    <url>/2023/04/05/Vue-%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8ESEO%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒVue SPA å•é¡µåº”ç”¨å¯¹ SEO ä¸å‹å¥½ï¼Œå½“ç„¶ä¹Ÿæœ‰ç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h1 id="1-SSR-æœåŠ¡å™¨æ¸²æŸ“"><a href="#1-SSR-æœåŠ¡å™¨æ¸²æŸ“" class="headerlink" title="1. SSR æœåŠ¡å™¨æ¸²æŸ“"></a>1. SSR æœåŠ¡å™¨æ¸²æŸ“</h1><p>Vue.js æ˜¯æ„å»ºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å‡º Vue ç»„ä»¶ï¼Œè¿›è¡Œç”Ÿæˆ DOM å’Œæ“ä½œ DOMã€‚ç„¶è€Œï¼Œä¹Ÿå¯ä»¥å°†åŒä¸€ä¸ªç»„ä»¶æ¸²æŸ“ä¸ºæœåŠ¡å™¨ç«¯çš„ HTML å­—ç¬¦ä¸²ï¼Œå°†ä»–ä»¬ç›´æ¥å‘é€åˆ°æµè§ˆå™¨ï¼Œæœ€åå°†è¿™äº›é™æ€æ ‡è®°â€œæ¿€æ´»â€ä¸ºå®¢æˆ·ç«¯ä¸Šå®Œå…¨å¯äº¤äº’çš„åº”ç”¨ç¨‹åºã€‚<br>æœåŠ¡å™¨æ¸²æŸ“çš„ Vue.js åº”ç”¨ç¨‹åºä¹Ÿå¯ä»¥è¢«è®¤ä¸ºæ˜¯â€œåŒæ„â€æˆ–â€œé€šç”¨â€ï¼Œå› ä¸ºåº”ç”¨ç¨‹åºçš„å¤§éƒ¨åˆ†ä»£ç éƒ½å¯ä»¥åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¸Šè¿è¡Œã€‚</p>
<h2 id="æƒè¡¡ä¹‹å¤„ï¼š"><a href="#æƒè¡¡ä¹‹å¤„ï¼š" class="headerlink" title="æƒè¡¡ä¹‹å¤„ï¼š"></a>æƒè¡¡ä¹‹å¤„ï¼š</h2><ul>
<li>å¼€å‘æ¡ä»¶æ‰€é™ï¼Œæµè§ˆå™¨ç‰¹å®šçš„ä»£ç ï¼Œåªèƒ½åœ¨æŸäº›ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼ˆlifecyle hookï¼‰ä¸­ä½¿ç”¨ï¼›ä¸€äº›å¤–éƒ¨æ‰©å±•åº“ï¼ˆexternal libraryï¼‰å¯èƒ½éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œæ‰èƒ½åœ¨æœåŠ¡å™¨æ¸²æŸ“åº”ç”¨ç¨‹åºä¸­è¿è¡Œã€‚</li>
<li>ç¯å¢ƒå’Œéƒ¨ç½²è¦æ±‚æ›´é«˜ï¼Œéœ€è¦ Node.js server è¿è¡Œç¯å¢ƒã€‚</li>
<li>é«˜æµé‡çš„æƒ…å†µä¸‹ï¼Œè¯·å‡†å¤‡ç›¸åº”çš„æœåŠ¡å™¨è´Ÿè½½ï¼Œå¹¶æ˜æ™ºçš„é‡‡ç”¨ç¼“å­˜ç­–ç•¥ã€‚<h2 id="ä¼˜åŠ¿ï¼š"><a href="#ä¼˜åŠ¿ï¼š" class="headerlink" title="ä¼˜åŠ¿ï¼š"></a>ä¼˜åŠ¿ï¼š</h2></li>
<li>æ›´å¥½çš„ SEOï¼Œç”±äºæœç´¢å¼•æ“çˆ¬è™«æŠ“å–å·¥å…·å¯ä»¥ç›´æ¥æŸ¥çœ‹å®Œå…¨æ¸²æŸ“çš„é¡µé¢ã€‚</li>
<li>æ›´å¿«çš„å†…å®¹åˆ°è¾¾æ—¶é—´ï¼ˆtime-to-contentï¼‰ï¼Œç‰¹åˆ«æ˜¯å¯¹äºæ¢å¿™çš„ç½‘ç»œæƒ…å†µæˆ–è¿è¡Œç¼“æ…¢çš„è®¾å¤‡ã€‚</li>
</ul>
<h2 id="ä¸è¶³ï¼š"><a href="#ä¸è¶³ï¼š" class="headerlink" title="ä¸è¶³ï¼š"></a>ä¸è¶³ï¼š</h2><ul>
<li>ä¸€å¥—ä»£ç ä¸¤å¥—æ‰§è¡Œç¯å¢ƒï¼Œä¼šå¼•èµ·å„ç§é—®é¢˜ï¼Œæ¯”å¦‚æœåŠ¡ç«¯æ²¡æœ‰ windowã€document å¯¹è±¡ï¼Œå¤„ç†æ–¹å¼æ˜¯å¢åŠ åˆ¤æ–­ï¼Œå¦‚æœæ˜¯å®¢æˆ·ç«¯æ‰æ‰§è¡Œã€‚</li>
<li>å¼•ç”¨ npm åŒ…ï¼Œå¸¦æœ‰ dom æ“ä½œçš„ï¼Œä¾‹å¦‚ï¼šwowjsï¼Œä¸èƒ½ç”¨ import çš„æ–¹å¼ã€‚</li>
<li>Nuxt asyncData æ–¹æ³•ï¼Œåˆå§‹åŒ–é¡µé¢å‰å…ˆå¾—åˆ°æ•°æ®ï¼Œä½†ä»…é™äºé¡µé¢ç»„ä»¶è°ƒç”¨ã€‚</li>
</ul>
<h1 id="2-Nuxt-é™æ€åŒ–"><a href="#2-Nuxt-é™æ€åŒ–" class="headerlink" title="2. Nuxt é™æ€åŒ–"></a>2. Nuxt é™æ€åŒ–</h1><p>Nuxt.js æ¡†æ¶ï¼Œå®˜æ–¹æ˜¯è¿™æ ·ä»‹ç»çš„ï¼Œä»å¤´æ­å»ºä¸€ä¸ªæœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨æ˜¯ç›¸å½“å¤æ‚çš„ï¼Œå¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä¼˜ç§€çš„ç¤¾åŒºé¡¹ç›® Nuxt.js è®©è¿™ä¸€åˆ‡å˜å¾—éå¸¸ç®€å•ã€‚Nuxt æ˜¯ä¸€ä¸ªåŸºäº Vue ç”Ÿæ€çš„æ›´é«˜å±‚çš„æ¡†æ¶ï¼Œä¸ºå¼€å‘æœåŠ¡ç«¯æ¸²æŸ“çš„ Vue åº”ç”¨æä¾›äº†æå…¶ä¾¿åˆ©çš„å¼€å‘ä½“éªŒã€‚æ›´é…·çš„æ˜¯ï¼Œä½ ç”šè‡³å¯ä»¥ç”¨å®ƒæ¥ä½œä¸ºé™æ€ç«™ç‚¹ç”Ÿæˆå™¨ã€‚<br>é™æ€åŒ–æ˜¯ Nuxt.js æ‰“åŒ…çš„å¦ä¸€ç§æ–¹å¼ï¼Œç®—æ˜¯ Nuxt.js çš„ä¸€ä¸ªåˆ›æ–°ç‚¹ï¼Œé¡µé¢åŠ è½½é€Ÿåº¦å¾ˆå¿«ã€‚<br>åœ¨ Nuxt.js æ‰§è¡Œ generate é™æ€åŒ–æ‰“åŒ…æ—¶ï¼ŒåŠ¨æ€è·¯ç”±ä¼šè¢«å¿½ç•¥ã€‚<br>å¦‚æœä½ çš„åŠ¨æ€è·¯ç”±å‚æ•°å¾ˆå¤šï¼Œä¾‹å¦‚å•†å“è¯¦æƒ…ï¼Œå¯èƒ½é«˜è¾¾å‡ åƒå‡ ä¸‡ä¸ªã€‚éœ€è¦ä¸€ä¸ªæ¥å£è¿”å›æ‰€æœ‰ idï¼Œç„¶åæ‰“åŒ…æ—¶éå† idï¼Œæ‰“åŒ…åˆ°æœ¬åœ°ï¼Œå¦‚æœæŸä¸ªå•†å“ä¿®æ”¹äº†æˆ–è€…ä¸‹æ¶äº†ï¼Œåˆè¦é‡æ–°æ‰“åŒ…ï¼Œæ•°é‡å¤šçš„æƒ…å†µä¸‹æ‰“åŒ…ä¹Ÿæ˜¯éå¸¸æ…¢çš„ï¼Œéå¸¸ä¸ç°å®ã€‚</p>
<h2 id="ä¼˜åŠ¿ï¼š-1"><a href="#ä¼˜åŠ¿ï¼š-1" class="headerlink" title="ä¼˜åŠ¿ï¼š"></a>ä¼˜åŠ¿ï¼š</h2><ul>
<li>çº¯é™æ€æ–‡ä»¶ï¼Œè®¿é—®é€Ÿåº¦è¶…å¿«ã€‚</li>
<li>å¯¹æ¯” SSRï¼Œä¸æ¶‰åŠåˆ°æœåŠ¡å™¨è´Ÿè½½æ–¹é¢é—®é¢˜ã€‚</li>
<li>é™æ€ç½‘é¡µä¸å®œé­åˆ°é»‘å®¢æ”»å‡»ï¼Œå®‰å…¨æ€§æ›´é«˜ã€‚<h2 id="ä¸è¶³ï¼š-1"><a href="#ä¸è¶³ï¼š-1" class="headerlink" title="ä¸è¶³ï¼š"></a>ä¸è¶³ï¼š</h2></li>
<li>å¦‚æœåŠ¨æ€è·¯ç”±å‚æ•°å¤šçš„è¯ä¸é€‚ç”¨ã€‚</li>
</ul>
<h1 id="3-é¢„æ¸²æŸ“-prerender-spa-plugin"><a href="#3-é¢„æ¸²æŸ“-prerender-spa-plugin" class="headerlink" title="3. é¢„æ¸²æŸ“ prerender-spa-plugin"></a>3. é¢„æ¸²æŸ“ prerender-spa-plugin</h1><p>å¦‚æœä½ åªæ˜¯ç”¨æ¥æ”¹å–„å°‘æ•°è¥é”€é¡µé¢ï¼ˆä¾‹å¦‚ /aboutï¼Œ/contactç­‰ï¼‰çš„ SEOï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦é¢„æ¸²æŸ“ã€‚æ— éœ€ä½¿ç”¨ web æœåŠ¡å™¨å®æ—¶åŠ¨æ€ç¼–è¯‘ HTMLï¼Œè€Œæ˜¯ä½¿ç”¨é¢„æ¸²æŸ“æ–¹å¼ï¼Œåœ¨æ„å»ºæ—¶ï¼ˆbuild timeï¼‰ç®€å•çš„ç”Ÿæˆé’ˆå¯¹ç‰¹å®šè·¯ç”±çš„é™æ€ HTML æ–‡ä»¶ã€‚ä¼˜ç‚¹æ˜¯è®¾ç½®é¢„æ¸²æŸ“æ›´ç®€å•ï¼Œå¹¶å¯ä»¥å°†ä½ çš„å‰ç«¯ä½œä¸ºä¸€ä¸ªå®Œå…¨é™æ€çš„ç«™ç‚¹ã€‚</p>
<h2 id="ä¼˜åŠ¿ï¼š-2"><a href="#ä¼˜åŠ¿ï¼š-2" class="headerlink" title="ä¼˜åŠ¿ï¼š"></a>ä¼˜åŠ¿ï¼š</h2><ul>
<li>æ”¹åŠ¨å°ï¼Œå¼•å…¥æ’ä»¶é…ç½®å³å¯<h2 id="ä¸è¶³ï¼š-2"><a href="#ä¸è¶³ï¼š-2" class="headerlink" title="ä¸è¶³ï¼š"></a>ä¸è¶³ï¼š</h2></li>
<li>æ— æ³•ä½¿ç”¨åŠ¨æ€è·¯ç”±</li>
<li>åªé€‚ç”¨å°‘é‡é¡µé¢çš„é¡¹ç›®ï¼Œé¡µé¢å¤šè¾¾å‡ ç™¾ä¸ªçš„æƒ…å†µä¸‹ï¼Œæ‰“åŒ…å›éå¸¸æ…¢ã€‚</li>
</ul>
<h1 id="4-ä½¿ç”¨-Phantomjs-é’ˆå¯¹çˆ¬è™«åšå¤„ç†"><a href="#4-ä½¿ç”¨-Phantomjs-é’ˆå¯¹çˆ¬è™«åšå¤„ç†" class="headerlink" title="4. ä½¿ç”¨ Phantomjs é’ˆå¯¹çˆ¬è™«åšå¤„ç†"></a>4. ä½¿ç”¨ Phantomjs é’ˆå¯¹çˆ¬è™«åšå¤„ç†</h1><p>Phantomjs æ˜¯ä¸€ä¸ªåŸºäº webkit å†…æ ¸çš„æ— å¤´æµè§ˆå™¨ï¼Œå³æ²¡æœ‰ UI ç•Œé¢ï¼Œåªæ˜¯å…¶å†…çš„ç‚¹å‡»ã€ç¿»é¡µç­‰äººä¸ºç›¸å…³æ“ä½œéœ€è¦ç¨‹åºè®¾è®¡å®ç°ã€‚<br>è™½ç„¶â€œPhantomjs å®£å¸ƒç»ˆæ­¢å¼€å‘â€ï¼Œä½†æ˜¯å·²ç»æ»¡è¶³å¯¹ Vue çš„ SEO å¤„ç†ã€‚<br>è¿™ç§è§£å†³æ–¹æ¡ˆå…¶å®æ˜¯ä¸€ç§æ—è·¯æœºåˆ¶ï¼ŒåŸç†å°±æ˜¯é€šè¿‡ Nginx é…ç½®ï¼Œåˆ¤æ–­è®¿é—®çš„æ¥æº UA æ˜¯å¦æ˜¯çˆ¬è™«è®¿é—®ï¼Œå¦‚æœæ˜¯åˆ™å°†æœç´¢å¼•æ“çš„çˆ¬è™«è¯·æ±‚è½¬å‘åˆ°ä¸€ä¸ª node serveï¼Œåœ¨é€šè¿‡ Phantomjs æ¥è§£æå®Œæ•´çš„ HTMLï¼Œè¿”å›ç»™çˆ¬è™«ã€‚</p>
<h2 id="ä¼˜åŠ¿ï¼š-3"><a href="#ä¼˜åŠ¿ï¼š-3" class="headerlink" title="ä¼˜åŠ¿ï¼š"></a>ä¼˜åŠ¿ï¼š</h2><ul>
<li>å®Œå…¨ä¸ç”¨æ”¹åŠ¨é¡¹ç›®ä»£ç ï¼ŒæŒ‰åŸæœ¬çš„ SPA å¼€å‘å³å¯ï¼Œå¯¹æ¯”å¼€å‘ SSR æˆæœ¬å°ä¸è¦å¤ªå¤šã€‚</li>
<li>å¯¹å·²ç”¨ SPA å¼€å‘å®Œæˆçš„é¡¹ç›®ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚<h2 id="ä¸è¶³ï¼š-3"><a href="#ä¸è¶³ï¼š-3" class="headerlink" title="ä¸è¶³ï¼š"></a>ä¸è¶³ï¼š</h2></li>
<li>éƒ¨ç½²éœ€è¦ node æœåŠ¡å™¨æ”¯æŒã€‚</li>
<li>çˆ¬è™«è®¿é—®æ¯”ç½‘é¡µè®¿é—®è¦æ…¢ä¸€äº›ï¼Œå› ä¸ºè¦å®šæ—¶èµ„æºåŠ è½½å®Œæˆæ‰è¿”å›ç»™çˆ¬è™«ã€‚</li>
<li>å¦‚æœè¢«æ¶æ„æ¨¡æ‹Ÿç™¾åº¦çˆ¬è™«å¤§é‡å¾ªç¯çˆ¬å–ï¼Œä¼šé€ æˆæœåŠ¡å™¨è´Ÿè½½æ–¹é¢é—®é¢˜ï¼Œè§£å†³åŠæ³•æ˜¯åˆ¤æ–­è®¿é—®çš„ IPï¼Œæ˜¯å¦æ˜¯ç™¾åº¦å®˜æ–¹çˆ¬è™«çš„ IPã€‚</li>
</ul>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å¦‚æœæ„å»ºå¤§å‹ç½‘ç«™ï¼Œå¦‚å•†åœºç±»ï¼Œåˆ«çŠ¹è±«ï¼Œç›´æ¥ä¸Š SSR æœåŠ¡å™¨æ¸²æŸ“ï¼Œå½“ç„¶ä¹Ÿæœ‰ç›¸åº”çš„å‘ç­‰ä½ ï¼Œä¸è¿‡ç¤¾åŒºæ¯”è¾ƒæˆç†Ÿï¼Œè‹±æ–‡è¿‡å…³ï¼Œä¸€åˆ‡é—®é¢˜éƒ½å¯ä»¥è§£å†³ã€‚<br>å¦‚æœåªæ˜¯ä¸ªäººåšå®¢ã€å…¬å¸å®˜ç½‘çš„é¡¹ç›®ï¼Œå…¶ä½™ä¸‰ç§éƒ½å¯ä»¥ã€‚<br>å¦‚æœå¯¹å·²ç”¨ SPA å¼€å‘å®Œæˆçš„é¡¹ç›®è¿›è¡Œ SEO ä¼˜åŒ–ï¼Œè€Œä¸”æ”¯æŒ node æœåŠ¡å™¨ï¼Œè¯·ä½¿ç”¨ Phantomjsã€‚</p>
]]></content>
      <categories>
        <category>æ€§èƒ½ä¼˜åŒ–</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3 + Vite + TSé¡¹ç›®å¼•å…¥iconfontå›¾æ ‡ï¼ˆSvgæ–¹å¼ï¼‰</title>
    <url>/2023/05/06/Vue3%20+%20Vite%20+%20TS%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5iconfont%E5%9B%BE%E6%A0%87%EF%BC%88Svg%E6%96%B9%E5%BC%8F%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸ»-å‰è¨€"><a href="#ğŸ»-å‰è¨€" class="headerlink" title="ğŸ» å‰è¨€"></a>ğŸ» å‰è¨€</h1><p>æ¯ä¸€ä¸ªé¡¹ç›®éƒ½é¿å…ä¸äº†ä½¿ç”¨å„ç§å„æ ·çš„å›¾æ ‡ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨äº† UI ç»„ä»¶åº“ï¼Œæ¯”å¦‚è¯´ ELement ç­‰ï¼Œé‚£ä¹ˆç»„ä»¶åº“æœ‰ä¸€äº›å°è£…å¥½çš„å›¾æ ‡ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚ä½†æ˜¯é¡¹ç›®æ˜¯å¤šå˜çš„å’Œå¤æ‚çš„ï¼Œç»„ä»¶åº“æä¾›çš„å›¾æ ‡å¾ˆå¤šæ—¶å€™ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬è‡ªå·±å¼•å…¥æƒ³è¦çš„å›¾æ ‡äº†ã€‚<br>ä»Šå¤©ä»‹ç»çš„ä¾¿æ˜¯å¦‚ä½•å°† iconfont é˜¿é‡Œå›¾æ ‡åº“çš„å›¾æ ‡å¼•å…¥åˆ°æˆ‘ä»¬çš„ Vue3 é¡¹ç›®ä¸­æ¥ï¼</p>
<h1 id="å®ç°æ­¥éª¤"><a href="#å®ç°æ­¥éª¤" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install vite-plugin-svg-icons -D</span><br></pre></td></tr></table></figure>
<h1 id="å¼•å…¥-iconfont"><a href="#å¼•å…¥-iconfont" class="headerlink" title="å¼•å…¥ iconfont"></a>å¼•å…¥ iconfont</h1><h2 id="å°è£…-svg-icon-ç»„ä»¶"><a href="#å°è£…-svg-icon-ç»„ä»¶" class="headerlink" title="å°è£… svg-icon ç»„ä»¶"></a>å°è£… svg-icon ç»„ä»¶</h2><p>æˆ‘ä»¬åœ¨ iconfont å®˜ç½‘ä¸Šå¯ä»¥çœ‹åˆ°ç»™å‡ºäº† symbol å¼•ç”¨ç¤ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;svg class=&quot;icon&quot; aria-hidden=&quot;true&quot;&gt;</span><br><span class="line">    &lt;use xlink:href=&quot;#icon-xxx&quot;&gt;&lt;/use&gt;</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure>
<p>ä¸Šæ®µä»£ç å°±æ˜¯å›¾æ ‡çš„å…·ä½“ä½¿ç”¨æ–¹å¼ï¼Œå¦‚æœæˆ‘ä»¬æ¯æ¬¡éƒ½æŒ‰ç…§ä¸Šé¢çš„æ–¹å¼ä½¿ç”¨ï¼Œé‚£ä¹ˆæ— ç–‘æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œæˆ‘ä»¬ä¸å¦¨å°†ä¸Šé¢çš„ä»£ç å°è£…ä¸ºä¸€ä¸ªç»„ä»¶ã€‚åœ¨éœ€è¦ç”¨åˆ°å›¾æ ‡çš„åœ°æ–¹ç›´æ¥å¼•å…¥æˆ‘ä»¬çš„ç»„ä»¶å³å¯äº†ã€‚<br>åœ¨ components ç›®å½•ä¸‹æ–°å»º SvgIcon ç›®å½•ï¼Œç„¶åæ–°å»º SvgIcon.vue æ–‡ä»¶ã€‚<br>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// src/components/SvgIcon/SvgIcon.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;svg :class=&quot;svgClass&quot; aria-hidden=&quot;true&quot;&gt;</span><br><span class="line">    &lt;use :xlink:href=&quot;iconClassName&quot; :fill=&quot;color&quot; /&gt;</span><br><span class="line">  &lt;/svg&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;;</span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  iconName: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    required: true</span><br><span class="line">  &#125;,</span><br><span class="line">  className: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    default: &#x27;&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  color: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    default: &#x27;#409eff&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">// å›¾æ ‡åœ¨ iconfont ä¸­çš„åå­—</span><br><span class="line">const iconClassName = computed(()=&gt;&#123;</span><br><span class="line">  return `#$&#123;props.iconName&#125;`;</span><br><span class="line">&#125;)</span><br><span class="line">// ç»™å›¾æ ‡æ·»åŠ ä¸Šç±»å</span><br><span class="line">const svgClass = computed(() =&gt; &#123;</span><br><span class="line">  if (props.className) &#123;</span><br><span class="line">    return `svg-icon $&#123;props.className&#125;`;</span><br><span class="line">  &#125;</span><br><span class="line">  return &#x27;svg-icon&#x27;;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.svg-icon &#123;</span><br><span class="line">  width: 1em;</span><br><span class="line">  height: 1em;</span><br><span class="line">  position: relative;</span><br><span class="line">  fill: currentColor;</span><br><span class="line">  vertical-align: -2px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>ç»„ä»¶å°è£…å¥½åæˆ‘ä»¬è¿˜éœ€è¦å…¨å±€æ³¨å†Œä¸€ä¸‹ï¼Œä¸ç„¶æ¯æ¬¡å¼•ç”¨å›¾æ ‡çš„æ—¶å€™è¿˜å¾—å•ç‹¬å¼•å…¥ä¸€æ¬¡è¯¥ç»„ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬å°±åœ¨ main.ts é‡Œé¢å…¨å±€æ³¨å†Œä¸€ä¸‹ã€‚<br>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// main.ts</span><br><span class="line">import &#123; createApp &#125; from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">import SvgIcon from &#x27;./components/SvgIcon/SvgIcon.vue&#x27;</span><br><span class="line"></span><br><span class="line">const app = createApp(App)</span><br><span class="line">app.component(&#x27;SvgIcon&#x27;, SvgIcon);</span><br><span class="line">app.mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨iconfont"><a href="#ä½¿ç”¨iconfont" class="headerlink" title="ä½¿ç”¨iconfont"></a>ä½¿ç”¨iconfont</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦å» iconfont å®˜ç½‘äº†ï¼Œæ–°å»ºä¸€ä¸ª iconfont èµ„æºåº“ï¼Œå­˜æ”¾è‡ªå·±çš„ iconfontã€‚<br>æˆ‘ä»¬é€‰ä¸­ symbol æ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»‹ç»ä¸‰ç§å¼•å…¥æ–¹å¼ã€‚<br>ç¬¬ä¸€ç§ï¼š<br>ç›´æ¥åœ¨çº¿å¼•å…¥å®˜ç½‘æä¾›çš„åœ¨çº¿ js åœ°å€ï¼Œæˆ‘ä»¬ç›´æ¥ä»¥ script æ ‡ç­¾çš„å½¢å¼å¼•å…¥å³å¯ã€‚è¿™ç§æ–¹å¼æœ€ä¸ºç®€å•ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸å¥½çš„ä¸€ç‚¹ï¼Œéœ€è¦ç”¨æˆ·æœ‰ç½‘ç»œç¯å¢ƒï¼Œè€Œä¸”å¾—ä¿è¯ iconfont ç½‘ç«™æ²¡æœ‰å´©æ‰ã€‚<br>ç¬¬äºŒç§ï¼š<br>ç›´æ¥ä¸‹è½½è‡³æœ¬åœ°ï¼Œæˆ‘ä»¬ä»å®˜ç½‘ç›´æ¥å°†ä»£ç ä¸‹è½½ä¸‹æ¥ï¼Œç„¶åæ”¾åˆ°æˆ‘ä»¬é¡¹ç›®ä¸­å¼•ç”¨ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä¸è¿‡è¿™ç§æ–¹å¼ç¨æ˜¾éº»çƒ¦ï¼Œæ¯æ¬¡æ›´æ–°å›¾æ ‡åº“ä¹‹åéƒ½å¾—é‡æ–°ä¸‹è½½ä¸€éã€‚<br>ç¬¬ä¸‰ç§ï¼š<br>è¿™ä¹Ÿæ˜¯æˆ‘æ¯”è¾ƒå–œæ¬¢çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯å°†åœ¨çº¿åœ°å€ä¸­çš„ä»£ç ç›´æ¥å¤åˆ¶ç²˜è´´åˆ°æˆ‘ä»¬é¡¹ç›®ä¸­æ¥ï¼Œè¿™ç§æ–¹å¼æœ€ä¸ºç®€å•ï¼Œæ¯æ¬¡æ›´æ–°å›¾æ ‡åº“ä¹‹ååªéœ€è¦é‡æ–°å¤åˆ¶ä¸€ä¸‹ä»£ç å³å¯ã€‚è¿™é‡Œæˆ‘ä»¬ä¹Ÿå°†é‡‡ç”¨è¿™ç§æ–¹å¼ã€‚<br>å…·ä½“ä½¿ç”¨ï¼š<br>åœ¨é¡¹ç›® assets ç›®å½•ä¸‹æ–°å»º iconfont ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹æ–°å»º iconfont.js æ–‡ä»¶ï¼Œç„¶åå°† iconfont åœ¨çº¿åœ°å€ä¸­æä¾›çš„ä»£ç å…¨éƒ¨å¤åˆ¶è¿‡æ¥ã€‚<br>ç„¶ååœ¨ main.ts ä¸­å¼•å…¥ iconfont.jsã€‚<br>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">import SvgIcon from &#x27;./components/SvgIcon/SvgIcon.vue&#x27;</span><br><span class="line">import &#x27;./assets/iconfont/iconfont.js&#x27;;</span><br><span class="line">const app = createApp(App)</span><br><span class="line">app.component(&#x27;SvgIcon&#x27;, SvgIcon);</span><br><span class="line">app.mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>
<h2 id="å…·ä½“ä½¿ç”¨"><a href="#å…·ä½“ä½¿ç”¨" class="headerlink" title="å…·ä½“ä½¿ç”¨"></a>å…·ä½“ä½¿ç”¨</h2><p>å¼•å…¥ iconfont å¾—è¿‡ç¨‹éå¸¸ç®€å•ï¼Œä¸»è¦åˆ†ä¸ºäº†ä»¥ä¸‹ä¸¤æ­¥ï¼š</p>
<ul>
<li>å°è£… svg-icon ç»„ä»¶</li>
<li>å¼•å…¥ iconfont ç”Ÿæˆçš„ js ä»£ç </li>
</ul>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å®é™…ä½¿ç”¨è¯•è¯•ï¼Œæˆ‘ä»¬å°±ç›´æ¥åœ¨ App.vue ä¸­å¼•å…¥å‡ ä¸ªå›¾æ ‡è¯•è¯•ã€‚<br>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;img alt=&quot;Vue logo&quot; src=&quot;./assets/logo.png&quot; /&gt;</span><br><span class="line">  &lt;svg-icon iconName=&quot;icon-gongzuoleixing&quot;&gt;&lt;/svg-icon&gt;</span><br><span class="line">  &lt;svg-icon iconName=&quot;icon-yulan&quot; className=&quot;yulan&quot;&gt;&lt;/svg-icon&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„å›¾æ ‡å·²ç»å¯ä»¥ä½¿ç”¨äº†ï¼Œå…¶ä¸­ iconName å±æ€§å€¼å°±æ˜¯æˆ‘ä»¬åœ¨ iconfont ç½‘ç«™å¤åˆ¶çš„ iconfont çš„åç§°ä»£ç ã€‚å¦‚æœæƒ³è¦è¯¥é¢œè‰²æˆ–å¤§å°ï¼Œå¯ä»¥è‡ªè¡Œä¼ å…¥ä¸€ä¸ªç±»æˆ–è€… color å±æ€§ã€‚<br>é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœä½ æœ‰è‡ªå·±ä¸‹è½½å¥½çš„ svg æ–‡ä»¶ï¼Œé‚£ä¹ˆä¹Ÿæ˜¯å¯ä»¥é€šè¿‡ä¸Šé¢æ–¹å¼å¼•å…¥çš„ï¼Œåªéœ€è¦å°† iconName æ”¹ä¸ºä½ è‡ªå·±æœ¬åœ°çš„ svg åç§°å³å¯ã€‚</p>
<h1 id="å›¾æ ‡è‡ªåŠ¨ç®¡ç†ï¼ˆå¿…çœ‹ï¼‰"><a href="#å›¾æ ‡è‡ªåŠ¨ç®¡ç†ï¼ˆå¿…çœ‹ï¼‰" class="headerlink" title="å›¾æ ‡è‡ªåŠ¨ç®¡ç†ï¼ˆå¿…çœ‹ï¼‰"></a>å›¾æ ‡è‡ªåŠ¨ç®¡ç†ï¼ˆå¿…çœ‹ï¼‰</h1><p>å³ä½¿ä½¿ç”¨äº†symbolæ–¹å¼ï¼Œå½“è®¾è®¡å°å§å§æ–°å¢å›¾æ ‡æ—¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ— æ³•é¿å…é‡æ–°ç”Ÿæˆå›¾æ ‡ä»£ç ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿ<br>ç­”æ¡ˆæ˜¯æœ‰çš„ã€‚svg-sprite-loader + require.contextã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ul>
<li>æ”¯æŒå¤šè‰²å›¾æ ‡äº†ï¼Œä¸å†å—å•è‰²é™åˆ¶ã€‚</li>
<li>æ”¯æŒä¸°å¯Œçš„csså±æ€§è¿›è¡Œå®šåˆ¶ã€‚</li>
<li>å…¼å®¹æ€§è¾ƒå·®ï¼Œæ”¯æŒ ie9+,åŠç°ä»£æµè§ˆå™¨ã€‚</li>
<li>æµè§ˆå™¨æ¸²æŸ“svgçš„æ€§èƒ½ä¸€èˆ¬ï¼Œè¿˜ä¸å¦‚pngã€‚</li>
</ul>
]]></content>
      <categories>
        <category>vite</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºäºWebpack5æ­å»ºä¸€ä¸ªVue-Cli</title>
    <url>/2023/03/27/Vue-Cli/</url>
    <content><![CDATA[<p>å¤§å®¶å¹³æ—¶åœ¨è¿›è¡ŒVueå¼€å‘çš„æ—¶å€™ï¼Œå¤§éƒ¨åˆ†äººéƒ½æ˜¯ä½¿ç”¨ Vue-cli è¿™ä¸ªç°æˆçš„Vueè„šæ‰‹æ¶æ¥è¿›è¡Œå¼€å‘çš„ï¼Œä½†æ˜¯ç”¨å®ƒç”¨äº†è¿™ä¹ˆä¹…ï¼Œä½ éš¾é“ä¸æƒ³è‡ªå·±æ­ä¸€ä¸ªå±äºè‡ªå·±çš„ Vue-cli å—ï¼Ÿ</p>
<h1 id="1ã€å»ºä¸€ä¸ªæ–‡ä»¶å¤¹"><a href="#1ã€å»ºä¸€ä¸ªæ–‡ä»¶å¤¹" class="headerlink" title="1ã€å»ºä¸€ä¸ªæ–‡ä»¶å¤¹"></a>1ã€å»ºä¸€ä¸ªæ–‡ä»¶å¤¹</h1><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹my-vue-cliç”¨æ¥å­˜æ”¾é¡¹ç›®</p>
<h1 id="2ã€åˆå§‹åŒ–npm"><a href="#2ã€åˆå§‹åŒ–npm" class="headerlink" title="2ã€åˆå§‹åŒ–npm"></a>2ã€åˆå§‹åŒ–npm</h1><p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥ npm init<br>ç„¶åä¸€ç›´å›è½¦å°±è¡Œï¼Œè¿™æ ·èƒ½ä½¿é¡¹ç›®æ‹¥æœ‰ä¸€ä¸ªnpmç®¡ç†ç¯å¢ƒï¼Œä¹‹åå¯ä»¥åœ¨æ­¤ç¯å¢ƒä¸Šå®‰è£…æˆ‘ä»¬æ‰€éœ€è¦çš„åŒ…</p>
<h1 id="3ã€webpackã€webpack-cli"><a href="#3ã€webpackã€webpack-cli" class="headerlink" title="3ã€webpackã€webpack-cli"></a>3ã€webpackã€webpack-cli</h1><p>å®‰è£… webpackã€webpack-cli<br>webpack ï¼šæ‰“åŒ…çš„å·¥å…·<br>webpack-cli ï¼šä¸ºwebpackæä¾›å‘½ä»¤è¡Œçš„å·¥å…·<br>npm i webpack webpack-cli -D</p>
<h1 id="4ã€srcã€public"><a href="#4ã€srcã€public" class="headerlink" title="4ã€srcã€public"></a>4ã€srcã€public</h1><p>åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º srcã€public è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œå‰è€…ç”¨æ¥æ”¾ç½®é¡¹ç›®ä¸»è¦ä»£ç ï¼Œåè€…ç”¨æ¥æ”¾é¡¹ç›®å…¬ç”¨é™æ€èµ„æº</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public/index.html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">&lt;title&gt;my-vue-cli&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">src/main.js</span><br><span class="line">import &#123; add &#125; from &#x27;./tools/add.js&#x27;</span><br><span class="line">console.log(add(1, 2))</span><br><span class="line">console.log(&#x27;æˆ‘æ˜¯main.js&#x27;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">src/tools/add.js</span><br><span class="line">export const add = (a, b) =&gt; &#123;</span><br><span class="line">return a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="5ã€å…¥å£æ–‡ä»¶"><a href="#5ã€å…¥å£æ–‡ä»¶" class="headerlink" title="5ã€å…¥å£æ–‡ä»¶"></a>5ã€å…¥å£æ–‡ä»¶</h1><p>åˆšåˆšçš„ main.js å°±æ˜¯æˆ‘ä»¬çš„å…¥å£æ–‡ä»¶ï¼Œä¹Ÿå°±ç›¸å½“äºæ•´ä¸ªå¼•ç”¨æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œwebpackæ‰“åŒ…éœ€è¦ä»å…¥å£æ–‡ä»¶å¼€å§‹æŸ¥æ‰¾ï¼Œä¸€ç›´åˆ°æ‰“åŒ…æ‰€æœ‰å¼•ç”¨æ–‡ä»¶ã€‚<br>è¿›è¡Œå…¥å£æ–‡ä»¶çš„é…ç½®ï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ–°å»º webpack.config.js ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // æ¨¡å¼ å¼€å‘æ¨¡å¼</span><br><span class="line">  mode: &#x27;development&#x27;,</span><br><span class="line">  // å…¥å£æ–‡ä»¶ main.js</span><br><span class="line">  entry: &#123;</span><br><span class="line">    main: &#x27;./src/main.js&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  // è¾“å‡º</span><br><span class="line">  output: &#123;</span><br><span class="line">    // è¾“å‡ºåˆ° distæ–‡ä»¶å¤¹</span><br><span class="line">    path: path.resolve(__dirname, &#x27;./dist&#x27;),</span><br><span class="line">    // jsæ–‡ä»¶ä¸‹</span><br><span class="line">    filename: &#x27;js/chunk-[contenthash].js&#x27;,</span><br><span class="line">    // æ¯æ¬¡æ‰“åŒ…å‰è‡ªåŠ¨æ¸…é™¤æ—§çš„dist</span><br><span class="line">    clean: true,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="6ã€é…ç½®æ‰“åŒ…å‘½ä»¤"><a href="#6ã€é…ç½®æ‰“åŒ…å‘½ä»¤" class="headerlink" title="6ã€é…ç½®æ‰“åŒ…å‘½ä»¤"></a>6ã€é…ç½®æ‰“åŒ…å‘½ä»¤</h1><p>åˆ° package.json é‡Œé…ç½®æ‰“åŒ…å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;build&quot;: &quot;webpack&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬åˆ°ç»ˆç«¯è¾“å…¥ npm run build ï¼Œå°±èƒ½å‘ç°æ‰“åŒ…æˆåŠŸï¼š<br>ä½†æ˜¯è¿™å…¶å®ä¸æ˜¯æˆ‘ä»¬è¦çš„ç›®çš„ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯å°†è¿™ä¸ªæ‰“åŒ…åçš„æœ€ç»ˆjsæ–‡ä»¶ï¼Œæ’å…¥åˆ°åˆšåˆšçš„ index.html ä¸­ï¼Œå› ä¸ºjsæ–‡ä»¶å¾—è®©htmlæ–‡ä»¶å¼•ç”¨ï¼Œæ‰æœ‰æ„ä¹‰å˜›ï¼æ‰€ä»¥æˆ‘ä»¬ä¸ä»…è¦æ‰“åŒ…jsï¼Œè¿˜è¦æ‰“åŒ…html<br>å°çŸ¥è¯†ï¼šloaderå’Œplugin<br>loader ï¼šä½¿webpackæ‹¥æœ‰è§£æéjsæ–‡ä»¶çš„èƒ½åŠ›ï¼Œå¦‚cssã€pngã€tsç­‰ç­‰<br>plugin ï¼šæ‹“å±•webpackçš„æ‰“åŒ…åŠŸèƒ½ï¼Œå¦‚ä¼˜åŒ–ä½“ç§¯ã€æ˜¾ç¤ºè¿›åº¦æ¡ç­‰ç­‰</p>
<h1 id="7ã€æ‰“åŒ…html"><a href="#7ã€æ‰“åŒ…html" class="headerlink" title="7ã€æ‰“åŒ…html"></a>7ã€æ‰“åŒ…html</h1><p>æ‰“åŒ…htmléœ€è¦ç”¨åˆ° html-webpack-plugin è¿™ä¸ªæ’ä»¶ï¼Œä¹Ÿå°±æ˜¯pluginï¼Œæ‰€ä»¥éœ€è¦å®‰è£…ä¸€ä¸‹ï¼š<br>npm i html-webpack-plugin -D<br>å¹¶ä¸”éœ€è¦åœ¨ webpack.config.js ä¸­é…ç½®ä¸€ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // åˆšåˆšçš„ä»£ç ...</span><br><span class="line">  // æ’ä»¶éƒ½æ”¾ plugins ä¸­</span><br><span class="line">  plugins: [</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">      // é€‰æ‹©æ¨¡æ¿ public/index.html</span><br><span class="line">      template: &#x27;./public/index.html&#x27;,</span><br><span class="line">      // æ‰“åŒ…åçš„åå­—</span><br><span class="line">      filename: &#x27;index.html&#x27;,</span><br><span class="line">      // jsæ–‡ä»¶æ’å…¥ bodyé‡Œ</span><br><span class="line">      inject: &#x27;body&#x27;,</span><br><span class="line">    &#125;),</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ npm run build å¯ä»¥çœ‹åˆ°htmlè¢«æ‰“åŒ…äº†ï¼Œä¸”æ‰“åŒ…åçš„htmlè‡ªåŠ¨å¼•å…¥æ‰“åŒ…åçš„jsæ–‡ä»¶<br>ç°åœ¨æˆ‘ä»¬å¯ä»¥æ‰“å¼€æ‰“åŒ…åçš„ index.html ï¼Œå‘ç°æ§åˆ¶å°å¯ä»¥è¾“å‡ºï¼Œè¯´æ˜æˆåŠŸäº†ï¼</p>
<h2 id="æ‰“åŒ…CSS"><a href="#æ‰“åŒ…CSS" class="headerlink" title="æ‰“åŒ…CSS"></a>æ‰“åŒ…CSS</h2><p>åœ¨ src ä¸‹æ–°å»º styles æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾æ ·å¼æ–‡ä»¶æ–‡ä»¶src/styles/index.scss</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">background-color: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬åœ¨å…¥å£æ–‡ä»¶ main.js ä¸­å¼•å…¥<br>import â€˜./styles/index.scssâ€™<br>// åˆšåˆšçš„ä»£ç â€¦<br>æˆ‘ä»¬çš„ç›®çš„æ˜¯ï¼Œæ‰“åŒ… index.scss è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”è®© index.html è‡ªåŠ¨å¼•å…¥æ‰“åŒ…åçš„cssæ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®‰è£…ä»¥ä¸‹å‡ ä¸ªä¸œ<br>sassã€sass-loader ï¼šå¯ä»¥å°†scssä»£ç è½¬æˆcss<br>css-loader ï¼šä½¿webpackå…·æœ‰æ‰“åŒ…cssçš„èƒ½åŠ›<br>sass-resources-loader ï¼šå¯é€‰ï¼Œæ”¯æŒæ‰“åŒ…å…¨å±€å…¬å…±scssæ–‡ä»¶<br>mini-css-extract-plugin ï¼šå¯å°†cssä»£ç æ‰“åŒ…æˆä¸€ä¸ªå•ç‹¬çš„cssæ–‡ä»¶<br>æˆ‘ä»¬å®‰è£…ä¸€ä¸‹è¿™äº›æ’ä»¶<br>npm i sass sass-loader sass-resources-loader mini-css-extract-plugin -D<br>ç„¶åé…ç½®ä¸€ä¸‹ webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// åˆšæ‰çš„ä»£ç ...</span><br><span class="line">const MiniCssExtractPlugin = require(&#x27;mini-css-extract-plugin&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // åˆšæ‰çš„ä»£ç ...</span><br><span class="line">  plugins: [</span><br><span class="line">    // åˆšæ‰çš„ä»£ç ...</span><br><span class="line">    new MiniCssExtractPlugin(&#123;</span><br><span class="line">      // å°†cssä»£ç è¾“å‡ºåˆ°dist/stylesæ–‡ä»¶å¤¹ä¸‹</span><br><span class="line">      filename: &#x27;styles/chunk-[contenthash].css&#x27;,</span><br><span class="line">      ignoreOrder: true,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        // åŒ¹é…æ–‡ä»¶åç¼€çš„è§„åˆ™</span><br><span class="line">        test: /\.(css|s[cs]ss)$/,</span><br><span class="line">        use: [</span><br><span class="line">          // loaderæ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line">          &#x27;css-loader&#x27;,</span><br><span class="line">          &#x27;sass-loader&#x27;,</span><br><span class="line">          // &#123;</span><br><span class="line">          //   loader: &#x27;sass-resources-loader&#x27;,</span><br><span class="line">          //   options: &#123;</span><br><span class="line">          //     resources: [</span><br><span class="line">          //       // æ”¾ç½®å…¨å±€å¼•å…¥çš„å…¬å…±scssæ–‡ä»¶</span><br><span class="line">          //     ],</span><br><span class="line">          //   &#125;,</span><br><span class="line">          // &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æˆ‘ä»¬é‡æ–°æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ npm run build ï¼Œå¯ä»¥å‘ç°å‡ºç°äº†æ‰“åŒ…åçš„cssæ–‡ä»¶ï¼Œä¸” index.html ä¸­è‡ªåŠ¨å¼•å…¥äº†cssæ–‡ä»¶ï¼š<br>æˆ‘ä»¬å¯ä»¥çœ‹çœ‹é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œbodyçš„èƒŒæ™¯å·²ç»å˜æˆè“è‰²ï¼Œè¯´æ˜æœ‰æ•ˆæœäº†.</p>
<h2 id="æ‰“åŒ…å›¾ç‰‡"><a href="#æ‰“åŒ…å›¾ç‰‡" class="headerlink" title="æ‰“åŒ…å›¾ç‰‡"></a>æ‰“åŒ…å›¾ç‰‡</h2><p>webpack5ä¸­å·²ç»åºŸå¼ƒäº† url-loader ï¼Œæ‰“åŒ…å›¾ç‰‡å¯ä»¥ä½¿ç”¨ asset-module ï¼Œæˆ‘ä»¬å…ˆæ”¾ç½®ä¸€å¼ å›¾ç‰‡åœ¨ src/assets/images ä¸­ï¼šå¹¶ä¸”æ”¹å†™ä¸€ä¸‹ index.css</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">  // å¼•å…¥èƒŒæ™¯å›¾ç‰‡</span><br><span class="line">  background-image: url(&#x27;../assets/images/guang.png&#x27;);</span><br><span class="line">  background-size: 100% 100%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬åœ¨ webpack.config.js ä¸­æ·»åŠ æ‰“åŒ…å›¾ç‰‡çš„é…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    // åˆšåˆšçš„ä»£ç ...</span><br><span class="line">    &#123;</span><br><span class="line">      // åŒ¹é…æ–‡ä»¶åç¼€çš„è§„åˆ™</span><br><span class="line">      test: /\.(png|jpe?g|gif|svg|webp)$/,</span><br><span class="line">      type: &#x27;asset&#x27;,</span><br><span class="line">      parser: &#123;</span><br><span class="line">        // è½¬base64çš„æ¡ä»¶</span><br><span class="line">        dataUrlCondition: &#123;</span><br><span class="line">           maxSize: 25 * 1024, // 25kb</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      generator: &#123;</span><br><span class="line">        // æ‰“åŒ…åˆ° dist/image æ–‡ä»¶ä¸‹</span><br><span class="line">       filename: &#x27;images/[contenthash][ext][query]&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">   &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  æˆ‘ä»¬ç°åœ¨é‡æ–°è¿è¡Œä¸€ä¸‹ npm run build ï¼Œå‘ç°distä¸‹å·²ç»æœ‰äº† images è¿™ä¸ªæ–‡ä»¶å¤¹<br>  æˆ‘ä»¬çœ‹ä¸€ä¸‹é¡µé¢èƒŒæ™¯å›¾ç‰‡å·²ç»ç”Ÿæ•ˆï¼Œè¯´æ˜æ‰“åŒ…æˆåŠŸäº†ï¼</p>
<h2 id="é…ç½®babel"><a href="#é…ç½®babel" class="headerlink" title="é…ç½®babel"></a>é…ç½®babel</h2><p>babel å¯ä»¥å°†æˆ‘ä»¬é¡¹ç›®ä¸­çš„é«˜çº§è¯­æ³•è½¬åŒ–æˆæ¯”è¾ƒä½çº§çš„è¯­æ³•ï¼Œæ¯”å¦‚å¯ä»¥å°† ES6 è½¬ä¸º ES5 ï¼Œè¿™æ ·å¯ä»¥å…¼å®¹ä¸€äº›ä½ç‰ˆæœ¬æµè§ˆå™¨ï¼Œæ‰€ä»¥æ˜¯å¾ˆæœ‰å¿…è¦çš„</p>
<p>é¦–å…ˆå®‰è£…æ‰€éœ€çš„åŒ…ï¼š<br>@babel/coreã€babel-loader ï¼šè½¬æ¢è¯­æ³•çš„å·¥å…·<br>@babel/preset-env ï¼šè½¬æ¢çš„ä¸€å¥—ç°æˆè§„åˆ™<br>@babel/plugin-transform-runtime ï¼šè½¬æ¢async/awaitæ‰€éœ€æ’ä»¶</p>
<p>npm i @babel/core babel-loader @babel/preset-env @babel/plugin-transform-runtime -D<br>ç”±äº babel æ˜¯é’ˆå¯¹jsæ–‡ä»¶çš„è¯­æ³•è½¬æ¢ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ webpack.config.js ä¸­å»é’ˆå¯¹jsè¿›è¡Œæ“ä½œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    // åˆšåˆšçš„ä»£ç ...</span><br><span class="line">    &#123;</span><br><span class="line">      // åŒ¹é…jsåç¼€æ–‡ä»¶</span><br><span class="line">      test: /\.js$/,</span><br><span class="line">      // æ’é™¤node_modulesä¸­çš„js</span><br><span class="line">      exclude: /node_modules/,</span><br><span class="line">      use: [</span><br><span class="line">        &#x27;babel-loader&#x27;</span><br><span class="line">      ],</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å•å•é…ç½®äº† babel-loader è¿˜æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é…ç½® babel è½¬æ¢çš„è§„åˆ™ï¼Œæ‰€ä»¥éœ€è¦åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º babel.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// babel.config.js</span><br><span class="line">module.exports = &#123;</span><br><span class="line">presets: [</span><br><span class="line">  // é…ç½®è§„åˆ™</span><br><span class="line">  &quot;@babel/preset-env&quot;</span><br><span class="line">],</span><br><span class="line">// é…ç½®æ’ä»¶</span><br><span class="line">plugins: [&quot;@babel/plugin-transform-runtime&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æˆ‘ä»¬é‡æ–°è¿è¡Œæ‰“åŒ… npm run build ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æ‰“åŒ…åçš„jsä»£ç ä¸­ï¼Œå·²ç»æŠŠåˆšåˆšä»£ç ä¸­çš„ ES6 è¯­æ³•è½¬æˆ ES5 è¯­æ³•äº†ï¼å¯ä»¥çœ‹åˆ°åˆšåˆšä»£ç ä¸­çš„ const å·²ç»è½¬æˆ ES5 è¯­æ³•äº†</p>
<h2 id="æ‰“åŒ…Vue"><a href="#æ‰“åŒ…Vue" class="headerlink" title="æ‰“åŒ…Vue"></a>æ‰“åŒ…Vue</h2><p>æ‰“åŒ…Vueéœ€è¦ç”¨åˆ°ä»¥ä¸‹å‡ ä¸ªåŒ…ï¼š<br>vue ï¼šVueå¼€å‘æ‰€éœ€çš„ä¾èµ–<br>vue-loader ï¼šè§£æ .vue æ–‡ä»¶çš„loader<br>vue-template-compiler ï¼šè§£ævueä¸­æ¨¡æ¿çš„å·¥å…·<br>@vue/babel-preset-jsx ï¼šæ”¯æŒè§£ævueä¸­çš„jsxè¯­æ³•<br>æ³¨æ„ï¼š vue å’Œ vue-template-compiler ç‰ˆæœ¬éœ€è¦ä¸€è‡´ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨ 2.6.14 è¿™ä¸ªç‰ˆæœ¬ï¼Œ vue-loader è¿™é‡Œæˆ‘ä½¿ç”¨äº† 15.9.8 è¿™ä¸ªç‰ˆæœ¬<br>æ‰€ä»¥æˆ‘ä»¬å…ˆå®‰è£…ä¸€ä¸‹ï¼š<br>npm i<br><a href="mailto:&#x76;&#117;&#101;&#x40;&#x32;&#46;&#x36;&#x2e;&#x31;&#52;">&#x76;&#117;&#101;&#x40;&#x32;&#46;&#x36;&#x2e;&#x31;&#52;</a> <a href="mailto:&#x76;&#x75;&#x65;&#45;&#116;&#101;&#x6d;&#x70;&#108;&#97;&#116;&#101;&#45;&#99;&#111;&#109;&#112;&#105;&#x6c;&#101;&#114;&#64;&#x32;&#46;&#54;&#46;&#x31;&#x34;">&#x76;&#x75;&#x65;&#45;&#116;&#101;&#x6d;&#x70;&#108;&#97;&#116;&#101;&#45;&#99;&#111;&#109;&#112;&#105;&#x6c;&#101;&#114;&#64;&#x32;&#46;&#54;&#46;&#x31;&#x34;</a> <a href="mailto:&#118;&#117;&#101;&#x2d;&#108;&#111;&#97;&#x64;&#x65;&#114;&#x40;&#49;&#53;&#x2e;&#x39;&#46;&#x38;">&#118;&#117;&#101;&#x2d;&#108;&#111;&#97;&#x64;&#x65;&#114;&#x40;&#49;&#53;&#x2e;&#x39;&#46;&#x38;</a> @vue/babel-preset-jsx -D<br>ç„¶åæˆ‘ä»¬éœ€è¦å» webpack.config.js ä¸­é…ç½®å¯¹ .vue æ–‡ä»¶çš„è§£æ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// åˆšæ‰çš„ä»£ç ...</span><br><span class="line">const &#123; VueLoaderPlugin &#125; = require(&#x27;vue-loader&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // åˆšæ‰çš„ä»£ç ...</span><br><span class="line">  plugins: [</span><br><span class="line">    // åˆšæ‰çš„ä»£ç ...</span><br><span class="line">    new VueLoaderPlugin()</span><br><span class="line">  ],</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      // åˆšæ‰çš„ä»£ç ...</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.vue$/,</span><br><span class="line">        use: &#x27;vue-loader&#x27;,</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¹¶ä¸”åˆ° babel.config.js ä¸­é…ç½®ä¸€ä¸‹ï¼Œè®©webpackæ”¯æŒ .vue æ–‡ä»¶ä¸­çš„ jsx è¯­æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    &quot;@babel/preset-env&quot;,</span><br><span class="line">    // æ”¯æŒvueä¸­çš„jsxè¯­æ³•</span><br><span class="line">    &quot;@vue/babel-preset-jsx&quot;</span><br><span class="line">  ],</span><br><span class="line">  plugins: [&quot;@babel/plugin-transform-runtime&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨ src ä¸‹æ–°å»ºä¸€ä¸ª App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;æˆ‘æ˜¯Appå“ˆå“ˆå“ˆå“ˆ&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.box &#123;</span><br><span class="line">  width: 500px;</span><br><span class="line">  height: 200px;</span><br><span class="line">  color: #fff;</span><br><span class="line">  background-color: #000;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ”¹å†™ä¸€ä¸‹ src/main.js</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  render: (h) =&gt; h(App),</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æˆ‘ä»¬é‡æ–°è¿è¡Œ npm run build ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹é¡µé¢çš„æ•ˆæœï¼Œè¯´æ˜æ‰“åŒ…æˆåŠŸå•¦ï¼</p>
<h2 id="é…ç½®è·¯å¾„åˆ«å"><a href="#é…ç½®è·¯å¾„åˆ«å" class="headerlink" title="é…ç½®è·¯å¾„åˆ«å"></a>é…ç½®è·¯å¾„åˆ«å</h2><p>æœ‰æ—¶å€™æ–‡ä»¶å¼•ç”¨æç€å¤ªå¤šå±‚ï¼Œå¼•ç”¨èµ·æ¥ä¼šçœ‹èµ·æ¥å¾ˆä¸æ˜ç¡®ï¼Œæ¯”å¦‚<br>../../../../../App.vue ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é…ç½®ä¸€ä¸‹åˆ«å alia</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  // åˆšæ‰çš„ä»£ç ...</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    // è·¯å¾„åˆ«å</span><br><span class="line">    alias: &#123;</span><br><span class="line">      &#x27;@&#x27;: path.resolve(&#x27;./src&#x27;),</span><br><span class="line">      assets: &#x27;~/assets&#x27;,</span><br><span class="line">      tools: &#x27;~/tools&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    // å¼•å…¥æ–‡ä»¶æ—¶çœç•¥åç¼€</span><br><span class="line">    extensions: [&#x27;.js&#x27;, &#x27;.ts&#x27;, &#x27;.less&#x27;, &#x27;.vue&#x27;],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨åˆ«åé…ç½®å®Œæˆå•¦ï¼š<br>é…ç½®å‰ï¼š ../../../../../App.vue<br>é…ç½®åï¼š @/App.vue</p>
<h2 id="webpack-dev-server"><a href="#webpack-dev-server" class="headerlink" title="webpack-dev-server"></a>webpack-dev-server</h2><p>åˆšåˆšæˆ‘ä»¬å‘ç°ï¼Œæ¯æ”¹ä¸€æ¬¡ä»£ç å°±å¾—é‡æ–°æ‰“åŒ…ä¸€æ¬¡ï¼Œéå¸¸ç¹çï¼Œæœ‰æ²¡æœ‰å¯ä»¥æ”¹ä»£ç è‡ªåŠ¨é‡æ–°æ‰“åŒ…çš„å‘¢ï¼Ÿè¿™å°±è¦ç”¨åˆ° webpack-dev-server</p>
<p>npm i webpack-dev-server -D<br>åˆ° webpack.config.js ä¸­é…ç½® devServer</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  // è‡ªå®šä¹‰ç«¯å£å·</span><br><span class="line">  // port:7000,</span><br><span class="line">  // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span><br><span class="line">  open: true</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ç„¶ååˆ° package.json ä¸­é…ç½®ä¸€ä¸‹å¯åŠ¨å‘½ä»¤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;build&quot;: &quot;webpack&quot;,</span><br><span class="line">  &quot;serve&quot;: &quot;webpack serve&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æˆ‘ä»¬è¿è¡Œ npm run serve å°±å¯ä»¥å¯åŠ¨é¡¹ç›®å•¦ï¼</p>
<h2 id="åŒºåˆ†ç¯å¢ƒ"><a href="#åŒºåˆ†ç¯å¢ƒ" class="headerlink" title="åŒºåˆ†ç¯å¢ƒ"></a>åŒºåˆ†ç¯å¢ƒ</h2><p>æˆ‘ä»¬ä¸èƒ½æŠŠæ‰€æœ‰é…ç½®éƒ½é…ç½®åœ¨ä¸€ä¸ª webpack.config.js ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰ä¸¤ä¸ªç¯å¢ƒ development(å¼€å‘ç¯å¢ƒ)ã€production(ç”Ÿäº§ç¯å¢ƒ) ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º buildæ–‡ä»¶å¤¹ ï¼Œå¹¶åˆ›å»ºä¸‰ä¸ªæ–‡ä»¶<br>webpack.base.js ï¼šä¸¤ä¸ªç¯å¢ƒå…±ç”¨é…ç½®<br>å…¥å£ï¼Œè¾“å‡ºé…ç½®<br>å„ç§æ–‡ä»¶çš„å¤„ç†<br>è¿›åº¦æ¡å±•ç¤º<br>è·¯å¾„åˆ«å<br>webpack.dev.js ï¼šå¼€å‘ç¯å¢ƒç‹¬æœ‰é…ç½®<br>webpack-dev-server<br>ä¸åŒçš„source-mapæ¨¡å¼<br>ä¸åŒçš„ç¯å¢ƒå˜é‡<br>webpack.prod.js ï¼šç”Ÿäº§ç¯å¢ƒç‹¬æœ‰é…ç½®<br>ä¸åŒçš„source-mapæ¨¡å¼<br>ä¸åŒçš„ç¯å¢ƒå˜é‡<br>æˆ‘ä»¬éœ€è¦å…ˆå®‰è£…ä¸€ä¸ªåˆå¹¶æ’ä»¶ webpack-merge ï¼Œç”¨äºä¸¤ä¸ªç¯å¢ƒçš„é…ç½®å¯ä»¥åˆå¹¶å…¬å…±çš„é…ç½®<br>npm i webpack-merge -D<br>ç„¶åæˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª buildæ–‡ä»¶å¤¹ ï¼Œå¹¶åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹æ–°å»º webpack.base.jsã€webpack.dev.jsã€webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// å…¬å…±é…ç½®</span><br><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">const MiniCssExtractPlugin = require(&#x27;mini-css-extract-plugin&#x27;)</span><br><span class="line">const &#123; VueLoaderPlugin &#125; = require(&#x27;vue-loader&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">// å…¥å£æ–‡ä»¶ main.js</span><br><span class="line">entry: &#123;</span><br><span class="line">  main: &#x27;./src/main.js&#x27;</span><br><span class="line">&#125;,</span><br><span class="line">// è¾“å‡º</span><br><span class="line">output: &#123;</span><br><span class="line">  // è¾“å‡ºåˆ° distæ–‡ä»¶å¤¹</span><br><span class="line">  // è®°å¾—æ”¹è·¯å¾„</span><br><span class="line">  path: path.resolve(__dirname, &#x27;../dist&#x27;),</span><br><span class="line">  // jsæ–‡ä»¶ä¸‹</span><br><span class="line">  filename: &#x27;js/chunk-[contenthash].js&#x27;,</span><br><span class="line">  // æ¯æ¬¡æ‰“åŒ…å‰è‡ªåŠ¨æ¸…é™¤æ—§çš„dist</span><br><span class="line">  clean: true,</span><br><span class="line">&#125;,</span><br><span class="line">plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(&#123;</span><br><span class="line">    // é€‰æ‹©æ¨¡æ¿ public/index.html</span><br><span class="line">    template: &#x27;./public/index.html&#x27;,</span><br><span class="line">    // æ‰“åŒ…åçš„åå­—</span><br><span class="line">    filename: &#x27;index.html&#x27;,</span><br><span class="line">    // jsæ–‡ä»¶æ’å…¥ bodyé‡Œ</span><br><span class="line">    inject: &#x27;body&#x27;,</span><br><span class="line">  &#125;),</span><br><span class="line">  new MiniCssExtractPlugin(&#123;</span><br><span class="line">    // å°†cssä»£ç è¾“å‡ºåˆ°dist/stylesæ–‡ä»¶å¤¹ä¸‹</span><br><span class="line">    filename: &#x27;styles/chunk-[contenthash].css&#x27;,</span><br><span class="line">    ignoreOrder: true,</span><br><span class="line">  &#125;),</span><br><span class="line">  new VueLoaderPlugin()</span><br><span class="line">],</span><br><span class="line">module: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      // åŒ¹é…æ–‡ä»¶åç¼€çš„è§„åˆ™</span><br><span class="line">      test: /\.(css|s[cs]ss)$/,</span><br><span class="line">      use: [</span><br><span class="line">        // loaderæ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</span><br><span class="line">        MiniCssExtractPlugin.loader,</span><br><span class="line">        &#x27;css-loader&#x27;,</span><br><span class="line">        &#x27;sass-loader&#x27;,</span><br><span class="line">        // &#123;</span><br><span class="line">        //   loader: &#x27;sass-resources-loader&#x27;,</span><br><span class="line">        //   options: &#123;</span><br><span class="line">        //     resources: [</span><br><span class="line">        //       // æ”¾ç½®å…¨å±€å¼•å…¥çš„å…¬å…±scssæ–‡ä»¶</span><br><span class="line">        //     ],</span><br><span class="line">        //   &#125;,</span><br><span class="line">        // &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      // åŒ¹é…æ–‡ä»¶åç¼€çš„è§„åˆ™</span><br><span class="line">      test: /\.(png|jpe?g|gif|svg|webp)$/,</span><br><span class="line">      type: &#x27;asset&#x27;,</span><br><span class="line">      parser: &#123;</span><br><span class="line">        // è½¬base64çš„æ¡ä»¶</span><br><span class="line">        dataUrlCondition: &#123;</span><br><span class="line">          maxSize: 25 * 1024, // 25kb</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      generator: &#123;</span><br><span class="line">        // æ‰“åŒ…åˆ° dist/image æ–‡ä»¶ä¸‹</span><br><span class="line">        filename: &#x27;images/[contenthash][ext][query]&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      test: /\.js$/,</span><br><span class="line">      // æ’é™¤node_modulesä¸­çš„js</span><br><span class="line">      exclude: /node_modules/,</span><br><span class="line">      use: [</span><br><span class="line">        &#x27;babel-loader&#x27;</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      test: /\.vue$/,</span><br><span class="line">      use: &#x27;vue-loader&#x27;,</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line">resolve: &#123;</span><br><span class="line">  // è·¯å¾„åˆ«å</span><br><span class="line">  alias: &#123;</span><br><span class="line">    &#x27;@&#x27;: path.resolve(&#x27;./src&#x27;),</span><br><span class="line">    assets: &#x27;~/assets&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  // å¼•å…¥æ–‡ä»¶æ—¶çœç•¥åç¼€</span><br><span class="line">  extensions: [&#x27;.js&#x27;, &#x27;.ts&#x27;, &#x27;.less&#x27;, &#x27;.vue&#x27;]</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">webpack.dev.js</span><br><span class="line">// å¼€å‘ç¯å¢ƒ</span><br><span class="line">const &#123; merge &#125; = require(&#x27;webpack-merge&#x27;)</span><br><span class="line">const base = require(&#x27;./webpack.base&#x27;)</span><br><span class="line">module.exports = merge(base, &#123;</span><br><span class="line">mode: &#x27;development&#x27;,</span><br><span class="line">devServer: &#123;</span><br><span class="line">  open: true,</span><br><span class="line">  // hot: true,</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">webpack.prod.js</span><br><span class="line">// ç”Ÿäº§ç¯å¢ƒ</span><br><span class="line">const &#123; merge &#125; = require(&#x27;webpack-merge&#x27;)</span><br><span class="line">const base = require(&#x27;./webpack.base&#x27;)</span><br><span class="line">module.exports = merge(base, &#123;</span><br><span class="line">mode: &#x27;production&#x27;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬åˆ° package.json ä¿®æ”¹ä¸€ä¸‹æŒ‡ä»¤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;serve&quot;: &quot;webpack serve --config ./build/webpack.dev&quot;,</span><br><span class="line">  &quot;build&quot;: &quot;webpack --config ./build/webpack.prod&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿è¡Œè¿™ä¸¤ä¸ªå‘½ä»¤ï¼Œå‘ç°éƒ½æˆåŠŸäº†ï¼š<br>npm run build<br>npm run serve</p>
<h2 id="æ„å»ºè¿›åº¦æ¡"><a href="#æ„å»ºè¿›åº¦æ¡" class="headerlink" title="æ„å»ºè¿›åº¦æ¡"></a>æ„å»ºè¿›åº¦æ¡</h2><p>æ— è®ºæ˜¯å¯åŠ¨é¡¹ç›®æ—¶è¿˜æ˜¯æ‰“åŒ…æ—¶ï¼Œéƒ½éœ€è¦è¿›åº¦æ¡çš„å±•ç¤ºï¼Œæ‰€ä»¥éœ€è¦æŠŠè¿›åº¦æ¡é…ç½®åœ¨ webpack.base ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®‰è£…è¿›åº¦æ¡çš„æ’ä»¶ progress-bar-webpack-plugin</p>
<p>npm i progress-bar-webpack-plugin -D</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// webpack.base.js</span><br><span class="line">// åˆšåˆšçš„ä»£ç ...</span><br><span class="line">const ProgressBarPlugin = require(&#x27;progress-bar-webpack-plugin&#x27;)</span><br><span class="line">const chalk = require(&#x27;chalk&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // åˆšåˆšçš„ä»£ç ...</span><br><span class="line">  plugins: [</span><br><span class="line">    // åˆšåˆšçš„ä»£ç ...</span><br><span class="line">    new ProgressBarPlugin(&#123;</span><br><span class="line">      format: ` build [:bar] $&#123;chalk.green.bold(&#x27;:percent&#x27;)&#125; (:elapsed seconds)`,</span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  // åˆšåˆšçš„ä»£ç ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ— è®ºå¯åŠ¨é¡¹ç›®æˆ–è€…æ‰“åŒ…ï¼Œéƒ½ä¼šæœ‰è¿›åº¦æ¡äº†</p>
<h2 id="source-map"><a href="#source-map" class="headerlink" title="source-map"></a>source-map</h2><p>source-map çš„ä½œç”¨ï¼šä»£ç æŠ¥é”™æ—¶ï¼Œèƒ½å¿«é€Ÿå®šä½åˆ°å‡ºé”™ä½ç½®ï¼Œ webpack5 çš„æ‰€æœ‰ source-mapæ¨¡å¼ å¯ä»¥çœ‹webpackå®˜ç½‘ï¼š<a href="https://webpack.docschina.org/">https://webpack.docschina.org</a>â€¦</p>
<p>è¿™é‡Œæˆ‘ä½¿ç”¨ä¸¤ç§æ¨¡å¼ï¼š<br>development ï¼šä½¿ç”¨ eval-cheap-module-source-map æ¨¡å¼ï¼Œèƒ½å…·ä½“å®šä½åˆ°æºç ä½ç½®å’Œæºç å±•ç¤ºï¼Œé€‚åˆå¼€å‘æ¨¡å¼ï¼Œä½“ç§¯è¾ƒå°<br>production ï¼šä½¿ç”¨ nosources-source-map ï¼Œåªèƒ½å®šä½æºç ä½ç½®ï¼Œä¸èƒ½æºç å±•ç¤ºï¼Œä½“ç§¯è¾ƒå°ï¼Œé€‚åˆç”Ÿäº§æ¨¡å¼<br>æ‰€ä»¥æˆ‘ä»¬å¼€å§‹é…ç½® source-map</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">webpack.dev.js</span><br><span class="line">// åˆšæ‰çš„ä»£ç ...</span><br><span class="line">module.exports = merge(base, &#123;</span><br><span class="line">// åˆšæ‰çš„ä»£ç ...</span><br><span class="line">devtool: &#x27;eval-cheap-module-source-map&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">webpack.prod.js</span><br><span class="line">// åˆšæ‰çš„ä»£ç ...</span><br><span class="line">module.exports = merge(base, &#123;</span><br><span class="line">// åˆšæ‰çš„ä»£ç ...</span><br><span class="line">devtool: &#x27;nosources-source-map&#x27;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h2><p>é…ç½® devlopmentã€production è¿™ä¸¤ä¸ªç¯å¢ƒçš„ç¯å¢ƒå˜é‡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">webpack.dev.js</span><br><span class="line">// åˆšæ‰çš„ä»£ç ...</span><br><span class="line">const webpack = require(&#x27;webpack&#x27;)</span><br><span class="line">module.exports = merge(base, &#123;</span><br><span class="line">// åˆšæ‰çš„ä»£ç ...</span><br><span class="line">plugins: [</span><br><span class="line">  // å®šä¹‰å…¨å±€å˜é‡</span><br><span class="line">  new webpack.DefinePlugin(&#123;</span><br><span class="line">    process: &#123;</span><br><span class="line">      env: &#123;</span><br><span class="line">        NODE_DEV: JSON.stringify(&#x27;development&#x27;),</span><br><span class="line">        // è¿™é‡Œå¯ä»¥å®šä¹‰ä½ çš„ç¯å¢ƒå˜é‡</span><br><span class="line">        // VUE_APP_URL: JSON.stringify(&#x27;https://xxx.com&#x27;)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;),</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">webpack.prod.js</span><br><span class="line">// åˆšæ‰çš„ä»£ç ...</span><br><span class="line">const webpack = require(&#x27;webpack&#x27;)</span><br><span class="line">module.exports = merge(base, &#123;</span><br><span class="line">// åˆšæ‰çš„ä»£ç ...</span><br><span class="line">plugins: [</span><br><span class="line">  // å®šä¹‰å…¨å±€å˜é‡</span><br><span class="line">  new webpack.DefinePlugin(&#123;</span><br><span class="line">    process: &#123;</span><br><span class="line">      env: &#123;</span><br><span class="line">        NODE_DEV: JSON.stringify(&#x27;prodction&#x27;),</span><br><span class="line">        // è¿™é‡Œå¯ä»¥å®šä¹‰ä½ çš„ç¯å¢ƒå˜é‡</span><br><span class="line">        // VUE_APP_URL: JSON.stringify(&#x27;https://xxx.com&#x27;)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;),</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>çŸ¥è¯†ç‚¹</category>
      </categories>
      <tags>
        <tag>Webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue-axios</title>
    <url>/2022/12/19/Vue-axios/</url>
    <content><![CDATA[<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œç°åœ¨å¼€å‘é¡¹ç›®å¤§å¤šé‡‡ç”¨å‰åç«¯åˆ†ç¦»çš„æ¨¡å¼ï¼Œä¸ªäººé‡‡ç”¨vueåšå‰ç«¯é¡¹ç›®æ¯”è¾ƒå¤šä¸€ç‚¹ã€‚<br>è¯´åˆ°å‰ç«¯ï¼Œé‚£å‰ç«¯è‚¯å®šåªæ˜¯è´Ÿè´£æ¸²æŸ“å±•ç¤ºæ•°æ®çš„ï¼Œé‚£ä¹ˆè¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ•°æ®ä»å“ªé‡Œæ¥å‘¢ï¼Ÿ<br>åœ¨å¼€å‘é˜¶æ®µï¼Œå¤§å¤šä¼šé‡‡ç”¨mockæ¨¡æ‹Ÿæ•°æ®ï¼Œåšä¸€äº›å‡æ•°æ®æ¥æ»¡è¶³æš‚æ—¶çš„éœ€æ±‚ï¼Œä½†æ˜¯æœ€ç»ˆç”Ÿäº§ä¸Šçš„æ•°æ®è‚¯å®šæ˜¯ä»åç«¯æ¥å£è·å–è€Œæ¥ã€‚<br>å¦‚ä½•åœ¨vueé¡¹ç›®ä¸Šä»åç«¯è·å–æ•°æ®å‘¢ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦è¯´çš„å†…å®¹å•¦ï½</p>
<h1 id="ä¸€ã€å‰ç«¯ä»åç«¯è·å–æ•°æ®çš„æ–¹å¼é€šå¸¸é‡‡ç”¨http-httpsçš„æ–¹å¼"><a href="#ä¸€ã€å‰ç«¯ä»åç«¯è·å–æ•°æ®çš„æ–¹å¼é€šå¸¸é‡‡ç”¨http-httpsçš„æ–¹å¼" class="headerlink" title="ä¸€ã€å‰ç«¯ä»åç«¯è·å–æ•°æ®çš„æ–¹å¼é€šå¸¸é‡‡ç”¨http/httpsçš„æ–¹å¼"></a>ä¸€ã€å‰ç«¯ä»åç«¯è·å–æ•°æ®çš„æ–¹å¼é€šå¸¸é‡‡ç”¨http/httpsçš„æ–¹å¼</h1><p>æ–¹æ³•é€šå¸¸æœ‰GETã€POSTã€PUTã€DELETEã€PATCHè¿™äº”ç§ï¼›<br>GET==&gt;ç”¨æ¥è·å–æ•°æ®ï¼Œ<br>POST==&gt; æ˜¯ç”¨æ¥æ–°å¢æ•°æ®è¡¨å•æäº¤æˆ–æ–‡ä»¶ä¸Šä¼ <br>DELETE==&gt;æ˜¯ç”¨æ¥åˆ é™¤æ•°æ®<br>PUT==&gt;æ˜¯ç”¨æ¥æ›´æ–°æ•°æ®ï¼ˆæ‰€æœ‰æ•°æ®æ¨é€åˆ°åç«¯ï¼‰<br>PATCH==&gt;æ˜¯ç”¨æ¥æ›´æ–°æ•°æ®ï¼ˆåªå°†ä¿®æ”¹çš„æ•°æ®æ¨é€åˆ°åç«¯ï¼‰</p>
<h1 id="äºŒã€ä»å‰ç«¯è¯·æ±‚åç«¯æ¥å£è·å–æ•°æ®æ ¼å¼ï¼š"><a href="#äºŒã€ä»å‰ç«¯è¯·æ±‚åç«¯æ¥å£è·å–æ•°æ®æ ¼å¼ï¼š" class="headerlink" title="äºŒã€ä»å‰ç«¯è¯·æ±‚åç«¯æ¥å£è·å–æ•°æ®æ ¼å¼ï¼š"></a>äºŒã€ä»å‰ç«¯è¯·æ±‚åç«¯æ¥å£è·å–æ•°æ®æ ¼å¼ï¼š</h1><p>GETæ–¹æ³•ï¼š</p>
<h2 id="1ã€axios-get-url-config-then-res-gt-æ•°æ®å¤„ç†é€»è¾‘-catch-err-gt-é”™è¯¯å¤„ç†é€»è¾‘"><a href="#1ã€axios-get-url-config-then-res-gt-æ•°æ®å¤„ç†é€»è¾‘-catch-err-gt-é”™è¯¯å¤„ç†é€»è¾‘" class="headerlink" title="1ã€axios.get(url,config).then(res=&gt;{æ•°æ®å¤„ç†é€»è¾‘}).catch(err=&gt;{é”™è¯¯å¤„ç†é€»è¾‘})"></a>1ã€axios.get(url,config).then(res=&gt;{æ•°æ®å¤„ç†é€»è¾‘}).catch(err=&gt;{é”™è¯¯å¤„ç†é€»è¾‘})</h2><h2 id="2ã€axios-method-â€™getâ€™-url-â€™xxxxxâ€™-config-then-res-gt-æ•°æ®å¤„ç†é€»è¾‘-catch-err-gt-é”™è¯¯å¤„ç†é€»è¾‘"><a href="#2ã€axios-method-â€™getâ€™-url-â€™xxxxxâ€™-config-then-res-gt-æ•°æ®å¤„ç†é€»è¾‘-catch-err-gt-é”™è¯¯å¤„ç†é€»è¾‘" class="headerlink" title="2ã€axios({method:â€™getâ€™,url:â€™xxxxxâ€™,config}).then(res=&gt;{æ•°æ®å¤„ç†é€»è¾‘}).catch(err=&gt;{é”™è¯¯å¤„ç†é€»è¾‘})"></a>2ã€axios({method:â€™getâ€™,url:â€™xxxxxâ€™,config}).then(res=&gt;{æ•°æ®å¤„ç†é€»è¾‘}).catch(err=&gt;{é”™è¯¯å¤„ç†é€»è¾‘})</h2><p>å¯ä»¥åœ¨configä¸­è®¾ç½®åŸºç¡€URLï¼Œè¶…æ—¶æ—¶é—´ã€ä¼ å‚æ–¹å¼ã€è¯·æ±‚å¤´ç­‰ä¿¡æ¯ï¼Œä½†æ˜¯ä¼ å‚æ–¹å¼ä¸€èˆ¬ä¸ºparamsï¼Œè¯·æ±‚å‚æ•°åœ¨urlä¸­ã€‚</p>
<h2 id="POSTæ–¹æ³•ï¼ˆappcation-jsonæˆ–è€…form-dataï¼‰ï¼š"><a href="#POSTæ–¹æ³•ï¼ˆappcation-jsonæˆ–è€…form-dataï¼‰ï¼š" class="headerlink" title="POSTæ–¹æ³•ï¼ˆappcation/jsonæˆ–è€…form-dataï¼‰ï¼š"></a>POSTæ–¹æ³•ï¼ˆappcation/jsonæˆ–è€…form-dataï¼‰ï¼š</h2><h3 id="1ã€â‘ appcation-jsonæ–¹å¼"><a href="#1ã€â‘ appcation-jsonæ–¹å¼" class="headerlink" title="1ã€â‘ appcation/jsonæ–¹å¼"></a>1ã€â‘ appcation/jsonæ–¹å¼</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let data=&#123;id:12&#125;</span><br><span class="line">axios.post(url,data,config).then(res=&gt;&#123;æ•°æ®å¤„ç†é€»è¾‘&#125;).catch(err=&gt;&#123;é”™è¯¯å¤„ç†é€»è¾‘&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="â‘¡appcation-jsonæ–¹å¼ï¼š"><a href="#â‘¡appcation-jsonæ–¹å¼ï¼š" class="headerlink" title="â‘¡appcation/jsonæ–¹å¼ï¼š"></a>â‘¡appcation/jsonæ–¹å¼ï¼š</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let data=&#123;id:12&#125;</span><br><span class="line">axios(&#123;method:&#x27;post&#x27;,url,data:data,config&#125;).then(res=&gt;&#123;æ•°æ®å¤„ç†é€»è¾‘&#125;).catch(err=&gt;&#123;é”™è¯¯å¤„ç†é€»è¾‘&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="2ã€â‘ form-dataæ–¹å¼"><a href="#2ã€â‘ form-dataæ–¹å¼" class="headerlink" title="2ã€â‘ form-dataæ–¹å¼"></a>2ã€â‘ form-dataæ–¹å¼</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let data=&#123;id:12&#125;</span><br><span class="line">let formData = new FormData()</span><br><span class="line">for(let key in data)&#123;</span><br><span class="line">formData.append(key,data[key])</span><br><span class="line">&#125;</span><br><span class="line">axios.post(url,formData,config).then(res=&gt;&#123;æ•°æ®å¤„ç†é€»è¾‘&#125;).catch(err=&gt;&#123;é”™è¯¯å¤„ç†é€»è¾‘&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="â‘¡form-dataæ–¹å¼"><a href="#â‘¡form-dataæ–¹å¼" class="headerlink" title="â‘¡form-dataæ–¹å¼"></a>â‘¡form-dataæ–¹å¼</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let data=&#123;id:12&#125;</span><br><span class="line">let formData = new FormData()</span><br><span class="line">for(let key in data)&#123;</span><br><span class="line">formData.append(key,data[key])</span><br><span class="line">&#125;</span><br><span class="line">axios(&#123;method:&#x27;post&#x27;,url,formData:formData,config&#125;).then(res=&gt;&#123;æ•°æ®å¤„ç†é€»è¾‘&#125;).catch(err=&gt;&#123;é”™è¯¯å¤„ç†é€»è¾‘&#125;)</span><br></pre></td></tr></table></figure>
<p>postè¯·æ±‚åŒæ ·å¯ä»¥åœ¨åœ¨configä¸­è®¾ç½®åŸºç¡€URLï¼Œè¶…æ—¶æ—¶é—´ã€ä¼ å‚æ–¹å¼ã€è¯·æ±‚å¤´ç­‰ä¿¡æ¯ï¼Œä½†æ˜¯ä¼ å‚æ–¹å¼ä¸€èˆ¬ç”¨dataï¼Œå‚æ•°åœ¨è¯·æ±‚ä½“ä¸­ã€‚</p>
<h2 id="PUTå’ŒPATCHæ–¹å¼ï¼š"><a href="#PUTå’ŒPATCHæ–¹å¼ï¼š" class="headerlink" title="PUTå’ŒPATCHæ–¹å¼ï¼š"></a>PUTå’ŒPATCHæ–¹å¼ï¼š</h2><p>putå’Œpatchè·Ÿpostä¸€æ ·ï¼Œå°±æ–¹æ³•ä¸ä¸€æ ·è€Œå·²ï¼Œå‚è€ƒpostæ–¹æ³•ã€‚</p>
<h2 id="DELETEæ–¹å¼ï¼š"><a href="#DELETEæ–¹å¼ï¼š" class="headerlink" title="DELETEæ–¹å¼ï¼š"></a>DELETEæ–¹å¼ï¼š</h2><p>ç±»ä¼¼getæ–¹å¼ï¼Œå°±æ–¹æ³•ä¸ä¸€æ ·è€Œå·²ï¼Œå‚è€ƒgetæ–¹æ³•ã€‚<br>å¯ä»¥åœ¨configä¸­è®¾ç½®åŸºç¡€URLï¼Œè¶…æ—¶æ—¶é—´ã€ä¼ å‚æ–¹å¼ã€è¯·æ±‚å¤´ç­‰ä¿¡æ¯ï¼Œ<br>æ³¨æ„è¯·æ±‚å‚æ•°ï¼Œå¦‚æœåœ¨urlä¸­åˆ™configä¸­é‡‡ç”¨paramsæ–¹å¼ä¼ å‚ï¼Œå¦‚æœåœ¨è¯·æ±‚ä½“ä¸­ï¼Œåˆ™configä¸­é‡‡ç”¨dataæ–¹å¼ä¼ å‚ã€‚</p>
<h1 id="ä¸‰ã€axioså¹¶å‘è¯·æ±‚"><a href="#ä¸‰ã€axioså¹¶å‘è¯·æ±‚" class="headerlink" title="ä¸‰ã€axioså¹¶å‘è¯·æ±‚"></a>ä¸‰ã€axioså¹¶å‘è¯·æ±‚</h1><h2 id="å¹¶å‘è¯·æ±‚ï¼šåŒæ—¶è¿›è¡Œå¤šä¸ªè¯·æ±‚ï¼Œå¹¶ç»Ÿä¸€å¤„ç†è¿”å›å€¼ã€‚"><a href="#å¹¶å‘è¯·æ±‚ï¼šåŒæ—¶è¿›è¡Œå¤šä¸ªè¯·æ±‚ï¼Œå¹¶ç»Ÿä¸€å¤„ç†è¿”å›å€¼ã€‚" class="headerlink" title="å¹¶å‘è¯·æ±‚ï¼šåŒæ—¶è¿›è¡Œå¤šä¸ªè¯·æ±‚ï¼Œå¹¶ç»Ÿä¸€å¤„ç†è¿”å›å€¼ã€‚"></a>å¹¶å‘è¯·æ±‚ï¼šåŒæ—¶è¿›è¡Œå¤šä¸ªè¯·æ±‚ï¼Œå¹¶ç»Ÿä¸€å¤„ç†è¿”å›å€¼ã€‚</h2><p>æ¯”å¦‚è¯´ï¼šæˆ‘ä»¬éœ€è¦åŒæ—¶è¯·æ±‚ç”¨æˆ·ä¿¡æ¯å’Œå•†å“ä¿¡æ¯ï¼Œç„¶åå°†è·å¾—çš„ä¸¤ç§ä¿¡æ¯è¿›è¡Œæ‹¼æ¥ç­‰ç»Ÿä¸€åŠ å·¥åˆ°ä¸€èµ·ã€‚<br>è¿™æ¶‰åŠåˆ°axiosçš„ä¸¤ç§æ–¹æ³•ï¼šaxios.all(arr[])å’Œaxios.spread()ã€‚</p>
<h2 id="axios-all-å’Œaxios-spread-æ–¹æ³•"><a href="#axios-all-å’Œaxios-spread-æ–¹æ³•" class="headerlink" title="axios.all()å’Œaxios.spread()æ–¹æ³•"></a>axios.all()å’Œaxios.spread()æ–¹æ³•</h2><p>å…¶ä¸­axios.all(arr[])è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯åŒæ—¶å»è¯·æ±‚ï¼Œå®ƒçš„å‚æ•°æ˜¯æ•°ç»„ï¼Œæ•°ç»„çš„å†…å®¹å°±æ˜¯è¯·æ±‚æ–¹å¼å’Œè·¯å¾„ã€‚<br>æ¯”å¦‚ï¼šarr[] =[axios.get(url),axios.post(url,data,config)]</p>
<h2 id="å¦ä¸€ä¸ªaxios-spread-A-B-gt"><a href="#å¦ä¸€ä¸ªaxios-spread-A-B-gt" class="headerlink" title="å¦ä¸€ä¸ªaxios.spread((A,B)=&gt;{})"></a>å¦ä¸€ä¸ªaxios.spread((A,B)=&gt;{})</h2><p>è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥å¤„ç†è¿”å›çš„æ•°æ®çš„ï¼Œå…¶ä¸­{}ä¸­æ˜¯å…·ä½“çš„å¤„ç†é€»è¾‘ï¼ŒAå°±æ˜¯ç¬¬ä¸€ä¸ªè¯·æ±‚çš„è¿”å›å€¼ï¼ŒBå°±æ˜¯ç¬¬äºŒä¸ªè¯·æ±‚çš„è¿”å›å€¼ã€‚<br>å…·ä½“ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">axios.all([axios.get(url),axios.post(url,data,config)]).then(axios.spread((A,B)=&gt;&#123;&#125;))</span><br></pre></td></tr></table></figure>
<h1 id="å››ã€axioså®ä¾‹"><a href="#å››ã€axioså®ä¾‹" class="headerlink" title="å››ã€axioså®ä¾‹"></a>å››ã€axioså®ä¾‹</h1><p>ä½ ä¼šä¸ä¼šæœ‰è¿™æ ·ä¸€ä¸ªç–‘é—®ï¼Œå°±æ˜¯ä¸ºä»€ä¹ˆè¦ç”¨axioså®ä¾‹å‘¢ï¼Ÿ<br>é‚£å¯èƒ½æ˜¯å› ä¸ºåœ¨ä½ çš„é¡¹ç›®ä¸­ä¼šæ¶‰åŠåˆ°å¤šä¸ªæ¥å£åœ°å€ï¼Œè€Œä¸”æ¯ç§æ¥å£çš„è¶…æ—¶æ—¶é—´ç­‰ç­‰è®¾ç½®éƒ½ä¸ä¸€æ ·ï¼Œ<br>é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œä½ å°±å¯ä»¥é’ˆå¯¹æŸä¸ªæ¥å£åœ°å€æŸç§è¶…æ—¶æ—¶é—´æ¥åˆ›å»ºç‹¬ç«‹çš„axioså®ä¾‹ï¼ŒåæœŸä½ å°±å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ç§ç‰¹æ®Šaxioså®ä¾‹å»è¿›è¡Œæ•°æ®è¯·æ±‚äº†ã€‚<br>å…·ä½“ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let instance = axios.create(config);</span><br><span class="line">instance.get(url).then(res=&gt;&#123;æ•°æ®å¤„ç†é€»è¾‘&#125;).catch(err=&gt;&#123;é”™è¯¯å¤„ç†é€»è¾‘&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="äº”ã€å…³äºè¯·æ±‚ä¸­çš„config"><a href="#äº”ã€å…³äºè¯·æ±‚ä¸­çš„config" class="headerlink" title="äº”ã€å…³äºè¯·æ±‚ä¸­çš„config"></a>äº”ã€å…³äºè¯·æ±‚ä¸­çš„config</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">configçš„æ ¼å¼ä¸ºï¼š</span><br><span class="line">&#123;</span><br><span class="line">baseURL:&#x27;http:/xxxxxx&#x27;, //åŸºç¡€url</span><br><span class="line">timeout:6000, //è¶…æ—¶æ—¶é—´</span><br><span class="line">url:xxxxxx, //å…·ä½“url</span><br><span class="line">method:&#x27;get/post/put/patch/delete&#x27;, //è¯·æ±‚æ–¹å¼</span><br><span class="line">headers:&#123;token:&#x27;xxxxx&#x27;ç­‰&#125;, //è¯·æ±‚å¤´è®¾ç½®</span><br><span class="line">params:&#123;&#125;, //è¯·æ±‚å‚æ•°å¯¹è±¡ï¼Œå®ƒä¼šå°†è¯·æ±‚å‚æ•°æ‹¼æ¥åˆ°urlä¸Š</span><br><span class="line">data:&#123;&#125; //è¯·æ±‚å‚æ•°å¯¹è±¡ï¼Œå®ƒä¼šå°†è¯·æ±‚å‚æ•°æ”¾åˆ°è¯·æ±‚ä½“ä¸­</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>configåº”ç”¨åœºæ™¯</p>
<h2 id="1ã€å…¨å±€é…ç½®"><a href="#1ã€å…¨å±€é…ç½®" class="headerlink" title="1ã€å…¨å±€é…ç½®"></a>1ã€å…¨å±€é…ç½®</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">axios.defaults.timeout = 1000</span><br><span class="line">axios.defaults.baseURL = &#x27;http://XXXXX&#x27;</span><br></pre></td></tr></table></figure>
<h2 id="2ã€å®ä¾‹é…ç½®"><a href="#2ã€å®ä¾‹é…ç½®" class="headerlink" title="2ã€å®ä¾‹é…ç½®"></a>2ã€å®ä¾‹é…ç½®</h2><p>åœ¨axiosåˆ›å»ºå®ä¾‹ä¸­é…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let instance = axios.create();</span><br><span class="line">instance.defaults.timeout = 1000</span><br></pre></td></tr></table></figure>
<h2 id="3ã€è¯·æ±‚é…ç½®"><a href="#3ã€è¯·æ±‚é…ç½®" class="headerlink" title="3ã€è¯·æ±‚é…ç½®"></a>3ã€è¯·æ±‚é…ç½®</h2><p>åœ¨è¯·æ±‚ä¸­é…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">axios.get(url,config).then(res=&gt;&#123;æ•°æ®å¤„ç†é€»è¾‘&#125;).catch(err=&gt;&#123;é”™è¯¯å¤„ç†é€»è¾‘&#125;)</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œé…ç½®ä¼˜å…ˆçº§ä¸ºï¼š3&gt;2&gt;1</p>
<h1 id="å…­ã€axiosæ‹¦æˆªå™¨"><a href="#å…­ã€axiosæ‹¦æˆªå™¨" class="headerlink" title="å…­ã€axiosæ‹¦æˆªå™¨"></a>å…­ã€axiosæ‹¦æˆªå™¨</h1><h2 id="ä»€ä¹ˆæ˜¯æ‹¦æˆªå™¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ‹¦æˆªå™¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ‹¦æˆªå™¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ‹¦æˆªå™¨ï¼Ÿ</h2><p>æ‹¦æˆªå™¨å°±æ˜¯åœ¨è¯·æ±‚ä¹‹å‰å’Œå“åº”ä¹‹åèƒ½è¿›è¡Œä¸€äº›é¢å¤–æ“ä½œçš„åŠŸèƒ½å®ç°ã€‚<br>ä¸€èˆ¬åˆ†ä¸ºè¯·æ±‚æ‹¦æˆªå™¨å’Œå“åº”æ‹¦æˆªå™¨ä¸¤ç§ã€‚</p>
<h2 id="è¯·æ±‚æ‹¦æˆªå™¨"><a href="#è¯·æ±‚æ‹¦æˆªå™¨" class="headerlink" title="è¯·æ±‚æ‹¦æˆªå™¨"></a>è¯·æ±‚æ‹¦æˆªå™¨</h2><p>è¯·æ±‚æ‹¦æˆªå™¨é¡¾åæ€ä¹‰å°±æ˜¯åœ¨è¯·æ±‚ä¹‹å‰è¿›è¡Œæ‹¦æˆªå¹¶è¿›è¡Œä¸€äº›é¢å¤–æ“ä½œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">service.interceptors.request.use(</span><br><span class="line">config =&gt; &#123;</span><br><span class="line">//åœ¨å‘é€è¯·æ±‚å‰çš„é¢å¤–å¤„ç†</span><br><span class="line">return config</span><br><span class="line">&#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="å“åº”æ‹¦æˆªå™¨"><a href="#å“åº”æ‹¦æˆªå™¨" class="headerlink" title="å“åº”æ‹¦æˆªå™¨"></a>å“åº”æ‹¦æˆªå™¨</h2><p>å“åº”æ‹¦æˆªå™¨é¡¾åæ€ä¹‰å°±æ˜¯åœ¨å“åº”ä¹‹åè¿›è¡Œæ‹¦æˆªå¹¶è¿›è¡Œä¸€äº›é¢å¤–æ“ä½œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">service.interceptors.response.use(</span><br><span class="line">res =&gt; &#123;</span><br><span class="line">//å“åº”ä¹‹ååšä¸€äº›é¢å¤–æ“ä½œ</span><br><span class="line">return res</span><br><span class="line">&#125;,</span><br><span class="line">error =&gt; &#123;</span><br><span class="line">//åœ¨å‘ç”Ÿé”™è¯¯åçš„é¢å¤–å¤„ç†</span><br><span class="line">return Promise.reject(error)</span><br><span class="line">&#125;</span><br><span class="line">)</span><br><span class="line">æ³¨æ„ï¼šä¸ç®¡æ˜¯è¯·æ±‚æ‹¦æˆªå™¨è¿˜æ˜¯å“åº”æ‹¦æˆªå™¨ï¼Œåœ¨å‘ç”Ÿé”™è¯¯åéƒ½ä¼šè¿›å…¥åˆ°è¯·æ±‚çš„catchæ–¹æ³•ä¸­ï¼Œå¦‚ï¼š</span><br><span class="line">axios.get(url,config).then(res=&gt;&#123;æ•°æ®å¤„ç†é€»è¾‘&#125;).catch(err=&gt;&#123;é”™è¯¯å¤„ç†é€»è¾‘&#125;)</span><br></pre></td></tr></table></figure>
<p>ä¾‹å­ï¼šå‘é€è¯·æ±‚å‰ï¼Œåœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ tokenï¼Œå°±å¯ä»¥ç”¨æ‹¦æˆªå™¨æ¥å®ç°</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let instance = axios.create(config);</span><br><span class="line">instance.interceptors.request.use(confit=&gt;&#123;</span><br><span class="line">config.headers.token=&quot;sssssss&quot;</span><br><span class="line">return config</span><br><span class="line">&#125;,</span><br><span class="line">error =&gt; &#123;</span><br><span class="line">//åœ¨å‘ç”Ÿé”™è¯¯åçš„é¢å¤–å¤„ç†</span><br><span class="line">return Promise.reject(error)</span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="å–æ¶ˆæ‹¦æˆªå™¨"><a href="#å–æ¶ˆæ‹¦æˆªå™¨" class="headerlink" title="å–æ¶ˆæ‹¦æˆªå™¨"></a>å–æ¶ˆæ‹¦æˆªå™¨</h2><p>é¡¾åæ€ä¹‰å°±æ˜¯å–æ¶ˆæ‰å·²ç»é…ç½®çš„æ‹¦æˆªå™¨</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let instance = axios.create(config);</span><br><span class="line">instance.interceptors.request.use(</span><br><span class="line">config=&gt;&#123;</span><br><span class="line">config.headers.token=&quot;sssssss&quot;</span><br><span class="line">return config</span><br><span class="line">&#125;,</span><br><span class="line">error =&gt; &#123;</span><br><span class="line">//åœ¨å‘ç”Ÿé”™è¯¯åçš„é¢å¤–å¤„ç†</span><br><span class="line">return Promise.reject(error)</span><br><span class="line">&#125;</span><br><span class="line">)</span><br><span class="line">//å–æ¶ˆæ‹¦æˆªå™¨æ“ä½œï¼š</span><br><span class="line">axios.interceptors.request.eject(instance)</span><br></pre></td></tr></table></figure>
<h1 id="ä¸ƒã€å–æ¶ˆè¯·æ±‚"><a href="#ä¸ƒã€å–æ¶ˆè¯·æ±‚" class="headerlink" title="ä¸ƒã€å–æ¶ˆè¯·æ±‚"></a>ä¸ƒã€å–æ¶ˆè¯·æ±‚</h1><p>å–æ¶ˆè¯·æ±‚å®é™…ä¸­ç”¨çš„åˆ°ä¸å¤šï¼Œä¸»è¦ä½¿ç”¨åœºæ™¯æ¯”å¦‚ï¼šç”¨æˆ·æ­£åœ¨æ‰¹é‡æŸ¥è¯¢ä¸€ä¸ªæ¯”è¾ƒè€—æ—¶çš„æ•°æ®ï¼Œå‘èµ·è¯·æ±‚åç”¨æˆ·ä¸æƒ³æŸ¥äº†ï¼Œ<br>è¿™æ—¶å€™å°±å¯ä»¥å–æ¶ˆè¿™ä¸ªè¯·æ±‚,ä¸»è¦ç”¨åˆ°ï¼šaxios.CancelToken.source()æ–¹æ³•<br>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">axios.CancelToken.source()</span><br><span class="line">axios.get(url,&#123;CancelToken:source,token&#125;).then(res=&gt;&#123;æ•°æ®å¤„ç†é€»è¾‘&#125;).catch(err=&gt;&#123;é”™è¯¯å¤„ç†é€»è¾‘&#125;)</span><br><span class="line">//è§¦å‘å–æ¶ˆè¯·æ±‚ï¼š</span><br><span class="line">source.cancel(&#x27;é”™è¯¯ä¿¡æ¯&#x27;)</span><br></pre></td></tr></table></figure>
<p>å°±å¯ä»¥äº†</p>
]]></content>
      <categories>
        <category>çŸ¥è¯†ç‚¹</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3setupå‡½æ•°</title>
    <url>/2022/10/13/Vue3setup%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<h1 id="vue2-å’Œ-vue3-å¼€å‘çš„åŒºåˆ«"><a href="#vue2-å’Œ-vue3-å¼€å‘çš„åŒºåˆ«" class="headerlink" title="vue2 å’Œ vue3 å¼€å‘çš„åŒºåˆ«"></a>vue2 å’Œ vue3 å¼€å‘çš„åŒºåˆ«</h1><p>é¦–å…ˆï¼Œç›®å‰æ¥è¯´ vue3 å‘å¸ƒå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä½†æ˜¯å‘¢ï¼Œç”±äºè¿˜å¤„äºä¼˜åŒ–å®Œå–„é˜¶æ®µï¼Œå¯¹äº vue3 å¼€å‘é¡¹ç›®çš„éœ€æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œä¸»è¦è¿˜æ˜¯ä»¥ vue2 å¼€å‘ä¸ºä¸»ï¼Œä½†æ˜¯ç›¸ä¿¡ï¼Œvue3 è¿›è¡Œé¡¹ç›®å¼€å‘æ˜¯å¤§åŠ¿æ‰€è¶‹ã€‚</p>
<p>vue2 å¼€å‘é¡¹ç›®è¿‡ç¨‹ä¸­ï¼Œä¼šå­˜åœ¨ä»£ç å†—ä½™å’Œç»“æ„æ‚ä¹±é—®é¢˜ï¼Œè¿™æ˜¯ vue3 ä¸»è¦è§£å†³çš„é—®é¢˜ï¼Œvue3 å¯ä»¥å°†ç›¸å…³åŠŸèƒ½çš„ä»£ç æŠ½ç¦»åˆ†å‰²åœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿé˜…è¯»ï¼Œæé«˜é¡¹ç›®ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h1 id="ä½¿ç”¨-setup-åŸå› "><a href="#ä½¿ç”¨-setup-åŸå› " class="headerlink" title="ä½¿ç”¨ setup åŸå› "></a>ä½¿ç”¨ setup åŸå› </h1><p>åœ¨ vue3 ç‰ˆæœ¬ä¸­ï¼Œå¼•å…¥äº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå«åš setupï¼Œå¼•å…¥ä»–çš„åŸå› æ€»ç»“ä¸€ä¸‹ä¸»è¦åŸå› æ˜¯ï¼šä¸ºäº†ä½¿ç”¨ç»„åˆå¼ APIï¼Œsetup å‡½æ•°æ˜¯ Composition çš„å…¥å£ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¸ç»§ç»­ä½¿ç”¨ vue2 å½“ä¸­çš„é€‰é¡¹ API äº†å‘¢ï¼ŒåŸå› ä¹Ÿå¾ˆç®€å•ï¼Œåƒ dataã€computedã€methodsã€watch åœ¨ç»„ç»‡é€»è¾‘å¤§å¤šæ•°çš„æƒ…å†µä¸‹éƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯å½“ç»„ä»¶é€»è¾‘å˜å¾—æ›´åŠ ä¸°å¯Œï¼Œé‚£ä¹ˆé€»è¾‘å¤„ç†å…³æ³¨ç‚¹å°±ä¼šè¶Šæ¥è¶Šå¤šï¼Œå¾ˆå®¹æ˜“å¯¼è‡´ç»„ä»¶é˜…è¯»å’Œç»´æŠ¤æˆæœ¬æé«˜ï¼Œé€šè¿‡ setup å‡½æ•°èƒ½å¤Ÿå°†è¯¥éƒ¨åˆ†é€»è¾‘æŠ½ç¦»æˆå‡½æ•°ï¼Œè®©å¼€å‘è€…ä¸å¿…åœ¨å…³å¿ƒè¯¥éƒ¨åˆ†çš„é€»è¾‘é—®é¢˜ã€‚</p>
<h1 id="setup-ç”¨æ³•"><a href="#setup-ç”¨æ³•" class="headerlink" title="setup ç”¨æ³•"></a>setup ç”¨æ³•</h1><ol>
<li>setup å‡½æ•°æ˜¯ç»„åˆå¼ API çš„å…¥å£ã€‚</li>
<li>setup å‡½æ•°æ˜¯å¯åŠ¨é¡µé¢åè‡ªåŠ¨æ‰§è¡Œçš„å‡½æ•°ã€‚</li>
<li>é¡µé¢ä¸­æ‰€æ¶‰åŠçš„å˜é‡å’Œæ–¹æ³•ç­‰ï¼Œéƒ½éœ€è¦å†™åœ¨ setup å‡½æ•°ä¸­ã€‚</li>
<li>åœ¨ setup ä¸­å®šä¹‰çš„å˜é‡ã€æ–¹æ³•éœ€è¦é€šè¿‡ return è¿”å›å‡ºå»æ‰å¯ä»¥ä½¿ç”¨ï¼Œå¦åˆ™æ— æ³•åœ¨è§†å›¾ä¸­ä½¿ç”¨ã€‚</li>
<li>setup å‡½æ•°ä½äº created å’Œ beforCreated é’©å­ä¹‹å‰ï¼Œç”¨æ¥ä»£æ›¿è¿™ä¸¤ä¸ªé’©å­ã€‚</li>
</ol>
<h1 id="setup-å¯ä»¥æ¥å—å“ªäº›å‚æ•°"><a href="#setup-å¯ä»¥æ¥å—å“ªäº›å‚æ•°" class="headerlink" title="setup å¯ä»¥æ¥å—å“ªäº›å‚æ•°"></a>setup å¯ä»¥æ¥å—å“ªäº›å‚æ•°</h1><p>setup å‡½æ•°å¯ä»¥æ¥å— propsã€contextï¼Œå…¶ä¸­ï¼Œ props ç”±äºæ˜¯å“åº”å¼æ•°æ®ï¼Œä¸èƒ½ç›´æ¥è§£æ„èµ‹å€¼ï¼Œcontext ä¸æ˜¯å“åº”å¼æ•°æ®ï¼Œå¯ä»¥é€šè¿‡è§£æ„èµ‹å€¼ï¼Œsetup å‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåªè¦è¿”å›å¯¹è±¡ï¼Œä¾¿å¯ä»¥åƒ vue2 çš„æ–¹å¼ä¸€æ ·ä½¿ç”¨è¿”å›çš„å±æ€§æˆ–æ–¹æ³•ã€‚</p>
<h1 id="setup-å‡½æ•°å®šä¹‰å˜é‡"><a href="#setup-å‡½æ•°å®šä¹‰å˜é‡" class="headerlink" title="setup å‡½æ•°å®šä¹‰å˜é‡"></a>setup å‡½æ•°å®šä¹‰å˜é‡</h1><p>ç»„ä»¶ä¸­æ‰€æœ‰çš„å˜é‡éƒ½è¦åœ¨ setup å‡½æ•°ä¸­å®šä¹‰ï¼Œå¹¶ä¸”éœ€è¦åœ¨ setup å‡½æ•°æœ€åé€šè¿‡ return è¿”å›ï¼Œæ‰å¯ä»¥åƒ vue2 ä¸€æ ·åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚</p>
<h2 id="å®šä¹‰ä¸€ä¸ªåŸºæœ¬ç±»å‹å˜é‡"><a href="#å®šä¹‰ä¸€ä¸ªåŸºæœ¬ç±»å‹å˜é‡" class="headerlink" title="å®šä¹‰ä¸€ä¸ªåŸºæœ¬ç±»å‹å˜é‡"></a>å®šä¹‰ä¸€ä¸ªåŸºæœ¬ç±»å‹å˜é‡</h2><p>åœ¨ setup å‡½æ•°ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª name å‚æ•°ï¼Œå¹¶ä¸”åœ¨é¡µé¢ä¸­æ¸²æŸ“è¯¥å­—æ®µçš„å†…å®¹ã€‚<br><img src="/2022/10/13/Vue3setup%E5%87%BD%E6%95%B0/%E5%9F%BA%E6%9C%AC%E5%8F%98%E9%87%8F.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>ä¸Šé¢çš„ä»£ç ç¼–å†™å®Œæˆï¼Œä¿å­˜åˆ·æ–°é¡µé¢ï¼Œå‘ç°åç§°æ¸²æŸ“å‡ºç°é—®é¢˜ï¼Œå±•ç¤ºä¸å‡ºæ¥ï¼ŒåŒæ—¶æ§åˆ¶å°æŠ¥é”™å‘Šè­¦ã€‚<br><img src="/2022/10/13/Vue3setup%E5%87%BD%E6%95%B0/%E5%90%8D%E7%A7%B0%E6%B8%B2%E6%9F%93%E5%A4%B1%E8%B4%A5.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/13/Vue3setup%E5%87%BD%E6%95%B0/%E6%8F%90%E7%A4%BA%E6%89%BE%E4%B8%8D%E5%88%B0.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› å…¶å®å¾ˆç®€å•ï¼Œå¦‚æœä» vue2 è½¬åˆ° vue3 ,å¾ˆå®¹æ˜“å°±é‡åˆ°è¿™ç§é—®é¢˜ï¼Œå› ä¸ºä¸Šé¢æåˆ°è¿‡ï¼Œåœ¨ setup ä¸­åˆ›å»ºçš„å˜é‡éœ€è¦åœ¨ setup å‡½æ•°æœ€åé€šè¿‡ return è¿”å›ï¼Œæ‰å¯ä»¥ä½¿ç”¨ã€‚<br><img src="/2022/10/13/Vue3setup%E5%87%BD%E6%95%B0/name.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>å°†åˆ›å»ºçš„ name å‚æ•°æŠ›å‡ºåï¼Œé‡æ–°ä¿å­˜åˆ·æ–°é¡µé¢ï¼Œæ•°æ®æ¸²æŸ“å°±æ­£å¸¸äº†ã€‚<br><img src="/2022/10/13/Vue3setup%E5%87%BD%E6%95%B0/%E6%B8%B2%E6%9F%93%E6%88%90%E5%8A%9F.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>åŒæ ·ï¼Œåˆ›å»ºå…¶ä»–åŸºæœ¬ç±»å‹ä¹Ÿæ˜¯ä¸€æ ·çš„ç¼–å†™æ–¹å¼ã€‚<br><img src="/2022/10/13/Vue3setup%E5%87%BD%E6%95%B0/%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>åˆ‡è®°ï¼Œå£°æ˜çš„å˜é‡å¦‚æœéœ€è¦åœ¨é¡µé¢ä¸­å±•ç¤ºï¼Œå¿…é¡»ä½¿ç”¨ return å°†å£°æ˜çš„å˜é‡æŠ›å‡ºã€‚<br><img src="/2022/10/13/Vue3setup%E5%87%BD%E6%95%B0/%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h2 id="setup-åˆ›å»ºå¤æ‚æ•°æ®ç±»å‹"><a href="#setup-åˆ›å»ºå¤æ‚æ•°æ®ç±»å‹" class="headerlink" title="setup åˆ›å»ºå¤æ‚æ•°æ®ç±»å‹"></a>setup åˆ›å»ºå¤æ‚æ•°æ®ç±»å‹</h2><p>setup å‡½æ•°åˆ›å»ºå¤æ‚æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚æ•°ç»„ï¼Œå¯¹è±¡ä¹‹ç±»çš„å’ŒåŸºæœ¬æ•°æ®ç±»å‹ç›¸åŒï¼Œä¹Ÿæ˜¯å¿…é¡»é€šè¿‡ return æŠ›å‡ºåï¼Œæ‰å¯ä»¥åœ¨é¡µé¢ä¸­ä½¿ç”¨ã€‚<br><img src="/2022/10/13/Vue3setup%E5%87%BD%E6%95%B0/%E5%A4%8D%E6%9D%82%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>åˆ·æ–°é¡µé¢ï¼Œæ¸²æŸ“æ­£å¸¸<br><img src="/2022/10/13/Vue3setup%E5%87%BD%E6%95%B0/%E5%A4%8D%E6%9D%82%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h1 id="setup-åˆ›å»ºæ–¹æ³•"><a href="#setup-åˆ›å»ºæ–¹æ³•" class="headerlink" title="setup åˆ›å»ºæ–¹æ³•"></a>setup åˆ›å»ºæ–¹æ³•</h1><p>é™¤äº†å˜é‡ï¼Œæ–¹æ³•ä¹Ÿæ˜¯éœ€è¦å†™åœ¨ setup å‡½æ•°å½“ä¸­çš„ï¼ŒåŒæ—¶å’Œå˜é‡ä¸€æ ·ï¼Œéœ€è¦ return æŠ›å‡ºæ‰å¯ä»¥ä½¿ç”¨ã€‚<br>åˆ›å»ºæ–¹æ³•çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p>
<h2 id="ç¬¬ä¸€ç§å°±æ˜¯å¾ˆå¸¸è§çš„é€šè¿‡-function-çš„æ–¹å¼åˆ›å»º"><a href="#ç¬¬ä¸€ç§å°±æ˜¯å¾ˆå¸¸è§çš„é€šè¿‡-function-çš„æ–¹å¼åˆ›å»º" class="headerlink" title="ç¬¬ä¸€ç§å°±æ˜¯å¾ˆå¸¸è§çš„é€šè¿‡ function çš„æ–¹å¼åˆ›å»º"></a>ç¬¬ä¸€ç§å°±æ˜¯å¾ˆå¸¸è§çš„é€šè¿‡ function çš„æ–¹å¼åˆ›å»º</h2><pre><code>// ä¸€ã€é€šè¿‡ function çš„æ–¹å¼åˆ›å»º
    function btn() &#123;
        console.log(&#39;æŒ‰é’®è¢«ç‚¹å‡»äº†&#39;)
    &#125;
</code></pre>
<h2 id="å¦ä¸€ç§ä½¿ç”¨è¿‡ç®­å¤´å‡½æ•°çš„æ–¹å¼åˆ›å»º"><a href="#å¦ä¸€ç§ä½¿ç”¨è¿‡ç®­å¤´å‡½æ•°çš„æ–¹å¼åˆ›å»º" class="headerlink" title="å¦ä¸€ç§ä½¿ç”¨è¿‡ç®­å¤´å‡½æ•°çš„æ–¹å¼åˆ›å»º"></a>å¦ä¸€ç§ä½¿ç”¨è¿‡ç®­å¤´å‡½æ•°çš„æ–¹å¼åˆ›å»º</h2><pre><code>  // äºŒã€é€šè¿‡ç®­å¤´å‡½æ•°çš„æ–¹å¼åˆ›å»º
  const btn = () =&gt; &#123;
    console.log(&#39;æŒ‰é’®è¢«ç‚¹å‡»äº†&#39;)
  &#125;
</code></pre>
<p>ä¾‹å¦‚ï¼šåœ¨é¡µé¢æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®æ‰“å°ä¸€æ®µè¯åœ¨æ§åˆ¶å°è¾“å‡ºã€‚<br><img src="/2022/10/13/Vue3setup%E5%87%BD%E6%95%B0/%E7%82%B9%E5%87%BB%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ä¿å­˜ä»£ç ï¼Œåˆ·æ–°é¡µé¢ï¼Œç‚¹å‡»æŒ‰é’®åœ¨æ§åˆ¶å°è¾“å‡ºå†…å®¹ã€‚<br><img src="/2022/10/13/Vue3setup%E5%87%BD%E6%95%B0/%E8%A2%AB%E7%82%B9%E5%87%BB.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
]]></content>
      <categories>
        <category>vue3</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3shallowRefå’ŒshallowReactive</title>
    <url>/2022/10/19/Vue3shallowRef%E5%92%8CshallowReactive/</url>
    <content><![CDATA[<h1 id="shallowRef-å’Œ-shallowReactive"><a href="#shallowRef-å’Œ-shallowReactive" class="headerlink" title="shallowRef å’Œ shallowReactive"></a>shallowRef å’Œ shallowReactive</h1><ol>
<li>shallowRef å‡½æ•°ï¼Œåªå¤„ç†åŸºæœ¬ç±»å‹æ•°æ®ã€‚</li>
<li>shallowReactive å‡½æ•°ï¼Œåªå¤„ç†ç¬¬ä¸€å±‚æ•°æ®ã€‚</li>
<li>ä¸¤ä¸ªåœ¨ä½¿ç”¨çš„æ—¶å€™éƒ½éœ€è¦å¼•å…¥æ‰å¯ä»¥ã€‚<br>ref å‡½æ•°å’Œ reactive å‡½æ•°ï¼Œä»–ä»¬çš„ä½œç”¨æ˜¯å°†æ•°æ®è½¬æ¢æˆå“åº”å¼çš„æ•°æ®ï¼Œåœ¨ä¿®æ”¹æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥å°†æ•°æ®å®æ—¶å±•ç¤ºåœ¨é¡µé¢ä¸Šï¼ŒåŸºæœ¬æ•°æ®ä¹Ÿå¥½ï¼Œå¯¹è±¡ä¹Ÿå¥½ï¼Œéƒ½æ˜¯è¿™æ ·ã€‚<br>ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜å‘€ï¼Œæˆ‘ä»¬åœ¨æŠŠæ•°æ®æ”¹ä¸ºå“åº”å¼æ•°æ®çš„æ—¶å€™ï¼Œä¸ç®¡æ˜¯ç”¨ ref å‡½æ•°è¿˜æ˜¯ä½¿ç”¨ reactive å‡½æ•°ï¼Œå®ƒä¿©éƒ½æ˜¯æ·±åº¦ç›‘å¬ï¼Œå°±æ˜¯ reactive åŒ…è£¹çš„å¯¹è±¡ï¼Œå°±ç®—æœ‰100å±‚ï¼Œä¹Ÿå°±æ˜¯è¿ç»­ç‚¹ä¸€ç™¾ä¸ªå±æ€§é‚£ç§ï¼Œå»ä¿®æ”¹æœ€æ·±å±‚çš„æ•°æ®ï¼Œä¹Ÿæ˜¯å¯ä»¥ç›‘å¬åˆ°çš„ï¼Œè¿™æ ·çš„è¯å°±ä¼šå­˜åœ¨é—®é¢˜äº†ã€‚</li>
</ol>
<h1 id="æ·±åº¦ç›‘å¬çš„é—®é¢˜ï¼š"><a href="#æ·±åº¦ç›‘å¬çš„é—®é¢˜ï¼š" class="headerlink" title="æ·±åº¦ç›‘å¬çš„é—®é¢˜ï¼š"></a>æ·±åº¦ç›‘å¬çš„é—®é¢˜ï¼š</h1><ol>
<li>æ— è®º ref å‡½æ•°è¿˜æ˜¯ reactive å‡½æ•°éƒ½æ˜¯æ·±åº¦ç›‘å¬ã€‚</li>
<li>å¦‚æœæ•°æ®é‡è¿‡å¤§ï¼Œè¶…çº§è¶…çº§æ¶ˆè€—æ€§èƒ½ã€‚</li>
<li>å¦‚æœæˆ‘ä»¬ä¸éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ·±åº¦ç›‘å¬çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨ shallowRef å‡½æ•°å’Œ shallowReactive å‡½æ•°ã€‚</li>
</ol>
<h1 id="ä½¿ç”¨-shallowReactive-éæ·±åº¦ç›‘å¬"><a href="#ä½¿ç”¨-shallowReactive-éæ·±åº¦ç›‘å¬" class="headerlink" title="ä½¿ç”¨ shallowReactive éæ·±åº¦ç›‘å¬"></a>ä½¿ç”¨ shallowReactive éæ·±åº¦ç›‘å¬</h1><p>è®°ä½ä¸€ç‚¹ï¼ŒshallowReactive å‡½æ•°ï¼Œåªèƒ½å¤„ç†ç¬¬ä¸€å±‚æ•°æ®ã€‚<br><img src="/2022/10/19/Vue3shallowRef%E5%92%8CshallowReactive/shallowReactive%E4%B8%80%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬åˆ†åˆ«ç‚¹å‡»ä¸¤ä¸ªæŒ‰é’®ï¼Œçœ‹ä¸€ä¸‹é¡µé¢å˜åŒ–ã€‚<br><img src="/2022/10/19/Vue3shallowRef%E5%92%8CshallowReactive/shallowReactive%E4%B8%80%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>é€šè¿‡æ•ˆæœï¼Œæˆ‘ä»¬ç¨å¾®æ€»ç»“ä¸€ä¸‹ï¼š</p>
<ol>
<li>shallowReactiveåªä¼šåŒ…è£…ç¬¬ä¸€å±‚çš„æ•°æ®</li>
<li>é»˜è®¤æƒ…å†µå®ƒåªèƒ½å¤Ÿç›‘å¬æ•°æ®çš„ç¬¬ä¸€å±‚ã€‚</li>
<li>å¦‚æœæƒ³æ›´æ”¹å¤šå±‚çš„æ•°æ®ï¼Œå¿…é¡»å…ˆæ›´æ”¹ç¬¬ä¸€å±‚çš„æ•°æ®ï¼Œç„¶ååœ¨å»æ›´æ”¹å…¶ä»–å±‚çš„æ•°æ®ã€‚è¿™æ ·è§†å›¾ä¸Šçš„æ•°æ®æ‰ä¼šå‘ç”Ÿå˜åŒ–ã€‚</li>
</ol>
<h1 id="ä½¿ç”¨-shallowRef-éæ·±åº¦ç›‘å¬"><a href="#ä½¿ç”¨-shallowRef-éæ·±åº¦ç›‘å¬" class="headerlink" title="ä½¿ç”¨ shallowRef éæ·±åº¦ç›‘å¬"></a>ä½¿ç”¨ shallowRef éæ·±åº¦ç›‘å¬</h1><p>shallowRef å‡½æ•°ï¼Œåªèƒ½å¤„ç†åŸºæœ¬ç±»å‹æ•°æ®ï¼Œä¸ºå•¥å‘¢ï¼Œå› ä¸º shallowRef å‡½æ•°ç›‘å¬çš„æ˜¯.value å˜åŒ–ã€‚å¹¶ä¸æ˜¯ç¬¬ä¸€å±‚çš„æ•°æ®çš„å˜åŒ–ã€‚æ‰€ä»¥å¦‚æœè¦æ›´æ”¹ shallowRef åˆ›å»ºçš„æ•°æ®ï¼Œåº”è¯¥ xxx.value = XXXã€‚<br><img src="/2022/10/19/Vue3shallowRef%E5%92%8CshallowReactive/shallowRef%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ç‚¹å‡»æŒ‰é’®ï¼Œä¿®æ”¹ boy çš„å€¼<br><img src="/2022/10/19/Vue3shallowRef%E5%92%8CshallowReactive/shallowRef%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>æœ‰ä¸€ä¸ªé—®é¢˜ï¼šshallowRef å‡½æ•°ï¼Œåªå¤„ç†åŸºæœ¬ç±»å‹æ•°æ®å—ï¼Ÿ<br><img src="/2022/10/19/Vue3shallowRef%E5%92%8CshallowReactive/shallowRef%E4%BA%8C%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>åœ¨è¿™ä¸ªä»£ç é‡Œé¢ï¼Œæˆ‘ä»¬ç”¨ shallowRef åŒ…è£¹äº†ä¸€ä¸ªå¯¹è±¡ï¼Œ ç„¶ååœ¨é¡µé¢æ˜¾ç¤º name å’Œ age ï¼Œç„¶åæˆ‘ä»¬é€šè¿‡æŒ‰é’®ä¿®æ”¹ name å’Œ ageï¼Œçœ‹ä¸€ä¸‹é¡µé¢çš„æ•ˆæœã€‚<br><img src="/2022/10/19/Vue3shallowRef%E5%92%8CshallowReactive/shallowRef%E4%BA%8C%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æ‰€ä»¥è¯´å‘¢ï¼ŒshallowRef å‡½æ•°ï¼Œåªèƒ½å¤„ç†åŸºæœ¬ç±»å‹æ•°æ®ã€‚</p>
]]></content>
      <categories>
        <category>vue3</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3:Piniaä½¿ç”¨</title>
    <url>/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>åœ¨ vue2 ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨çŠ¶æ€ç®¡ç†å™¨ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯é›†æˆ Vuexï¼Œé¦–å…ˆè¯´æ˜ä¸€ç‚¹ï¼ŒVuex åœ¨ vue3 é¡¹ç›®ä¸­ä¾æ—§æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„ï¼Œæ˜¯ vue é¡¹ç›®çš„æ­£è§„å†›ã€‚ä½†æ˜¯ï¼Œä»Šå¤©æˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹Pinia ç›®å‰ä¹Ÿå·²ç»æ˜¯ vue å®˜æ–¹æ­£å¼çš„çŠ¶æ€åº“ã€‚é€‚ç”¨äº vue2 å’Œ vue3ã€‚å¯ä»¥ç®€å•çš„ç†è§£æˆ Pinia å°±æ˜¯ Vuex5ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ Vue3 é¡¹ç›®ï¼Œå»ºè®®ä½¿ç”¨Piniaï¼Œå½“ç„¶å¾ˆå¤šå…¬å¸æˆ–è€…æ˜¯é¡¹ç›®ç”± vue2 è½¬ä¸º vue3 ä¹‹åï¼Œç”±äºä¹ æƒ¯äº†ä½¿ç”¨ vuex ï¼Œæ‰€ä»¥è¯´ï¼Œåœ¨ vue3 å½“ä¸­ç»§ç»­ä½¿ç”¨ vuex çš„ï¼Œä¹Ÿä¸æ˜¯å°‘æ•°ï¼Œéƒ½çŸ¥é“å°±å¯ä»¥ï¼Œæ ¹æ®å®é™…æƒ…å†µæ¥é€‰æ‹©ã€‚</p>
<h1 id="ä»€ä¹ˆæ˜¯-Pinia"><a href="#ä»€ä¹ˆæ˜¯-Pinia" class="headerlink" title="ä»€ä¹ˆæ˜¯ Pinia"></a>ä»€ä¹ˆæ˜¯ Pinia</h1><p>Pinia æ˜¯ Vue çš„å­˜å‚¨åº“ï¼Œå®ƒå…è®¸æ‚¨è·¨ç»„ä»¶/é¡µé¢å…±äº«çŠ¶æ€ã€‚Pinia çš„æˆåŠŸå¯ä»¥å½’åŠŸäºä»–ç®¡ç†å­˜å‚¨æ•°æ®çš„ç‹¬ç‰¹åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šå¯æ‰©å±•æ€§ã€å­˜å‚¨æ¨¡å—ç»„ç»‡ã€çŠ¶æ€å˜åŒ–åˆ†ç»„ã€å¤šå­˜å‚¨åˆ›å»ºç­‰ã€‚</p>
<h1 id="Pinia-çš„ä¼˜ç‚¹"><a href="#Pinia-çš„ä¼˜ç‚¹" class="headerlink" title="Pinia çš„ä¼˜ç‚¹"></a>Pinia çš„ä¼˜ç‚¹</h1><p>Pinia è¢« vue çº³å…¥æ­£è§„ç¼–åˆ¶ï¼Œè‚¯å®šæ˜¯æœ‰åŸå› çš„ï¼Œé‚£ pinia æœ‰å•¥ä¼˜ç‚¹å‘¢ï¼Œä¸»è¦æ˜¯ä¸€ä¸‹å‡ ç‚¹ï¼š<br>pinia ç¬¦åˆç›´è§‰ï¼Œæ˜“äºå­¦ä¹ ã€‚<br>pinia æ˜¯è½»é‡çº§çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œå¤§å°åªæœ‰1KB.<br>pinia æ¨¡å—åŒ–è®¾è®¡ï¼Œæ–¹ä¾¿æ‹†åˆ†ã€‚<br>pinia æ²¡æœ‰ mutationsï¼Œç›´æ¥åœ¨ actions ä¸­æ“ä½œ stateï¼Œé€šè¿‡ this.xxx è®¿é—®å“åº”çš„çŠ¶æ€ï¼Œå°½ç®¡å¯ä»¥ç›´æ¥æ“ä½œ stateï¼Œä½†æ˜¯è¿˜æ˜¯æ¨èåœ¨ actions ä¸­æ“ä½œï¼Œä¿è¯çŠ¶æ€ä¸è¢«æ„å¤–çš„æ”¹å˜ã€‚<br>store çš„ action è¢«è°ƒåº¦ä¸ºå¸¸è§„çš„å‡½æ•°è°ƒç”¨ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ dispatch æ–¹æ³•æˆ–è€…æ˜¯ MapAction è¾…åŠ©å‡½æ•°ï¼Œè¿™æ˜¯åœ¨ Vuex ä¸­å¾ˆå¸¸è§çš„ã€‚<br>æ”¯æŒå¤šä¸ª storeã€‚<br>æ”¯æŒ Vue devtoolsã€SSRã€webpack ä»£ç æ‹†åˆ†ã€‚</p>
<h1 id="ç›¸å…³èµ„æ–™"><a href="#ç›¸å…³èµ„æ–™" class="headerlink" title="ç›¸å…³èµ„æ–™"></a>ç›¸å…³èµ„æ–™</h1><p>Pinia ä¸­æ–‡ç½‘ï¼š<a href="https://pinia.web3doc.top/">https://pinia.web3doc.top/</a></p>
<h1 id="Pinia-å®‰è£…"><a href="#Pinia-å®‰è£…" class="headerlink" title="Pinia å®‰è£…"></a>Pinia å®‰è£…</h1><p>å®‰è£… pinia å°±å¾ˆç®€å•äº†ï¼Œç›´æ¥å‘½ä»¤å®‰è£…å°±å¯ä»¥äº†ã€‚<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E5%AE%89%E8%A3%85.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h1 id="Pinia-ä½¿ç”¨"><a href="#Pinia-ä½¿ç”¨" class="headerlink" title="Pinia ä½¿ç”¨"></a>Pinia ä½¿ç”¨</h1><p>å®‰è£…å®Œ pinia ï¼Œç„¶åå°±æ˜¯ä½¿ç”¨äº†ï¼Œä½¿ç”¨çš„ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯åœ¨é¡¹ç›®ä¸­å¼•å…¥ pinia</p>
<h2 id="1-Pinia-å¯¼å…¥"><a href="#1-Pinia-å¯¼å…¥" class="headerlink" title="1.Pinia å¯¼å…¥"></a>1.Pinia å¯¼å…¥</h2><p>é¦–å…ˆåœ¨ main.js æ–‡ä»¶ä¸­å¼•å…¥<br> vue3 çš„å†™æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123;createPinia&#125; from &#x27;pinia&#x27;</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œè¿™ä¸ª pinia å°±åœ¨é¡¹ç›®ä¸­å¯¼å…¥äº†<br>Pinia æ˜¯æ”¯æŒ vue2 çš„ï¼Œå¦‚æœæ˜¯ vue2 çš„é¡¹ç›®ï¼Œå¯¼å…¥çš„æ–¹å¼æ˜¯ä¸‹é¢çš„æ ·å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123;PiniaVuePlugin&#125; from &#x27;pinia&#x27;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è¿˜æ˜¯ä»¥ vue3 æ¥ä»‹ç»è¿™ä¸ª Pinia<br>å¯¼å…¥çš„æ—¶å€™æ˜¯ hook ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨ä¸€ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const state = createPinia()</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨å®Œæˆï¼Œstate æ˜¯ä»¥æ’ä»¶çš„å½¢å¼å­˜åœ¨çš„ï¼Œæ‰€ä»¥è¯´æœ€åæˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®ä½¿ç”¨ä¸€ä¸‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">app.use(state)</span><br></pre></td></tr></table></figure>
<h2 id="2-Pinia-åŸºæœ¬ä½¿ç”¨"><a href="#2-Pinia-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2.Pinia åŸºæœ¬ä½¿ç”¨"></a>2.Pinia åŸºæœ¬ä½¿ç”¨</h2><h3 id="1-åˆ›å»º-index-ts-æ–‡ä»¶"><a href="#1-åˆ›å»º-index-ts-æ–‡ä»¶" class="headerlink" title="1.åˆ›å»º index.ts æ–‡ä»¶"></a>1.åˆ›å»º index.ts æ–‡ä»¶</h3><p>ä½¿ç”¨èµ·æ¥ç›¸å¯¹ç®€å•ä¸€äº›ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª store æ–‡ä»¶å¤¹ï¼Œç”¨ vuex çš„æ—¶å€™ä¹Ÿæ˜¯è¿™ä¸ªç»“æ„ã€‚æ¯•ç«Ÿ pinia å°±æ˜¯ç”¨æ¥æ›¿æ¢æ‰ vuex çš„å˜›ã€‚<br>åˆ›å»ºå®Œ store æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢åˆ›å»ºä¸€ä¸ª ts æ–‡ä»¶ï¼Œå«åš index.ts ã€‚</p>
<h3 id="2-ç¼–å†™-index-ts-æ–‡ä»¶"><a href="#2-ç¼–å†™-index-ts-æ–‡ä»¶" class="headerlink" title="2.ç¼–å†™ index.ts æ–‡ä»¶"></a>2.ç¼–å†™ index.ts æ–‡ä»¶</h3><p>é¦–å…ˆæˆ‘ä»¬å…ˆå¼•å…¥ pinia</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; defineStore &#125; from &quot;pinia&quot;;</span><br></pre></td></tr></table></figure>
<p>ç”±äº defineStore ä¹Ÿæ˜¯ä¸€ä¸ª hooks ï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬å¯ä»¥ç›´æ¥å¯¼å‡ºä¸€ä¸‹<br>è¿™æ ·å­å†™æ˜¯ä¼šæŠ¥é”™çš„ï¼Œå› ä¸ºè¿™ä¸ª defineStore æ˜¯éœ€è¦ä¼ å‚æ•°çš„ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯idï¼Œå°±æ˜¯ä¸€ä¸ªå”¯ä¸€çš„å€¼ï¼Œç®€å•ç‚¹è¯´å°±å¯ä»¥ç†è§£æˆæ˜¯ä¸€ä¸ªå‘½åç©ºé—´ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªæšä¸¾å†ä¼ å€¼ã€‚<br>æˆ‘ä»¬åœ¨åŒçº§åœ¨åˆ›å»ºä¸€ä¸ªåå­—å«åš store_name.ts çš„æ–‡ä»¶å†™ä¸€ä¸ªæšä¸¾æ•°æ®å¯¼å‡º</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export const enum Names &#123;</span><br><span class="line">  TEST = &quot;TEST&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ index.ts æ–‡ä»¶ä¸­å¼•å…¥ä¸€ä¸‹æšä¸¾æ•°æ®ï¼Œç„¶åä¼ ç»™è¿™ä¸ª defineStoreã€‚<br>è¿™ä¸ªæ ·å­è¿˜æ˜¯æŠ¥é”™çš„ï¼Œå› ä¸ºè¿˜æœ‰å…¶ä»–çš„å‚æ•°éœ€è¦ä¼ é€’ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢æœ‰ä¸‰ä¸ªæ¨¡å—éœ€è¦å¤„ç†ï¼Œç¬¬ä¸€ä¸ªæ˜¯ stateï¼Œç¬¬äºŒä¸ªæ˜¯ gettersï¼Œç¬¬ä¸‰ä¸ªæ˜¯ actionsã€‚<br>state å’Œä¹‹å‰æˆ‘ä»¬ vuex é‡Œé¢çš„å†™æ³•æ˜¯ä¸ä¸€æ ·çš„ï¼Œåœ¨ vuex é‡Œé¢å‘¢ï¼Œstate æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯åœ¨ pinia ä¸­ï¼Œstate å¿…é¡»æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œç„¶ååœ¨è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚<br>getters æ¨¡å—å‘¢ï¼Œç±»ä¼¼äºè®¡ç®—å±æ€§ï¼Œæ˜¯æœ‰ç¼“å­˜çš„ï¼Œä¸»è¦æ˜¯å¸®åŠ©æˆ‘ä»¬ä¿®é¥°ä¸€äº›å€¼ã€‚<br>actions å‘¢ï¼Œç±»ä¼¼äº methodsï¼Œå¸®åŠ©æˆ‘ä»¬åšä¸€äº›åŒæ­¥çš„æˆ–è€…æ˜¯å¼‚æ­¥çš„æ“ä½œï¼Œæäº¤ state ä¹‹ç±»çš„ã€‚<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/indexts.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>å…¶å®åˆ°è¿™ä¸ªåœ°æ–¹ä¸ºæ­¢å‘¢ï¼Œå…¶å®æˆ‘ä»¬å·²ç»å¯ä»¥ä½¿ç”¨ pinia äº†ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªé¡µé¢ä½¿ç”¨ä¸€ä¸‹ pinia çš„å€¼ã€‚<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE1%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE1%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h3 id="3-ä¿®æ”¹-Pinia-çš„å€¼"><a href="#3-ä¿®æ”¹-Pinia-çš„å€¼" class="headerlink" title="3.ä¿®æ”¹ Pinia çš„å€¼"></a>3.ä¿®æ”¹ Pinia çš„å€¼</h3><p>ä¿®æ”¹ Pinia çš„å€¼æœ‰å¾ˆå¤šä¸­æ–¹å¼ï¼Œä¿®æ”¹ pinia çš„å€¼ï¼Œå…¶å®å°±æ˜¯ä¿®æ”¹ state çš„å€¼<br>ä¿®æ”¹å€¼çš„æ–¹å¼å‘¢ï¼Œå¸¸è§çš„æœ‰äº”ç§</p>
<h4 id="æ–¹å¼ä¸€ï¼šç›´æ¥ä¿®æ”¹"><a href="#æ–¹å¼ä¸€ï¼šç›´æ¥ä¿®æ”¹" class="headerlink" title="æ–¹å¼ä¸€ï¼šç›´æ¥ä¿®æ”¹"></a>æ–¹å¼ä¸€ï¼šç›´æ¥ä¿®æ”¹</h4><p><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE2%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE2%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h4 id="æ–¹å¼äºŒï¼š-patch-å‡½æ•°ä¿®æ”¹"><a href="#æ–¹å¼äºŒï¼š-patch-å‡½æ•°ä¿®æ”¹" class="headerlink" title="æ–¹å¼äºŒï¼š$patch å‡½æ•°ä¿®æ”¹"></a>æ–¹å¼äºŒï¼š$patch å‡½æ•°ä¿®æ”¹</h4><p>åœ¨æˆ‘ä»¬å®ä¾‹åŒ– const userInfo = useInfoStore() è¿™ä¸ª state çš„æ—¶å€™ï¼Œå…¶å®è¿™ä¸ª userInfo ä¸­ï¼Œæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯ patch å‡½æ•°ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ‰¹é‡ä¿®æ”¹ã€‚<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE3%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE3%E7%BB%93%E6%9E%9C1.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE3%E7%BB%93%E6%9E%9C2.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h4 id="æ–¹å¼ä¸‰ï¼š-patch-å‡½æ•°ä¿®æ”¹"><a href="#æ–¹å¼ä¸‰ï¼š-patch-å‡½æ•°ä¿®æ”¹" class="headerlink" title="æ–¹å¼ä¸‰ï¼š$patch å‡½æ•°ä¿®æ”¹"></a>æ–¹å¼ä¸‰ï¼š$patch å‡½æ•°ä¿®æ”¹</h4><p>å’¦ï¼Œä¸ºä»€ä¹ˆå’Œç¬¬äºŒç§ä¸€æ ·ï¼Œéƒ½æ˜¯ä½¿ç”¨ patch å‡½æ•°æ¥å®ç°ä¿®æ”¹ï¼Œæ˜¯æœ‰åŒºåˆ«ï¼Œæ–¹å¼äºŒæ˜¯åœ¨ patch å‡½æ•°ä¸­ä¼ å…¥ä¿®æ”¹çš„å¯¹è±¡å€¼ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼ä¼ å…¥çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½œç”¨æ˜¯å•¥å­å‘¢ï¼Ÿå°±æ˜¯å¯ä»¥è¿›è¡Œé€»è¾‘æ“ä½œï¼Œæ¯”å¦‚è¯´åˆ¤æ–­ä¹‹ç±»çš„ã€‚<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE4%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æ•ˆæœå…¶å®å’Œæ–¹å¼äºŒæ˜¯ä¸€æ¨¡ä¸€æ ·çš„</p>
<h4 id="æ–¹å¼å››ï¼š-state-æ–¹å¼"><a href="#æ–¹å¼å››ï¼š-state-æ–¹å¼" class="headerlink" title="æ–¹å¼å››ï¼š$state æ–¹å¼"></a>æ–¹å¼å››ï¼š$state æ–¹å¼</h4><p><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE5%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h4 id="æ–¹å¼äº”ï¼š-action-æ–¹å¼"><a href="#æ–¹å¼äº”ï¼š-action-æ–¹å¼" class="headerlink" title="æ–¹å¼äº”ï¼š action æ–¹å¼"></a>æ–¹å¼äº”ï¼š action æ–¹å¼</h4><p>è¿™ä¸ªæ–¹å¼æˆ‘ä»¬éœ€è¦å€ŸåŠ© actions æ¥å®ç°ï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬éœ€è¦å» store æ–‡ä»¶å¤¹ä¸‹çš„ index.ts æ–‡ä»¶ä¸­å†™ä¸€ä¸ª action<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE6%E4%BB%A3%E7%A0%811.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>å†™å®Œ action æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ action çš„æ–¹å¼ä¿®æ”¹ age çš„å€¼äº†ã€‚æ€ä¹ˆä½¿ç”¨å‘¢ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨å®ä¾‹å»è°ƒç”¨ä¸€ä¸‹æˆ‘ä»¬åˆšæ‰å†™çš„ action å‡½æ•°å°±è¡Œäº†ã€‚<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE6%E4%BB%A3%E7%A0%812.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æŸ¥çœ‹ä¸€ä¸‹æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE6%E7%BB%93%E6%9E%9C1.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE6%E7%BB%93%E6%9E%9C2.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>å½“ç„¶äº†ï¼Œè¿™ä¸ª action æ˜¯å¯ä»¥ä¼ å‚çš„ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ index.ts æ–‡ä»¶ç¼–å†™çš„ action å‡½æ•°ï¼Œè®©ä»–æ¥å—ä¸€ä¸ªå‚æ•°å†èµ‹å€¼ã€‚<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE7%E4%BB%A3%E7%A0%811.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE7%E4%BB%A3%E7%A0%812.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æŸ¥çœ‹ä¸€ä¸‹æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE7%E7%BB%93%E6%9E%9C1.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE7%E7%BB%93%E6%9E%9C2.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ä»¥ä¸Šå°±æ˜¯å¸¸è§çš„äº”ç§ä¿®æ”¹ state æ•°æ®çš„æ–¹å¼ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µé€‰æ‹©ä½¿ç”¨</p>
<h1 id="pinia-è§£æ„"><a href="#pinia-è§£æ„" class="headerlink" title="pinia è§£æ„"></a>pinia è§£æ„</h1><p>ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å®ä¾‹åŒ–const userInfo = useInfoStore()äº†ä»¥åå‘¢ï¼Œè¿™ä¸ª userInfo æ˜¯å¯ä»¥ç»§ç»­è§£æ„æ“ä½œçš„<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE8%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>åœ¨é¡µé¢åˆ†åˆ«å±•ç¤ºä¸€ä¸‹è§£æ„å‰å’Œè§£æ„åçš„æ•°æ®ï¼ŒæŸ¥çœ‹ä¸€ä¸‹æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE8%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç»“æ„å‰å’Œç»“æ„åæˆ‘ä»¬åœ¨é¡µé¢éƒ½å¯ä»¥è·å–åˆ°æ•°æ®å±•ç¤ºã€‚<br>ä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è§£æ„åçš„æ•°æ®æ˜¯ä¸å…·å¤‡å“åº”å¼çš„ï¼Œæ„æ€å°±æ˜¯æˆ‘ä»¬ä¿®æ”¹äº† state çš„å€¼ï¼Œé¡µé¢ä¸ä¼šè·Ÿç€å˜åŒ–ã€‚<br>åšä¸ªæµ‹è¯•ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œage åŠ ä¸€ï¼Œçœ‹ä¸€ä¸‹ç»“æ„å‰å’Œè§£æ„åçš„æ•°æ®åœ¨é¡µé¢æ˜¯å¦ä¼šå®æ—¶æ¸²æŸ“<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE9%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>åœ¨é¡µé¢åˆ†åˆ«å±•ç¤ºä¸€ä¸‹è§£æ„å‰å’Œè§£æ„åçš„æ•°æ®ï¼ŒæŸ¥çœ‹ä¸€ä¸‹æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE9%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>é€šè¿‡æµ‹è¯•æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç»“æ„å‰çš„æ˜¯å¯ä»¥å®æ—¶æ¸²æŸ“çš„ï¼Œä½†æ˜¯è§£æ„åçš„è¯æ˜¯ä¸å¯ä»¥çš„ï¼Œ å› ä¸ºè§£æ„åçš„ä¸æ˜¯å“åº”å¼æ•°æ®ã€‚<br>è§£å†³è¿™ä¸ªé—®é¢˜å¾ˆç®€å•ï¼Œå®˜æ–¹æä¾›äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥æŠŠè§£æ„åçš„æ•°æ®è½¬æ¢ä¸ºå“åº”å¼çš„æ•°æ®ã€‚<br>å°±æ˜¯ storeToRefsï¼Œä½¿ç”¨ storeToRefs éœ€è¦å¯¼å…¥ä¸€ä¸‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; storeToRefs &#125; from &#x27;pinia&#x27;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæŠŠæˆ‘ä»¬è§£æ„çš„å¯¹è±¡åŒ…è£¹ä¸€ä¸‹å°±å¯ä»¥äº†</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const &#123; name, age &#125; = storeToRefs(userInfo)</span><br></pre></td></tr></table></figure>
<p><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE10%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE10%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ–è€…æˆ‘ä»¬æ¢ä¸€ä¸ªå†™æ³•ï¼Œç›´æ¥æ“ä½œç»“æ„åçš„æ•°æ®ï¼Œè®°å¾—ï¼Œè¦ .value<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE11%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h1 id="Pinia-çš„-actions"><a href="#Pinia-çš„-actions" class="headerlink" title="Pinia çš„ actions"></a>Pinia çš„ actions</h1><p>actions æ˜¯å¯ä»¥å¤„ç†åŒæ­¥ï¼Œä¹Ÿå¯ä»¥å¤„ç†å¼‚æ­¥ï¼ŒåŒæ­¥çš„è¯ç›¸å¯¹æ¥è¯´ç®€å•ä¸€ç‚¹ï¼Œä¸Šé¢æˆ‘ä»¬é€šè¿‡ action ä¿®æ”¹ state çš„æ—¶å€™ï¼Œå°±ç”¨åˆ°äº† actions çš„åŒæ­¥<br>æ¥ä¸‹æ¥æˆ‘ä»¬é‡ç‚¹ä»‹ç»ä¸€ä¸‹actionså¼‚æ­¥<br>actions å¼‚æ­¥<br>é¦–å…ˆæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œç„¶åæˆ‘ä»¬åœ¨ actions ä¸­å¯ä»¥è°ƒç”¨è¿™ä¸ªå¼‚æ­¥æ“ä½œï¼Œåœ¨ actions å¤„ç†å¼‚æ­¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ˜¯ä¸ async å’Œ await è¿ç”¨<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE11%E4%BB%A3%E7%A0%811.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE11%E4%BB%A3%E7%A0%812.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æŸ¥çœ‹ä¸€ä¸‹æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE11%E7%BB%93%E6%9E%9C1.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE11%E7%BB%93%E6%9E%9C2.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>actions åŒæ­¥ã€å¼‚æ­¥è¿ç”¨<br>è¿™ä¸ª actions é‡Œé¢çš„æ–¹æ³•å‡½æ•°æ˜¯å¯ä»¥ç›¸äº’è°ƒç”¨çš„ï¼Œæ„æ€å°±æ˜¯ä½  actions é‡Œé¢æœ‰å¥½å‡ ä¸ªæ–¹æ³•ï¼Œè¿™å‡ ä¸ªæ–¹æ³•æ˜¯å¯ä»¥è°ƒè¿‡æ¥è°ƒè¿‡å»çš„ã€‚<br>ä¸Šé¢çš„ä»£ç æ”¹ä¸€ä¸‹ï¼Œæœ¬æ¥å¼‚æ­¥æ¨¡æ‹Ÿè·å–çš„ age æ•°æ®æ˜¯ 8 ï¼Œç„¶åæˆ‘ä»¬è°ƒç”¨ä¸€ä¸ª action æŠŠ age æ”¹æˆ 18ã€‚<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE12%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æŸ¥çœ‹ä¸€ä¸‹æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE12%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h1 id="getter-å‡½æ•°"><a href="#getter-å‡½æ•°" class="headerlink" title="getter å‡½æ•°"></a>getter å‡½æ•°</h1><p>getters ç±»ä¼¼äº vue é‡Œé¢çš„è®¡ç®—å±æ€§ï¼Œå¯ä»¥å¯¹å·²æœ‰çš„æ•°æ®è¿›è¡Œä¿®é¥°ã€‚<br>æœ‰ä¸¤ç§å†™æ³•:<br>æ™®é€šå‡½æ•°æ–¹å¼å†™æ³•<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE13%E4%BB%A3%E7%A0%811.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE13%E4%BB%A3%E7%A0%812.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æŸ¥çœ‹ä¸€ä¸‹æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE13%E7%BB%93%E6%9E%9C1.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ç„¶åæˆ‘ä»¬ç‚¹ä¸€ä¸‹æŒ‰é’®ï¼Œä¿®æ”¹ä¸€ä¸‹ nameï¼Œç„¶åçœ‹ä¸€ä¸‹æ•ˆæœ<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE13%E7%BB%93%E6%9E%9C2.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬å¯ä»¥çœ‹è§ï¼Œç‚¹å‡»ä¿®æ”¹ name ä¹‹ågetter ä¹Ÿä¼šå®æ—¶çš„æ¸²æŸ“å‡ºæ¥<br>ç›¸äº’è°ƒç”¨<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE14%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æŸ¥çœ‹ä¸€ä¸‹æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE14%E7%BB%93%E6%9E%9C1.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ç„¶åæˆ‘ä»¬ç‚¹ä¸€ä¸‹æŒ‰é’®ï¼Œä¿®æ”¹ä¸€ä¸‹ nameå’Œ ageï¼Œç„¶åçœ‹ä¸€ä¸‹æ•ˆæœ<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE14%E7%BB%93%E6%9E%9C2.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h1 id="API-çš„ä½¿ç”¨"><a href="#API-çš„ä½¿ç”¨" class="headerlink" title="API çš„ä½¿ç”¨"></a>API çš„ä½¿ç”¨</h1><p>$reset ï¼šé‡ç½®åˆ°åˆå§‹å€¼<br>è¿™ä¸ª $reset å¯ä»¥å°† state çš„æ•°æ®é‡ç½®åˆ°åˆå§‹å€¼ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°æ®ï¼Œç‚¹å‡»æŒ‰é’®æ”¹å˜äº†ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ª API ï¼Œå°†æ•°æ®æ¢å¤åˆ°åˆå§‹çŠ¶æ€å€¼ã€‚<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE15%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬ç‚¹å‡»ä¿®æ”¹ç”¨æˆ·æŒ‰é’®ï¼ŒæŸ¥çœ‹ä¸€ä¸‹æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE15%E7%BB%93%E6%9E%9C1.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ç„¶åæˆ‘ä»¬ç‚¹ä¸€ä¸‹$resetæŒ‰é’®ï¼Œç„¶åçœ‹ä¸€ä¸‹æ•ˆæœ<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE15%E7%BB%93%E6%9E%9C2.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>$subscribeï¼šç›‘å¬ state æ•°æ®å˜åŒ–<br>$subscribe ä½¿ç”¨æ¥ç›‘å¬çš„ï¼Œç›‘å¬ state æ•°æ®çš„å˜åŒ–ï¼Œåªè¦ state é‡Œé¢çš„æ•°æ®å‘ç”Ÿäº†å˜åŒ–ï¼Œå°±ä¼šè‡ªåŠ¨èµ°è¿™ä¸ªå‡½æ•°ã€‚<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE16%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬ç‚¹å‡»ä¿®æ”¹ç”¨æˆ·æŒ‰é’®ï¼ŒæŸ¥çœ‹ä¸€ä¸‹æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE16%E7%BB%93%E6%9E%9C1.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æ§åˆ¶å°æ‰“å°å‡ºç›‘å¬åˆ°çš„å˜åŒ–ç»“æœ<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE16%E7%BB%93%E6%9E%9C2.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>$onActionï¼šä¸€è°ƒç”¨ actions å°±è§¦å‘<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE17%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æ§åˆ¶å°æ‰“å°å‡ºç›‘å¬åˆ°çš„å˜åŒ–ç»“æœ<br><img src="/2022/10/24/Vue3-Pinia%E4%BD%BF%E7%94%A8/%E6%88%AA%E5%9B%BE17%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
]]></content>
      <categories>
        <category>vue3</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3toRefå’ŒtoRefså‡½æ•°</title>
    <url>/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<h1 id="toRef-å‡½æ•°"><a href="#toRef-å‡½æ•°" class="headerlink" title="toRef å‡½æ•°"></a>toRef å‡½æ•°</h1><p>æˆ‘ä»¬çŸ¥é“ï¼Œref å‡½æ•°å¯ä»¥åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„æ•°æ®ï¼Œé‚£ toRef å‡½æ•°åŒæ ·ä¹Ÿæ˜¯åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„æ•°æ®ï¼Œé‚£ä¹ˆå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>é¦–å…ˆä¸€ç‚¹ï¼Œref å‡½æ•°ä»–çš„æœ¬è´¨å…¶å®æ˜¯å»æ‹·è´ä¸€ä»½æ•°æ®ï¼Œè„±ç¦»äº†ä¸æºæ•°æ®çš„äº¤äº’ã€‚<br>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯ ref å‡½æ•°å¯ä»¥å°†å¯¹è±¡é‡Œé¢çš„å±æ€§å€¼å˜æˆå“åº”å¼çš„æ•°æ®ï¼Œä¿®æ”¹å“åº”å¼æ•°æ®ï¼Œæ˜¯ä¸ä¼šå½±å“åˆ°æºæ•°æ®ï¼Œä½†æ˜¯è§†å›¾å±‚ä¸Šçš„æ•°æ®ä¼šè¢«æ›´æ–°ã€‚<br>ä½†æ˜¯ toRefs å‡½æ•°çš„æœ¬è´¨æ˜¯å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒtoRef å‡½æ•°ä¼šä¸æºæ•°æ®äº¤äº’ï¼Œä¿®æ”¹å“åº”å¼æ•°æ®ä¼šé€ æˆæºæ•°æ®çš„ä¿®æ”¹ï¼Œä½†æ˜¯ä»–çš„ä¿®æ”¹ä¸ä¼šé€ æˆè§†å›¾å±‚æ•°æ®çš„æ›´æ–°ã€‚</p>
<h1 id="toRef-å‡½æ•°ä½¿ç”¨"><a href="#toRef-å‡½æ•°ä½¿ç”¨" class="headerlink" title="toRef å‡½æ•°ä½¿ç”¨"></a>toRef å‡½æ•°ä½¿ç”¨</h1><h2 id="é¦–å…ˆå‘¢ï¼Œ-toRef-å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°"><a href="#é¦–å…ˆå‘¢ï¼Œ-toRef-å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°" class="headerlink" title="é¦–å…ˆå‘¢ï¼Œ toRef å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°"></a>é¦–å…ˆå‘¢ï¼Œ toRef å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°</h2><p>toRef(æ“ä½œå¯¹è±¡, å¯¹è±¡å±æ€§)</p>
<h2 id="æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨-toRef-å‡½æ•°å†™ä¸€ä¸ªæ¡ˆä¾‹"><a href="#æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨-toRef-å‡½æ•°å†™ä¸€ä¸ªæ¡ˆä¾‹" class="headerlink" title="æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ toRef å‡½æ•°å†™ä¸€ä¸ªæ¡ˆä¾‹"></a>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ toRef å‡½æ•°å†™ä¸€ä¸ªæ¡ˆä¾‹</h2><p><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/toref%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/toref%E9%A1%B5%E9%9D%A2%E6%88%90%E5%8A%9F.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ•°æ®çš„ç»“æ„ï¼Œåœ¨ value é‡Œé¢ç›´æ¥å°±æ˜¯ boy ä¸‹é¢ name çš„å±æ€§å€¼ï¼Œæ‰€ä»¥è¯´ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œä¿®æ”¹è¿™ä¸ª name å€¼ã€‚<br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/toref%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ç„¶åç‚¹å‡»æŒ‰é’®çœ‹ä¸€ä¸‹é¡µé¢æ•ˆæœ<br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/toref%E4%BF%AE%E6%94%B9%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>é€šè¿‡æˆªå›¾å±•ç¤ºçš„æ•ˆæœæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œboy_toRef çš„å€¼ç¡®å®è¢«ä¿®æ”¹äº†ï¼Œä½†æ˜¯å‘¢ï¼Œé¡µé¢å¹¶æ²¡æœ‰æ”¹å˜ï¼Œè€Œä¸”é¡µé¢ä¹Ÿæ²¡æœ‰å‡ºç°é”™è¯¯ã€‚<br>è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿå…¶å®è¿™ä¸æ˜¯ Bug å“ˆï¼Œåœ¨æœ¬ç¯‡åšæ–‡å¼€å§‹å°±è¯´è¿‡ï¼ŒtoRef å‡½æ•°ä¼šä¸æºæ•°æ®äº¤äº’ï¼Œä¿®æ”¹å“åº”å¼æ•°æ®ä¼šé€ æˆæºæ•°æ®çš„ä¿®æ”¹ï¼Œä½†æ˜¯ä»–çš„ä¿®æ”¹ä¸ä¼šé€ æˆè§†å›¾å±‚æ•°æ®çš„æ›´æ–°ï¼Œæ‰€ä»¥è¯´ï¼Œè¿™å°±æ˜¯ toRef å‡½æ•°çš„åŠŸèƒ½ã€‚ç¡®å®ï¼Œè§†å›¾æ²¡æœ‰æ•°æ®æ›´æ–°æˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„æˆªå›¾çœ‹åˆ°äº†ï¼Œä½†æ˜¯æºæ•°æ®ä¿®æ”¹è¿™ä¸ªæ€ä¹ˆçœ‹å‘¢ï¼Ÿæ²¡å…³ç³»ï¼Œåœ¨å›ç­”è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¾—çŸ¥é“ï¼Œä»€ä¹ˆæ˜¯æºæ•°æ®ã€‚<br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/toref%E6%BA%90%E6%95%B0%E6%8D%AE.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>toRef å‡½æ•°å°† boy å¯¹è±¡ç»™åŒ…è£¹äº†èµ·æ¥ï¼Œæ‰€ä»¥è¯´ï¼Œboy å¯¹è±¡å°±æ˜¯æºæ•°æ®ã€‚<br>æ‰€ä»¥è¯´ï¼Œæƒ³çŸ¥é“æºæ•°æ®æœ‰æ²¡æœ‰æ”¹å˜ï¼Œåœ¨ç‚¹å‡»æŒ‰é’®ä¹‹åï¼Œæ‰“å°ä¸€ä¸‹ boy å¯¹è±¡ï¼Œçœ‹ä¸€ä¸‹ boy æœ‰æ²¡æœ‰è¢«æ”¹å˜ã€‚<br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/toref%E6%89%93%E5%8D%B0body%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>åˆ·æ–°é¡µé¢ï¼Œåœ¨ç‚¹å‡»æŒ‰é’®ä¿®æ”¹ name å€¼ï¼Œç„¶åæŸ¥çœ‹ä¸€ä¸‹æ§åˆ¶å°æ‰“å°çš„ boy å¯¹è±¡<br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/torefbody%E6%89%93%E5%8D%B0%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>å‘ç° boy å¯¹è±¡çš„ name å€¼å·²ç»ä» æˆ‘æ˜¯wn. æ”¹ä¸º wn.äº†ï¼Œä½†æ˜¯é¡µé¢ä¾æ—§æ²¡æœ‰æ›´æ–°ã€‚<br>è®°ä½äº†ï¼<br>toRef å‡½æ•°ä¼šä¸æºæ•°æ®äº¤äº’ï¼Œä¿®æ”¹å“åº”å¼æ•°æ®ä¼šé€ æˆæºæ•°æ®çš„ä¿®æ”¹ï¼Œä½†æ˜¯ä»–çš„ä¿®æ”¹ä¸ä¼šé€ æˆè§†å›¾å±‚æ•°æ®çš„æ›´æ–°ã€‚</p>
<h1 id="ref-å‡½æ•°éªŒè¯"><a href="#ref-å‡½æ•°éªŒè¯" class="headerlink" title="ref å‡½æ•°éªŒè¯"></a>ref å‡½æ•°éªŒè¯</h1><p>é‚£ ref å‡½æ•°å¯ä»¥å°†å¯¹è±¡é‡Œé¢çš„å±æ€§å€¼å˜æˆå“åº”å¼çš„æ•°æ®ï¼Œä¿®æ”¹å“åº”å¼æ•°æ®ï¼Œæ˜¯ä¸ä¼šå½±å“åˆ°æºæ•°æ®ï¼Œä½†æ˜¯è§†å›¾å±‚ä¸Šçš„æ•°æ®ä¼šè¢«æ›´æ–°,æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹<br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/ref%E5%87%BD%E6%95%B0%E9%AA%8C%E8%AF%81%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>åˆ·æ–°é¡µé¢ï¼Œç‚¹å‡»æŒ‰é’®æŸ¥çœ‹é¡µé¢æ§åˆ¶å°æ‰“å°çš„ç»“æœï¼Œä¸»è¦æ˜¯çœ‹ä¸€ä¸‹è¢« ref å‡½æ•°åŒ…è£¹åçš„æ•°æ®æœ‰æ²¡æœ‰ä¿®æ”¹æˆåŠŸï¼Œæºæ•°æ®æœ‰æ²¡æœ‰ä¿®æ”¹æˆåŠŸï¼Œæœ€åé¡µé¢æœ‰æ²¡æœ‰ä¿®æ”¹ï¼Œä¸‹é¢çœ‹æˆªå›¾<br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/ref%E5%87%BD%E6%95%B0%E9%AA%8C%E8%AF%81%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æ‰€ä»¥å†è®°ä½ï¼<br>ref å‡½æ•°å¯ä»¥å°†å¯¹è±¡é‡Œé¢çš„å±æ€§å€¼å˜æˆå“åº”å¼çš„æ•°æ®ï¼Œä¿®æ”¹å“åº”å¼æ•°æ®ï¼Œæ˜¯ä¸ä¼šå½±å“åˆ°æºæ•°æ®ï¼Œä½†æ˜¯è§†å›¾å±‚ä¸Šçš„æ•°æ®ä¼šè¢«æ›´æ–°</p>
<h1 id="toRefs-å‡½æ•°"><a href="#toRefs-å‡½æ•°" class="headerlink" title="toRefs å‡½æ•°"></a>toRefs å‡½æ•°</h1><p>toRefs å‡½æ•°çš„ä½¿ç”¨å‘¢ï¼Œå…¶å®å’Œ toRef å‡½æ•°ç±»ä¼¼ã€‚<br>toRefs å‡½æ•°ç”¨äºæ‰¹é‡è®¾ç½®å¤šä¸ªæ•°æ®ä¸ºå“åº”å¼æ•°æ®ã€‚<br>toRefs å‡½æ•°ä¸åŸå§‹æ•°æ®ç›¸äº¤äº’ï¼Œä¿®æ”¹å“åº”å¼æ•°æ®ä¼šå½±å“åˆ°æºæ•°æ®ï¼Œä½†æ˜¯ä¸ä¼šæ›´æ–°è§†å›¾å±‚ã€‚<br>toRefs å‡½æ•°è¿˜å¯ä»¥ä¸å…¶ä»–å“åº”å¼æ•°æ®ç›¸äº¤äº’ï¼Œæ›´åŠ æ–¹ä¾¿å¤„ç†è§†å›¾å±‚æ•°æ®ã€‚</p>
<h1 id="toRefs-å‡½æ•°ä½¿ç”¨"><a href="#toRefs-å‡½æ•°ä½¿ç”¨" class="headerlink" title="toRefs å‡½æ•°ä½¿ç”¨"></a>toRefs å‡½æ•°ä½¿ç”¨</h1><p><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/refs%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/refs%E4%BD%BF%E7%94%A8%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/refs%E4%BD%BF%E7%94%A8%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%BF%A1%E6%81%AF.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œåœ¨æ¸²æŸ“çš„æ—¶å€™é™¤äº† .å±æ€§ ä¹‹å¤–ï¼Œè¿˜éœ€è¦ .value<br><img src="/%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æŸ¥çœ‹æ•ˆæœ<br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/refs%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%B8%B8.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ç°åœ¨å¯ä»¥çœ‹åˆ°æ•°æ®æ˜¾ç¤ºæ­£å¸¸å•¦ï¼<br>è¿™æ—¶å¯èƒ½ä¼šæœ‰äººæœ‰ç–‘é—®ï¼Œé‚£è¿™ä¸æ˜¯è¶Šæ¥è¶Šå¤æ‚äº†å—ï¼Ÿæœ¬æ¥ç›´æ¥ç‚¹å±æ€§å°±å¯ä»¥ï¼Œç°åœ¨è¿˜å¾—ç‚¹å±æ€§ç‚¹valueï¼Œä¸æ˜¯å¤šæ­¤ä¸€ä¸¾å—ï¼Ÿ<br>è¿™ç§å¤æ‚ç»“æ„æ•°æ®æˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ reactive å‡½æ•°æ¥å¤„ç†å‘€ï¼Œæ¸²æŸ“æœ€å¤šç‚¹ä¸€æ¬¡å°±å¯ä»¥ï¼Œä½†æ˜¯ toRefs å‡½æ•°å´éœ€è¦ç‚¹ä¸¤æ¬¡ã€‚<br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/reactive%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬ä¸ä½¿ç”¨ toRefs å‡½æ•°ï¼Œè€Œæ˜¯ç”¨ä¹‹å‰è¯´çš„ reactive å‡½æ•°å¤„ç†æ•°æ®ã€‚<br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/refs%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%B8%B8.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé¡µé¢æ˜¯å¯ä»¥æ­£å¸¸è§£æçš„ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜æœ‰èˆè¿‘æ±‚è¿œçš„ä½¿ç”¨ toRefs å‡½æ•°å‘¢ï¼Ÿ<br>å…¶å®æ˜¯æœ‰åŸå› çš„ã€‚<br>å…¶å® toRefs å‡½æ•°æœ€å¤§çš„ç”¨å¤„åœ¨è¿™é‡Œï¼<br>æˆ‘ä»¬è¿™ä¸ª boy å¯¹è±¡é‡Œé¢åªæœ‰ä¸¤ä¸ªå‚æ•°æ¯”è¾ƒå°‘ï¼Œå¦‚æœæˆ‘ä»¬è¿™ä¸ªå¯¹è±¡é‡Œé¢æœ‰åä¸ªå‚æ•°æˆ–è€…æ˜¯æ›´å¤šçš„è¯ï¼Œæ¯æ¬¡å±•ç¤ºçš„æ—¶å€™éƒ½å¾—å†™é‚£ä¹ˆå¤šéçš„ boy ç‚¹ï¼Œæ˜¯ä¸æ˜¯å¾ˆéº»çƒ¦å‘¢ï¼Ÿæ‰€ä»¥è¯´ä½¿ç”¨ toRefs å‡½æ•°å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œçœ‹ä¸‹é¢çš„ä»£ç ã€‚<br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/refs%E8%A7%A3%E5%86%B3%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>åœ¨ return æŠ›å‡º reactive çš„æ—¶å€™ï¼Œä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å’Œ toRefs å‡½æ•°ï¼Œå°±å¯ä»¥å®ç°ç›´æ¥å†™å±æ€§çš„æ–¹å¼å±•ç¤ºæ•°æ®äº†ã€‚<br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/refs%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%B8%B8.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ä½†æ˜¯å‘¢ï¼Œæ·±å±‚æ¬¡çš„å¯¹è±¡ä¾æ—§éœ€è¦é€šè¿‡ç‚¹æ¥å®ç°ã€‚<br>ä¹Ÿè®¸ä½ è¿˜æœ‰ç–‘é—®ï¼Œç›´æ¥æ‰©å±•è¿ç®— reactive å‡½æ•°ä¹Ÿè¡Œå•Šï¼Œä¸ºå•¥è¦å¥—ä¸Š toRefs å‡½æ•°ã€‚<br>è®°ä½ä¸€ç‚¹ï¼ŒtoRefs å‡½æ•°ä¿®æ”¹ï¼ŒåŸå§‹æ•°æ®è¢«æ”¹å˜ï¼Œé¡µé¢ä¸ä¼šè¢«è§¦å‘ã€‚<br>çœ‹ä¸‹é¢ä»£ç ï¼š<br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/14/Vue3toRef%E5%92%8CtoRefs%E5%87%BD%E6%95%B0/%E6%95%B0%E6%8D%AE%E6%BA%90%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ä»æ‰“å°ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼ŒåŸå§‹æ•°æ®è¢«æ”¹å˜ï¼Œé¡µé¢æ²¡æœ‰è¢«è§¦å‘ã€‚ä½†ä»å†™æ³•ä¸Šåº”è¯¥å¯ä»¥æ³¨æ„åˆ°ï¼ŒtoRefs è¿”å›çš„å¯¹è±¡ï¼Œéšä¾¿è§£ã€éšä¾¿æ„ï¼Œä¸æ¯«ä¸ä¼šå½±å“å€¼çš„å“åº”æ€§ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å¦‚æœæƒ³è®©å“åº”å¼æ•°æ®å’Œä»¥å‰çš„æ•°æ®å…³è”èµ·æ¥ï¼Œå¹¶ä¸”æƒ³åœ¨æ›´æ–°å“åº”å¼æ•°æ®çš„æ—¶å€™ä¸æ›´æ–°è§†å›¾ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ toRef å‡½æ•°ã€‚<br>å¦‚æœå¸Œæœ›å°†å¯¹è±¡çš„å¤šä¸ªå±æ€§éƒ½å˜æˆå“åº”å¼æ•°æ®ï¼Œå¹¶ä¸”è¦æ±‚å“åº”å¼æ•°æ®å’ŒåŸå§‹æ•°æ®å…³è”ï¼Œå¹¶ä¸”æ›´æ–°å“åº”å¼æ•°æ®çš„æ—¶å€™ä¸æ›´æ–°è§†å›¾ï¼Œå°±ä½¿ç”¨ toRefs å‡½æ•°ç”¨äºæ‰¹é‡è®¾ç½®å¤šä¸ªæ•°æ®ä¸ºå“åº”å¼æ•°æ®ã€‚å› ä¸º toRef å‡½æ•°ä¸€æ¬¡ä»…èƒ½è®¾ç½®ä¸€ä¸ªæ•°æ®ã€‚<br>toRefs å‡½æ•°æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå®ƒä¼šéå†å¯¹è±¡èº«ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œç„¶åæŒ¨ä¸ªè°ƒç”¨ toRef å‡½æ•°æ‰§è¡Œã€‚</p>
]]></content>
      <categories>
        <category>vue3</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3ä¾¦å¬å™¨watch</title>
    <url>/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/</url>
    <content><![CDATA[<p>å­¦è¿‡ vue2 çš„å°ä¼™ä¼´ä»¬è‚¯å®šå­¦ä¹ è¿‡ä¾¦å¬å™¨ï¼Œä¸»è¦æ˜¯ç”¨æ¥ç›‘å¬é¡µé¢æ•°æ®æˆ–è€…æ˜¯è·¯ç”±çš„å˜åŒ–ï¼Œæ¥æ‰§è¡Œç›¸åº”çš„æ“ä½œï¼Œåœ¨ vue3é‡Œé¢å‘¢ï¼Œä¹Ÿæœ‰ä¾¦å¬å™¨çš„ç”¨æ³•ï¼ŒåŠŸèƒ½åŸºæœ¬ä¸€æ ·ã€‚ ä¾¦å¬å™¨æ˜¯å¸¸ç”¨çš„ Vue API ä¹‹ä¸€ï¼Œå®ƒç”¨äºç›‘å¬ä¸€ä¸ªæ•°æ®å¹¶åœ¨æ•°æ®å˜åŠ¨æ—¶åšä¸€äº›è‡ªå®šä¹‰é€»è¾‘</p>
<h1 id="watch-ä¾¦å¬å™¨ä½¿ç”¨"><a href="#watch-ä¾¦å¬å™¨ä½¿ç”¨" class="headerlink" title="watch ä¾¦å¬å™¨ä½¿ç”¨"></a>watch ä¾¦å¬å™¨ä½¿ç”¨</h1><p>watch API ä½¿ç”¨ï¼Œè‡³å°‘éœ€è¦æŒ‡å®šä¸¤ä¸ªå‚æ•°ï¼š source å’Œ callbackï¼Œå…¶ä¸­ callback è¢«æ˜ç¡®æŒ‡å®šåªèƒ½ä¸ºå‡½æ•°ï¼Œæ‰€ä»¥ä¸åŒæ˜¯ç”¨æ–¹å¼çš„å·®åˆ«å…¶å®åªåœ¨ source<br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E4%B8%80%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ä¸Šé¢çš„ä»£ç æ˜¯é¡µé¢ä¸Šæœ‰ä¸€ä¸ªæ•°å­—ï¼Œç‚¹å‡»æŒ‰é’®ä¸€ä¸‹ï¼Œæ•°å­—åŠ ä¸€ï¼Œç„¶åä¾¦å¬å™¨ä¾¦å¬æ•°å­—çš„å˜åŒ–ï¼Œæ‰“å°å‡ºä¾¦å¬çš„æœ€æ–°å€¼å’Œæ—§å€¼ã€‚<br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E4%B8%80%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E4%B8%80%E6%8E%A7%E5%88%B6%E5%8F%B0.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ä¸Šè¾¹æ˜¯ vue3 ä¾¦å¬å™¨çš„ç®€å•æ¡ˆä¾‹ï¼Œä¾¦å¬å™¨å’Œè®¡ç®—å±æ€§ä¸€æ ·ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªä¾¦å¬å™¨ï¼Œè¿™ä¸ªæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚<br>watch API è‡³å°‘éœ€è¦æŒ‡å®šä¸¤ä¸ªå‚æ•°: source å’Œ callbackã€‚<br>é€šè¿‡ä¸Šè¾¹çš„æ¡ˆä¾‹æˆ‘ä»¬çœ‹åˆ°äº†ï¼Œç¡®å®æ˜¯ä¸¤ä¸ªï¼Œsource æ˜¯ç›‘å¬çš„æ•°æ®ï¼Œcallbackæ˜¯ç›‘å¬å›è°ƒï¼Œé‚£ä¸ºå•¥è¯´æ˜¯è‡³å°‘å‘¢ï¼Ÿå› ä¸ºä»–è¿˜æœ‰ç¬¬ä¸‰ä¸ªå‚æ•° â€”â€” é…ç½®å¯¹è±¡ã€‚</p>
<p>åœ¨ vue2 é‡Œé¢ï¼Œæˆ‘ä»¬æ‰“å¼€é¡µé¢å°±æƒ³è®©ä¾¦å¬å™¨ç«‹å³æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨ç¬¬ä¸€æ¬¡æ•°æ®æ”¹å˜çš„æ—¶å€™æ‰å¼€å§‹æ‰§è¡Œï¼Œè¿™æ—¶å€™æœ‰ä¸€ä¸ªå‚æ•°å« immediate ï¼Œè®¾ç½®äº†è¿™ä¸ªå‚æ•°ï¼Œåˆ›å»ºç¬¬ä¸€æ¬¡å°±æ‰§è¡Œï¼Œvue3 åŒæ ·å¯ä»¥ä½¿ç”¨ã€‚</p>
<p>æ¡ˆä¾‹ä¸­åˆ·æ–°æ‰§è¡Œçš„æ—¶å€™å‘ç°ï¼Œåœ¨ç‚¹å‡»æŒ‰é’®ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯ num åˆ›å»ºçš„æ—¶å€™ï¼Œä¾¦å¬å™¨æ˜¯æ²¡æœ‰æ‰§è¡Œçš„ï¼Œæ‰€ä»¥åŠ ä¸Š immediate å‚æ•°ï¼Œå°±å¯ä»¥è®©ä¾¦å¬å™¨ç«‹å³æ‰§è¡Œæ“ä½œã€‚<br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E4%B8%80%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E4%B8%80%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿˜æ²¡æœ‰ç‚¹å‡»æŒ‰é’®è®© num åŠ ä¸€çš„æ—¶å€™ï¼Œæ§åˆ¶å°å°±æœ‰æ•°æ®æ‰“å°äº†ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå°±æ˜¯å› ä¸ºæˆ‘ä»¬åŠ äº† immediate ä¸º trueï¼Œè®©ä¾¦å¬å™¨ç«‹å³æ‰§è¡Œã€‚æ§åˆ¶å°è¾“å‡ºæœ€æ–°çš„å€¼ä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆå§‹åŒ–çš„å€¼1ï¼Œæ—§å€¼æ²¡æœ‰ï¼Œæ‰€ä»¥è¾“å‡ºäº† undefinedã€‚</p>
<h1 id="ä¾¦å¬å™¨ç›‘å¬-reactive"><a href="#ä¾¦å¬å™¨ç›‘å¬-reactive" class="headerlink" title="ä¾¦å¬å™¨ç›‘å¬ reactive"></a>ä¾¦å¬å™¨ç›‘å¬ reactive</h1><p><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E7%9B%91%E5%90%ACreactive%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E7%9B%91%E5%90%ACreactive%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>åœ¨ç›‘å¬æ•´ä¸ª reactive å“åº”å¼å¯¹è±¡çš„æ—¶å€™ï¼Œç¡®å®å½“é‡Œé¢çš„å±æ€§å€¼å‘ç”Ÿæ”¹å˜äº†ä¹‹åå¯ä»¥è¢«ä¾¦å¬å™¨æ£€æµ‹åˆ°ï¼Œä½†æ˜¯ newVal å’Œ oldVal çš„å€¼éƒ½æ˜¯æ–°çš„ï¼Œé»˜è®¤æ˜¯10ï¼Œç‚¹å‡»ä¹‹åï¼Œæ–°å€¼æ˜¯ 11 å¾ˆæ­£å¸¸ï¼Œä½†æ˜¯æ—§å€¼ä¸åº”è¯¥æ˜¯ 10 å—ï¼Ÿä¸ºä»€ä¹ˆè¿™é‡Œæ—§å€¼å’Œæ–°å€¼ä¸€æ ·ä¹Ÿæ˜¯ 11 å‘¢ï¼Ÿ<br>å¦‚æœç›‘å¬æ•´ä¸ª reactive æ•°æ®çš„è¯ï¼Œåªèƒ½å›è°ƒåˆ°æœ€æ–°çš„å€¼ï¼Œè·å–ä¸åˆ°æ—§çš„å€¼ã€‚<br>å¦‚æœæˆ‘ä¿®æ”¹ageå±æ€§ï¼Œæˆ‘å°±è¦è·å–ageæ—§çš„å€¼æ€ä¹ˆåŠï¼Ÿå…¶å®æˆ‘ä»¬åªéœ€è¦ç›‘å¬numä¸‹é¢çš„ age å°±å¯ä»¥äº†ã€‚<br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E4%BA%8C%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬ç›‘å¬å¯¹è±¡ç›´æ¥æ˜¯ num.ageï¼Œ ç›‘å¬å¹´é¾„å±æ€§å€¼<br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E4%BA%8C%E8%AD%A6%E5%91%8A.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¾¦å¬å™¨ç›´æ¥æŠ¥äº†ä¸€ä¸ªè­¦å‘Šï¼Œå•¥æ„æ€å‘¢ï¼Œå…¶å®ä¸èƒ½ç›´æ¥è¿™æ ·ç›‘å¬ã€‚<br>å½“æˆ‘ä»¬éœ€è¦ç›‘å¬æŸä¸ªå¯¹è±¡å±æ€§çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥å¯¹è±¡ç‚¹å±æ€§çš„æ–¹å¼è¿›è¡Œç›‘å¬ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªgetteræ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ç®­å¤´å‡½æ•°è¿›è¡Œç›‘å¬ã€‚<br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E4%BA%8C%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E4%BA%8C%E4%BF%AE%E6%94%B9%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>é€šè¿‡ç®­å¤´å‡½æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°å¯¹è±¡å±æ€§çš„ç›‘å¬ã€‚<br>å¾ˆå¤šäººè¯´ï¼Œvue2 åœ¨ç›‘å¬å¯¹è±¡çš„æ—¶å€™éœ€è¦å¯¹ä¾¦å¬å™¨è®¾ç½®æ·±åº¦ä¾¦å¬ï¼Œä¸ºä»€ä¹ˆ vue3 è¿™ä¸ªä¸éœ€è¦å‘¢ï¼Ÿå› ä¸ºå®ƒç›‘å¬å“åº”å¼å¯¹è±¡ï¼Œé»˜è®¤å°±æ˜¯æ·±åº¦ç›‘å¬ã€‚ä½†æ˜¯ï¼Œå¦‚æœç›‘å¬çš„æ˜¯æ·±åº¦åµŒå¥—å¯¹è±¡æˆ–æ•°ç»„ä¸­çš„ property å˜åŒ–æ—¶ï¼Œä»ç„¶éœ€è¦ deep é€‰é¡¹è®¾ç½®ä¸º trueã€‚<br>æˆ‘ä»¬ç›‘å¬æ·±å±‚åµŒå¥—çš„ time å±æ€§å€¼ã€‚<br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E4%B8%89%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>å‘ç°ç‚¹å‡»ä¹‹åæ²¡æœ‰ç›‘å¬åˆ°<br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E4%B8%89%E6%8A%A5%E9%94%99.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>è¿™ä¸ªæ—¶å€™å°±å¯ä»¥åŠ ä¸Š deep æ·±åº¦ç›‘å¬ã€‚<br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E4%B8%89%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>åŠ ä¸Šæ·±åº¦ç›‘å¬ { deep:true }<br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%99%A8%E4%B8%89%E4%BF%AE%E6%94%B9%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰“å°å‡ºä¿¡æ¯æ¥äº†ï¼Œæœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œæ·±åº¦ä¾¦å¬éœ€è¦éå†è¢«ä¾¦å¬å¯¹è±¡ä¸­çš„æ‰€æœ‰åµŒå¥—çš„å±æ€§ï¼Œå½“ç”¨äºå¤§å‹æ•°æ®ç»“æ„æ—¶ï¼Œå¼€é”€å¾ˆå¤§ã€‚å› æ­¤è¯·è¦ç•™æ„æ€§èƒ½ã€‚</p>
<p>ç›‘å¬å¤šä¸ªå‚æ•°æ‰§è¡Œå„è‡ªé€»è¾‘<br>æ¯”å¦‚è¯´æˆ‘ä»¬éœ€è¦ç›‘å¬å¤šä¸ªå‚æ•°ï¼Œå‡è®¾ä¸¤ä¸ªå“ˆï¼Œç„¶åæ¯ä¸ªå‚æ•°ç›‘å¬åˆ°ä¹‹åï¼Œæ‰§è¡Œçš„é€»è¾‘æ˜¯ä¸ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå¤šä¸ªä¾¦å¬å™¨æ¥åˆ†åˆ«ç›‘å¬<br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E5%A4%9A%E4%B8%AA%E4%BE%A6%E5%90%AC%E5%99%A8%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>ç›‘å¬å¤šä¸ªå‚æ•°æ‰§è¡Œç›¸åŒé€»è¾‘<br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ä¿®æ”¹ name å’Œ age çš„å€¼<br><img src="/2022/10/18/Vue3%E4%BE%A6%E5%90%AC%E5%99%A8watch/%E4%BE%A6%E5%90%AC%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
]]></content>
      <categories>
        <category>vue3</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>Vuexçš„namespacedå±æ€§</title>
    <url>/2023/04/05/Vuex%E7%9A%84namespaced%E5%B1%9E%E6%80%A7/</url>
    <content><![CDATA[<p>ä¸¾ä¸ªä¾‹å­è¯•ä¸€ä¸‹</p>
<h1 id="namespacedä¸ºfalseæ—¶"><a href="#namespacedä¸ºfalseæ—¶" class="headerlink" title="namespacedä¸ºfalseæ—¶"></a>namespacedä¸ºfalseæ—¶</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// æ¨¡å—test</span><br><span class="line">export default &#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">        name: &#x27;zb&#x27;,</span><br><span class="line">        age: 18</span><br><span class="line">    &#125;,</span><br><span class="line">    getters: &#123;</span><br><span class="line">        ageDouble(state)&#123;</span><br><span class="line">            return (state.age)*2</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mutations: &#123;</span><br><span class="line">        addAge(state, num)&#123;</span><br><span class="line">            state.age += num </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    actions: &#123;</span><br><span class="line">        addAge(context, num)&#123;</span><br><span class="line">            context.commit(&#x27;addAge&#x27;, num)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// åœ¨store/index.jsä¸­å¼•å…¥å¹¶æ³¨å†Œ</span><br><span class="line">import test from &#x27;./modules/test&#x27;   // å¼•å…¥</span><br><span class="line">**ç•¥**</span><br><span class="line">modules: &#123;</span><br><span class="line">    test        // æ³¨å†Œ</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>namespacedå±æ€§é»˜è®¤ä¸ºfalseï¼Œå‘½åç©ºé—´é»˜è®¤æ˜¯å…³é—­çš„ï¼Œå³æ¨¡å—å†…éƒ¨çš„ actionã€mutation å’Œ getter æ˜¯æ³¨å†Œåœ¨å…¨å±€å‘½åç©ºé—´çš„ã€‚</p>
<h2 id="ä½¿ç”¨æ¨¡å—testçš„stateæ•°æ®"><a href="#ä½¿ç”¨æ¨¡å—testçš„stateæ•°æ®" class="headerlink" title="ä½¿ç”¨æ¨¡å—testçš„stateæ•°æ®"></a>ä½¿ç”¨æ¨¡å—testçš„stateæ•°æ®</h2><p>this.$store.state.test.age</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; mapState &#125; from &#x27;vuex&#x27;;</span><br><span class="line">computed: &#123;</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      testName: state=&gt;state.test.name,</span><br><span class="line">      testAge: state=&gt;state.test.age</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">this.testName</span><br><span class="line">this.testAge</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨æ¨¡å—testçš„gettersï¼Œmutationï¼Œaction"><a href="#ä½¿ç”¨æ¨¡å—testçš„gettersï¼Œmutationï¼Œaction" class="headerlink" title="ä½¿ç”¨æ¨¡å—testçš„gettersï¼Œmutationï¼Œaction"></a>ä½¿ç”¨æ¨¡å—testçš„gettersï¼Œmutationï¼Œaction</h2><p>è°ƒç”¨æ¨¡å—testçš„gettersï¼Œmutationsï¼Œactionså’Œstore/index.jsä¸‹çš„è®¡ç®—å±æ€§å’Œæ–¹æ³•æ²¡æœ‰åŒºåˆ«ï¼Œå› ä¸ºéƒ½åœ¨å…¨å±€å‘½åç©ºé—´</p>
<h3 id="getters"><a href="#getters" class="headerlink" title="getters"></a>getters</h3><p>this.$store.getters.ageDouble</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; mapGetters &#125; from &#x27;vuex&#x27;;</span><br><span class="line">computed: &#123;</span><br><span class="line">    // èµ·åˆ«å</span><br><span class="line">    ...mapGetters(&#123;</span><br><span class="line">      testAgeDouble: &#x27;ageDouble&#x27;</span><br><span class="line">    &#125;),</span><br><span class="line">    // ä¸èµ·åˆ«å</span><br><span class="line">    ...mapGetters([&#x27;ageDouble&#x27;])</span><br><span class="line">  &#125;, </span><br><span class="line">this.testAgeDouble</span><br><span class="line">this.ageDouble</span><br></pre></td></tr></table></figure>
<h3 id="mutations"><a href="#mutations" class="headerlink" title="mutations"></a>mutations</h3><p>this.$store.commit(â€˜addAgeâ€™, 2)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; mapMutations &#125; from &#x27;vuex&#x27;;</span><br><span class="line">methods:&#123;</span><br><span class="line">    // èµ·åˆ«å</span><br><span class="line">    ...mapMutations(&#123;</span><br><span class="line">      testAddAge: &#x27;addAge&#x27;</span><br><span class="line">    &#125;),</span><br><span class="line">    // ä¸èµ·åˆ«å</span><br><span class="line">    ...mapMutations([&#x27;addAge&#x27;])</span><br><span class="line">  &#125;,</span><br><span class="line">this.testAddAge(2)</span><br><span class="line">this.addAge(2)</span><br></pre></td></tr></table></figure>
<h3 id="actions"><a href="#actions" class="headerlink" title="actions"></a>actions</h3><p>this.$store.dispatch(â€˜addAgeâ€™, 2)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; mapActions &#125; from &#x27;vuex&#x27;;</span><br><span class="line">methods:&#123;</span><br><span class="line">    // èµ·åˆ«å</span><br><span class="line">    ...mapActions(&#123;</span><br><span class="line">      testAddAge: &#x27;addAge&#x27;</span><br><span class="line">    &#125;),</span><br><span class="line">    // ä¸èµ·åˆ«å</span><br><span class="line">    ...mapActions([&#x27;addAge&#x27;])</span><br><span class="line">  &#125;,</span><br><span class="line">this.testAddAge(2)</span><br><span class="line">this.addAge(2)</span><br></pre></td></tr></table></figure>
<h1 id="namespacedä¸ºtrueæ—¶"><a href="#namespacedä¸ºtrueæ—¶" class="headerlink" title="namespacedä¸ºtrueæ—¶"></a>namespacedä¸ºtrueæ—¶</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">    namespaced: true,</span><br><span class="line">    state: &#123;</span><br><span class="line">        name: &#x27;zb&#x27;,</span><br><span class="line">        age: 18</span><br><span class="line">    &#125;,</span><br><span class="line">    getters: &#123;</span><br><span class="line">        ageDouble(state)&#123;</span><br><span class="line">            return (state.age)*2</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mutations: &#123;</span><br><span class="line">        addAge(state, num)&#123;</span><br><span class="line">            state.age += num </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    actions: &#123;</span><br><span class="line">        addAge(context, num)&#123;</span><br><span class="line">            context.commit(&#x27;addAge&#x27;, num)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// åœ¨store/index.jsä¸­å¼•å…¥å¹¶æ³¨å†Œ</span><br><span class="line">import test from &#x27;./modules/test&#x27;   // å¼•å…¥</span><br><span class="line">**ç•¥**</span><br><span class="line">modules: &#123;</span><br><span class="line">    test        // æ³¨å†Œ</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>namespacedå±æ€§è®¾ä¸ºtrueæ—¶ï¼Œè¯´æ˜æ¨¡å—testæ‹¥æœ‰è‡ªå·±çš„å‘½åç©ºé—´ï¼Œå¯ä»¥é˜²æ­¢ä¸å…¶ä»–æ¨¡å—çš„è®¡ç®—å±æ€§å’Œæ–¹æ³•æ··æ‚ï¼Œçœ‹èµ·æ¥ä¹Ÿæ›´æ¸…æ™°ã€‚</p>
<h2 id="ä½¿ç”¨æ¨¡å—testçš„stateæ•°æ®-1"><a href="#ä½¿ç”¨æ¨¡å—testçš„stateæ•°æ®-1" class="headerlink" title="ä½¿ç”¨æ¨¡å—testçš„stateæ•°æ®"></a>ä½¿ç”¨æ¨¡å—testçš„stateæ•°æ®</h2><p>åŒå‘½åç©ºé—´ä¸ºfalseæ²¡æœ‰åŒºåˆ«<br>this.$store.state.test.age</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; mapState &#125; from &#x27;vuex&#x27;;</span><br><span class="line">computed: &#123;</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      testName: state=&gt;state.test.name,</span><br><span class="line">      testAge: state=&gt;state.test.age</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">this.testName</span><br><span class="line">this.testAge</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨æ¨¡å—testçš„gettersï¼Œmutationï¼Œaction-1"><a href="#ä½¿ç”¨æ¨¡å—testçš„gettersï¼Œmutationï¼Œaction-1" class="headerlink" title="ä½¿ç”¨æ¨¡å—testçš„gettersï¼Œmutationï¼Œaction"></a>ä½¿ç”¨æ¨¡å—testçš„gettersï¼Œmutationï¼Œaction</h2><h3 id="getters-1"><a href="#getters-1" class="headerlink" title="getters"></a>getters</h3><p>this.$store.getters[â€˜test/ageDoubleâ€™]</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; mapGetters &#125; from &#x27;vuex&#x27;;</span><br><span class="line">computed: &#123;</span><br><span class="line">    // èµ·åˆ«å</span><br><span class="line">    ...mapGetters(&#123;</span><br><span class="line">      testAgeDouble: &#x27;test/ageDouble&#x27;</span><br><span class="line">    &#125;),</span><br><span class="line">    // ä¸èµ·åˆ«å</span><br><span class="line">    ...mapGetters(&#x27;test&#x27;, [&#x27;ageDouble&#x27;])</span><br><span class="line">  &#125;,</span><br><span class="line">this.testAgeDouble</span><br><span class="line">this.ageDouble</span><br></pre></td></tr></table></figure>
<h3 id="mutations-1"><a href="#mutations-1" class="headerlink" title="mutations"></a>mutations</h3><p>this.$store.commit(â€˜test/addAgeâ€™, 2)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; mapMutations &#125; from &#x27;vuex&#x27;;</span><br><span class="line">methods:&#123;</span><br><span class="line">    // èµ·åˆ«å</span><br><span class="line">    ...mapMutations(&#123;</span><br><span class="line">      testAddAge: &#x27;test/addAge&#x27;</span><br><span class="line">    &#125;),</span><br><span class="line">    // ä¸èµ·åˆ«å</span><br><span class="line">    ...mapMutations(&#x27;test&#x27;, [&#x27;addAge&#x27;])</span><br><span class="line">  &#125;,</span><br><span class="line">this.testAddAge(2)</span><br><span class="line">this.addAge(2)</span><br></pre></td></tr></table></figure>
<h3 id="actions-1"><a href="#actions-1" class="headerlink" title="actions"></a>actions</h3><p>this.$store.dispatch(â€˜test/addAgeâ€™, 2)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; mapActions &#125; from &#x27;vuex&#x27;;</span><br><span class="line">methods:&#123;</span><br><span class="line">    // èµ·åˆ«å</span><br><span class="line">    ...mapActions(&#123;</span><br><span class="line">      testAddAge: &#x27;test/addAge&#x27;</span><br><span class="line">    &#125;),</span><br><span class="line">    // ä¸èµ·åˆ«å</span><br><span class="line">    ...mapActions(&#x27;test&#x27;, [&#x27;addAge&#x27;])</span><br><span class="line">  &#125;,</span><br><span class="line">this.testAddAge(2)</span><br><span class="line">this.addAge(2)</span><br></pre></td></tr></table></figure>
<p>å½“å‘½åç©ºé—´å¼€å¯ä¹‹åï¼Œå†ä½¿ç”¨æ¨¡å—testçš„è®¡ç®—å±æ€§å’Œæ–¹æ³•å°±è¦æ·»åŠ ä¸€ä¸ªæ¨¡å—åçš„å‰ç¼€ã€‚</p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vuex</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3è®¡ç®—å±æ€§</title>
    <url>/2022/10/17/Vue3%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7/</url>
    <content><![CDATA[<h1 id="computed-è®¡ç®—å±æ€§è¯´æ˜"><a href="#computed-è®¡ç®—å±æ€§è¯´æ˜" class="headerlink" title="computed è®¡ç®—å±æ€§è¯´æ˜"></a>computed è®¡ç®—å±æ€§è¯´æ˜</h1><p>computed è¡¨ç¤ºè®¡ç®—å±æ€§ï¼Œé€šå¸¸æ˜¯ç”¨æ¥è¿›è¡Œæ•°æ®å¤„ç†ã€‚<br>æ¯”å¦‚æ—¥å¸¸åœ¨æ¨¡æ¿ä¸­æˆ‘ä»¬æ¸²æŸ“æ•°æ®çš„æ—¶å€™ä¸€èˆ¬æ˜¯ä½¿ç”¨ åŒæ‹¬å· æ¥è¿›è¡Œå±•ç¤ºæ•°æ®ï¼Œä½†æ˜¯æœ‰çš„æ—¶å€™ï¼Œè·å–åˆ°çš„æ•°æ®å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ åŒæ‹¬å· ä¸­ç¼–å†™è¡¨è¾¾å¼è½¬æ¢æˆæˆ‘ä»¬éœ€è¦çš„ç±»å‹<br>ä½†æ˜¯å‘¢ï¼Œè¿™æ ·åšç®€å•çš„è¿˜å¯ä»¥ï¼Œå¦‚æœç›¸å¯¹å¤æ‚çš„æ ¼å¼åœ¨ åŒæ‹¬å· ä¸­ç¼–å†™çš„è¯å°±ä¼šé€ æˆæ¨¡æ¿ä»£ç ç¹çï¼Œä¸æ˜“ç»´æŠ¤å’Œé˜…è¯»ï¼Œæ‰€ä»¥è¿™å¹¶ä¸æ˜¯æœ€å¥½çš„ç¼–ç ä¹ æƒ¯ï¼Œå› æ­¤ï¼Œvue3 ä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº›å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œè®¡ç®—å±æ€§å°±æ˜¯å…¶ä¸­ä¸€ç§ã€‚<br>è®¡ç®—å±æ€§å¯ä»¥å¸®æˆ‘ä»¬å°†æ•°æ®è½¬æ¢æˆéœ€è¦å±•ç¤ºçš„æ•°æ®æ ¼å¼ï¼Œä¸å¿…åœ¨æ¨¡æ¿ä¸­ç¼–å†™å¤§é‡çš„è¡¨è¾¾å¼è¿›è¡Œå¤„ç†ã€‚</p>
<h1 id="è®¡ç®—å±æ€§ä½¿ç”¨"><a href="#è®¡ç®—å±æ€§ä½¿ç”¨" class="headerlink" title="è®¡ç®—å±æ€§ä½¿ç”¨"></a>è®¡ç®—å±æ€§ä½¿ç”¨</h1><p>é¦–å…ˆå‘¢ï¼Œä½¿ç”¨ computed éœ€è¦å¼•å…¥<br><img src="/2022/10/17/Vue3%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7/%E5%BC%95%E5%85%A5.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæ¡ˆä¾‹<br><img src="/2022/10/17/Vue3%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7/%E6%A1%88%E4%BE%8B%E4%B8%80.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ä½†æ˜¯æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼<br>å¦‚æœæˆ‘ä»¬ç›´æ¥ä¿®æ”¹è®¡ç®—å±æ€§çš„å€¼ä¼šæŠ¥ä¸€ä¸ªé”™è¯¯ï¼<br><img src="/2022/10/17/Vue3%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7/%E6%A1%88%E4%BE%8B%E4%BA%8C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>è¿™ä¸ªæ„æ€å°±æ˜¯è®¡ç®—å±æ€§æ˜¯åªè¯»çš„ä¸å…è®¸ä¿®æ”¹<br>å¦‚æœä¼ é€’ç»™ computed çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯ä¸€ä¸ª getter å‡½æ•°ï¼Œæˆ‘ä»¬åªèƒ½è·å–å®ƒçš„å€¼ï¼Œè€Œä¸èƒ½ç›´æ¥ä¿®æ”¹å®ƒã€‚<br>é‚£æˆ‘éœ€è¦ä¿®æ”¹è®¡ç®—å±æ€§çš„å€¼ï¼Œæˆ‘ä»¬éœ€è¦æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œåªéœ€è¦ä¼ è¿›å»ä¸€ä¸ªå¯¹è±¡ã€‚<br><img src="/2022/10/17/Vue3%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7/%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E6%B1%82%E5%92%8C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ä¹Ÿå°±æ˜¯è¯´ï¼Œè®¡ç®—å±æ€§ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œ åŒ…å«get å’Œ set å‡½æ•°ï¼Œ å°±èƒ½å®ç°åˆ›å»ºä¸€ä¸ªå¯ä»¥ä¿®æ”¹çš„è®¡ç®—å±æ€§ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ol>
<li>vue.3.0 ä¸­è¦ä»vue æŒ‰éœ€å¯¼å…¥ computed è®¡ç®—å±æ€§ã€‚</li>
<li>å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªgetter å‡½æ•°ï¼Œ ä¼šè¿”å›ä¸€ä¸ªä¸å…è®¸ä¿®æ”¹çš„è®¡ç®—å±æ€§ã€‚</li>
<li>ä½¿ç”¨ref åˆ›å»ºä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œ åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ä¸ç”¨è‡ªåŠ¨è§£å¥—ï¼Œ ç›´æ¥æ¸²æŸ“ä½¿ç”¨ã€‚</li>
<li>ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œ åŒ…å«get å’Œ set å‡½æ•°ï¼Œ å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªå¯ä»¥ä¿®æ”¹çš„è®¡ç®—å±æ€§ã€‚</li>
<li>åªå¯ä»¥è·å–å€¼ï¼Œä¸å…è®¸ä¿®æ”¹å€¼ï¼Œç›´æ¥ä½¿ç”¨ computed è®¡ç®—å±æ€§ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚</li>
<li>æ—¢å¯ä»¥è·å–å€¼ï¼Œ ä¹Ÿå¯ä»¥ä¿®æ”¹å€¼ï¼Œ computed è®¡ç®—å±æ€§ä¸­ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œ get æ–¹æ³• å’Œ set æ–¹æ³•ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>vue3</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>componentåŠ¨æ€ç»„ä»¶</title>
    <url>/2023/03/23/component%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6/</url>
    <content><![CDATA[<h1 id="ä¸€ã€ä»€ä¹ˆæ˜¯åŠ¨æ€ç»„ä»¶ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯åŠ¨æ€ç»„ä»¶ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯åŠ¨æ€ç»„ä»¶ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯åŠ¨æ€ç»„ä»¶ï¼Ÿ</h1><p>å®šä¹‰:å¤šä¸ªç»„ä»¶æŒ‚è½½åˆ°åŒä¸€ä¸ªç»„ä»¶ä¸Šï¼Œé€šè¿‡å‚æ•°åŠ¨æ€çš„åˆ‡æ¢ä¸åŒç»„ä»¶å°±æ˜¯åŠ¨æ€ç»„ä»¶ã€‚<br>ä¹¦å†™å½¢å¼ï¼š<component :is="componentName"></component><br>å†…ç½®ç»„ä»¶ï¼š<br>componentï¼šæ˜¯vueé‡Œé¢çš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ã€‚ä½œç”¨æ˜¯ï¼šé…åˆisåŠ¨æ€æ¸²æŸ“ç»„ä»¶ã€‚<br>vueå†…ç½®çš„ç»„ä»¶è¿˜åŒ…æ‹¬ï¼š<br>transitionï¼šä½œä¸ºå•ä¸ªå…ƒç´ /ç»„ä»¶çš„è¿‡æ¸¡æ•ˆæœã€‚<br>transition-groupï¼šä½œä¸ºå¤šä¸ªå…ƒç´ /ç»„ä»¶çš„è¿‡æ¸¡æ•ˆæœã€‚<br>keep-aliveï¼šåŒ…è£¹åŠ¨æ€ç»„ä»¶æ—¶ï¼Œä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹ï¼Œè€Œä¸æ˜¯é”€æ¯å®ƒä»¬ã€‚<br>slotï¼šä½œä¸ºç»„ä»¶æ¨¡æ¿ä¹‹ä¸­çš„å†…å®¹åˆ†å‘æ’æ§½ã€‚</p>
<h1 id="äºŒã€ä½¿ç”¨æ–¹å¼"><a href="#äºŒã€ä½¿ç”¨æ–¹å¼" class="headerlink" title="äºŒã€ä½¿ç”¨æ–¹å¼"></a>äºŒã€ä½¿ç”¨æ–¹å¼</h1><p>é€šè¿‡ä½¿ç”¨<component>å…ƒç´ åŠ¨æ€çš„ç»‘å®šåˆ°å®ƒçš„isç‰¹æ€§ï¼Œæ¥å®ç°åŠ¨æ€ç»„ä»¶çš„åˆ‡æ¢ã€‚<br>å¦‚æœisåŒ¹é…ä¸åˆ°ç›¸åº”çš„ç»„ä»¶çš„æ—¶å€™æ˜¯ä¸å°½è¡Œä»»ä½•domå…ƒç´ çš„æ¸²æŸ“çš„ã€‚<br>1.åœ¨ä¸åŒç»„ä»¶ä¹‹é—´è¿›è¡ŒåŠ¨æ€åˆ‡æ¢<br>componentåŠ¨æ€ç»„ä»¶å°±æ˜¯é€šè¿‡æ§åˆ¶currentTabComponentæ¥åˆ‡æ¢ä¸åŒçš„ç»„ä»¶ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div @click=&quot;reload&quot;&gt;ç‚¹å‡»åˆ‡æ¢&lt;/div&gt; </span><br><span class="line">&lt;component :is=&quot;currentTabComponent&quot;&gt;&lt;/component&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import childOne from &#x27;./childOne&#x27;</span><br><span class="line">import childTwo from &#x27;./childTwo&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    componets:&#123;</span><br><span class="line">        childOne,</span><br><span class="line">        childTwo</span><br><span class="line">    &#125;,</span><br><span class="line">    data()&#123;</span><br><span class="line">        currentTabComponent: &#x27;childOne&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        reload()&#123;</span><br><span class="line">            this.currentTabComponent = &#x27;childTwo&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h1 id="ä¸‰ã€åŠ¨æ€ç»„ä»¶çš„ç¼“å­˜"><a href="#ä¸‰ã€åŠ¨æ€ç»„ä»¶çš„ç¼“å­˜" class="headerlink" title="ä¸‰ã€åŠ¨æ€ç»„ä»¶çš„ç¼“å­˜"></a>ä¸‰ã€åŠ¨æ€ç»„ä»¶çš„ç¼“å­˜</h1><p>ä½¿ç”¨åŠ¨æ€ç»„ä»¶æ¥å›åˆ‡æ¢æ—¶ï¼Œç»„ä»¶æ˜¯è¦è¢«é”€æ¯çš„ï¼Œè‹¥ä¸æƒ³è®©æ•°æ®é”€æ¯å¯ä»¥ä½¿ç”¨<keep-alive>ï¼Œå®ƒå¯ä»¥åŒ…è£¹åŠ¨æ€ç»„ä»¶ï¼Œä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹ï¼Œè¿™æ ·å°±ä¸ä¼šè¢«é”€æ¯ã€‚å’Œ <transition> ç›¸ä¼¼ï¼Œ<keep-alive> æ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼šå®ƒè‡ªèº«ä¸ä¼šæ¸²æŸ“ä¸€ä¸ª DOM å…ƒç´ ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨çˆ¶ç»„ä»¶é“¾ä¸­ã€‚<br><keep-alive></keep-alive>åŒ…è£¹åŠ¨æ€ç»„ä»¶æ—¶ï¼Œä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹,ä¸»è¦ç”¨äºä¿ç•™ç»„ä»¶çŠ¶æ€æˆ–é¿å…é‡æ–°æ¸²æŸ“ã€‚<br>å¤§ç™½è¯:æ¯”å¦‚æœ‰ä¸€ä¸ªåˆ—è¡¨å’Œä¸€ä¸ªè¯¦æƒ…ï¼Œé‚£ä¹ˆç”¨æˆ·å°±ä¼šç»å¸¸æ‰§è¡Œæ‰“å¼€è¯¦æƒ…=&gt;è¿”å›åˆ—è¡¨=&gt;æ‰“å¼€è¯¦æƒ…â€¦è¿™æ ·çš„è¯,åˆ—è¡¨å’Œè¯¦æƒ…éƒ½æ˜¯ä¸€ä¸ªä½¿ç”¨é¢‘ç‡å¾ˆé«˜çš„é¡µé¢ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¯¹åˆ—è¡¨ç»„ä»¶ä½¿ç”¨<keep-alive></keep-alive>è¿›è¡Œç¼“å­˜ï¼Œè¿™æ ·ç”¨æˆ·æ¯æ¬¡è¿”å›åˆ—è¡¨çš„æ—¶å€™ï¼Œéƒ½èƒ½ä»ç¼“å­˜ä¸­å¿«é€Ÿæ¸²æŸ“ï¼Œè€Œä¸æ˜¯é‡æ–°æ¸²æŸ“ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;keep-alive&gt;</span><br><span class="line">    &lt;component :is=&quot;componentName&quot;&gt;&lt;/component&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>çŸ¥è¯†ç‚¹</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueé¡¹ç›®SEOä¼˜åŒ–-Nuxt</title>
    <url>/2023/04/10/Vue%E9%A1%B9%E7%9B%AESEO%E4%BC%98%E5%8C%96-Nuxt/</url>
    <content><![CDATA[<h1 id="ä¸ºä»€ä¹ˆSPAéœ€è¦SEO"><a href="#ä¸ºä»€ä¹ˆSPAéœ€è¦SEO" class="headerlink" title="ä¸ºä»€ä¹ˆSPAéœ€è¦SEO"></a>ä¸ºä»€ä¹ˆSPAéœ€è¦SEO</h1><p>é€šå¸¸æˆ‘ä»¬ç”¨å‰ç«¯æ¡†æ¶ï¼ˆè¿™é‡Œä»¥Vueä¸ºä¾‹ï¼‰äº§å‡ºçš„ä»£ç ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é¡µé¢å®é™…å±•ç¤ºçš„å†…å®¹ï¼ˆç”¨æˆ·å®é™…çœ‹åˆ°çš„å†…å®¹ï¼‰éƒ½æ˜¯é€šè¿‡jsæ¸²æŸ“å‡ºæ¥çš„ï¼Œæ‰€ä»¥æœç´¢å¼•æ“çˆ¬è™«åœ¨å¯¹æˆ‘ä»¬çš„é¡µé¢è¿›è¡Œçˆ¬å–çš„æ—¶å€™ï¼Œæ‹¿åˆ°çš„ä¹Ÿæ˜¯ä¸Šé¢çš„htmlä»£ç ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨<head></head>ä¸­æ·»åŠ <meta/>æ ‡ç­¾æ¥æ·»åŠ ä¸€äº›æè¿°ä¿¡æ¯ï¼Œä½†æ˜¯è¿œè¿œä¸å¤Ÿï¼Œæˆ‘ä»¬å®é™…å±•ç¤ºçš„å†…å®¹æœç´¢å¼•æ“çˆ¬è™«è¿˜æ˜¯æ‹¿ä¸åˆ°ï¼Œæ‰€ä»¥å°±éœ€è¦å¯¹é¡¹ç›®è¿›è¡ŒSEOä¼˜åŒ–ã€‚</p>
<h1 id="å…³äºNuxt-js"><a href="#å…³äºNuxt-js" class="headerlink" title="å…³äºNuxt.js"></a>å…³äºNuxt.js</h1><h2 id="å®˜æ–¹ä»‹ç»"><a href="#å®˜æ–¹ä»‹ç»" class="headerlink" title="å®˜æ–¹ä»‹ç»"></a>å®˜æ–¹ä»‹ç»</h2><p>ä»å¤´æ­å»ºä¸€ä¸ªæœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨æ˜¯ç›¸å½“å¤æ‚çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä¼˜ç§€çš„ç¤¾åŒºé¡¹ç›®Nuxt.jsè¿™è®©ä¸€åˆ‡å˜å¾—éå¸¸ç®€å•ã€‚Nuxtæ˜¯ä¸€ä¸ªåŸºäºVueç”Ÿæ€çš„æ›´é«˜å±‚çš„æ¡†æ¶ï¼Œä¸ºå¼€å‘æœåŠ¡ç«¯æ¸²æŸ“çš„Vueåº”ç”¨æä¾›äº†æå…¶ä¾¿åˆ©çš„å¼€å‘ä½“éªŒã€‚æ›´é…·çš„æ˜¯ï¼Œä½ ç”šè‡³å¯ä»¥ç”¨å®ƒæ¥åšä¸ºé™æ€ç«™ç”Ÿæˆå™¨ã€‚</p>
<h2 id="ç®€å•çš„ç†è§£ï¼š"><a href="#ç®€å•çš„ç†è§£ï¼š" class="headerlink" title="ç®€å•çš„ç†è§£ï¼š"></a>ç®€å•çš„ç†è§£ï¼š</h2><p>ä»£æ›¿æµè§ˆå™¨çš„å·¥ä½œ,ç¬¼ç»Ÿç†è§£å°±æ˜¯åœ¨createdæ—¶çš„è¯·æ±‚æ•°æ®å’Œé¡µé¢æ¸²æŸ“ï¼Œç¬¬äºŒç‚¹æ˜¯å½“ä½œé™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼ŒæŠŠæ¸²æŸ“å¥½çš„é¡µé¢è¿”å›ç»™ç”¨æˆ·ã€‚</p>
<h2 id="ä¼˜åŠ¿ï¼š"><a href="#ä¼˜åŠ¿ï¼š" class="headerlink" title="ä¼˜åŠ¿ï¼š"></a>ä¼˜åŠ¿ï¼š</h2><ul>
<li>çº¯é™æ€æ–‡ä»¶ï¼Œè®¿é—®é€Ÿåº¦å¿«</li>
<li>å¯¹æ¯”SSR,ä¸æ¶‰åŠæœåŠ¡å™¨è´Ÿè½½æ–¹é¢é—®é¢˜</li>
<li>é™æ€ç½‘é¡µä¸å®œé­åˆ°é»‘å®¢å·¥å…·ï¼Œå®‰å…¨æ€§é«˜<h2 id="æœåŠ¡ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ¸²æŸ“"><a href="#æœåŠ¡ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ¸²æŸ“" class="headerlink" title="æœåŠ¡ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ¸²æŸ“"></a>æœåŠ¡ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ¸²æŸ“</h2></li>
</ul>
<ol>
<li>æµè§ˆå™¨ï¼ˆå®¢æˆ·ç«¯ï¼‰é€šè¿‡AJAXå‘æœåŠ¡ç«¯ï¼ˆjava servletï¼‰å‘é€httpè¯·æ±‚æ•°æ®æ¥å£</li>
<li>æœåŠ¡ç«¯å°†è·å–çš„æ¥å£æ•°æ®å°è£…æˆJSONï¼Œå“åº”ç»™æµè§ˆå™¨</li>
<li>æµè§ˆå™¨æ‹¿åˆ°JSONå°±è¿›è¡Œæ¸²æŸ“htmlé¡µé¢ï¼Œç”ŸæˆDOMå…ƒç´ ï¼Œç„¶åå°†é¡µé¢å±•ç¤ºç»™ç”¨æˆ·<br><img src="/2023/04/10/Vue%E9%A1%B9%E7%9B%AESEO%E4%BC%98%E5%8C%96-Nuxt/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2023/04/10/Vue%E9%A1%B9%E7%9B%AESEO%E4%BC%98%E5%8C%96-Nuxt/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%B2%E6%9F%93.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><h2 id="Nuxt-jså·¥ä½œåŸç†"><a href="#Nuxt-jså·¥ä½œåŸç†" class="headerlink" title="Nuxt.jså·¥ä½œåŸç†"></a>Nuxt.jså·¥ä½œåŸç†</h2></li>
<li>æµè§ˆå™¨(å®¢æˆ·ç«¯)å‘é€httpè¯·æ±‚åˆ°Node.jsæœåŠ¡ç«¯ã€‚</li>
<li>éƒ¨ç½²åœ¨Node.jsçš„åº”ç”¨Nuxt.jsæ¥æ”¶åˆ°æµè§ˆå™¨è¯·æ±‚ï¼Œå®ƒä¼šå»è¯·æ±‚åå°æœåŠ¡ç«¯ã€‚</li>
<li>åå°æ¥å£æœåŠ¡ç«¯ä¼šå“åº”JSONæ•°æ®ï¼ŒNuxt.jsè·å–æ•°æ®åè¿›è¡ŒæœåŠ¡ç«¯æ¸²æŸ“æˆhtmlã€‚</li>
<li>ç„¶åNuxt.jså°†htmlé¡µé¢å“åº”ç»™æµè§ˆå™¨</li>
<li>æµè§ˆå™¨ç›´æ¥å°†æ¥æ”¶åˆ°htmlé¡µé¢è¿›è¡Œå±•ç¤º<br><img src="/2023/04/10/Vue%E9%A1%B9%E7%9B%AESEO%E4%BC%98%E5%8C%96-Nuxt/nuxt%E6%B8%B2%E6%9F%93.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><h3 id="é¦–å…ˆå°±æ˜¯å®‰è£…NUXTè¿™ä¸ªç®€å•ï¼Œå¤§å®¶æŒ‰ç…§å®˜ç½‘çš„æ“ä½œæ­¥éª¤å°±å¯ä»¥äº†ã€‚"><a href="#é¦–å…ˆå°±æ˜¯å®‰è£…NUXTè¿™ä¸ªç®€å•ï¼Œå¤§å®¶æŒ‰ç…§å®˜ç½‘çš„æ“ä½œæ­¥éª¤å°±å¯ä»¥äº†ã€‚" class="headerlink" title="é¦–å…ˆå°±æ˜¯å®‰è£…NUXTè¿™ä¸ªç®€å•ï¼Œå¤§å®¶æŒ‰ç…§å®˜ç½‘çš„æ“ä½œæ­¥éª¤å°±å¯ä»¥äº†ã€‚"></a>é¦–å…ˆå°±æ˜¯å®‰è£…NUXTè¿™ä¸ªç®€å•ï¼Œå¤§å®¶æŒ‰ç…§å®˜ç½‘çš„æ“ä½œæ­¥éª¤å°±å¯ä»¥äº†ã€‚</h3><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.nuxt</span><br><span class="line">1. assets //èµ„æºç›®å½• ç»„ç»‡ä¸ºç¼–è¯‘çš„é™æ€èµ„æº å¤§å®¶éƒ½æ‡‚</span><br><span class="line">      image.png</span><br><span class="line">2.components // ç»„ç»‡ Vue.js ç»„ä»¶ï¼ŒNUXTä¸ä¼šæ‰©å±•å¢å¼ºè¯¥ç›®å½•ä¸‹çš„ç»„ä»¶ï¼Œè¿™æ„å‘³ç€ç»„ä»¶ä¸èƒ½ä½¿ç”¨ </span><br><span class="line">3.asyncData æ–¹æ³•</span><br><span class="line">4.layout // å¸ƒå±€ç›®å½• å¦‚æœæ²¡æœ‰é¢å¤–é…ç½®ï¼Œç›®å½•ä¸èƒ½é‡å‘½å--ä¸å»ºè®®æ”¹å</span><br><span class="line">5.middleware // ç”¨äºå­˜æ”¾åº”ç”¨çš„ä¸­é—´ä»¶</span><br><span class="line">6.node_modules </span><br><span class="line">7.pages // é¡µé¢ç›®å½•ç”¨äºç»„ç»‡åº”ç”¨è·¯ç”±åŠè§†å›¾ï¼ŒNUXTä¼šè¯»å–è¯¥ç›®å½•ä¸‹æ‰€æœ‰.vueæ–‡ä»¶å¹¶è‡ªåŠ¨ç”Ÿæˆè·¯ç”±ï¼ˆè·¯ç”±æ–‡ä»¶åœ¨ .nuxt/router.jsï¼‰</span><br><span class="line">      index.vue</span><br><span class="line">8.plugins // æ’ä»¶ç›®å½• ç”¨äºç»„ç»‡é‚£äº›éœ€è¦åœ¨è·Ÿvue.jsåº”ç”¨ï¼Œå®ä¾‹åŒ–ä¹‹å‰éœ€è¦è¿è¡Œçš„Javascriptæ’ä»¶</span><br><span class="line">9.static // ç”¨äºå­˜æ”¾åº”ç”¨çš„é™æ€æ–‡ä»¶ï¼Œæ­¤ç±»æ–‡ä»¶ä¸ä¼šè¢«NUXT.jsè°ƒç”¨Webpack è¿›è¡Œæ„å»ºç¼–è¯‘å¤„ç†ã€‚æœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šæ˜ å°„è‡³åº”ç”¨çš„æ ¹è·¯å¾„  `/`  ä¸‹ã€‚ä¾‹å¦‚ /static/root.txt æ˜ å°„è‡³ /root.txt</span><br><span class="line">10.store // Nuxt.js æ¡†æ¶é›†æˆäº† [Vuex çŠ¶æ€æ ‘] çš„ç›¸å…³åŠŸèƒ½é…ç½®ï¼Œåœ¨  `store`  ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª  `index.js`  æ–‡ä»¶å¯æ¿€æ´»è¿™äº›é…ç½®ã€‚ æ–°å»ºä¸€ä¸ªindex.js è¿™äº‹å°±ç®—å¦¥äº†</span><br><span class="line">11.nuxt.config.js // æ–‡ä»¶ç”¨äºç»„ç»‡ Nuxt.js åº”ç”¨çš„ä¸ªæ€§åŒ–é…ç½®ï¼Œä»¥ä¾¿è¦†ç›–é»˜è®¤é…ç½® ä¸è¦gai&#x27;ming&#x27;zi</span><br><span class="line">12.package.json // ç”¨äºæè¿°åº”ç”¨çš„ä¾èµ–å…³ç³»å’Œå¯¹å¤–æš´éœ²çš„è„šæœ¬æ¥å£</span><br></pre></td></tr></table></figure>
<h3 id="NUXTå¼€å‘ä¸­éœ€è¦æ³¨æ„å“ªäº›ã€‚"><a href="#NUXTå¼€å‘ä¸­éœ€è¦æ³¨æ„å“ªäº›ã€‚" class="headerlink" title="NUXTå¼€å‘ä¸­éœ€è¦æ³¨æ„å“ªäº›ã€‚"></a>NUXTå¼€å‘ä¸­éœ€è¦æ³¨æ„å“ªäº›ã€‚</h3><h4 id="é™æ€èµ„æºçš„å¼•å…¥å’Œè·¯ç”±"><a href="#é™æ€èµ„æºçš„å¼•å…¥å’Œè·¯ç”±" class="headerlink" title="é™æ€èµ„æºçš„å¼•å…¥å’Œè·¯ç”±"></a>é™æ€èµ„æºçš„å¼•å…¥å’Œè·¯ç”±</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//å¼•å…¥é™æ€èµ„æº å’Œ è·³è½¬è·¯ç”±</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!--æˆ‘ä»¬ä¸éœ€è¦å»é…ç½® @å»æŒ‡å‘æ ¹ç›®å½•  NUXTä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ --&gt;</span><br><span class="line">  &lt;img src=&quot;~/assets/image.png&quot; /&gt;</span><br><span class="line">  &lt;!--NUXTä¸­æˆ‘ä»¬ä¸éœ€è¦å»å†™è·¯ç”±è¡¨  ğŸ‘‡ &#x27;/&#x27;æŒ‡çš„æ˜¯ page/index.vue å…¶å®ƒè¯­æ³•å’Œæ—¥å¸¸æ— æ™  --&gt;</span><br><span class="line">  &lt;nuxt-link :to=&quot;&#123;name:&#x27;userPage&#x27;,query:&#123;id:&#x27;111&#x27;&#125;&#125;&quot;&gt;ä¸ªäººä¸­å¿ƒ&lt;/nuxt-link&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h4 id="asyncData"><a href="#asyncData" class="headerlink" title="asyncData"></a>asyncData</h4>Nuxt.jsæ‰©å±•äº†Vue.js å¢åŠ äº†asyncDataçš„æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨æ¸²æŸ“ç»„ä»¶ä¹‹å‰å¼‚æ­¥è·å–æ•°æ®ï¼ŒasyncDataæ–¹æ³•ä¼šåœ¨ç»„ä»¶ï¼ˆåªé™äºé¡µé¢ç»„ä»¶ï¼‰æ¯æ¬¡åŠ è½½ä¹‹å‰è¢«è°ƒç”¨ï¼Œå®ƒå¯ä»¥åœ¨æœåŠ¡ç«¯æˆ–è·¯ç”±æ›´æ–°ä¹‹å‰è¢«è°ƒç”¨ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªå‚æ•°contextè¢«è®¾å®šä¸ºå½“å‰é¡µçš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">async asyncData(&#123; params &#125;)&#123;  // params å°±æ˜¯ä¼ è¿›æ¥çš„å€¼</span><br><span class="line">//asyncData å‡½æ•°å»æ‰§è¡Œæˆ‘ä»¬çš„å¼‚æ­¥æ“ä½œ å½“æˆ‘ä»¬è·å–åˆ°æ¥å£è¿”å›çš„å†…å®¹æ˜¯ æ­¤æ—¶æˆ‘ä»¬Vueè¿˜æ²¡æœ‰å®ä¾‹åŒ– æ‰€ä»¥thisè·å–ä¸åˆ°  æˆ‘ä»¬é€šè¿‡è¿”å› æ–¹æ³• å»è·å–  å› æ­¤æ ‡ç­¾å†…å¦‚æœéœ€è¦å±•ç¤ºå†…å®¹  &#123;&#123;info.XXX&#125;&#125;</span><br><span class="line">	const data = await $axios.$get(&#x27;/api/user&#x27;)</span><br><span class="line">	return &#123;data&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="nuxtjs-axios"><a href="#nuxtjs-axios" class="headerlink" title="@nuxtjs/axios"></a>@nuxtjs/axios</h4>æˆ‘ä»¬åœ¨asyncDataä¸­è°ƒç”¨æ¥å£ï¼Œåœ¨Nuxt.jså®˜æ–¹æä¾›äº†@nuxtjs/axiosæ¨¡å—ï¼Œæ­¤æ¨¡å—è¿˜åŒ…å«äº†axiosã€@nuxtjs/proxyï¼ˆè§£å†³å¼‚æ­¥,è¿›è¡Œä»£ç†è½¬å‘ï¼‰æ¨¡å—ã€‚<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 1.å®‰è£…@nuxtjs/axiosï¼š</span><br><span class="line">npm install @nuxtjs/axios</span><br><span class="line">// 2.åœ¨nuxt.config.jsä¸­é…ç½®axios</span><br><span class="line">module.exports=&#123;</span><br><span class="line">	modules:[&#x27;@nuxtjs/axios&#x27;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¸­é—´ä»¶"><a href="#ä¸­é—´ä»¶" class="headerlink" title="ä¸­é—´ä»¶"></a>ä¸­é—´ä»¶</h4>ä¸­é—´ä»¶å…è®¸æ‚¨å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°è¿è¡Œåœ¨ä¸€ä¸ªé¡µé¢æˆ–ä¸€ç»„é¡µé¢æ¸²æŸ“ä¹‹å‰ã€‚å¯ç”¨äºæƒé™åˆ¤æ–­ï¼Œæœ‰æƒé™æ‰å¯è®¿é—®å¯¹åº”é¡µé¢<br>ä¸­é—´ä»¶åº”æ”¾ç½®åœ¨middleware/ ç›®å½•ã€‚æ–‡ä»¶åçš„åç§°å°†æˆä¸ºä¸­é—´ä»¶åç§°ï¼ˆmiddleware/auth.jså°†æˆä¸ºauthä¸­é—´ä»¶ï¼‰<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//åˆ›å»ºæƒé™ä¸­é—´ä»¶</span><br><span class="line">//åœ¨ middleware/ ä¸‹åˆ›å»º auth.js æ–‡ä»¶ï¼Œå…¶ä¸­authå°±æ˜¯ä¸­é—´ä»¶çš„åç§°ã€‚</span><br><span class="line">//ä¸€ä¸ªä¸­é—´ä»¶æ¥æ”¶contentä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°</span><br><span class="line">export default(&#123; store, redirect &#125;) =&gt; &#123;</span><br><span class="line">	if(/* æ²¡æœ‰token */)&#123;</span><br><span class="line">		return redirect(&#x27;/&#x27;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Nuxtå¯¹Vueé¡¹ç›®é¦–é¡µè¿›è¡ŒSEOä¼˜åŒ–"><a href="#Nuxtå¯¹Vueé¡¹ç›®é¦–é¡µè¿›è¡ŒSEOä¼˜åŒ–" class="headerlink" title="Nuxtå¯¹Vueé¡¹ç›®é¦–é¡µè¿›è¡ŒSEOä¼˜åŒ–"></a>Nuxtå¯¹Vueé¡¹ç›®é¦–é¡µè¿›è¡ŒSEOä¼˜åŒ–</h1>Nuxt.js é›†æˆäº†ä»¥ä¸‹ç»„ä»¶/æ¡†æ¶ï¼Œç”¨äºå¼€å‘å®Œæ•´è€Œå¼ºå¤§çš„Web åº”ç”¨ï¼š</li>
</ol>
<ul>
<li>Vue 2</li>
<li>Vue-Router</li>
<li>Vuex(å½“é…ç½®äº†VuexçŠ¶æ€æ ‘é…ç½®é¡¹æ—¶æ‰ä¼šå¼•å…¥)</li>
<li>VueæœåŠ¡å™¨ç«¯æ¸²æŸ“ (æ’é™¤ä½¿ç”¨mode:â€™spaâ€™)</li>
<li>Vue-Meta<br>å¦å¤–ï¼ŒNuxt.jsä½¿ç”¨Webpackå’Œvue-loader ã€babel-loaderæ¥å¤„ç†ä»£ç çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥ä½œï¼ˆå¦‚æ‰“åŒ…ã€ä»£ç åˆ†å±‚ã€å‹ç¼©ç­‰ç­‰ï¼‰ã€‚<h2 id="å…·ä½“æ­¥éª¤"><a href="#å…·ä½“æ­¥éª¤" class="headerlink" title="å…·ä½“æ­¥éª¤"></a>å…·ä½“æ­¥éª¤</h2><h3 id="æ–°å»ºé¡¹ç›®"><a href="#æ–°å»ºé¡¹ç›®" class="headerlink" title="æ–°å»ºé¡¹ç›®"></a>æ–°å»ºé¡¹ç›®</h3>å› ä¸ºæ˜¯å¯¹é¡¹ç›®çš„ä¸€éƒ¨åˆ†è¿›è¡Œæ”¹é€ ï¼Œæ‰€ä»¥æ–°å»ºäº†ä¸€ä¸ªé¡¹ç›®ã€‚<br>æ–°åˆ›å»ºçš„é¡¹ç›®ç›®å½•å¤§è‡´å¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+ assets:é™æ€èµ„æº</span><br><span class="line">+ components:ç»„ä»¶ï¼Œè¯¥æ–‡ä»¶å¤¹ä¸‹çš„ç»„ä»¶ä½¿ç”¨æ—¶æ— éœ€å¼•å…¥ï¼Œç±»ä¼¼äºå·²ç»å…¨å±€æ³¨å†Œäº†ï¼Œè¿™äº›ç»„ä»¶æ— æ³•ä½¿ç”¨asyncDataã€‚</span><br><span class="line">+ layouts:ç”¨äºç»„ç»‡åº”ç”¨çš„å¸ƒå±€ç»„ä»¶ï¼Œæˆ‘ç†è§£ç±»ä¼¼äºVueé¡¹ç›®ä¸­çš„App.vue</span><br><span class="line">+ middlwware:åº”ç”¨çš„ä¸­é—´ä»¶ï¼Œè¿™ä¸ªæ²¡æœ‰ç”¨åˆ°</span><br><span class="line">+ node_modules:ä¾èµ–åŒ…</span><br><span class="line">+ pages:é¡µé¢ï¼ŒNuxt.js æ¡†æ¶è¯»å–è¯¥ç›®å½•ä¸‹æ‰€æœ‰çš„ .vue æ–‡ä»¶å¹¶è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„è·¯ç”±é…ç½®ã€‚åœ¨è¿™ä¸ªç›®å½•é‡Œä½¿ç”¨å…¶ä»–ç±»å‹çš„æ–‡ä»¶åœ¨npm run generateæ—¶å¯èƒ½ä¼šæŠ¥é”™</span><br><span class="line">+ plugins:æ’ä»¶ç›®å½•ã€‚ç”¨äºç»„ç»‡éœ€è¦å†æ ¹Vue.jsåº”ç”¨å®ä¾‹åŒ–ä¹‹å‰éœ€è¦è¿è¡Œçš„JavaScriptæ’ä»¶ã€‚åœ¨ä»»ä½• Vue ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œåªæœ‰ beforeCreate å’Œ created è¿™ä¸¤ä¸ªæ–¹æ³•ä¼šåœ¨ å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¢«è°ƒç”¨ã€‚å…¶ä»–ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä»…åœ¨å®¢æˆ·ç«¯è¢«è°ƒç”¨ã€‚</span><br><span class="line">+ static:é™æ€æ–‡ä»¶ç›®å½•ã€‚</span><br><span class="line">é™æ€æ–‡ä»¶ç›®å½• static ç”¨äºå­˜æ”¾åº”ç”¨çš„é™æ€æ–‡ä»¶ï¼Œæ­¤ç±»æ–‡ä»¶ä¸ä¼šè¢« Nuxt.js è°ƒç”¨ Webpack è¿›è¡Œæ„å»ºç¼–è¯‘å¤„ç†ã€‚æœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šæ˜ å°„è‡³åº”ç”¨çš„æ ¹è·¯å¾„ / ä¸‹ã€‚</span><br><span class="line">store</span><br><span class="line">+ VuexçŠ¶æ€æ ‘ã€‚</span><br><span class="line">Nuxt.js æ¡†æ¶é›†æˆäº† Vuex çŠ¶æ€æ ‘ çš„ç›¸å…³åŠŸèƒ½é…ç½®ï¼Œåœ¨ store ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª index.js æ–‡ä»¶å¯æ¿€æ´»è¿™äº›é…ç½®ã€‚</span><br><span class="line">+ nuxt.config.js</span><br><span class="line">nuxt.config.js æ–‡ä»¶ç”¨äºç»„ç»‡ Nuxt.js åº”ç”¨çš„ä¸ªæ€§åŒ–é…ç½®ï¼Œä»¥ä¾¿è¦†ç›–é»˜è®¤é…ç½®ã€‚</span><br><span class="line">+ å…¶ä»–</span><br><span class="line">.babelrcã€.editorconfigã€package.jsonã€package-lock.jsonç­‰ï¼Œå’Œå…¶ä»–é¡¹ç›®ä¸­åŒåæ–‡ä»¶åŠŸèƒ½ç›¸åŒã€‚</span><br><span class="line">+ åˆ«å</span><br><span class="line">~æˆ–@ =&gt; srcDir</span><br><span class="line">~~æˆ–@@ =&gt; rootDir</span><br></pre></td></tr></table></figure>
åœ¨vueæ¨¡æ¿ä¸­, å¦‚æœéœ€è¦å¼•å…¥assetsæˆ–è€…staticç›®å½•, ä½¿ç”¨<del>/assets/your_image.pngå’Œ</del>/static/your_image.pngæ–¹å¼ã€‚<h3 id="è¿ç§»æ–‡ä»¶"><a href="#è¿ç§»æ–‡ä»¶" class="headerlink" title="è¿ç§»æ–‡ä»¶"></a>è¿ç§»æ–‡ä»¶</h3>æŠŠè€é¡¹ç›®é¦–é¡µåŠå®£ä¼ é¡µçš„ä»£ç ä»¥åŠä¾èµ–çš„é™æ€æ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€äº›eslintçš„é…ç½®ï¼Œwebpacké…ç½®ç­‰ï¼Œèƒ½ç”¨çš„éƒ½æ‹¿è¿‡æ¥ï¼Œç„¶åä¿®æ”¹å¼•ç”¨è·¯å¾„ï¼Œåˆ é™¤ä¸éœ€è¦çš„ä»£ç ã€‚<br>ä¸‹é¢æ˜¯ç›®å½•çš„å¯¹åº”å…³ç³»ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+ assets:cssã€iconã€fontç­‰é™æ€èµ„æº</span><br><span class="line">+ components:é¦–é¡µåŠå®£ä¼ é¡µç”¨åˆ°çš„ç»„ä»¶</span><br><span class="line">+ layouts:App.vue</span><br><span class="line">+ middlwware</span><br><span class="line">+ node_modules:ä¾èµ–åŒ…</span><br><span class="line">+ pages:é¦–é¡µåŠå®£ä¼ é¡µæ¶‰åŠåˆ°çš„é¡µé¢ã€‚</span><br><span class="line">+ plugins:ç”¨åˆ°çš„å„ç§æ’ä»¶ã€‚</span><br><span class="line">      + axioså°è£…ï¼ˆæ²¡æœ‰ç”¨Nuxt.jsé»˜è®¤çš„@nuxtjs/axiosï¼‰</span><br><span class="line">      + elementUI</span><br><span class="line">      + å…¶ä»–ä¸€äº›ç”¨åˆ°çš„æ’ä»¶ï¼ˆvideoã€zeptoç­‰ï¼‰</span><br><span class="line">      + å·¥å…·å‡½æ•°ï¼ˆè¿™é‡Œæœ‰ç–‘é—®ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥æ”¾åœ¨assetsä¸‹é¢ï¼‰</span><br><span class="line">+ static:.icoæ–‡ä»¶</span><br><span class="line">+ store:vuexç›¸å…³æ–‡ä»¶</span><br><span class="line">+ nuxt.config.js:nuxt.config.js æ–‡ä»¶ç”¨äºç»„ç»‡ Nuxt.js åº”ç”¨çš„ä¸ªæ€§åŒ–é…ç½®ï¼Œä»¥ä¾¿è¦†ç›–é»˜è®¤é…ç½®ã€‚</span><br><span class="line">+ å…¶ä»–:.babelrcã€.editorconfigã€package.jsonã€package-lock.jsonç­‰ï¼Œå’Œå…¶ä»–åŠŸèƒ½ç›¸åŒã€‚</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h3>è¿™éƒ¨åˆ†æ˜¯é‡ç‚¹ï¼Œå› ä¸ºNuxtå¾ˆå¤šä¸œè¥¿å…¶å®åœ¨ä¸€å¼€å§‹å°±éƒ½é…ç½®å¥½äº†ï¼Œæ¯”å¦‚åƒå®ƒçš„ç›®å½•ç»“æ„ï¼Œå®˜æ–¹éƒ½å»ºè®®ä¸€èˆ¬ä¸è¦ä¿®æ”¹ã€‚å¦‚æœæƒ³ä¿®æ”¹é…ç½®çš„è¯ï¼Œå¿…é¡»åœ¨nuxt.config.jsä¸­è¿›è¡Œä¿®æ”¹ã€‚Nuxtå…³äºé…ç½®çš„æ–‡æ¡£å¾ˆå¤šï¼Œè¿™é‡Œç›´è¯´æˆ‘ç”¨åˆ°çš„éƒ¨åˆ†ã€‚<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> webpack <span class="keyword">from</span> <span class="string">&#x27;webpack&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">ssr</span>: <span class="literal">false</span>, <span class="comment">// æ˜¯å¦å¯ç”¨æœåŠ¡ç«¯æ¸²æŸ“ã€‚é»˜è®¤ä¸ºfalseï¼Œåˆ›å»ºæ—¶å¯é€‰æ‹©</span></span><br><span class="line">  <span class="attr">target</span>: <span class="string">&#x27;static&#x27;</span>, <span class="comment">// serverï¼šç”¨äºæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œstaticï¼šç”¨äºé™æ€ç½‘ç«™</span></span><br><span class="line">  <span class="attr">root</span>: &#123;</span><br><span class="line">    <span class="attr">base</span>: <span class="string">&#x27;/page/&#x27;</span> <span class="comment">// åº”ç”¨ç¨‹åºçš„åŸºæœ¬URLï¼Œå¦‚æœåœ¨æ­¤è·¯å¾„ä¸‹æä¾›äº†æ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œåˆ™åº”è¯¥ä½¿ç”¨root.baseã€‚ä½¿ç”¨ä¹‹åï¼Œè®¿é—®***.com/homeè·¯ç”±åº”è¯¥ä½¿ç”¨***.com/page/home</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">head</span>: &#123; <span class="comment">// ä¸€äº›é™æ€èµ„æºçš„å¼•å…¥ï¼Œå¡«å†™å¤´ä¿¡æ¯</span></span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;nuxt-demo&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>: [</span><br><span class="line">      &#123; <span class="attr">charset</span>: <span class="string">&#x27;utf-8&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&#x27;viewport&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;width=device-width, initial-scale=1&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">hid</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;description&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;&#x27;</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">script</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">src</span>: <span class="string">&#x27;https://cdn.bootcdn.net/ajax/libs/zepto/1.2.0/zepto.js&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">css</span>: [ <span class="comment">// å…¨å±€ä½¿ç”¨çš„css</span></span><br><span class="line">    <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;~/assets/css/common.css&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;~/assets/css/element-variables.scss&#x27;</span>,</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">plugins</span>: [ <span class="comment">//  ä½¿ç”¨æ’ä»¶</span></span><br><span class="line">    &#123;<span class="attr">src</span>: <span class="string">&#x27;~plugins/element-ui&#x27;</span>&#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">src</span>: <span class="string">&#x27;~plugins/log.js&#x27;</span>,</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&#x27;client&#x27;</span> <span class="comment">// clientæˆ–serverï¼šæ–‡ä»¶ä»…åŒ…å«åœ¨å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨ç«¯ï¼Œå¦‚æœä»£ç ä¸­ä½¿ç”¨äº†windowæˆ–documentç­‰æµè§ˆå™¨ç«¯æ‰æœ‰çš„APIï¼Œåªèƒ½ä½¿ç”¨client</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">src</span>: <span class="string">&#x27;~plugins/route.js&#x27;</span>,</span><br><span class="line"></span><br><span class="line"> <span class="attr">mode</span>: <span class="string">&#x27;client&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">components</span>: <span class="literal">true</span>, <span class="comment">// è‡ªåŠ¨å¼•å…¥ç»„ä»¶</span></span><br><span class="line">  <span class="attr">buildModules</span>: [ <span class="comment">// æŸäº›æ¨¡å—ä»…åœ¨å¼€å‘å’Œæ„å»ºæœŸé—´éœ€è¦ã€‚ä½¿ç”¨buildModulesæœ‰åŠ©äºåŠ å¿«ç”Ÿäº§å¯åŠ¨é€Ÿåº¦ï¼Œå¹¶å¤§å¤§å‡å°‘node_modulesç”Ÿäº§éƒ¨ç½²çš„è§„æ¨¡ã€‚</span></span><br><span class="line">    <span class="string">&#x27;@nuxtjs/eslint-module&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">build</span>: &#123; <span class="comment">// Nuxt.js å…è®¸ä½ æ ¹æ®æœåŠ¡ç«¯éœ€æ±‚ï¼Œè‡ªå®šä¹‰ webpack çš„æ„å»ºé…ç½®ã€‚</span></span><br><span class="line">    <span class="attr">transpile</span>: [<span class="regexp">/^element-ui/</span>], <span class="comment">// ä½¿ç”¨Babelä¸ç‰¹å®šçš„ä¾èµ–å…³ç³»è¿›è¡Œè½¬æ¢ã€‚åº”è¯¥æ˜¯element-uiä½¿ç”¨äº†ES6è¯­æ³•ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œè½¬åŒ–</span></span><br><span class="line">    <span class="attr">publicPath</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// é™æ€èµ„æºå¼•ç”¨è·¯å¾„ï¼ˆé€šå¸¸ä½¿ç”¨CNDåœ°å€ï¼‰</span></span><br><span class="line">    <span class="attr">plugins</span>: [ <span class="comment">// é…ç½®webpackæ’ä»¶  nuxtä½¿ç”¨çš„webpackç‰ˆæœ¬æ¯”è¾ƒæ—§ï¼Œæœ‰ä¸€äº›æ–°åŠŸèƒ½æ— æ³•ä½¿ç”¨</span></span><br><span class="line">      <span class="keyword">new</span> webpack.<span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">        <span class="attr">__ENV__</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(process.<span class="property">env</span>.<span class="property">ENV</span> || <span class="string">&#x27;dev&#x27;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é¡¹ç›®éƒ¨ç½²"><a href="#é¡¹ç›®éƒ¨ç½²" class="headerlink" title="é¡¹ç›®éƒ¨ç½²"></a>é¡¹ç›®éƒ¨ç½²</h3>ç”±äºè¯¥é¡¹ç›®ä¸å…¶ä»–é¡¹ç›®å…±ç”¨ä¸€ä¸ªåŸŸåï¼šwww.###.comï¼Œéœ€è¦ä¿è¯å¦ä¸€ä¸ªé¡¹ç›®ä¹Ÿå¯ç”¨ã€‚æ‰€æœ‰åœ¨éƒ¨ç½²çš„æ—¶å€™æŠŠNuxtçš„é¡¹ç›®æ”¾åœ¨äº†www.###.com/pageç›®å½•ä¸‹<br>åœ¨serverä¸­æ·»åŠ location /pageçš„é…ç½®é¡¹<br>è®©æ ¹è·¯å¾„é‡å®šå‘åˆ°www.###.com/page/home<br>å¯¹æ—§é¡¹ç›®å·²æœ‰çš„ä¸€äº›è®¿é—®è·¯å¾„è¿›è¡Œå…¼å®¹<br>é¦–é¡µé¡¹ç›®å’Œæ—§é¡¹ç›®ï¼ˆä¸»ç«™ï¼‰çš„ç›¸äº’è·³è½¬ï¼ˆç™»å½•ç™»å‡ºè·³è½¬ç­‰ï¼‰<h3 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h3>ä¸€ã€document is not defined or window is not defined<br>è§£å†³æ–¹æ³•ï¼š<br>æ­¤é—®é¢˜äº§ç”Ÿæ˜¯ç”±äºåœ¨æœåŠ¡ç«¯æ¸²æŸ“æ—¶ä½¿ç”¨äº†windowæˆ–documentç­‰DOMç›¸å…³çš„APIï¼Œå¸¸è§çš„åŸå› æœ‰ä¸¤ä¸ªï¼š</li>
<li>é¡µé¢ä¸­ç”Ÿå‘½å‘¨æœŸä½¿ç”¨é”™è¯¯ï¼Œæ¯”å¦‚åœ¨createdä¸­ä½¿ç”¨äº†window<br>nuxtåœ¨æœåŠ¡ç«¯æ‰§è¡Œæ—¶ä¼šæ‰§è¡ŒVueç”Ÿå‘½å‘¨æœŸä¸­çš„beforeCreateå’Œcreatedï¼Œå¦‚æœåœ¨è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸé‡Œä½¿ç”¨äº†DOMç›¸å…³çš„APIæ˜¯è·å–ä¸åˆ°çš„ï¼Œæ„å»ºæ—¶ä¼šæŠ¥é”™ã€‚</li>
<li>ç¬¬ä¸‰æ–¹æ’ä»¶ä½¿ç”¨äº†windowæˆ–documentç­‰DOMç›¸å…³çš„API<br>Nuxt.js å…è®¸åœ¨è¿è¡ŒVue.jsåº”ç”¨ç¨‹åºä¹‹å‰æ‰§è¡Œjsæ’ä»¶ã€‚è¿™åœ¨æ‚¨éœ€è¦ä½¿ç”¨è‡ªå·±çš„åº“æˆ–ç¬¬ä¸‰æ–¹æ¨¡å—æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚ä½†æ˜¯è¦æ³¨æ„æ’ä»¶æ˜¯å¦åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½éœ€è¦ï¼Œè¿˜æœ‰å°±æ˜¯æ’ä»¶ä¸­æ˜¯å¦ç”¨åˆ°äº†DOMç›¸å…³çš„APIï¼ˆä¼šå¯¼è‡´æ„å»ºæ—¶æŠ¥é”™ï¼‰<br>è§£å†³æ–¹æ³•ï¼š</li>
<li>æ­£ç¡®ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸï¼Œåœ¨ä»»ä½• Vue ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œ åªæœ‰ beforeCreate å’Œ created è¿™ä¸¤ä¸ªæ–¹æ³•ä¼šåœ¨ å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¢«è°ƒç”¨ã€‚å…¶ä»–ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä»…åœ¨å®¢æˆ·ç«¯è¢«è°ƒç”¨ã€‚<br>è¿™é‡Œè·å–ä¸åˆ°windowæˆ–documentç­‰APIï¼Œå¯ä»¥æ”¾åœ¨mountedä¸­æ‰§è¡Œã€‚</li>
<li>ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶æ—¶ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  &#123;</span><br><span class="line">    src: &#x27;~plugins/log.js&#x27;,</span><br><span class="line">    mode: &#x27;client&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
æ·»åŠ mode: â€˜clientâ€™ä½¿ç¬¬ä¸‰æ–¹æ’ä»¶ä»…åœ¨å®¢æˆ·ç«¯æ¸²æŸ“æ—¶ä½¿ç”¨ã€‚<br>äºŒã€NuxtLinkæ— æ³•æ‰“å¼€æ–°é¡µé¢<br>Nuxtjsä¸­åœ¨è¿›è¡Œè·¯ç”±å¯¼èˆªæ—¶æä¾›äº†<nuxt-link to="/"></nuxt-link>ï¼Œä½†æ˜¯æ­¤æ ‡ç­¾æœ‰ä¸€ä¸ªé—®é¢˜ï¼šæ— æ³•åœ¨æ–°çª—å£æ‰“å¼€é“¾æ¥ï¼Œå»ºè®®æ”¹ä¸ºaæ ‡ç­¾ï¼Œæ—¢èƒ½æ»¡è¶³éœ€æ±‚ï¼Œä¹Ÿåˆ©äºæœç´¢å¼•æ“çˆ¬å–ç›¸å…³é“¾æ¥ã€‚<br>ä¸‰ã€æ³¨å†Œå…¨å±€æ–¹æ³•<br>æœ‰æ—¶æƒ³åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨å‡½æ•°æˆ–å€¼ï¼Œåœ¨Vueé¡¹ç›®ä¸­æˆ‘ä»¬æœ‰å¯èƒ½æŠŠæ–¹æ³•æŒ‚åœ¨åœ¨Vueå®ä¾‹ä¸Šï¼Œä½†æ˜¯å®˜æ–¹æ–‡æ¡£ä¸­æ˜ç¡®æå‡ºï¼š<br>è¯·å‹¿å…¨å±€ä½¿ç”¨Vue.use()ï¼ŒVue.component()ï¼Œä¹Ÿä¸è¦åœ¨æ­¤åŠŸèƒ½å†…ä¸“é—¨ç”¨äºNuxtæ³¨å…¥çš„Vueä¸­æ’å…¥ä»»ä½•å†…å®¹ã€‚è¿™å°†å¯¼è‡´æœåŠ¡å™¨ç«¯å†…å­˜æ³„æ¼ã€‚<br>å¦å¤–ä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ–¹æ³•ï¼ˆinject(key, value)ï¼‰æ¥æ³¨å†Œå…¨å±€æ–¹æ³•ï¼ˆå˜é‡ï¼‰ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// plugins/hello.js</span><br><span class="line">export default (&#123; app &#125;, inject) =&gt; &#123;</span><br><span class="line">  // Inject $hello(msg) in Vue, context and store.</span><br><span class="line">  inject(&#x27;hello&#x27;, msg =&gt; console.log(`Hello $&#123;msg&#125;!`))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// nuxt.config.js</span><br><span class="line">export default &#123;</span><br><span class="line">  plugins: [&#x27;~/plugins/hello.js&#x27;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
ç„¶åå°±å¯ä»¥åœ¨é¡µé¢ã€ç»„ä»¶ã€æ’ä»¶ä¸­ä½¿ç”¨äº†ã€‚<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// a.vue</span><br><span class="line">export default &#123;</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    this.$hello(&#x27;mounted&#x27;)</span><br><span class="line">    // will console.log &#x27;Hello mounted!&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  asyncData(&#123; app, $hello &#125;) &#123;</span><br><span class="line">    $hello(&#x27;asyncData&#x27;)</span><br><span class="line">    // If using Nuxt &lt;= 2.12, use ğŸ‘‡</span><br><span class="line">    app.$hello(&#x27;asyncData&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
å››ã€Nuxtæ”¯æŒåœ¨é¡µé¢ä¸­åŠ å…¥headä¿¡æ¯ã€‚<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;&#125;,</span><br><span class="line">  ...,</span><br><span class="line">  head () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      title: &#x27;&#x27;,</span><br><span class="line">      meta: [</span><br><span class="line">        &#123; hid: &#x27;&#x27;, name: &#x27;&#x27;, content: &#x27;&#x27;&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
äº”ã€è·¯ç”±ç›¸å…³<br>Nuxt.js ä¾æ® pages ç›®å½•ç»“æ„è‡ªåŠ¨ç”Ÿæˆ vue-router æ¨¡å—çš„è·¯ç”±é…ç½®ã€‚<br>åŸºç¡€è·¯ç”±<br>pages/</li>
</ul>
<p>â€“| user/<br>â€”â€“| index.vue<br>â€”â€“| one.vue<br>â€“| index.vue<br>é‚£ä¹ˆï¼ŒNuxt.js è‡ªåŠ¨ç”Ÿæˆçš„è·¯ç”±é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">router: &#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: &#x27;index&#x27;,</span><br><span class="line">      path: &#x27;/&#x27;,</span><br><span class="line">      component: &#x27;pages/index.vue&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: &#x27;user&#x27;,</span><br><span class="line">      path: &#x27;/user&#x27;,</span><br><span class="line">      component: &#x27;pages/user/index.vue&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: &#x27;user-one&#x27;,</span><br><span class="line">      path: &#x27;/user/one&#x27;,</span><br><span class="line">      component: &#x27;pages/user/one.vue&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åµŒå¥—è·¯ç”±<br>ä½ å¯ä»¥é€šè¿‡ vue-router çš„å­è·¯ç”±åˆ›å»º Nuxt.js åº”ç”¨çš„åµŒå¥—è·¯ç”±ã€‚<br>åˆ›å»ºå†…åµŒå­è·¯ç”±ï¼Œä½ éœ€è¦æ·»åŠ ä¸€ä¸ª Vue æ–‡ä»¶ï¼ŒåŒæ—¶æ·»åŠ ä¸€ä¸ªä¸è¯¥æ–‡ä»¶åŒåçš„ç›®å½•ç”¨æ¥å­˜æ”¾å­è§†å›¾ç»„ä»¶ã€‚<br>æ–‡ä»¶è·¯å¾„ï¼š<br>pages/<br>â€“| users/<br>â€”â€“| _id.vue // ä»¥ä¸‹åˆ’çº¿ä½œä¸ºå‰ç¼€çš„Vueæ–‡ä»¶ï¼šåŠ¨æ€è·¯ç”±ï¼ŒåšSSRçš„æ—¶å€™å¯èƒ½ä¼šç”¨åˆ°<br>â€”â€“| index.vue<br>â€“| users.vue<br>Nuxt.js è‡ªåŠ¨ç”Ÿæˆçš„è·¯ç”±é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">router: &#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: &#x27;/users&#x27;,</span><br><span class="line">      component: &#x27;pages/users.vue&#x27;,</span><br><span class="line">      children: [</span><br><span class="line">        &#123;</span><br><span class="line">          path: &#x27;&#x27;,</span><br><span class="line">          component: &#x27;pages/users/index.vue&#x27;,</span><br><span class="line">          name: &#x27;users&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          path: &#x27;:id&#x27;,</span><br><span class="line">          component: &#x27;pages/users/_id.vue&#x27;,</span><br><span class="line">          name: &#x27;users-id&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…­ã€å¸¸ç”¨å‘½ä»¤ï¼š<br>nuxt<br>å¯ç”¨ä¸€ä¸ªçƒ­åŠ è½½çš„WebæœåŠ¡å™¨ï¼ˆå¼€å‘æ¨¡å¼ï¼‰localhost:3000<br>nuxt build<br>åˆ©ç”¨webpackç¼–è¯‘åº”ç”¨ï¼Œå‹ç¼©JSå’ŒCSSèµ„æºï¼ˆå‘å¸ƒç”¨ï¼‰ã€‚<br>nuxt start<br>ä»¥ç”Ÿäº§æ¨¡å¼å¯åŠ¨ä¸€ä¸ªWebæœåŠ¡å™¨ (åŸºäºdistç›®å½•ï¼Œéœ€è¦å…ˆæ‰§è¡Œnuxt build)ã€‚<br>nuxt generate<br>ç¼–è¯‘åº”ç”¨ï¼Œå¹¶ä¾æ®è·¯ç”±é…ç½®ç”Ÿæˆå¯¹åº”çš„HTMLæ–‡ä»¶ (ç”¨äºé™æ€ç«™ç‚¹çš„éƒ¨ç½²)ã€‚</p>
]]></content>
      <categories>
        <category>æ€§èƒ½ä¼˜åŒ–</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>æµ…ævueé¡¹ç›®ä¸­npm run devå’Œnpm run serveçš„åŒºåˆ«</title>
    <url>/2023/03/13/serve%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<h1 id="å…ˆåšä¸€ä¸ªæé—®ï¼Œä½ ä»¬è¿è¡Œé¡¹ç›®çš„æ—¶å€™ä½¿ç”¨ä»€ä¹ˆå‘½ä»¤æ¥å¯åŠ¨é¡¹ç›®å‘¢ï¼Ÿ"><a href="#å…ˆåšä¸€ä¸ªæé—®ï¼Œä½ ä»¬è¿è¡Œé¡¹ç›®çš„æ—¶å€™ä½¿ç”¨ä»€ä¹ˆå‘½ä»¤æ¥å¯åŠ¨é¡¹ç›®å‘¢ï¼Ÿ" class="headerlink" title="å…ˆåšä¸€ä¸ªæé—®ï¼Œä½ ä»¬è¿è¡Œé¡¹ç›®çš„æ—¶å€™ä½¿ç”¨ä»€ä¹ˆå‘½ä»¤æ¥å¯åŠ¨é¡¹ç›®å‘¢ï¼Ÿ"></a>å…ˆåšä¸€ä¸ªæé—®ï¼Œä½ ä»¬è¿è¡Œé¡¹ç›®çš„æ—¶å€™ä½¿ç”¨ä»€ä¹ˆå‘½ä»¤æ¥å¯åŠ¨é¡¹ç›®å‘¢ï¼Ÿ</h1><p>é€šå¸¸æˆ‘ä»¬åœ¨å¼€å‘å‰ç«¯é¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦ä½¿ç”¨npm run devæˆ–è€…npm run serveå‘½ä»¤æ¥å¯åŠ¨é¡¹ç›®ï¼ŒåŒæ ·éƒ½æ˜¯å¯åŠ¨é¡¹ç›®çš„å‘½ä»¤ï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™è¿è¡Œnpm run serveä¼šæŠ¥é”™ï¼Œè€Œè¿è¡Œnpm run devåˆ™æ­£å¸¸è¿è¡Œï¼Œé‚£è¿™ä¸¤è€…åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<h2 id="åœ¨ç†è§£è¿™ä¸¤è€…çš„åŒºåˆ«ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥è¦ç†è§£è¿™ä¸¤æ¡å‘½ä»¤æ˜¯ä»€ä¹ˆæ„æ€ã€‚"><a href="#åœ¨ç†è§£è¿™ä¸¤è€…çš„åŒºåˆ«ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥è¦ç†è§£è¿™ä¸¤æ¡å‘½ä»¤æ˜¯ä»€ä¹ˆæ„æ€ã€‚" class="headerlink" title="åœ¨ç†è§£è¿™ä¸¤è€…çš„åŒºåˆ«ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥è¦ç†è§£è¿™ä¸¤æ¡å‘½ä»¤æ˜¯ä»€ä¹ˆæ„æ€ã€‚"></a>åœ¨ç†è§£è¿™ä¸¤è€…çš„åŒºåˆ«ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥è¦ç†è§£è¿™ä¸¤æ¡å‘½ä»¤æ˜¯ä»€ä¹ˆæ„æ€ã€‚</h2><h1 id="é¦–å…ˆçœ‹çœ‹npmæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#é¦–å…ˆçœ‹çœ‹npmæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="é¦–å…ˆçœ‹çœ‹npmæ˜¯ä»€ä¹ˆï¼Ÿ"></a>é¦–å…ˆçœ‹çœ‹npmæ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>npmå®é™…ä¸Šæ˜¯nodejså®˜æ–¹æä¾›çš„åŒ…ç®¡ç†å¹³å°ï¼Œnpmæä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·npm-cliï¼Œåœ¨æˆ‘ä»¬ä½¿ç”¨npmè¿™ä¸ªå‘½ä»¤æ—¶ï¼Œæˆ‘ä»¬å®é™…æ˜¯é€šè¿‡nodeè¿è¡Œä¸€ä¸ªåä¸ºnpm-cli.jsçš„è„šæœ¬</p>
<h1 id="åœ¨çœ‹çœ‹npm-installå‘½ä»¤"><a href="#åœ¨çœ‹çœ‹npm-installå‘½ä»¤" class="headerlink" title="åœ¨çœ‹çœ‹npm installå‘½ä»¤"></a>åœ¨çœ‹çœ‹npm installå‘½ä»¤</h1><p>åœ¨æ„å»ºé¡¹ç›®æ—¶ï¼Œé€šè¿‡npm installå‘½ä»¤ï¼Œä¼šåœ¨é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªåä¸ºnode_modulesçš„æ–‡ä»¶å¤¹<br>ä¸»è¦ç”¨äºå­˜æ”¾åŒ…ç®¡ç†å·¥å…·ï¼Œä¸‹è½½å®‰è£…çš„åŒ…çš„æ–‡ä»¶å¤¹ï¼Œä¹Ÿå°±æ˜¯é¡¹ç›®ä¾èµ–çš„å¤–éƒ¨æ¨¡å—çš„ç¼“å­˜ï¼Œæ¯”å¦‚element-uiï¼Œechartsç­‰ä¸€äº›ç»„ä»¶åº“é€šè¿‡npm i å®‰è£…ä¹‹åä¼šè¢«ä¸‹è½½å¤åˆ¶åˆ°node_modulesæ–‡ä»¶å¤¹ä¸‹</p>
<h1 id="ç„¶åçœ‹çœ‹è¿è¡Œnpm-run-Ã—Ã—Ã—å‘½ä»¤çš„åŸç†"><a href="#ç„¶åçœ‹çœ‹è¿è¡Œnpm-run-Ã—Ã—Ã—å‘½ä»¤çš„åŸç†" class="headerlink" title="ç„¶åçœ‹çœ‹è¿è¡Œnpm run Ã—Ã—Ã—å‘½ä»¤çš„åŸç†"></a>ç„¶åçœ‹çœ‹è¿è¡Œnpm run Ã—Ã—Ã—å‘½ä»¤çš„åŸç†</h1><p>å¤§å®¶éƒ½çŸ¥é“ï¼Œé€šè¿‡npm run serve å’Œnpm run devå¯åŠ¨é¡¹ç›®ï¼Œå¯ä»¥é€šè¿‡npm run buildå‘½ä»¤æ‰“åŒ…é¡¹ç›®ï¼Œé‚£ä¹ˆåœ¨è¿è¡Œnpm run æ—¶ï¼Œåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿ<br>åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåä¸ºpackage.jsonçš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯å¯¹é¡¹ç›®ã€æ¨¡å—åŒ…çš„æè¿°ï¼Œåœ¨package.jsonæ–‡ä»¶ä¸­ï¼Œæœ‰ä¸€ä¸ªscriptsçš„å­—æ®µ<br><img src="/2023/03/13/serve%E7%9A%84%E5%8C%BA%E5%88%AB/npm%E5%8C%BA%E5%88%AB.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<hr>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿è¡Œnpm run serveå‘½ä»¤å¯åŠ¨é¡¹ç›®çš„é¡¹ç›®ä¸­ï¼Œscriptsä¸­æœ‰ä¸€ä¸ªserveå­—æ®µï¼Œè¿è¡Œnpm run dev å‘½ä»¤ä¸­å­˜åœ¨ä¸€ä¸ªdevå­—æ®µï¼Œé‚£ä¹ˆè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥å¤§æ¦‚äº†è§£åˆ°ï¼Œåœ¨è¿è¡Œnpm runå‘½ä»¤æ—¶ï¼Œå®é™…ä¸Šæ˜¯å»package.jsonè¿™ä¸ªæ–‡ä»¶çš„scriptsä¸­å¯»æ‰¾å¯¹åº”çš„Ã—Ã—Ã—ï¼Œç„¶åå»æ‰§è¡Œå¯¹åº”çš„å‘½ä»¤ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦è¿è¡Œnpm run devå‘½ä»¤çš„è¯ï¼Œåªéœ€è¦æŠŠscriptsä¸­çš„serveæ”¹æˆdevå°±èƒ½é€šè¿‡npm run devæ¥å¯åŠ¨é¡¹ç›®å‘¢ï¼Ÿ<br>ç­”æ¡ˆæ˜¯å¯ä»¥ï¼Œç¡®å®å°†serveæ”¹æˆdevä¹‹åï¼Œæˆ‘ä»¬è¿è¡Œnpm run devå‘½ä»¤å¯ä»¥å¯åŠ¨é¡¹ç›®</p>
<h1 id="æ—¢ç„¶å¯ä»¥é€šè¿‡æ›´æ”¹å­—æ®µæ¥è¿›è¡Œè½¬æ¢ï¼Œé‚£ä¸ºä»€ä¹ˆä¼šæœ‰npm-run-serve-å’Œnpm-run-devè¿™ä¸¤ç§æ¨¡å¼å‘¢ï¼Ÿ"><a href="#æ—¢ç„¶å¯ä»¥é€šè¿‡æ›´æ”¹å­—æ®µæ¥è¿›è¡Œè½¬æ¢ï¼Œé‚£ä¸ºä»€ä¹ˆä¼šæœ‰npm-run-serve-å’Œnpm-run-devè¿™ä¸¤ç§æ¨¡å¼å‘¢ï¼Ÿ" class="headerlink" title="æ—¢ç„¶å¯ä»¥é€šè¿‡æ›´æ”¹å­—æ®µæ¥è¿›è¡Œè½¬æ¢ï¼Œé‚£ä¸ºä»€ä¹ˆä¼šæœ‰npm run serve å’Œnpm run devè¿™ä¸¤ç§æ¨¡å¼å‘¢ï¼Ÿ"></a>æ—¢ç„¶å¯ä»¥é€šè¿‡æ›´æ”¹å­—æ®µæ¥è¿›è¡Œè½¬æ¢ï¼Œé‚£ä¸ºä»€ä¹ˆä¼šæœ‰npm run serve å’Œnpm run devè¿™ä¸¤ç§æ¨¡å¼å‘¢ï¼Ÿ</h1><p>æ­£å¦‚ä¸Šé¢æˆ‘ä»¬æ‰€è¯´çš„ï¼Œè¿è¡Œnpm run serveçš„æ—¶å€™ï¼Œå®é™…æ˜¯è¿è¡Œvue-cli-service serveè¿™æ¡å‘½ä»¤ï¼Œåœ¨ä¸Šé¢ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°scriptsä¸­ï¼Œä¸ç®¡serveè¿˜æ˜¯devå¯¹åº”çš„å‘½ä»¤éƒ½æ˜¯vue-cli-service serveï¼Œé‚£ä¹ˆdevå’Œserveåˆ°åº•åŒºåˆ«åœ¨å“ªé‡Œå‘¢ï¼Ÿ<br>æˆ‘ä»¬ä¼šå‘ç°ï¼ŒåŸæ¥npm run devå’Œnpm run serveæœ¬è´¨ä¸Šæ˜¯è¿è¡Œvue-cliä¸åŒç‰ˆæœ¬ä¸‹å¯åŠ¨é¡¹ç›®çš„è„šæœ¬ï¼Œdevåœ¨vue-cli2.0ä¸­ä½¿ç”¨ï¼Œserveåœ¨vue-cli3.0ä¸­æ‰å¼€å§‹ä½¿ç”¨ã€‚</p>
]]></content>
      <categories>
        <category>çŸ¥è¯†ç‚¹</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vue-cropper</title>
    <url>/2023/04/11/vue-cropper/</url>
    <content><![CDATA[<h1 id="vue-cropperçš„ä½¿ç”¨"><a href="#vue-cropperçš„ä½¿ç”¨" class="headerlink" title="vue-cropperçš„ä½¿ç”¨"></a>vue-cropperçš„ä½¿ç”¨</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install vue-cropper --save</span><br></pre></td></tr></table></figure>
<h2 id="åœ¨main-jsä¸­å¼•å…¥"><a href="#åœ¨main-jsä¸­å¼•å…¥" class="headerlink" title="åœ¨main.jsä¸­å¼•å…¥"></a>åœ¨main.jsä¸­å¼•å…¥</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import VueCropper from &#x27;vue-cropper&#x27;</span><br><span class="line">Vue.use(VueCropper)</span><br></pre></td></tr></table></figure>
<h1 id="å°è£…ç»„ä»¶"><a href="#å°è£…ç»„ä»¶" class="headerlink" title="å°è£…ç»„ä»¶"></a>å°è£…ç»„ä»¶</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- å›¾ç‰‡è£å‰ªç»„ä»¶ --&gt;</span><br><span class="line">    &lt;div class=&quot;img-cut&quot;&gt;</span><br><span class="line">      &lt;!-- å›¾ç‰‡ --&gt;</span><br><span class="line">      &lt;div class=&quot;img-wrap&quot;&gt;</span><br><span class="line">        &lt;img class=&quot;edit-img&quot; :src=&quot;imgUrl&quot; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- æŒ‰é’® --&gt;</span><br><span class="line">      &lt;div class=&quot;btn-wrap&quot;&gt;</span><br><span class="line">        &lt;el-upload</span><br><span class="line">          ref=&quot;upload&quot;</span><br><span class="line">          :action=&quot;action&quot;</span><br><span class="line">          :auto-upload=&quot;false&quot;</span><br><span class="line">          :on-change=&quot;handleChange&quot;</span><br><span class="line">          :show-file-list=&quot;false&quot;</span><br><span class="line">          accept=&quot;image/*&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;button slot=&quot;trigger&quot; class=&quot;btn btn-white&quot;&gt;&#123;&#123; btnText &#125;&#125;&lt;/button&gt;</span><br><span class="line">        &lt;/el-upload&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- å›¾ç‰‡è£å‰ª --&gt;</span><br><span class="line">      &lt;el-dialog</span><br><span class="line">        title=&quot;å›¾ç‰‡å‰ªè£&quot;</span><br><span class="line">        :visible.sync=&quot;ImgdialogVisible&quot;</span><br><span class="line">        :modal=&quot;false&quot;</span><br><span class="line">        :close-on-click-modal=&quot;false&quot;</span><br><span class="line">        append-to-body</span><br><span class="line">        :destroy-on-close=&quot;true&quot;</span><br><span class="line">        :center=&quot;true&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;div class=&quot;cropper-content&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;cropper&quot; style=&quot;text-align: center&quot;&gt;</span><br><span class="line">            &lt;vueCropper</span><br><span class="line">              ref=&quot;cropper&quot;</span><br><span class="line">              :img=&quot;option.img&quot;</span><br><span class="line">              :outputSize=&quot;option.size&quot;</span><br><span class="line">              :outputType=&quot;option.outputType&quot;</span><br><span class="line">              :info=&quot;option.info&quot;</span><br><span class="line">              :full=&quot;option.full&quot;</span><br><span class="line">              :canMove=&quot;option.canMove&quot;</span><br><span class="line">              :canMoveBox=&quot;option.canMoveBox&quot;</span><br><span class="line">              :original=&quot;option.original&quot;</span><br><span class="line">              :autoCrop=&quot;option.autoCrop&quot;</span><br><span class="line">              :fixed=&quot;option.fixed&quot;</span><br><span class="line">              :fixedNumber=&quot;option.fixedNumber&quot;</span><br><span class="line">              :centerBox=&quot;option.centerBox&quot;</span><br><span class="line">              :infoTrue=&quot;option.infoTrue&quot;</span><br><span class="line">              :fixedBox=&quot;option.fixedBox&quot;</span><br><span class="line">              :mode=&quot;option.mode&quot;</span><br><span class="line">              :canScale=&quot;option.canScale&quot;</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;/vueCropper&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">          &lt;button class=&quot;btn btn-white&quot; @click=&quot;ImgdialogVisible = false&quot;&gt;</span><br><span class="line">            å–æ¶ˆ</span><br><span class="line">          &lt;/button&gt;</span><br><span class="line">          &lt;button class=&quot;btn btn-red mleft-10&quot; @click=&quot;getSliceImg&quot;&gt;</span><br><span class="line">            ä¿å­˜å¹¶å…³é—­</span><br><span class="line">          &lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-dialog&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    imgUrl: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      required: true</span><br><span class="line">    &#125;,</span><br><span class="line">    btnText: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      default: &#x27;é€‰æ‹©å›¾ç‰‡&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      action: &#x27;/xxxx&#x27;,</span><br><span class="line">      ImgdialogVisible: false,</span><br><span class="line">      option: &#123;</span><br><span class="line">        img: &#x27;&#x27;, // è£å‰ªå›¾ç‰‡çš„åœ°å€</span><br><span class="line">        info: true, // è£å‰ªæ¡†çš„å¤§å°ä¿¡æ¯</span><br><span class="line">        outputSize: 0.8, // è£å‰ªç”Ÿæˆå›¾ç‰‡çš„è´¨é‡</span><br><span class="line">        outputType: &#x27;jpeg&#x27;, // è£å‰ªç”Ÿæˆå›¾ç‰‡çš„æ ¼å¼</span><br><span class="line">        canScale: true, // å›¾ç‰‡æ˜¯å¦å…è®¸æ»šè½®ç¼©æ”¾</span><br><span class="line">        autoCrop: true, // æ˜¯å¦é»˜è®¤ç”Ÿæˆæˆªå›¾æ¡†</span><br><span class="line">        fixedBox: true, // å›ºå®šæˆªå›¾æ¡†å¤§å° ä¸å…è®¸æ”¹å˜</span><br><span class="line">        fixed: true, // æ˜¯å¦å¼€å¯æˆªå›¾æ¡†å®½é«˜å›ºå®šæ¯”ä¾‹</span><br><span class="line">        fixedNumber: [1, 1], // æˆªå›¾æ¡†çš„å®½é«˜æ¯”ä¾‹</span><br><span class="line">        full: true, // æ˜¯å¦è¾“å‡ºåŸå›¾æ¯”ä¾‹çš„æˆªå›¾</span><br><span class="line">        canMoveBox: false, // æˆªå›¾æ¡†èƒ½å¦æ‹–åŠ¨</span><br><span class="line">        original: false, // ä¸Šä¼ å›¾ç‰‡æŒ‰ç…§åŸå§‹æ¯”ä¾‹æ¸²æŸ“</span><br><span class="line">        centerBox: true, // æˆªå›¾æ¡†æ˜¯å¦è¢«é™åˆ¶åœ¨å›¾ç‰‡é‡Œé¢</span><br><span class="line">        infoTrue: true, // true ä¸ºå±•ç¤ºçœŸå®è¾“å‡ºå›¾ç‰‡å®½é«˜ false å±•ç¤ºçœ‹åˆ°çš„æˆªå›¾æ¡†å®½é«˜</span><br><span class="line">        mode: &#x27;contain&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    getSliceImg () &#123;</span><br><span class="line">      this.$refs.cropper.getCropBlob(async (data) =&gt; &#123;</span><br><span class="line">        const imgSize = await this.getImgSize(data)</span><br><span class="line">        /* æŠŠblobå¯¹è±¡å’Œæœ€ç»ˆå›¾åƒçš„sizeä¼ ç»™çˆ¶ç»„ä»¶ */</span><br><span class="line">        this.$emit(&#x27;upload&#x27;, &#123; file: data, imgSize &#125;)</span><br><span class="line">        this.ImgdialogVisible = false</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    /* å¤„ç†element uploadç»„ä»¶changeäº‹ä»¶ */</span><br><span class="line">    handleChange (file) &#123;</span><br><span class="line">      this.openImgDialog(file.raw)</span><br><span class="line">    &#125;,</span><br><span class="line">    /* æ‰“å¼€è£å‰ªé¡µé¢ */</span><br><span class="line">    openImgDialog (file) &#123;</span><br><span class="line">      let reader = new FileReader()</span><br><span class="line">      reader.onload = (theFile) =&gt; &#123;</span><br><span class="line">        this.option.img = theFile.target.result</span><br><span class="line">        this.ImgdialogVisible = true</span><br><span class="line">      &#125;</span><br><span class="line">      if (file) &#123;</span><br><span class="line">        reader.readAsDataURL(file)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    /* è®¡ç®—å›¾ç‰‡å¤§å° */</span><br><span class="line">    getImgSize (file) &#123;</span><br><span class="line">      return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        let reader = new FileReader()</span><br><span class="line">        reader.onload = function (theFile) &#123;</span><br><span class="line">          let image = new Image()</span><br><span class="line">          image.src = theFile.target.result</span><br><span class="line">          image.onload = function () &#123;</span><br><span class="line">            resolve(&#123;</span><br><span class="line">              width: this.width,</span><br><span class="line">              height: this.height</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (file) &#123;</span><br><span class="line">          reader.readAsDataURL(file)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          reject(&#x27;å‡ºé”™äº†&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h1 id="é—®é¢˜æ€»ç»“"><a href="#é—®é¢˜æ€»ç»“" class="headerlink" title="é—®é¢˜æ€»ç»“"></a>é—®é¢˜æ€»ç»“</h1><p>é—®é¢˜ä¸€ã€å¦‚ä½•é˜»æ­¢uploadä¸Šä¼ å®Œä¹‹åå°±ä¸Šä¼ ï¼Ÿã€€ã€€<br>å°†el-upload çš„ auto-upload è®¾ç½®ä¸º falseå³å¯<br>é—®é¢˜äºŒã€å¦‚ä½•å°†è·å–åˆ°æ–‡ä»¶ä¼ ç»™vue-cropper?ã€€ã€€<br>vue-cropper å¯ä»¥æ¥å—ä¸€ä¸ª blobï¼Œæ­¤æ—¶éœ€è¦ new FileReader()ï¼Œå‚è€ƒ MDN<br>é—®é¢˜ä¸‰ã€el-upload é€‰æ‹©å®Œæ–‡ä»¶åä¸èƒ½æ›´æ”¹ï¼Œå¦‚ä½•ä¸Šä¼ è£å‰ªä¹‹åçš„å›¾ç‰‡ï¼Ÿ<br>ä½¿ç”¨è‡ªå®šä¹‰ä¸Šä¼ ï¼Œç‚¹å‡»ä¸Šä¼ æ—¶ç›´æ¥è°ƒç”¨submit æ–¹æ³•ï¼Œè¿™æ—¶ä¼šè‡ªåŠ¨è§¦å‘http-requestä¸­çš„è‡ªå®šä¹‰æ–¹æ³•ï¼Œå¯ä»¥æ‹¿åˆ°fileä¸­çš„æ‰€æœ‰å±æ€§ï¼Œåœ¨å‡½æ•°é‡Œé¢ä½¿ç”¨ axios è‡ªå®šä¹‰ä¸Šä¼ å‚æ•°å’Œæ–‡ä»¶ã€‚æ­¤æ–¹æ³•æ¯”è¾ƒå¥½æ§åˆ¶ã€‚</p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>vue-cropper</tag>
      </tags>
  </entry>
  <entry>
    <title>Vuex</title>
    <url>/2023/04/05/Vuex/</url>
    <content><![CDATA[<p>Vuexå®ƒæ˜¯ä¸€ä¸ªç¨‹åºé‡Œé¢çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼Œå®ƒæ˜¯é›†ä¸­å¼å­˜å‚¨æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€çš„å°ä»“åº“ï¼Œå¹¶ä¸”ä¿æŒæˆ‘ä»¬å­˜å‚¨çš„çŠ¶æ€ä»¥ä¸€ç§å¯ä»¥é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚</p>
<h1 id="ç¬¬ä¸€æ­¥ï¼Œäº†è§£Vuex"><a href="#ç¬¬ä¸€æ­¥ï¼Œäº†è§£Vuex" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼Œäº†è§£Vuex"></a>ç¬¬ä¸€æ­¥ï¼Œäº†è§£Vuex</h1><h2 id="é—®é¢˜å‡è®¾"><a href="#é—®é¢˜å‡è®¾" class="headerlink" title="é—®é¢˜å‡è®¾:"></a>é—®é¢˜å‡è®¾:</h2><p>å¦‚æœä½ çš„é¡¹ç›®é‡Œæœ‰å¾ˆå¤šé¡µé¢ï¼ˆç»„ä»¶/è§†å›¾ï¼‰ï¼Œé¡µé¢ä¹‹é—´å­˜åœ¨å¤šçº§çš„åµŒå¥—å…³ç³»ï¼Œæ­¤æ—¶ï¼Œè¿™äº›é¡µé¢å‡å¦‚éƒ½éœ€è¦å…±äº«ä¸€ä¸ªçŠ¶æ€çš„æ—¶å€™ï¼Œæ­¤æ—¶å°±ä¼šäº§ç”Ÿä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>å¤šä¸ªè§†å›¾ä¾èµ–åŒä¸€ä¸ªçŠ¶æ€</li>
<li>æ¥è‡ªä¸åŒè§†å›¾çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€ä¸ªçŠ¶æ€<h2 id="è§£å†³ä»¥ä¸Šæ–¹æ³•çš„æ–¹æ¡ˆ-ğŸ¤ª"><a href="#è§£å†³ä»¥ä¸Šæ–¹æ³•çš„æ–¹æ¡ˆ-ğŸ¤ª" class="headerlink" title="è§£å†³ä»¥ä¸Šæ–¹æ³•çš„æ–¹æ¡ˆ:ğŸ¤ª"></a>è§£å†³ä»¥ä¸Šæ–¹æ³•çš„æ–¹æ¡ˆ:ğŸ¤ª</h2></li>
<li>å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜:</li>
</ol>
<ul>
<li>å‡å¦‚æ˜¯å¤šçº§åµŒå¥—å…³ç³»ï¼Œä½ å¯ä»¥ä½¿ç”¨çˆ¶å­ç»„ä»¶ä¼ å‚è¿›è¡Œè§£å†³ï¼›</li>
<li>å¯¹äºå…„å¼Ÿç»„ä»¶æˆ–è€…å…³ç³»æ›´å¤æ‚ç»„ä»¶ä¹‹é—´ï¼Œå°±å¾ˆéš¾åŠäº†ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡å„ç§å„æ ·çš„åŠæ³•è§£å†³ï¼Œå¯å®åœ¨å¾ˆä¸ä¼˜é›…ï¼Œè€Œä¸”é¡¹ç›®æ˜¯è¶Šåšè¶Šå¤§ï¼Œä»£ç å°±ä¼šå˜å¾—è¶Šå¤šã€‚</li>
</ul>
<ol start="2">
<li>å¯¹äºç¬¬äºŒä¸ªé—®é¢˜ï¼š</li>
</ol>
<ul>
<li>ä½ å¯ä»¥é€šè¿‡çˆ¶å­ç»„ä»¶ç›´æ¥å¼•ç”¨ï¼Œæˆ–è€…é€šè¿‡äº‹ä»¶æ¥å˜æ›´æˆ–è€…åŒæ­¥çŠ¶æ€çš„å¤šä»½æ‹·è´ï¼Œè¿™ç§æ¨¡å¼å¾ˆè„†å¼±ï¼Œå¾€å¾€ä½¿å¾—ä»£ç éš¾ä»¥ç»´æŠ¤ï¼Œè€Œä¸”åŒæ ·ä¼šè®©ä»£ç å°±ä¼šå˜å¾—è¶Šå¤šã€‚<h2 id="ä¸å¦‚æ¢ä¸€ç§æ€è·¯ï¼š"><a href="#ä¸å¦‚æ¢ä¸€ç§æ€è·¯ï¼š" class="headerlink" title="ä¸å¦‚æ¢ä¸€ç§æ€è·¯ï¼š"></a>ä¸å¦‚æ¢ä¸€ç§æ€è·¯ï¼š</h2></li>
<li>æŠŠå„ä¸ªç»„ä»¶éƒ½éœ€è¦ä¾èµ–çš„åŒä¸€ä¸ªçŠ¶æ€æŠ½å–å‡ºæ¥ï¼Œåœ¨å…¨å±€ä½¿ç”¨è¿›è¡Œç®¡ç†ã€‚</li>
<li>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œä»»ä½•ç»„ä»¶éƒ½å¯ä»¥ç›´æ¥è®¿é—®åˆ°è¿™ä¸ªçŠ¶æ€ï¼Œæˆ–è€…å½“çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰çš„ç»„ä»¶éƒ½è·å¾—æ›´æ–°ã€‚<h2 id="è¿™æ—¶å€™ï¼Œå°±è¦ç”¨åˆ°Vuex"><a href="#è¿™æ—¶å€™ï¼Œå°±è¦ç”¨åˆ°Vuex" class="headerlink" title="è¿™æ—¶å€™ï¼Œå°±è¦ç”¨åˆ°Vuex"></a>è¿™æ—¶å€™ï¼Œå°±è¦ç”¨åˆ°Vuex</h2>è¿™å°±æ˜¯ Vuex èƒŒåçš„åŸºæœ¬æ€æƒ³ï¼Œå€Ÿé‰´äº† Fluxã€Reduxã€‚ä¸å…¶ä»–æ¨¡å¼ä¸åŒçš„æ˜¯ï¼ŒVuex æ˜¯ä¸“é—¨ä¸º Vue è®¾è®¡çš„çŠ¶æ€ç®¡ç†åº“ï¼Œä»¥åˆ©ç”¨ Vue.js çš„æ•°æ®å“åº”æœºåˆ¶æ¥è¿›è¡Œé«˜æ•ˆçš„çŠ¶æ€æ›´æ–°ã€‚<h2 id="vuexä½¿ç”¨å‘¨æœŸå›¾"><a href="#vuexä½¿ç”¨å‘¨æœŸå›¾" class="headerlink" title="vuexä½¿ç”¨å‘¨æœŸå›¾"></a>vuexä½¿ç”¨å‘¨æœŸå›¾</h2><img src="/2023/04/05/Vuex/vuex.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><h2 id="é‚£ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨vuexå‘¢ï¼ŸğŸ¤”"><a href="#é‚£ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨vuexå‘¢ï¼ŸğŸ¤”" class="headerlink" title="é‚£ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨vuexå‘¢ï¼ŸğŸ¤”"></a>é‚£ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨vuexå‘¢ï¼ŸğŸ¤”</h2></li>
<li>å¦‚æœä½ ä¸éœ€è¦å¼€å‘å¤§å‹çš„å•é¡µåº”ç”¨ï¼Œæ­¤æ—¶ä½ å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨vuexï¼Œæ¯”å¦‚ä½ çš„é¡µé¢å°±ä¸¤ä¸‰ä¸ªï¼Œä½¿ç”¨vuexåå¢åŠ çš„æ–‡ä»¶æ¯”ä½ ç°åœ¨çš„é¡µé¢è¿˜è¦å¤šï¼Œé‚£å°±æ²¡è¿™ä¸ªå¿…è¦äº†ã€‚</li>
<li>å‡å¦‚ä½ çš„é¡¹ç›®è¾¾åˆ°äº†ä¸­å¤§å‹åº”ç”¨çš„è§„æ¨¡ï¼Œæ­¤æ—¶ä½ å¾ˆå¯èƒ½ä¼šè€ƒè™‘ï¼Œå¦‚ä½•æ›´å¥½åœ°åœ¨ç»„ä»¶å¤–éƒ¨ç®¡ç†çŠ¶æ€ï¼ŒVuexå°†ä¼šæˆä¸ºä½ çš„é€‰æ‹©ã€‚<h1 id="ç¬¬äºŒæ­¥ï¼Œå®‰è£…vuex"><a href="#ç¬¬äºŒæ­¥ï¼Œå®‰è£…vuex" class="headerlink" title="ç¬¬äºŒæ­¥ï¼Œå®‰è£…vuex"></a>ç¬¬äºŒæ­¥ï¼Œå®‰è£…vuex</h1></li>
</ul>
<ol>
<li>é¦–å…ˆï¼Œå®‰è£…vuex<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install vuex --save</span><br></pre></td></tr></table></figure></li>
<li>ç„¶åé…ç½®vuexï¼Œåœ¨srcè·¯å¾„ä¸‹åˆ›å»ºstoreæ–‡ä»¶å¤¹ï¼Œç„¶ååˆ›å»ºindex.jsæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>);</span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªnameï¼Œä»¥ä¾›å…¨å±€ä½¿ç”¨</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;wnxx&#x27;</span>,</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªnumberï¼Œä»¥ä¾›å…¨å±€ä½¿ç”¨</span></span><br><span class="line">    <span class="attr">number</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªlistï¼Œä»¥ä¾›å…¨å±€ä½¿ç”¨</span></span><br><span class="line">    <span class="attr">list</span>: [</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;welcome&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;to&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;vuex&#x27;</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure></li>
<li>ä¿®æ”¹main.jsï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥æˆ‘ä»¬å‰é¢å¯¼å‡ºçš„storeå¯¹è±¡</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span>; </span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  router,</span><br><span class="line">  store, <span class="comment">// æŠŠstoreå¯¹è±¡æ·»åŠ åˆ°vueå®ä¾‹ä¸Š</span></span><br><span class="line">  <span class="attr">components</span>: &#123; <span class="title class_">App</span> &#125;,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;App/&gt;&#x27;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li>æœ€åä¿®æ”¹App.vueï¼š<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ä½¿ç”¨this.$store.state.XXXå¯ä»¥ç›´æ¥è®¿é—®åˆ°ä»“åº“ä¸­çš„çŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
æ­¤æ—¶ï¼Œå¯åŠ¨é¡¹ç›®,å³å¯åœ¨æ§åˆ¶å°è¾“å‡ºåˆšæ‰æˆ‘ä»¬å®šä¹‰åœ¨storeä¸­çš„nameçš„å€¼ã€‚<h2 id="å®˜æ–¹å»ºè®®1"><a href="#å®˜æ–¹å»ºè®®1" class="headerlink" title="å®˜æ–¹å»ºè®®1:"></a>å®˜æ–¹å»ºè®®1:</h2>å®˜æ–¹å»ºè®®æˆ‘ä»¬ä»¥ä¸Šæ“ä½œthis.$store.state.XXXæœ€å¥½æ”¾åœ¨è®¡ç®—å±æ€§ä¸­ï¼Œå°±åƒè¿™æ ·ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">getName</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">name</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="å®˜æ–¹å»ºè®®2"><a href="#å®˜æ–¹å»ºè®®2" class="headerlink" title="å®˜æ–¹å»ºè®®2:"></a>å®˜æ–¹å»ºè®®2:</h2>æ˜¯ä¸æ˜¯æ¯æ¬¡éƒ½å†™this.$store.state.XXXè®©ä½ æ„Ÿåˆ°ç¹çï¼Œä½ å®åœ¨ä¸æƒ³å†™ï¼Œå½“ç„¶æœ‰ç®€ä¾¿çš„å†™æ³•ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"> <span class="comment">// ä»vuexä¸­å¯¼å…¥mapState</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ç»è¿‡è§£æ„åï¼Œè‡ªåŠ¨å°±æ·»åŠ åˆ°äº†è®¡ç®—å±æ€§ä¸­ï¼Œæ­¤æ—¶å°±å¯ä»¥ç›´æ¥åƒè®¿é—®è®¡ç®—å±æ€§ä¸€æ ·è®¿é—®å®ƒ</span></span></span><br><span class="line"><span class="language-javascript">    ...<span class="title function_">mapState</span>([<span class="string">&#x27;name&#x27;</span>]), </span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
ä½ ç”šè‡³å¯ä»¥åœ¨è§£æ„çš„æ—¶å€™ç»™å®ƒèµ‹åˆ«åï¼Œå–å¤–å·ï¼Œå°±åƒè¿™æ ·ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// èµ‹åˆ«åçš„è¯ï¼Œè¿™é‡Œæ¥æ”¶å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ•°ç»„</span></span><br><span class="line">...<span class="title function_">mapState</span>(&#123; <span class="attr">aliasName</span>: <span class="string">&#x27;name&#x27;</span> &#125;),  </span><br></pre></td></tr></table></figure>
ğŸ¤—ç°åœ¨ï¼Œå®‰è£…vuexå¹¶ä¸”åˆå§‹åŒ–çš„å·¥ä½œå°±ç»“æŸäº†ï¼Œæ­¤æ—¶ä½ å¯ä»¥å¾ˆè½»æ˜“çš„åœ¨é¡¹ç›®çš„ä»»æ„åœ°æ–¹è®¿é—®åˆ°ä»“åº“é‡Œçš„çŠ¶æ€ã€‚<h1 id="ç¬¬ä¸‰æ­¥ï¼Œäº†è§£ä¿®é¥°å™¨ï¼šGetter"><a href="#ç¬¬ä¸‰æ­¥ï¼Œäº†è§£ä¿®é¥°å™¨ï¼šGetter" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼Œäº†è§£ä¿®é¥°å™¨ï¼šGetter"></a>ç¬¬ä¸‰æ­¥ï¼Œäº†è§£ä¿®é¥°å™¨ï¼šGetter</h1>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸ªè¯»å–æ“ä½œçš„ â€œä¿®é¥°åˆ©å™¨â€ â€”Getter<h2 id="é—®é¢˜å‡è®¾-1"><a href="#é—®é¢˜å‡è®¾-1" class="headerlink" title="é—®é¢˜å‡è®¾:"></a>é—®é¢˜å‡è®¾:</h2>ğŸ˜¡è®¾æƒ³ï¼Œä½ å·²ç»å°†storeä¸­çš„nameå±•ç¤ºåˆ°é¡µé¢ä¸Šäº†ï¼Œè€Œä¸”æ˜¯å¾ˆå¤šé¡µé¢éƒ½å±•ç¤ºäº†ï¼Œæ­¤æ—¶äº§å“ç»ç†è¦æ±‚ï¼šæ‰€æœ‰çš„nameå‰é¢éƒ½è¦åŠ ä¸Šâ€œhelloâ€ï¼<br>è¿™æ—¶å€™ï¼Œä½ ç¬¬ä¸€æƒ³åˆ°çš„æ˜¯æ€ä¹ˆåŠ å‘¢ï¼Ÿ<br>emmâ€¦åœ¨æ¯ä¸ªé¡µé¢ä¸Šï¼Œä½¿ç”¨this.$store.state.nameè·å–åˆ°å€¼ä¹‹åï¼Œè¿›è¡Œéå†ï¼Œå‰é¢è¿½åŠ â€helloâ€å³å¯ã€‚<br>No,No,No<h2 id="è¿™æ ·å¾ˆä¸å¥½ï¼ŒåŸå› å¦‚ä¸‹ï¼š"><a href="#è¿™æ ·å¾ˆä¸å¥½ï¼ŒåŸå› å¦‚ä¸‹ï¼š" class="headerlink" title="è¿™æ ·å¾ˆä¸å¥½ï¼ŒåŸå› å¦‚ä¸‹ï¼š"></a>è¿™æ ·å¾ˆä¸å¥½ï¼ŒåŸå› å¦‚ä¸‹ï¼š</h2></li>
</ol>
<ul>
<li>ç¬¬ä¸€ï¼Œå‡å¦‚ä½ åœ¨Aã€Bã€Cä¸‰ä¸ªé¡µé¢éƒ½ç”¨åˆ°äº†nameï¼Œé‚£ä¹ˆä½ è¦åœ¨è¿™Aã€Bã€Cä¸‰ä¸ªé¡µé¢éƒ½ä¿®æ”¹ä¸€éï¼Œå¤šä¸ªé¡µé¢ä½ å°±è¦åŠ å¾ˆå¤šéè¿™ä¸ªæ–¹æ³•ï¼Œè¿™æ ·åªä¼šé€ æˆä»£ç å†—ä½™ï¼›</li>
<li>ç¬¬äºŒï¼Œå‡å¦‚ä¸‹æ¬¡äº§å“ç»ç†è®©ä½ æŠŠ â€œhelloâ€ æ”¹æˆ â€œGoodByeâ€ çš„æ—¶å€™ï¼Œä½ åˆå¾—æŠŠä¸‰ä¸ªé¡µé¢éƒ½æ”¹ä¸€éï¼Œè¿™æ—¶å€™ä½ åªèƒ½â€¦ğŸ˜‡<h2 id="æ–°çš„æ€è·¯-ğŸ‘ğŸ»"><a href="#æ–°çš„æ€è·¯-ğŸ‘ğŸ»" class="headerlink" title="æ–°çš„æ€è·¯:ğŸ‘ğŸ»"></a>æ–°çš„æ€è·¯:ğŸ‘ğŸ»</h2>æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨storeä¸­å¯¹nameè¿›è¡Œä¸€äº›æ“ä½œæˆ–è€…åŠ å·¥ï¼Œä»æºå¤´è§£å†³é—®é¢˜ï¼é‚£ä¹ˆå…·ä½“åº”è¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿ</li>
</ul>
<ol>
<li>é¦–å…ˆï¼Œåœ¨storeå¯¹è±¡ä¸­å¢åŠ getterså±æ€§<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>);</span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªnameï¼Œä»¥ä¾›å…¨å±€ä½¿ç”¨</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;wnxx&#x27;</span>,</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªnumberï¼Œä»¥ä¾›å…¨å±€ä½¿ç”¨</span></span><br><span class="line">    <span class="attr">number</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªlistï¼Œä»¥ä¾›å…¨å±€ä½¿ç”¨</span></span><br><span class="line">    <span class="attr">list</span>: [</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;welcome&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;to&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;vuex&#x27;</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">    <span class="comment">// åœ¨storeå¯¹è±¡ä¸­å¢åŠ getterså±æ€§</span></span><br><span class="line">      <span class="attr">getters</span>: &#123;</span><br><span class="line">         <span class="title function_">getMessage</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="comment">// è·å–ä¿®é¥°åçš„nameï¼Œç¬¬ä¸€ä¸ªå‚æ•°stateä¸ºå¿…è¦å‚æ•°ï¼Œå¿…é¡»å†™åœ¨å½¢å‚ä¸Š</span></span><br><span class="line">         <span class="keyword">return</span> <span class="string">`hello<span class="subst">$&#123;state.name&#125;</span>`</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure></li>
<li>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨:<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// æ³¨æ„ä¸æ˜¯$store.stateäº†ï¼Œè€Œæ˜¯$store.getters</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">name</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>.<span class="property">getMessage</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="å®˜æ–¹å»ºè®®"><a href="#å®˜æ–¹å»ºè®®" class="headerlink" title="å®˜æ–¹å»ºè®®:"></a>å®˜æ–¹å»ºè®®:</h2>ä¸è¦æ¯æ¬¡éƒ½å†™this.$store.getters.XXXï¼Œå®˜æ–¹å»ºè®®æˆ‘ä»¬å¯ä»¥ä½¿ç”¨mapGetterså»è§£æ„åˆ°è®¡ç®—å±æ€§ä¸­ï¼Œå°±åƒä½¿ç”¨mapStateä¸€æ ·ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨thisè°ƒç”¨äº†ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; mapState, mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">getMessage</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    ...<span class="title function_">mapState</span>([<span class="string">&#x27;name&#x27;</span>]),</span></span><br><span class="line"><span class="language-javascript">    ...<span class="title function_">mapGetters</span>([<span class="string">&#x27;getMessage&#x27;</span>]),</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
å½“ç„¶ï¼Œå’ŒmapStateä¸€æ ·ä½ ä¹Ÿå¯ä»¥å–åˆ«åï¼Œå–å¤–å·ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">...<span class="title function_">mapGetters</span>(&#123; <span class="attr">aliasName</span>: <span class="string">&#x27;getMessage&#x27;</span> &#125;),  </span><br><span class="line"><span class="comment">// èµ‹åˆ«åçš„è¯ï¼Œè¿™é‡Œæ¥æ”¶å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ•°ç»„</span></span><br></pre></td></tr></table></figure>
ğŸ¤— OKï¼Œå½“ä½ çœ‹åˆ°è¿™é‡Œï¼Œä½ å·²ç»æˆåŠŸçš„äº†è§£äº†getterså•¦ï¼<br>ğŸ˜ è¯»å–å€¼çš„æ“ä½œæˆ‘ä»¬æœ‰ â€œåŸç”Ÿè¯»ï¼ˆstateï¼‰â€ å’Œ â€œä¿®é¥°è¯»ï¼ˆgettersï¼‰â€ï¼Œæ¥ä¸‹æ¥å°±è¦ä»‹ç»æ€ä¹ˆä¿®æ”¹å€¼äº†ï¼<h1 id="ç¬¬å››æ­¥ï¼Œäº†è§£å¦‚ä½•ä¿®æ”¹å€¼ï¼šMutation"><a href="#ç¬¬å››æ­¥ï¼Œäº†è§£å¦‚ä½•ä¿®æ”¹å€¼ï¼šMutation" class="headerlink" title="ç¬¬å››æ­¥ï¼Œäº†è§£å¦‚ä½•ä¿®æ”¹å€¼ï¼šMutation"></a>ç¬¬å››æ­¥ï¼Œäº†è§£å¦‚ä½•ä¿®æ”¹å€¼ï¼šMutation</h1>ğŸ¤—OKï¼æˆ‘ä»¬å·²ç»æˆåŠŸè®¿é—®åˆ°äº†storeé‡Œé¢çš„å€¼ï¼Œæ¥ä¸‹æ¥æˆ‘æ¥ä»‹ç»ä¸€ä¸‹æ€ä¹ˆä¿®æ”¹stateé‡Œé¢çš„å€¼ã€‚<h2 id="é”™è¯¯ç¤ºèŒƒ"><a href="#é”™è¯¯ç¤ºèŒƒ" class="headerlink" title="é”™è¯¯ç¤ºèŒƒ"></a>é”™è¯¯ç¤ºèŒƒ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯ç¤ºèŒƒ</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">XXX</span> = <span class="variable constant_">XXX</span>;</span><br></pre></td></tr></table></figure>
<h2 id="é”™è¯¯åŸå› "><a href="#é”™è¯¯åŸå› " class="headerlink" title="é”™è¯¯åŸå› :"></a>é”™è¯¯åŸå› :</h2>å› ä¸ºè¿™ä¸ªstoreä»“åº“æ¯”è¾ƒå¥‡æ€ªï¼Œä½ å¯ä»¥éšä¾¿æ‹¿ï¼Œä½†æ˜¯ä½ ä¸èƒ½éšä¾¿æ”¹ã€‚<br>æˆ‘ä¸¾ä¸ªä¾‹å­ï¼šå‡å¦‚ä½ æ‰“å¼€å¾®ä¿¡æœ‹å‹åœˆï¼Œçœ‹åˆ°ä½ çš„å¥½å‹å‘äº†åŠ¨æ€ï¼Œä½†æ˜¯åŠ¨æ€é‡Œæœ‰ä¸ªé”™åˆ«å­—ï¼Œä½ è¦æ€ä¹ˆåŠå‘¢ï¼Ÿä½ å¯ä»¥å¸®ä»–æ”¹æ‰å—ï¼Ÿå½“ç„¶ä¸å¯ä»¥ï¼æˆ‘ä»¬åªèƒ½é€šçŸ¥ä»–æœ¬äººå»ä¿®æ”¹ï¼Œå› ä¸ºæ˜¯åˆ«äººçš„æœ‹å‹åœˆï¼Œä½ æ˜¯æ— æƒæ“ä½œçš„ï¼Œåªæœ‰ä»–è‡ªå·±æ‰èƒ½æ“ä½œã€‚åŒç†ï¼Œåœ¨vuexä¸­ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä¿®æ”¹ä»“åº“é‡Œçš„å€¼ï¼Œå¿…é¡»ç”¨vuexè‡ªå¸¦çš„æ–¹æ³•å»ä¿®æ”¹ã€‚<h2 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h2>æˆ‘ä»¬å‡†å¤‡å®Œæˆä¸€ä¸ªæ•ˆæœï¼šæˆ‘ä»¬å…ˆè¾“å‡ºstateä¸­çš„numberçš„é»˜è®¤å€¼0ï¼Œç„¶åæˆ‘ä»¬åœ¨vueç»„ä»¶é‡Œé€šè¿‡æäº¤Mutationsæ”¹å˜numberçš„é»˜è®¤å€¼0ï¼Œæ”¹æˆæˆ‘ä»¬æƒ³ä¿®æ”¹çš„å€¼ï¼Œç„¶åå†è¾“å‡ºå‡ºæ¥ã€‚</li>
<li>ä¿®æ”¹store/index.js<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>);</span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;wnxx&#x27;</span>,</span><br><span class="line">    <span class="attr">number</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="comment">// å¢åŠ mutationså±æ€§</span></span><br><span class="line">    <span class="title function_">setNumber</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="comment">// å¢åŠ ä¸€ä¸ªmutationsçš„æ–¹æ³•ï¼Œæ–¹æ³•çš„ä½œç”¨æ˜¯è®©numä»0å˜æˆ10</span></span><br><span class="line">      state.<span class="property">number</span> = <span class="number">10</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure></li>
<li>ä¿®æ”¹App.vue<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æ—§å€¼ï¼š<span class="subst">$&#123;<span class="variable language_">this</span>.$store.state.number&#125;</span>`</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;setNumber&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æ–°å€¼ï¼š<span class="subst">$&#123;<span class="variable language_">this</span>.$store.state.number&#125;</span>`</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
ä»¥ä¸Šæ˜¯ç®€å•å®ç°mutationsçš„æ–¹æ³•ï¼Œæ˜¯æ²¡æœ‰ä¼ å‚çš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¼ ä¸å›ºå®šçš„å‚æ•°æ€ä¹ˆåŠï¼Ÿ</li>
<li>ä¿®æ”¹store/index.js<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">setNumber</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      state.<span class="property">number</span> = <span class="number">10</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">setNumberIsWhat</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">      <span class="comment">// å¢åŠ ä¸€ä¸ªå¸¦å‚æ•°çš„mutationsæ–¹æ³•ï¼Œå¹¶ä¸”å®˜æ–¹å»ºè®®payloadä¸ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">      state.<span class="property">number</span> = payload.<span class="property">number</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></li>
<li>ä¿®æ”¹App.vue<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æ—§å€¼ï¼š<span class="subst">$&#123;<span class="variable language_">this</span>.$store.state.number&#125;</span>`</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// è°ƒç”¨çš„æ—¶å€™ä¹Ÿéœ€è¦ä¼ é€’ä¸€ä¸ªå¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;setNumberIsWhat&#x27;</span>, &#123; <span class="attr">number</span>: <span class="number">666</span> &#125;); </span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æ–°å€¼ï¼š<span class="subst">$&#123;<span class="variable language_">this</span>.$store.state.number&#125;</span>`</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
ğŸ˜±è¿™é‡Œè¯´ä¸€æ¡é‡è¦åŸåˆ™ï¼šMutationsé‡Œé¢çš„å‡½æ•°å¿…é¡»æ˜¯åŒæ­¥æ“ä½œï¼Œä¸èƒ½åŒ…å«å¼‚æ­¥æ“ä½œï¼<h2 id="å®˜æ–¹å»ºè®®-1"><a href="#å®˜æ–¹å»ºè®®-1" class="headerlink" title="å®˜æ–¹å»ºè®®:"></a>å®˜æ–¹å»ºè®®:</h2>å°±åƒmapStateå’ŒmapGettersä¸€æ ·ï¼Œæˆ‘ä»¬åœ¨ç»„ä»¶ä¸­å¯ä»¥ä½¿ç”¨mapMutationsä»£æ›¿this.$store.commit(â€˜XXXâ€™)<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="title function_">setNumberIsWhat</span>(&#123; <span class="attr">number</span>: <span class="number">999</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ³¨æ„ï¼ŒmapMutationsæ˜¯è§£æ„åˆ°methodsé‡Œé¢çš„ï¼Œè€Œä¸æ˜¯è®¡ç®—å±æ€§äº†</span></span></span><br><span class="line"><span class="language-javascript">    ...<span class="title function_">mapMutations</span>([<span class="string">&#x27;setNumberIsWhat&#x27;</span>]),</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç»™å®ƒå«åˆ«åï¼Œå–å¤–å·ï¼Œå°±åƒè¿™æ ·ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="comment">// èµ‹åˆ«åçš„è¯ï¼Œè¿™é‡Œæ¥æ”¶å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ•°ç»„</span></span><br><span class="line">  ...<span class="title function_">mapMutations</span>(&#123; <span class="attr">setNumberIsAlias</span>: <span class="string">&#x27;setNumberIsWhat&#x27;</span> &#125;), </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
ğŸ¤ª OKï¼Œå…³äºMutationçš„ä»‹ç»å¤§è‡´å°±æ˜¯è¿™æ ·ã€‚<h1 id="ç¬¬äº”æ­¥ï¼Œäº†è§£å¼‚æ­¥æ“ä½œï¼šActions"><a href="#ç¬¬äº”æ­¥ï¼Œäº†è§£å¼‚æ­¥æ“ä½œï¼šActions" class="headerlink" title="ç¬¬äº”æ­¥ï¼Œäº†è§£å¼‚æ­¥æ“ä½œï¼šActions"></a>ç¬¬äº”æ­¥ï¼Œäº†è§£å¼‚æ­¥æ“ä½œï¼šActions</h1>ä¸Šé¢æåˆ°ï¼ŒMutationsåªèƒ½è¿›è¡ŒåŒæ­¥æ“ä½œï¼ŒActionså­˜åœ¨çš„æ„ä¹‰æ˜¯å‡è®¾ä½ åœ¨ä¿®æ”¹stateçš„æ—¶å€™æœ‰å¼‚æ­¥æ“ä½œï¼Œè®©ä½ æ”¾å¼‚æ­¥æ“ä½œã€‚<h2 id="æ¡ˆä¾‹-1"><a href="#æ¡ˆä¾‹-1" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h2></li>
<li>ä¿®æ”¹store/index.js<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;wnxx&#x27;</span>,</span><br><span class="line">    <span class="attr">number</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">setNumberIsWhat</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">      state.<span class="property">number</span> = payload.<span class="property">number</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">// å¢åŠ actionså±æ€§</span></span><br><span class="line">    <span class="title function_">setNum</span>(<span class="params">content</span>) &#123;</span><br><span class="line">      <span class="comment">// å¢åŠ setNumæ–¹æ³•ï¼Œé»˜è®¤ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯contentï¼Œå…¶å€¼æ˜¯å¤åˆ¶çš„ä¸€ä»½store</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œ1ç§’åä¿®æ”¹numberä¸º666</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          content.<span class="title function_">commit</span>(<span class="string">&#x27;setNumberIsWhat&#x27;</span>, &#123; <span class="attr">number</span>: <span class="number">666</span> &#125;);</span><br><span class="line">          <span class="title function_">resolve</span>();</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li>ä¿®æ”¹App.vue<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æ—§å€¼ï¼š<span class="subst">$&#123;<span class="variable language_">this</span>.$store.state.number&#125;</span>`</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;setNum&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æ–°å€¼ï¼š<span class="subst">$&#123;<span class="variable language_">this</span>.$store.state.number&#125;</span>`</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="å®˜æ–¹å»ºè®®1-1"><a href="#å®˜æ–¹å»ºè®®1-1" class="headerlink" title="å®˜æ–¹å»ºè®®1:"></a>å®˜æ–¹å»ºè®®1:</h2>ä¸è¦ä¸€ç›´ä½¿ç”¨this.$store.dispatch(â€˜XXXâ€™)è¿™æ ·çš„å†™æ³•è°ƒç”¨actionï¼Œä½ å¯ä»¥é‡‡ç”¨mapActionsçš„æ–¹å¼ï¼ŒæŠŠç›¸å…³çš„actionsè§£æ„åˆ°methodsä¸­ï¼Œç”¨thisç›´æ¥è°ƒç”¨ï¼š<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// å°±åƒè¿™æ ·ï¼Œè§£æ„åˆ°methodsä¸­</span></span></span><br><span class="line"><span class="language-javascript">    ...<span class="title function_">mapActions</span>([<span class="string">&#x27;setNum&#x27;</span>]), </span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">async</span> <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ç›´æ¥è¿™æ ·è°ƒç”¨å³å¯</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">setNum</span>(&#123; <span class="attr">number</span>: <span class="number">123</span> &#125;); </span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç»™å®ƒå«åˆ«åï¼Œå–å¤–å·ï¼Œå°±åƒè¿™æ ·ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="comment">// èµ‹åˆ«åçš„è¯ï¼Œè¿™é‡Œæ¥æ”¶å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ•°ç»„</span></span><br><span class="line">  ...<span class="title function_">mapActions</span>(&#123; <span class="attr">setNumAlias</span>: <span class="string">&#x27;setNum&#x27;</span> &#125;),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="å®˜æ–¹å»ºè®®2-1"><a href="#å®˜æ–¹å»ºè®®2-1" class="headerlink" title="å®˜æ–¹å»ºè®®2:"></a>å®˜æ–¹å»ºè®®2:</h2>åœ¨store/index.jsä¸­çš„actionsé‡Œé¢ï¼Œæ–¹æ³•çš„å½¢å‚å¯ä»¥ç›´æ¥å°†commitè§£æ„å‡ºæ¥<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">  <span class="title function_">setNum</span>(<span class="params">&#123; commit &#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// ç›´æ¥å°†contentè§£æ„æ‰ï¼Œè§£æ„å‡ºcommitï¼Œä¸‹é¢å°±å¯ä»¥ç›´æ¥è°ƒç”¨äº†</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">commit</span>(<span class="string">&#x27;XXXX&#x27;</span>); <span class="comment">// ç›´æ¥è°ƒç”¨</span></span><br><span class="line">        <span class="title function_">resolve</span>();</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
OKï¼Œä¸è¦å°†actionå’Œmutationæ··ä¸ºä¸€è°ˆï¼Œactionå…¶å®å°±æ˜¯mutationçš„ä¸Šä¸€çº§ï¼Œåœ¨actionè¿™é‡Œå¤„ç†å®Œå¼‚æ­¥çš„ä¸€äº›æ“ä½œåï¼Œåé¢çš„ä¿®æ”¹stateå°±äº¤ç»™mutationå»åšäº†ã€‚<h1 id="ç¬¬å…­æ­¥ï¼ŒæŒ‰å±æ€§è¿›è¡Œæ‹†åˆ†"><a href="#ç¬¬å…­æ­¥ï¼ŒæŒ‰å±æ€§è¿›è¡Œæ‹†åˆ†" class="headerlink" title="ç¬¬å…­æ­¥ï¼ŒæŒ‰å±æ€§è¿›è¡Œæ‹†åˆ†"></a>ç¬¬å…­æ­¥ï¼ŒæŒ‰å±æ€§è¿›è¡Œæ‹†åˆ†</h1>æˆ‘ä»¬çœ‹åˆ°ï¼Œä¸€ä¸ªstore/index.jsé‡Œé¢å¤§è‡´åŒ…å«state/getters/mutations/actionsè¿™å››ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å½»åº•ç‚¹ï¼Œindex.jsé‡Œé¢å°±ä¿æŒè¿™ä¸ªæ¶å­ï¼ŒæŠŠé‡Œé¢çš„å†…å®¹å››æ•£åˆ°å…¶ä»–æ–‡ä»¶ä¸­ã€‚<br>æˆ‘ä»¬å¯ä»¥è¿™æ ·æ‹†åˆ†ï¼šåˆ†åˆ«æ˜¯state.jsã€ getters.jsã€ mutations.js ã€actions.js</li>
<li>æ‹†å‡ºæ¥stateæ”¾åˆ°state.jsä¸­<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// state.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> state = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;wnxx&#x27;</span>,</span><br><span class="line">    <span class="attr">number</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">list</span>: [</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;welcome&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;to&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;vuex&#x27;</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></li>
<li>æ‹†å‡ºæ¥gettersæ”¾åˆ°getters.jsä¸­<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// getters.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getters = &#123;</span><br><span class="line">  <span class="title function_">getMessage</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`hello<span class="subst">$&#123;state.name&#125;</span>`</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li>æ‹†å‡ºæ¥mutationsæ”¾åˆ°mutations.jsä¸­<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// mutations.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  <span class="title function_">setNumber</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    state.<span class="property">number</span> = <span class="number">10</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li>æ‹†å‡ºæ¥actionsæ”¾åˆ°actions.jsä¸­<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// actions.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="title function_">setNum</span>(<span class="params">content</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        content.<span class="title function_">commit</span>(<span class="string">&#x27;setNumberIsWhat&#x27;</span>, &#123; <span class="attr">number</span>: <span class="number">888</span> &#125;);</span><br><span class="line">        <span class="title function_">resolve</span>();</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li>ç»„è£…åˆ°ä¸»æ–‡ä»¶é‡Œé¢<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; state &#125; <span class="keyword">from</span> <span class="string">&#x27;./state&#x27;</span>; <span class="comment">// å¼•å…¥ state</span></span><br><span class="line"><span class="keyword">import</span> &#123; getters &#125; <span class="keyword">from</span> <span class="string">&#x27;./getters&#x27;</span>; <span class="comment">// å¼•å…¥ getters</span></span><br><span class="line"><span class="keyword">import</span> &#123; mutations &#125; <span class="keyword">from</span> <span class="string">&#x27;./mutations&#x27;</span>; <span class="comment">// å¼•å…¥ mutations</span></span><br><span class="line"><span class="keyword">import</span> &#123; actions &#125; <span class="keyword">from</span> <span class="string">&#x27;./actions&#x27;</span>; <span class="comment">// å¼•å…¥ actions</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>);</span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123; state, getters, mutations, actions &#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure>
<h1 id="ç¬¬ä¸ƒæ­¥ï¼ŒæŒ‰åŠŸèƒ½è¿›è¡Œæ‹†åˆ†-Module"><a href="#ç¬¬ä¸ƒæ­¥ï¼ŒæŒ‰åŠŸèƒ½è¿›è¡Œæ‹†åˆ†-Module" class="headerlink" title="ç¬¬ä¸ƒæ­¥ï¼ŒæŒ‰åŠŸèƒ½è¿›è¡Œæ‹†åˆ†-Module"></a>ç¬¬ä¸ƒæ­¥ï¼ŒæŒ‰åŠŸèƒ½è¿›è¡Œæ‹†åˆ†-Module</h1>ä¸Šé¢æˆ‘ä»¬ä»‹ç»å¦‚ä½•æ‹†åˆ†é¡¹ç›®ï¼Œé‡‡ç”¨çš„æ˜¯æŒ‰å±æ€§çš„æ–¹å¼å»æ‹†åˆ†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹æŒ‰å¦å¤–çš„ä¸€ä¸ªç»´åº¦å»æ‹†åˆ†æˆ‘ä»¬çš„storeï¼ŒæŒ‰åŠŸèƒ½æ‹†åˆ†ã€‚</li>
<li>æˆ‘ä»¬åœ¨ä¹‹å‰çš„storeä¸Šï¼Œå¢åŠ ä¸€ä¸ªæ–°çš„ä»“åº“store2ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// store2.js</span></span><br><span class="line"><span class="keyword">const</span> store2 = &#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;æˆ‘æ˜¯store2&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store2;</span><br></pre></td></tr></table></figure></li>
<li>ç„¶ååœ¨storeä¸­å¼•å…¥æˆ‘ä»¬æ–°åˆ›å»ºçš„store2æ¨¡å—ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; state &#125; <span class="keyword">from</span> <span class="string">&#x27;./state&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getters &#125; <span class="keyword">from</span> <span class="string">&#x27;./getters&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; mutations &#125; <span class="keyword">from</span> <span class="string">&#x27;./mutations&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; actions &#125; <span class="keyword">from</span> <span class="string">&#x27;./actions&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> store2 <span class="keyword">from</span> <span class="string">&#x27;./store2&#x27;</span>; <span class="comment">// å¼•å…¥store2æ¨¡å—</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>);</span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="comment">// æŠŠstore2æ¨¡å—æŒ‚è½½åˆ°storeé‡Œé¢</span></span><br><span class="line">  <span class="attr">modules</span>: &#123; store2 &#125;, </span><br><span class="line">  <span class="attr">state</span>: state,</span><br><span class="line">  <span class="attr">getters</span>: getters,</span><br><span class="line">  <span class="attr">mutations</span>: mutations,</span><br><span class="line">  <span class="attr">actions</span>: actions,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure></li>
<li>è®¿é—®state - æˆ‘ä»¬åœ¨App.vueæµ‹è¯•è®¿é—®store2æ¨¡å—ä¸­çš„stateä¸­çš„nameï¼Œç»“æœå¦‚ä¸‹ï¼š<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// è®¿é—®store2é‡Œé¢çš„nameå±æ€§</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">store2</span>.<span class="property">name</span>); </span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„ä»£ç å¯ä»¥äº†è§£åˆ°åœ¨ä¸åŒçš„å±æ€§é‡Œæ˜¯æ€ä¹ˆè®¿é—®æ¨¡å—å†…çš„çŠ¶æ€æˆ–è€…æ ¹çŠ¶æ€ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">  <span class="title function_">changeName</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">    <span class="comment">// state å±€éƒ¨çŠ¶æ€</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(state);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(payload.<span class="property">where</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">getters</span>: &#123;</span><br><span class="line">  <span class="title function_">testGetters</span>(<span class="params">state, getters, rootState</span>) &#123;</span><br><span class="line">    <span class="comment">// state å±€éƒ¨çŠ¶æ€</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(state);</span><br><span class="line">    <span class="comment">// å±€éƒ¨ getters,</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(getters);</span><br><span class="line">    <span class="comment">// rootState æ ¹èŠ‚ç‚¹çŠ¶æ€</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(rootState);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">  <span class="title function_">increment</span>(<span class="params">&#123; state, commit, rootState &#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// state å±€éƒ¨çŠ¶æ€</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(state);</span><br><span class="line">    <span class="comment">// rootState æ ¹èŠ‚ç‚¹çŠ¶æ€</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(rootState);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
è¿˜æœ‰ä¸€äº›å…³äºmoduleçš„å†…å®¹ï¼Œæ¯”å¦‚å‘½åç©ºé—´ã€æ¨¡å—æ³¨å†Œå…¨å±€ actionã€å¸¦å‘½åç©ºé—´çš„ç»‘å®šå‡½æ•°ã€æ¨¡å—åŠ¨æ€æ³¨å†Œã€æ¨¡å—é‡ç”¨ç­‰æ–¹æ³•ï¼Œè‡ªå·±æŸ¥é˜…å³å¯ã€‚ğŸ¤—</li>
</ol>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vuex</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueé¡¹ç›®é‡åˆ°é—®é¢˜</title>
    <url>/2023/04/12/Vue%E9%A1%B9%E7%9B%AE%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>åˆ—è¡¨è¿›å…¥è¯¦æƒ…é¡µçš„ä¼ å‚é—®é¢˜ã€‚<br>ä¾‹å¦‚å•†å“åˆ—è¡¨é¡µé¢å‰å¾€å•†å“è¯¦æƒ…é¡µé¢ï¼Œéœ€è¦ä¼ ä¸€ä¸ªå•†å“id;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;router-link :to=&quot;&#123;path: &#x27;detail&#x27;, query: &#123;id: 1&#125;&#125;&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>å‰å¾€detailé¡µé¢</router-link>cé¡µé¢çš„è·¯å¾„ä¸º<a href="http://localhost:8080/#/detail?id=1%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E4%BC%A0%E4%BA%86%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0id=1%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%B0%B1%E7%AE%97%E5%88%B7%E6%96%B0%E9%A1%B5%E9%9D%A2id%E4%B9%9F%E8%BF%98%E4%BC%9A%E5%AD%98%E5%9C%A8%E3%80%82%E6%AD%A4%E6%97%B6%E5%9C%A8c%E9%A1%B5%E9%9D%A2%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87id%E6%9D%A5%E8%8E%B7%E5%8F%96%E5%AF%B9%E5%BA%94%E7%9A%84%E8%AF%A6%E6%83%85%E6%95%B0%E6%8D%AE%EF%BC%8C%E8%8E%B7%E5%8F%96id%E7%9A%84%E6%96%B9%E5%BC%8F%E6%98%AFthis.$route.query.idvue%E4%BC%A0%E5%8F%82%E6%96%B9%E5%BC%8F%E6%9C%89%EF%BC%9Aquery%E3%80%81params+%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82%E3%80%82">http://localhost:8080/#/detail?id=1ï¼Œå¯ä»¥çœ‹åˆ°ä¼ äº†ä¸€ä¸ªå‚æ•°id=1ï¼Œå¹¶ä¸”å°±ç®—åˆ·æ–°é¡µé¢idä¹Ÿè¿˜ä¼šå­˜åœ¨ã€‚æ­¤æ—¶åœ¨cé¡µé¢å¯ä»¥é€šè¿‡idæ¥è·å–å¯¹åº”çš„è¯¦æƒ…æ•°æ®ï¼Œè·å–idçš„æ–¹å¼æ˜¯this.$route.query.idvueä¼ å‚æ–¹å¼æœ‰ï¼šqueryã€params+åŠ¨æ€è·¯ç”±ä¼ å‚ã€‚</a><br>è¯´ä¸‹ä¸¤è€…çš„åŒºåˆ«ï¼šÂ  Â <br>1.queryé€šè¿‡pathåˆ‡æ¢è·¯ç”±ï¼Œparamsé€šè¿‡nameåˆ‡æ¢è·¯ç”±</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// queryé€šè¿‡pathåˆ‡æ¢è·¯ç”±</span><br><span class="line">&lt;router-link :to=&quot;&#123;path: &#x27;Detail&#x27;, query: &#123; id: 1 &#125;&#125;&quot;&gt;å‰å¾€Detailé¡µé¢&lt;/router-link&gt;</span><br><span class="line">// paramsé€šè¿‡nameåˆ‡æ¢è·¯ç”±</span><br><span class="line">&lt;router-link :to=&quot;&#123;name: &#x27;Detail&#x27;, params: &#123; id: 1 &#125;&#125;&quot;&gt;å‰å¾€Detailé¡µé¢&lt;/router-link&gt;Â </span><br></pre></td></tr></table></figure>
<p>2.queryé€šè¿‡this.$route.queryæ¥æ¥æ”¶å‚æ•°ï¼Œparamsé€šè¿‡this.$route.paramsæ¥æ¥æ”¶å‚æ•°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// queryé€šè¿‡this.$route.queryæ¥æ”¶å‚æ•°</span><br><span class="line">created () &#123;</span><br><span class="line">    const id = this.$route.query.id;</span><br><span class="line">&#125;</span><br><span class="line">// paramsé€šè¿‡this.$route.paramsæ¥æ¥æ”¶å‚æ•°</span><br><span class="line">created () &#123;</span><br><span class="line">    const id = this.$route.params.id;</span><br><span class="line">&#125;Â  Â  </span><br></pre></td></tr></table></figure>
<p>3.queryä¼ å‚çš„urlå±•ç°æ–¹å¼ï¼š/detail?id=1&amp;user=123&amp;identity=1&amp;æ›´å¤šå‚æ•°Â  Â  Â  Â paramsï¼‹åŠ¨æ€è·¯ç”±çš„urlæ–¹å¼ï¼š/detail/123Â  Â <br>4.paramsåŠ¨æ€è·¯ç”±ä¼ å‚ï¼Œä¸€å®šè¦åœ¨è·¯ç”±ä¸­å®šä¹‰å‚æ•°ï¼Œç„¶ååœ¨è·¯ç”±è·³è½¬çš„æ—¶å€™å¿…é¡»è¦åŠ ä¸Šå‚æ•°ï¼Œå¦åˆ™å°±æ˜¯ç©ºç™½é¡µé¢ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;      </span><br><span class="line">    path: &#x27;/detail/:id&#x27;,      </span><br><span class="line">    name: &#x27;Detail&#x27;,      </span><br><span class="line">    component: Detail    </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œparamsä¼ å‚æ—¶ï¼Œå¦‚æœæ²¡æœ‰åœ¨è·¯ç”±ä¸­å®šä¹‰å‚æ•°ï¼Œä¹Ÿæ˜¯å¯ä»¥ä¼ è¿‡å»çš„ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ¥æ”¶åˆ°ï¼Œä½†æ˜¯ä¸€æ—¦åˆ·æ–°é¡µé¢ï¼Œè¿™ä¸ªå‚æ•°å°±ä¸å­˜åœ¨äº†ã€‚è¿™å¯¹äºéœ€è¦ä¾èµ–å‚æ•°è¿›è¡ŒæŸäº›æ“ä½œçš„è¡Œä¸ºæ˜¯è¡Œä¸é€šçš„ï¼Œå› ä¸ºä½ æ€»ä¸å¯èƒ½è¦æ±‚ç”¨æˆ·ä¸èƒ½åˆ·æ–°é¡µé¢å§ã€‚ ä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// å®šä¹‰çš„è·¯ç”±ä¸­ï¼Œåªå®šä¹‰ä¸€ä¸ªidå‚æ•°</span><br><span class="line">&#123;</span><br><span class="line">    path: &#x27;detail/:id&#x27;,</span><br><span class="line">    name: &#x27;Detail&#x27;,</span><br><span class="line">    components: Detail</span><br><span class="line">&#125;</span><br><span class="line">// templateä¸­çš„è·¯ç”±ä¼ å‚ï¼Œ</span><br><span class="line">// ä¼ äº†ä¸€ä¸ªidå‚æ•°å’Œä¸€ä¸ªtokenå‚æ•°</span><br><span class="line">// idæ˜¯åœ¨è·¯ç”±ä¸­å·²ç»å®šä¹‰çš„å‚æ•°ï¼Œè€Œtokenæ²¡æœ‰å®šä¹‰</span><br><span class="line">&lt;router-link :to=&quot;&#123;name: &#x27;Detail&#x27;, params: &#123; id: 1, token: &#x27;123456&#x27; &#125;&#125;&quot;&gt;å‰å¾€Detailé¡µé¢&lt;/router-link&gt;</span><br><span class="line">// åœ¨è¯¦æƒ…é¡µæ¥æ”¶</span><br><span class="line">created () &#123;</span><br><span class="line">    // ä»¥ä¸‹éƒ½å¯ä»¥æ­£å¸¸è·å–åˆ°</span><br><span class="line">    // ä½†æ˜¯é¡µé¢åˆ·æ–°åï¼Œidä¾ç„¶å¯ä»¥è·å–ï¼Œè€Œtokenæ­¤æ—¶å°±ä¸å­˜åœ¨äº†</span><br><span class="line">    const id = this.$route.params.id;</span><br><span class="line">    const token = this.$route.params.token;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vue3</title>
    <url>/2022/10/10/vue3/</url>
    <content><![CDATA[<h1 id="vue3-ç®€ä»‹"><a href="#vue3-ç®€ä»‹" class="headerlink" title="vue3 ç®€ä»‹"></a>vue3 ç®€ä»‹</h1><ol>
<li>vue3æä¾›äº†æ›´å¥½çš„æ€§èƒ½ï¼Œæ›´å°çš„æ†ç»‘åŒ…ä½“ç§¯ï¼Œæ›´å¥½çš„TSé›†æˆï¼Œç”¨äºå¤„ç†å¤§è§„æ¨¡ç”¨ä¾‹çš„æ–° APIã€‚</li>
<li>3.0ç‰ˆæœ¬çš„vueï¼Œå¼€å‘å‘¨æœŸé•¿è¾¾ä¸¤å¹´å¤šã€‚</li>
<li>3.0çš„å‘å¸ƒï¼Œæ ‡å¿—ç€æ­¤æ¡†æ¶æ•´ä½“å‘ˆç°å‡ºå¯ç”¨çŠ¶æ€ï¼Œå°½ç®¡æ¡†æ¶çš„æŸäº›å­é¡¹ç›®å¯èƒ½ä»éœ€è¦è¿›ä¸€æ­¥å¼€å‘æ‰èƒ½æ‰“å‘å“¦ç¨³å®šçŠ¶æ€ï¼Œç‰¹åˆ«æ˜¯è·¯ç”±å’ŒVUEXçš„é›†æˆï¼Œä¸è¿‡ç°åœ¨ä»ç„¶æ˜¯å¼€å§‹ä½¿ç”¨vue3å¯åŠ¨æ–°é¡¹ç›®çš„åˆé€‚æ—¶æœºã€‚<h1 id="Vue3-çš„ä¼˜åŠ¿"><a href="#Vue3-çš„ä¼˜åŠ¿" class="headerlink" title="Vue3 çš„ä¼˜åŠ¿"></a>Vue3 çš„ä¼˜åŠ¿</h1></li>
<li>3æ¯”2è¦å¿«å°†è¿‘ä¸¤å€ã€‚</li>
<li>3åŠ å…¥äº†TSä»¥åŠå¯¹PWAçš„æ”¯æŒã€‚</li>
<li>3æ²¡æœ‰beforeCreateã€createdï¼Œç”¨setupä»£æ›¿ã€‚</li>
<li>å•ç‹¬åŠŸèƒ½å¯ä»¥æŠ½ç¦»ï¼Œæ¯”å¦‚watchã€componentã€‚</li>
<li>æ²¡æœ‰çœ¼èŠ±ç¼­ä¹±çš„thisã€‚</li>
<li>å¼ºå¤§çš„proxyå®ç°å“åº”å¼ã€‚</li>
<li>å“åº”å¼æ–¹é¢ï¼Œæ€§èƒ½å¾—åˆ°äº†å¾ˆå¤§çš„æå‡ã€ä¸ç”¨åˆå§‹åŒ–çš„æ—¶å€™å°±é€’å½’éå†å±æ€§ã€‚</li>
<li>3çš„ç»„åˆå¼APIå¯ä»¥å’Œ2çš„ optionAPIåŒæ—¶å­˜åœ¨ã€‚</li>
<li>ä»£ç æ›´åˆ©äºç»´æŠ¤å’Œå°è£…ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>vue3</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>vue3-hooksä½¿ç”¨</title>
    <url>/2022/10/25/vue3-hooks%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h1 id="æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹vue3-é¡¹ç›®ä¸­çš„-hooks-çš„ä½¿ç”¨"><a href="#æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹vue3-é¡¹ç›®ä¸­çš„-hooks-çš„ä½¿ç”¨" class="headerlink" title="æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹vue3 é¡¹ç›®ä¸­çš„ hooks çš„ä½¿ç”¨"></a>æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹vue3 é¡¹ç›®ä¸­çš„ hooks çš„ä½¿ç”¨</h1><p>hooks å’Œ vue2 å½“ä¸­çš„ mixin æ˜¯ç±»ä¼¼çš„ï¼Œmixinå°±æ˜¯æ··å…¥ï¼Œé€šè¿‡ mixin æ··å…¥æ¥åˆ†å‘ vue ç»„ä»¶ä¸­çš„å¯å¤ç”¨åŠŸèƒ½ã€‚<br>ä¸€ä¸ªæ··å…¥å¯¹è±¡å¯ä»¥åŒ…å«ä»»æ„ç»„ä»¶é€‰é¡¹ã€‚å½“ç»„ä»¶ä½¿ç”¨æ··å…¥å¯¹è±¡æ—¶ï¼Œæ‰€æœ‰æ··å…¥å¯¹è±¡çš„é€‰é¡¹å°†è¢«â€œæ··åˆâ€è¿›å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ã€‚<br>è¿™ä¸¤è€…ä¸»è¦çš„åŒºåˆ«ï¼Œä¸»è¦æ˜¯ hooks æ˜¯å‡½æ•°ã€‚</p>
<h1 id="æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹hooksä¼˜ç‚¹æœ‰å“ªäº›ï¼Ÿ"><a href="#æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹hooksä¼˜ç‚¹æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹hooksä¼˜ç‚¹æœ‰å“ªäº›ï¼Ÿ"></a>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹hooksä¼˜ç‚¹æœ‰å“ªäº›ï¼Ÿ</h1><p>hooks ç‰¹ç‚¹ï¼š</p>
<ol>
<li>vue3 ä¸­çš„ hooks å‡½æ•°ç›¸å½“äº vue2 é‡Œé¢çš„ mixin æ··å…¥ï¼Œä¸åŒåœ¨äº hooks æ˜¯å‡½æ•°ã€‚</li>
<li>vue3 ä¸­çš„ hooks å‡½æ•°å¯ä»¥æé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œèƒ½å¤Ÿåœ¨ä¸åŒçš„ç»„ä»¶å½“ä¸­éƒ½åˆ©ç”¨ hooks å‡½æ•°ã€‚</li>
<li>hooks å‡½æ•°å¯ä»¥ä¸ mixin è¿ç”¨ï¼Œä½†æ˜¯ä¸å»ºè®®ã€‚</li>
</ol>
<h1 id="hooks-åŸºæœ¬ä½¿ç”¨"><a href="#hooks-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="hooks åŸºæœ¬ä½¿ç”¨"></a>hooks åŸºæœ¬ä½¿ç”¨</h1><p><img src="/2022/10/25/vue3-hooks%E4%BD%BF%E7%94%A8/%E6%A1%88%E4%BE%8B1.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬å†™äº†ä¸€ä¸ªç®€å•çš„å°æ¡ˆä¾‹ï¼Œä¸Šé¢çš„ä»£ç å…¶å®å¾ˆç®€å•äº†å°±ï¼Œæœ‰ä¸¤ä¸ªæ ‡ç­¾ï¼Œæ˜¾ç¤ºå¯è§†é¡µé¢çš„é•¿åº¦å’Œå®½åº¦ï¼Œç„¶åæœ‰ä¸€ä¸ªæŒ‰é’®è·å–æœ€æ–°çš„é•¿å®½è¿›è¡Œæ˜¾ç¤ºã€‚<br>å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨å¦ä¸€ä¸ªé¡µé¢ä¹Ÿæƒ³å®ç°è¿™ä¸ªåŠŸèƒ½çš„è¯ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œåœ¨ç›´æ¥æŠŠä¸Šé¢çš„ä»£ç å¤åˆ¶ä¸€ä¸‹åˆ°å¦ä¸€ä¸ªéœ€è¦å®ç°çš„é¡µé¢å°±å¯ä»¥äº†ã€‚<br>ä½†æ˜¯ï¼Œæœ‰æ²¡æœ‰å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¸€ä¸ªé¡µé¢éœ€è¦å°±å¤åˆ¶ä¸€éï¼Œä¸€ä¸ªé¡µé¢éœ€è¦å°±å¤åˆ¶ä¸€éï¼Œå¦‚æœæœ‰ä¸€ç™¾ä¸ªé¡µé¢å°±å¤åˆ¶ä¸€ç™¾éï¼Œä»£ç ä¸€ä¸¤è¡Œè¿˜å¥½ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªè¶…çº§åºå¤§çš„å·¥å…·ç±»ï¼Œé‚£ä¹ˆåœ¨åƒè¿™æ ·å®ç°çš„è¯ï¼Œæ˜¯ä¸æ˜¯å°±è¿‡äºå¤æ‚äº†ï¼Œè€Œä¸”è¿˜ä¸å¥½å®ç°ï¼Œé‚£è¿™ä¸ªé—®é¢˜æ€ä¹ˆè§£å†³å‘¢ï¼Ÿå°±æ˜¯ hooks ã€‚</p>
<h1 id="æˆ‘ä»¬é’ˆå¯¹ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨-hooks-ç®€å•çš„å®ç°ä¸€ä¸‹ã€‚"><a href="#æˆ‘ä»¬é’ˆå¯¹ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨-hooks-ç®€å•çš„å®ç°ä¸€ä¸‹ã€‚" class="headerlink" title="æˆ‘ä»¬é’ˆå¯¹ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ hooks ç®€å•çš„å®ç°ä¸€ä¸‹ã€‚"></a>æˆ‘ä»¬é’ˆå¯¹ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ hooks ç®€å•çš„å®ç°ä¸€ä¸‹ã€‚</h1><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ src æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª hooks æ–‡ä»¶å¤¹ã€‚<br>åœ¨ hooks æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåå­—å°±å«åš useScreenWh.js æ–‡ä»¶<br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŠŠè·å–å¯è§†åŒ–ç•Œé¢çš„ä»£ç æ”¾è¿›è¿™ä¸ª js æ–‡ä»¶ï¼Œç„¶åå¯¼å‡ºå»ï¼Œç»™å…¶ä»–é¡µé¢ä½¿ç”¨å°±å¯ä»¥äº†ã€‚<br><img src="/2022/10/25/vue3-hooks%E4%BD%BF%E7%94%A8/%E6%A1%88%E4%BE%8B2.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ç„¶ååœ¨éœ€è¦ä½¿ç”¨ hooks çš„æ–‡ä»¶å¼•å…¥å°±å¯ä»¥ä½¿ç”¨äº†ã€‚<br><img src="/2022/10/25/vue3-hooks%E4%BD%BF%E7%94%A8/%E6%A1%88%E4%BE%8B3.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
]]></content>
      <categories>
        <category>vue3</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>vue3API</title>
    <url>/2022/12/13/vue3API/</url>
    <content><![CDATA[<p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨setupç»„åˆ?<br>Vue3 ä¸­æ–°å¢çš„ setupï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³ Vue2 ä¸­â€œæ•°æ®å’Œä¸šåŠ¡é€»è¾‘ä¸åˆ†ç¦»â€çš„é—®é¢˜ã€‚</p>
<p>Vue3ä¸­ä½¿ç”¨ setup æ˜¯å¦‚ä½•è§£å†³è¿™ä¸€é—®é¢˜çš„å‘¢ï¼Ÿ<br>ç¬¬1æ­¥: ç”¨setupç»„åˆAPI æ›¿æ¢ vue2 ä¸­çš„data/computed/watch/methodsç­‰é€‰é¡¹ï¼›<br>ç¬¬2æ­¥: æŠŠsetupä¸­ç›¸å…³è”çš„åŠŸèƒ½å°è£…æˆä¸€ä¸ªä¸ªå¯ç‹¬ç«‹å¯ç»´æŠ¤çš„hooksã€‚</p>
<p>1ã€ref<br>ä½œç”¨ï¼šä¸€èˆ¬ç”¨äºå®šä¹‰åŸºæœ¬æ•°æ®ç±»å‹æ•°æ®ï¼Œæ¯”å¦‚ String / Boolean / Numberç­‰ã€‚<br>èƒŒåï¼šref çš„èƒŒåæ˜¯ä½¿ç”¨ reactive æ¥å®ç°çš„å“åº”å¼.<br>è¯­æ³•ï¼šconst x = ref(100)<br>è®¿é—®ï¼šåœ¨ setup ä¸­ä½¿ç”¨ .value æ¥è®¿é—®ã€‚<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B1.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>2ã€isRef<br>ä½œç”¨ï¼šåˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºä¸€ä¸ªrefå¯¹è±¡ã€‚<br>è¯­æ³•ï¼šconst bol = isRef(x)<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B2.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>3ã€unref<br>ä½œç”¨ï¼šç”¨äºè¿”å›ä¸€ä¸ªå€¼ï¼Œå¦‚æœè®¿é—®çš„æ˜¯refå˜é‡ï¼Œå°±è¿”å›å…¶ .valueå€¼ï¼›å¦‚æœä¸æ˜¯ refå˜é‡ï¼Œå°±ç›´æ¥è¿”å›ã€‚<br>è¯­æ³•ï¼šconst x = unref(y)<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B3.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>4ã€customRef<br>ä½œç”¨ï¼šè‡ªå®šä¹‰refå¯¹è±¡ï¼ŒæŠŠrefå¯¹è±¡æ”¹å†™æˆget/setï¼Œè¿›ä¸€æ­¥å¯ä»¥ä¸ºå®ƒä»¬æ·»åŠ  track/triggerã€‚<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B4.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>5ã€toRef<br>ä½œç”¨ï¼šæŠŠä¸€ä¸ª reactiveå¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§å˜æˆ ref å˜é‡ã€‚<br>è¯­æ³•ï¼šconst x = toRef(reactive(obj), â€˜keyâ€™) // x.value<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B5.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>6ã€toRefs<br>ä½œç”¨ï¼šæŠŠä¸€ä¸ªreactiveå“åº”å¼å¯¹è±¡å˜æˆrefå˜é‡ã€‚<br>è¯­æ³•ï¼šconst obj1 = toRefs(reactive(obj))<br>åº”ç”¨ï¼šåœ¨å­ç»„ä»¶ä¸­æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ propsæ—¶ï¼Œä½¿ç”¨ toRefsæŠŠå®ƒå˜æˆå“åº”å¼çš„ã€‚<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B6.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>7ã€shallowRef<br>ä½œç”¨ï¼šå¯¹å¤æ‚å±‚çº§çš„å¯¹è±¡ï¼Œåªå°†å…¶ç¬¬ä¸€å±‚å˜æˆ ref å“åº”ã€‚ (æ€§èƒ½ä¼˜åŒ–)<br>è¯­æ³•ï¼šconst x = shallowRef({a:{b:{c:1}}, d:2}) å¦‚æ­¤aã€bã€cã€då˜åŒ–éƒ½ä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œéœ€è¦å€ŸåŠ© triggerRef æ¥å¼ºåˆ¶æ›´æ–°ã€‚<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B7.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>8ã€triggerRef<br>ä½œç”¨ï¼šå¼ºåˆ¶æ›´æ–°ä¸€ä¸ª shallowRefå¯¹è±¡çš„æ¸²æŸ“ã€‚<br>è¯­æ³•ï¼štriggerRef(shallowRefå¯¹è±¡)<br>å‚è€ƒä»£ç ï¼šè§shallowRefç¤ºä¾‹ã€‚</p>
<p>9ã€reactive<br>ä½œç”¨ï¼šå®šä¹‰å“åº”å¼å˜é‡ï¼Œä¸€èˆ¬ç”¨äºå®šä¹‰å¼•ç”¨æ•°æ®ç±»å‹ã€‚å¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå»ºè®®ä½¿ç”¨refæ¥å®šä¹‰ã€‚<br>è¯­æ³•ï¼šconst info = reactive([] | {})<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B9.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>10ã€readonly<br>ä½œç”¨ï¼šæŠŠä¸€ä¸ªå¯¹è±¡ï¼Œå˜æˆåªè¯»çš„ã€‚<br>è¯­æ³•ï¼šconst rs = readonly(refå¯¹è±¡ | reactiveå¯¹è±¡ | æ™®é€šå¯¹è±¡)<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B10.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>11ã€isReadonly<br>ä½œç”¨: åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯ä¸æ˜¯åªè¯»çš„ã€‚<br>è¯­æ³•ï¼šconst bol = isReadonly(å˜é‡)<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B11.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>12ã€isReactive<br>ä½œç”¨ï¼šåˆ¤æ–­ä¸€å˜é‡æ˜¯ä¸æ˜¯ reactiveçš„ã€‚<br>æ³¨æ„ï¼šè¢« readonlyä»£ç†è¿‡çš„ reactiveå˜é‡ï¼Œè°ƒç”¨ isReactive ä¹Ÿæ˜¯è¿”å› trueçš„ã€‚<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B12.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>13ã€isProxy<br>ä½œç”¨ï¼šåˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯ä¸æ˜¯ readonly æˆ– reactiveçš„ã€‚<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B13.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>14ã€toRaw<br>ä½œç”¨ï¼šå¾—åˆ°è¿”å› reactiveå˜é‡æˆ– readonlyå˜é‡çš„â€åŸå§‹å¯¹è±¡â€ã€‚<br>è¯­æ³•:ï¼šconst raw = toRaw(reactiveå˜é‡æˆ–readonlyå˜é‡)<br>è¯´æ˜ï¼šreactive(obj)ã€readonly(obj) å’Œ obj ä¹‹é—´æ˜¯ä¸€ç§ä»£ç†å…³ç³»ï¼Œå¹¶ä¸”å®ƒä»¬ä¹‹é—´æ˜¯ä¸€ç§æµ…æ‹·è´çš„å…³ç³»ã€‚obj å˜åŒ–ï¼Œä¼šå¯¼è‡´reactive(obj) åŒæ­¥å˜åŒ–ï¼Œåä¹‹ä¸€æ ·ã€‚<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B14.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>15ã€markRaw<br>ä½œç”¨ï¼šæŠŠä¸€ä¸ªæ™®é€šå¯¹è±¡æ ‡è®°æˆâ€æ°¸ä¹…åŸå§‹â€ï¼Œä»æ­¤å°†æ— æ³•å†å˜æˆproxyäº†ã€‚<br>è¯­æ³•ï¼šconst raw = markRaw({a,b})<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B15.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>16ã€shallowReactive<br>ä½œç”¨ï¼šå®šä¹‰ä¸€ä¸ªreactiveå˜é‡ï¼Œåªå¯¹å®ƒçš„ç¬¬ä¸€å±‚è¿›è¡ŒProxy,ï¼Œæ‰€ä»¥åªæœ‰ç¬¬ä¸€å±‚å˜åŒ–æ—¶è§†å›¾æ‰æ›´æ–°ã€‚<br>è¯­æ³•ï¼šconst obj = shallowReactive({a:{b:9}})<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B16.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>17ã€shallowReadonly<br>ä½œç”¨ï¼šå®šä¹‰ä¸€ä¸ªreactiveå˜é‡ï¼Œåªæœ‰ç¬¬ä¸€å±‚æ˜¯åªè¯»çš„ã€‚<br>è¯­æ³•ï¼šconst obj = shallowReadonly({a:{b:9}})<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B17.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>18ã€computed<br>ä½œç”¨ï¼šå¯¹å“åº”å¼å˜é‡è¿›è¡Œç¼“å­˜è®¡ç®—ã€‚<br>è¯­æ³•ï¼šconst c = computed(fn / {get,set})<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B18.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>19ã€watch<br>ä½œç”¨ï¼šç”¨äºç›‘å¬å“åº”å¼å˜é‡çš„å˜åŒ–ï¼Œç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œå®ƒä¸æ‰§è¡Œã€‚<br>è¯­æ³•ï¼šconst stop = watch(x, (new,old)=&gt;{})ï¼Œè°ƒç”¨stop() å¯ä»¥åœæ­¢ç›‘å¬ã€‚<br>è¯­æ³•ï¼šconst stop = watch([x,y], ([newX,newY],[oldX,oldY])=&gt;{})ï¼Œè°ƒç”¨stop()å¯ä»¥åœæ­¢ç›‘å¬ã€‚<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B19.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>20ã€watchEffect<br>ä½œç”¨ï¼šç›¸å½“äºæ˜¯ reactä¸­çš„ useEffect()ï¼Œç”¨äºæ‰§è¡Œå„ç§å‰¯ä½œç”¨ã€‚<br>è¯­æ³•ï¼šconst stop = watchEffect(fn)ï¼Œé»˜è®¤å…¶ flush:â€™preâ€™ï¼Œå‰ç½®æ‰§è¡Œçš„å‰¯ä½œç”¨ã€‚<br>watchPostEffectï¼Œç­‰ä»·äº watchEffect(fn, {flush:â€™postâ€™})ï¼Œåç½®æ‰§è¡Œçš„å‰¯ä½œç”¨ã€‚<br>watchSyncEffectï¼Œç­‰ä»·äº watchEffect(fn, {flush:â€™syncâ€™})ï¼ŒåŒæ­¥æ‰§è¡Œçš„å‰¯ä½œç”¨ã€‚<br>ç‰¹ç‚¹ï¼šwatchEffect ä¼šè‡ªåŠ¨æ”¶é›†å…¶å†…éƒ¨å“åº”å¼ä¾èµ–ï¼Œå½“å“åº”å¼ä¾èµ–å‘å˜åŒ–æ—¶ï¼Œè¿™ä¸ªwatchEffectå°†å†æ¬¡æ‰§è¡Œï¼Œç›´åˆ°ä½ æ‰‹åŠ¨ stop() æ‰å®ƒã€‚<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B20.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>21ã€ç”Ÿå‘½å‘¨æœŸé’©å­<br>é€‰é¡¹å¼çš„ beforeCreateã€createdï¼Œè¢«setupæ›¿ä»£äº†ã€‚setupè¡¨ç¤ºç»„ä»¶è¢«åˆ›å»ºä¹‹å‰ã€propsè¢«è§£æä¹‹åæ‰§è¡Œï¼Œå®ƒæ˜¯ç»„åˆå¼ API çš„å…¥å£ã€‚<br>é€‰é¡¹å¼çš„ beforeDestroyã€destroyed è¢«æ›´åä¸º beforeUnmountã€unmountedã€‚<br>æ–°å¢äº†ä¸¤ä¸ªé€‰é¡¹å¼çš„ç”Ÿå‘½å‘¨æœŸ renderTrackedã€renderTriggeredï¼Œå®ƒä»¬åªåœ¨å¼€å‘ç¯å¢ƒæœ‰ç”¨ï¼Œå¸¸ç”¨äºè°ƒè¯•ã€‚<br>åœ¨ä½¿ç”¨ setupç»„åˆæ—¶ï¼Œä¸å»ºè®®ä½¿ç”¨é€‰é¡¹å¼çš„ç”Ÿå‘½å‘¨æœŸï¼Œå»ºè®®ä½¿ç”¨ on* ç³»åˆ— hooksç”Ÿå‘½å‘¨æœŸã€‚<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B21.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>22ã€provide / inject<br>ä½œç”¨ï¼šåœ¨ç»„ä»¶æ ‘ä¸­è‡ªä¸Šè€Œä¸‹åœ°ä¼ é€’æ•°æ®.<br>è¯­æ³•ï¼šprovide(â€˜keyâ€™, value)<br>è¯­æ³•ï¼šconst value = inject(â€˜keyâ€™, â€˜é»˜è®¤å€¼â€™)<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B22.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>23ã€getCurrentInstance<br>ä½œç”¨ï¼šç”¨äºè®¿é—®å†…éƒ¨ç»„ä»¶å®ä¾‹ã€‚è¯·ä¸è¦æŠŠå®ƒå½“ä½œåœ¨ç»„åˆå¼ API ä¸­è·å– this çš„æ›¿ä»£æ–¹æ¡ˆæ¥ä½¿ç”¨ã€‚<br>è¯­æ³•ï¼šconst app = getCurrentInstance()<br>åœºæ™¯ï¼šå¸¸ç”¨äºè®¿é—® app.config.globalProperties ä¸Šçš„å…¨å±€æ•°æ®ã€‚<br><img src="/2022/12/13/vue3API/%E6%A1%88%E4%BE%8B23.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<p>24ã€å…³äºsetupä»£ç èŒƒå¼<br>åªä½¿ç”¨ setup åŠç»„åˆAPIï¼Œä¸è¦å†ä½¿ç”¨vueé€‰é¡¹äº†ã€‚<br>æœ‰å¿…è¦å°è£… hooksæ—¶ï¼Œå»ºè®®æŠŠåŠŸèƒ½å°è£…æˆhooksï¼Œä»¥ä¾¿äºä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚<br>èƒ½ç”¨ viteå°±å°½é‡ä½¿ç”¨viteï¼Œèƒ½ç”¨ts å°±å°½é‡ä½¿ç”¨tsã€‚</p>
]]></content>
      <categories>
        <category>vue3</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>vue3refå’Œreactiveå‡½æ•°</title>
    <url>/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<h1 id="ref-å‡½æ•°ä»‹ç»"><a href="#ref-å‡½æ•°ä»‹ç»" class="headerlink" title="ref å‡½æ•°ä»‹ç»"></a>ref å‡½æ•°ä»‹ç»</h1><ol>
<li>ref ä½œç”¨å°±æ˜¯å°†åŸºç¡€æ•°æ®è½¬æ¢ä¸ºå“åº”å¼æ•°æ®ï¼ŒæŠŠæ•°æ®åŒ…è£…æˆå“åº”å¼çš„å¼•ç”¨æ•°æ®ç±»å‹çš„æ•°æ®ã€‚</li>
<li>é€šè¿‡å¯¹å‚æ•°è¿”å›å€¼çš„ value å±æ€§è·å–å“åº”å¼çš„å€¼ï¼Œå¹¶ä¸”ä¿®æ”¹çš„æ—¶å€™ä¹Ÿéœ€è¦å¯¹ value è¿›è¡Œä¿®æ”¹ã€‚</li>
<li>åœ¨vue2å½“ä¸­ï¼Œé€šè¿‡ç»™å…ƒç´ æ·»åŠ  ref=â€™xxxâ€™ç„¶åä½¿ç”¨refs.xxxçš„æ–¹å¼æ¥è·å–å…ƒç´ ï¼Œvue3ä¹Ÿå¯ä»¥ã€‚</li>
<li>å½“ ref é‡Œé¢çš„å€¼å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œè§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°æ•°æ®ã€‚</li>
<li>ref å¯ä»¥æ“ä½œåŸºæœ¬æ•°æ®ç±»å‹å’Œå¤æ‚æ•°æ®ç±»å‹ï¼Œå»ºè®®ä½¿ç”¨ ref æ“ä½œåªå¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œæ“ä½œã€‚</li>
</ol>
<h2 id="ref-å‡½æ•°ä½¿ç”¨"><a href="#ref-å‡½æ•°ä½¿ç”¨" class="headerlink" title="ref å‡½æ•°ä½¿ç”¨"></a>ref å‡½æ•°ä½¿ç”¨</h2><p>ä½¿ç”¨ ref å‡½æ•°å¾ˆç®€å•ï¼Œé¦–å…ˆè¦åœ¨é¡µé¢å¼•ç”¨ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ï¼Œå…·ä½“æ€ä¹ˆä½¿ç”¨å‘¢ï¼Œä¸‹é¢ä¸ºäº†æ–¹ä¾¿ä»‹ç»ï¼Œç®€å•æ¥å‡ ä¸ªæ¡ˆä¾‹ã€‚</p>
<h2 id="ref-å‡½æ•°å¤„ç†åŸºæœ¬æ•°æ®ç±»å‹"><a href="#ref-å‡½æ•°å¤„ç†åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="ref å‡½æ•°å¤„ç†åŸºæœ¬æ•°æ®ç±»å‹"></a>ref å‡½æ•°å¤„ç†åŸºæœ¬æ•°æ®ç±»å‹</h2><p>é¦–å…ˆæä¸€ä¸ªéœ€æ±‚ï¼šé¡µé¢æœ‰ä¸€ä¸ªåç§°éœ€è¦æ˜¾ç¤ºï¼Œæœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ä¿®æ”¹é¡µé¢å±•ç¤ºçš„è¿™ä¸ªåå­—ã€‚<br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/ref%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>åˆ·æ–°ï¼Œå¯ä»¥æ­£å¸¸æ¸²æŸ“æ•°æ®ï¼Œä½†æ˜¯ç‚¹å‡»æŒ‰é’®ä¿®æ”¹åå­—çš„æ—¶å€™ï¼Œå‡ºç°é—®é¢˜ï¼<br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/ref%E5%9F%BA%E6%9C%AC%E5%87%BA%E9%94%99.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/ref%E5%9F%BA%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%8F%B0.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ä¸ºä»€ä¹ˆä½¿ç”¨è¿‡ ref å°†æ•°æ®æ˜ å°„ä¸ºå“åº”å¼æ•°æ®è¿˜æ˜¯æŠ¥é”™å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å…ˆæ‰“å°ä¸€ä¸‹ ref åŒ…è£¹åï¼Œä¹Ÿå°±æ˜¯ name_ref è¿™ä¸ªå‚æ•°ï¼Œçœ‹ä¸€ä¸‹ç»“æ„ã€‚<br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/ref%E7%BB%93%E6%9E%84.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ä¿®æ”¹ä»£ç ï¼š<br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/ref%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ç åˆ·æ–°é¡µé¢æŸ¥çœ‹æ•ˆæœ<br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/ref%E5%9F%BA%E6%9C%AC%E4%BF%AE%E6%94%B9%E6%88%90%E5%8A%9F.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æœ‰ä¸€ç‚¹éœ€è¦è¯´ä¸€ä¸‹å“ˆï¼Œå°±æ˜¯åœ¨å•æ–‡ä»¶ç»„ä»¶ä¸­ï¼Œä¸å¿…å†™valueï¼Œå› ä¸ºsetupæ–¹æ³•ä¼šè‡ªåŠ¨è§£æï¼Œç®€å•çš„å¯ä»¥ç†è§£æˆ html ä»£ç ä¸éœ€è¦é¢å¤–æ“ä½œ valueï¼Œä½†æ˜¯é€»è¾‘å±‚éœ€è¦ã€‚</p>
<h2 id="ref-å‡½æ•°å¤„ç†å¤æ‚æ•°æ®ç±»å‹"><a href="#ref-å‡½æ•°å¤„ç†å¤æ‚æ•°æ®ç±»å‹" class="headerlink" title="ref å‡½æ•°å¤„ç†å¤æ‚æ•°æ®ç±»å‹"></a>ref å‡½æ•°å¤„ç†å¤æ‚æ•°æ®ç±»å‹</h2><p>ä¸å»ºè®®ä½¿ç”¨ ref å‡½æ•°å¤„ç†å¤æ‚æ•°æ®ç±»å‹ï¼ˆæ•°ç»„ã€å¯¹è±¡ç­‰ï¼‰ï¼Œç”¨ ref å‡½æ•°å¤„ç†åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ç­‰ï¼‰å°±å¯ä»¥äº†ã€‚<br>ä¾‹å¦‚æˆ‘ä»¬å†™ä¸€ä¸ªæ¡ˆä¾‹ï¼Œåˆ›å»ºä¸€ä¸ªä¸ªäººä¿¡æ¯ï¼Œæ”¾åˆ°å¯¹è±¡é‡Œé¢å±•ç¤º<br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/ref%E5%A4%8D%E6%9D%82%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å¯¹è±¡è¢« ref å‡½æ•°åŒ…è£¹åçš„æ•°æ®ç»“æ„ã€‚<br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/ref%E5%A4%8D%E6%9D%82%E7%BB%93%E6%9E%84.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æˆ‘ä»¬ä¿®æ”¹ä¹Ÿé€šè¿‡ value è¿›è¡Œæ“ä½œ<br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/ref%E5%A4%8D%E6%9D%82%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>åˆ·æ–°é¡µé¢ï¼ŒæŸ¥çœ‹æ•ˆæœ<br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/ref%E5%A4%8D%E6%9D%82%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81%E6%88%90%E5%8A%9F.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h2 id="ref-å‡½æ•°è·å–å•ä¸ªDOMå…ƒç´ "><a href="#ref-å‡½æ•°è·å–å•ä¸ªDOMå…ƒç´ " class="headerlink" title="ref å‡½æ•°è·å–å•ä¸ªDOMå…ƒç´ "></a>ref å‡½æ•°è·å–å•ä¸ªDOMå…ƒç´ </h2><p>å’Œ vue2 ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨ ref è·å–å…ƒç´ ï¼Œç”¨æ³•å’Œæ“ä½œæ•°æ®ç±»å‹ç›¸ä¼¼ã€‚<br>é¡µé¢ä¸Šæœ‰ä¸€ä¸ªæ ‡ç­¾ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œè·å–æ ‡ç­¾çš„ç›¸å…³æ•°æ®ã€‚<br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/refdom%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>è¿è¡Œæ•ˆæœ<br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/ref%E6%88%90%E5%8A%9F.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/ref%E6%89%93%E5%8D%B0.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h1 id="reactive-å‡½æ•°ä»‹ç»"><a href="#reactive-å‡½æ•°ä»‹ç»" class="headerlink" title="reactive å‡½æ•°ä»‹ç»"></a>reactive å‡½æ•°ä»‹ç»</h1><p>ä¸Šé¢è¯´äº† ref å‡½æ•°çš„åŸºæœ¬ç”¨æ³•ï¼Œæ¥ä¸‹æ¥æ˜¯ reactive å‡½æ•°ï¼Œå®ƒçš„ç”¨æ³•ä¸ ref å‡½æ•°çš„ç”¨æ³•ç›¸ä¼¼ï¼Œä¹Ÿæ˜¯å°†æ•°æ®å˜æˆå“åº”å¼æ•°æ®ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶UIä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°ã€‚ä¸åŒçš„æ˜¯ ref ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œè€Œ reactive æ˜¯ç”¨äºå¤æ‚æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥è¯´ï¼Œä¸å»ºè®®ç”¨ ref å‡½æ•°æ¥å¤„ç†å¤æ‚æ•°æ®ç±»å‹çš„åŸå› å°±æ˜¯ï¼Œæœ‰ reactive æ¥å¤„ç†å¤æ‚ç±»å‹æ•°æ®ã€‚</p>
<h2 id="reactive-å‡½æ•°ä½¿ç”¨"><a href="#reactive-å‡½æ•°ä½¿ç”¨" class="headerlink" title="reactive å‡½æ•°ä½¿ç”¨"></a>reactive å‡½æ•°ä½¿ç”¨</h2><p>reactive å‡½æ•°å¤„ç†å¯¹è±¡<br>reactive å‡½æ•°ç”¨æ¥å¤„ç†æ•°ç»„æˆ–è€…æ˜¯å¯¹è±¡,å†™ä¸€ä¸ªæ¡ˆä¾‹ï¼Œæ“ä½œäººçš„åŸºæœ¬ä¿¡æ¯<br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/reactive%E5%AF%B9%E8%B1%A1%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/reactive%E5%AF%B9%E8%B1%A1%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>æœ‰æ‰“å°çš„ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹è§ï¼Œè¿™æ—¶å€™çš„æ•°æ®å°±ä¸æ˜¯è¢«åŒ…è£¹åœ¨ value ä¸‹é¢äº†ï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬å¯ä»¥ç›´æ¥è·å–åˆ°ã€‚<br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/reactive%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/reactive%E5%AF%B9%E8%B1%A1%E4%BF%AE%E6%94%B9%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h2 id="reactive-å‡½æ•°å¤„ç†æ•°ç»„"><a href="#reactive-å‡½æ•°å¤„ç†æ•°ç»„" class="headerlink" title="reactive å‡½æ•°å¤„ç†æ•°ç»„"></a>reactive å‡½æ•°å¤„ç†æ•°ç»„</h2><p>å¤„ç†æ•°ç»„çš„æ–¹å¼å’Œå¤„ç†å¯¹è±¡çš„æ–¹å¼æ˜¯ä¸€æ ·ä¸€æ ·çš„<br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/reactive%E6%95%B0%E7%BB%84%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/13/vue3ref%E5%92%8Creactive%E5%87%BD%E6%95%B0/reactive%E6%95%B0%E7%BB%84%E5%A4%84%E7%90%86%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
]]></content>
      <categories>
        <category>vue3</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>vue3æ–°è¯­æ³•ç»†èŠ‚</title>
    <url>/2023/01/10/vue3%E6%96%B0%E8%AF%AD%E6%B3%95%E7%BB%86%E8%8A%82/</url>
    <content><![CDATA[<p>1ã€åœ¨Vue2ä¸­ï¼Œv-for å’Œ ref åŒæ—¶ä½¿ç”¨ï¼Œè¿™ä¼šè‡ªåŠ¨æ”¶é›† $refsã€‚å½“å­˜åœ¨åµŒå¥—çš„v-foræ—¶ï¼Œè¿™ç§è¡Œä¸ºä¼šå˜å¾—ä¸æ˜ç¡®ä¸”æ•ˆç‡ä½ä¸‹ã€‚åœ¨Vue3ä¸­ï¼Œv-for å’Œ ref åŒæ—¶ä½¿ç”¨ï¼Œè¿™ä¸å†è‡ªåŠ¨æ”¶é›†$refsã€‚æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å°è£…æ”¶é›† ref å¯¹è±¡çš„æ–¹æ³•ï¼Œå°†å…¶ç»‘å®šåœ¨ ref å±æ€§ä¸Šã€‚</p>
<p>2ã€åœ¨Vue3ä¸­ï¼Œä½¿ç”¨ defineAsyncComponent å¯ä»¥å¼‚æ­¥åœ°åŠ è½½ç»„ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§å¼‚æ­¥ç»„ä»¶æ˜¯ä¸èƒ½ç”¨åœ¨Vue-Routerçš„è·¯ç”±æ‡’åŠ è½½ä¸­ã€‚</p>
<p>3ã€Vue3.0ä¸­çš„ $attrsï¼ŒåŒ…å«äº†çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ‰€æœ‰å±æ€§ï¼ŒåŒ…æ‹¬ class å’Œ style ã€‚åœ¨Vue2ä¸­ï¼Œ$attrs æ˜¯æ¥åˆ°ä¸åˆ° class å’Œ style çš„ã€‚åœ¨ setup ç»„ä»¶ä¸­ï¼Œä½¿ç”¨ useAttrs() è®¿é—®ï¼›åœ¨é setupç»„ä»¶ä¸­ï¼Œä½¿ç”¨ this.$attrs /setupCtx.attrs æ¥è®¿é—®ã€‚</p>
<p>4ã€Vue3ä¸­ï¼Œç§»é™¤äº† $children å±æ€§ï¼Œè¦æƒ³è®¿é—®å­ç»„ä»¶åªèƒ½ä½¿ç”¨ ref æ¥å®ç°äº†ã€‚åœ¨Vue2ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ $children å¯ä»¥æ–¹ä¾¿åœ°è®¿é—®åˆ°å­ç»„ä»¶ï¼Œåœ¨ç»„ä»¶æ ‘ä¸­â€œè‚†æ„â€ç©¿æ¢­ã€‚</p>
<p>5ã€Vue3ä¸­ï¼Œä½¿ç”¨ app.directive() æ¥å®šä¹‰å…¨å±€æŒ‡ä»¤ï¼Œå¹¶ä¸”å®šä¹‰æŒ‡ä»¤æ—¶çš„é’©å­å‡½æ•°ä»¬ä¹Ÿå‘ç”Ÿäº†è‹¥å¹²å˜åŒ–ã€‚</p>
<p>6ã€data é€‰é¡¹ï¼Œåªæ”¯æŒå·¥å‚å‡½æ•°çš„å†™æ³•ï¼Œä¸å†æ”¯æŒå¯¹è±¡çš„å†™æ³•äº†ã€‚åœ¨Vue2ä¸­ï¼Œåˆ›å»º new Vue({ data }) æ—¶ï¼Œæ˜¯å¯ä»¥å†™æˆå¯¹è±¡è¯­æ³•çš„ã€‚</p>
<p>7ã€Vue3ä¸­æ–°å¢äº† emits é€‰é¡¹ã€‚åœ¨é<script setup>å†™æ³•ä¸­ï¼Œä½¿ç”¨ emitsé€‰é¡¹ æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„è‡ªå®šä¹‰ï¼Œä½¿ç”¨ ctx.emit() / this.$emit() æ¥è§¦å‘äº‹ä»¶ã€‚åœ¨<script setup>ä¸­ï¼Œä½¿ç”¨ defineEmits æ¥æ¥æ”¶è‡ªå®šä¹‰äº‹ä»¶ï¼Œä½¿ç”¨ defineProps æ¥æ¥æ”¶è‡ªå®šä¹‰äº‹ä»¶ã€‚</p>
<p>8ã€Vue3ä¸­ ç§»é™¤äº† $on / $off / $once è¿™ä¸‰ä¸ªäº‹ä»¶ APIï¼Œåªä¿ç•™äº† $emit ã€‚</p>
<p>9ã€Vue3ä¸­ï¼Œç§»é™¤äº†å…¨å±€è¿‡æ»¤å™¨ï¼ˆVue.filterï¼‰ã€ç§»é™¤äº†å±€éƒ¨è¿‡æ»¤å™¨ filtersé€‰é¡¹ã€‚å–è€Œä»£ä¹‹ï¼Œä½ å¯ä»¥å°è£…è‡ªå®šä¹‰å‡½æ•°æˆ–ä½¿ç”¨ computed è®¡ç®—å±æ€§æ¥å¤„ç†æ•°æ®ã€‚</p>
<p>10ã€Vue3 ç°åœ¨æ­£å¼æ”¯æŒäº†å¤šæ ¹èŠ‚ç‚¹çš„ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯ç‰‡æ®µï¼Œç±»ä¼¼ React ä¸­çš„ Fragmentã€‚ä½¿ç”¨ç‰‡æ®µçš„å¥½å¤„æ˜¯ï¼Œå½“æˆ‘ä»¬è¦åœ¨ template ä¸­æ·»åŠ å¤šä¸ªèŠ‚ç‚¹æ—¶ï¼Œæ²¡å¿…è¦åœ¨å¤–å±‚å¥—ä¸€ä¸ª div äº†ï¼Œå¥—ä¸€å±‚ div è¿™ä¼šå¯¼è‡´å¤šäº†ä¸€å±‚ DOMç»“æ„ã€‚å¯è§ï¼Œç‰‡æ®µ å¯ä»¥å‡å°‘æ²¡æœ‰å¿…è¦çš„ DOM åµŒå¥—ã€‚</p>
<p>11ã€å‡½æ•°å¼ç»„ä»¶çš„å˜åŒ–ï¼šåœ¨Vue2ä¸­ï¼Œè¦ä½¿ç”¨ functional é€‰é¡¹æ¥æ”¯æŒå‡½æ•°å¼ç»„ä»¶çš„å°è£…ã€‚åœ¨Vue3ä¸­ï¼Œå‡½æ•°å¼ç»„ä»¶å¯ä»¥ç›´æ¥ç”¨æ™®é€šå‡½æ•°è¿›è¡Œåˆ›å»ºã€‚å¦‚æœä½ åœ¨ vite ç¯å¢ƒä¸­å®‰è£…äº† <code>@vitejs/plugin-vue-jsx</code> æ’ä»¶æ¥æ”¯æŒ JSXè¯­æ³•ï¼Œé‚£ä¹ˆå®šä¹‰å‡½æ•°å¼ç»„ä»¶å°±æ›´åŠ æ–¹ä¾¿äº†ã€‚</p>
<p>12ã€Vue2ä¸­çš„Vueæ„é€ å‡½æ•°ï¼Œåœ¨Vue3ä¸­å·²ç»ä¸èƒ½å†ä½¿ç”¨äº†ã€‚æ‰€ä»¥Vueæ„é€ å‡½æ•°ä¸Šçš„é™æ€æ–¹æ³•ã€é™æ€å±æ€§ï¼Œæ¯”å¦‚ Vue.use/Vue.mixin/Vue.prototype ç­‰éƒ½ä¸èƒ½ä½¿ç”¨äº†ã€‚åœ¨Vue3ä¸­æ–°å¢äº†ä¸€å¥—å®ä¾‹æ–¹æ³•æ¥ä»£æ›¿ï¼Œæ¯”å¦‚ app.use()ç­‰ã€‚</p>
<p>13ã€åœ¨Vue3ä¸­ï¼Œä½¿ç”¨ getCurrentInstance è®¿é—®å†…éƒ¨ç»„ä»¶å®ä¾‹ï¼Œè¿›è€Œå¯ä»¥è·å–åˆ° app.config ä¸Šçš„å…¨å±€æ•°æ®ï¼Œæ¯”å¦‚ $routeã€$routerã€$store å’Œè‡ªå®šä¹‰æ•°æ®ç­‰ã€‚è¿™ä¸ª API åªèƒ½åœ¨ setup æˆ– ç”Ÿå‘½å‘¨æœŸé’©å­ ä¸­è°ƒç”¨ã€‚</p>
<p>14ã€æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œä½¿ç”¨ provide å’Œ inject è¿™ä¸¤ä¸ªç»„åˆ API å¯ä»¥ç»„ä»¶æ ‘ä¸­ä¼ é€’æ•°æ®ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åº”ç”¨çº§åˆ«çš„ app.provide() æ¥æ³¨å…¥å…¨å±€æ•°æ®ã€‚åœ¨ç¼–å†™æ’ä»¶æ—¶ä½¿ç”¨ app.provide() å°¤å…¶æœ‰ç”¨ï¼Œå¯ä»¥æ›¿ä»£app.config.globalPropertiesã€‚</p>
<p>15ã€åœ¨Vue2ä¸­ï¼ŒVue.nextTick() / this.$nextTick ä¸èƒ½æ”¯æŒ Webpack çš„ Tree-Shaking åŠŸèƒ½çš„ã€‚åœ¨ Vue3 ä¸­çš„ nextTick ï¼Œè€ƒè™‘åˆ°äº†å¯¹ Tree-Shaking çš„æ”¯æŒã€‚</p>
]]></content>
      <categories>
        <category>vue3</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>vue3ç»„ä»¶ä¼ å€¼</title>
    <url>/2022/10/20/vue3%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/</url>
    <content><![CDATA[<h1 id="çˆ¶å­ç»„ä»¶ä¼ å€¼-props"><a href="#çˆ¶å­ç»„ä»¶ä¼ å€¼-props" class="headerlink" title="çˆ¶å­ç»„ä»¶ä¼ å€¼ props"></a>çˆ¶å­ç»„ä»¶ä¼ å€¼ props</h1><p>çˆ¶ç»„ä»¶<br><img src="/2022/10/20/vue3%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/%E7%88%B6%E7%BB%84%E4%BB%B6%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>å­ç»„ä»¶<br><img src="/2022/10/20/vue3%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/20/vue3%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/%E5%AD%90%E4%BC%A0%E7%88%B6%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h1 id="ç¥–å­™ç»„ä»¶ä¼ å€¼-provide-å’Œ-inject"><a href="#ç¥–å­™ç»„ä»¶ä¼ å€¼-provide-å’Œ-inject" class="headerlink" title="ç¥–å­™ç»„ä»¶ä¼ å€¼ provide å’Œ inject"></a>ç¥–å­™ç»„ä»¶ä¼ å€¼ provide å’Œ inject</h1><p>çˆ¶ç»„ä»¶<br><img src="/2022/10/20/vue3%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/%E7%88%B6%E7%BB%84%E4%BB%B6%E4%BA%8C%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>å­ç»„ä»¶<br><img src="/2022/10/20/vue3%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BA%8C%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/20/vue3%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/%E7%A5%96%E5%AD%99%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h1 id="çˆ¶ç»„ä»¶ä¸­ç‚¹å‡»æŒ‰é’®å‘å­ç»„ä»¶ä¼ å€¼"><a href="#çˆ¶ç»„ä»¶ä¸­ç‚¹å‡»æŒ‰é’®å‘å­ç»„ä»¶ä¼ å€¼" class="headerlink" title="çˆ¶ç»„ä»¶ä¸­ç‚¹å‡»æŒ‰é’®å‘å­ç»„ä»¶ä¼ å€¼"></a>çˆ¶ç»„ä»¶ä¸­ç‚¹å‡»æŒ‰é’®å‘å­ç»„ä»¶ä¼ å€¼</h1><p>çˆ¶ç»„ä»¶<br><img src="/2022/10/20/vue3%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/%E7%88%B6%E7%BB%84%E4%BB%B6%E4%B8%89%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>å­ç»„ä»¶<br><img src="/2022/10/20/vue3%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/%E5%AD%90%E7%BB%84%E4%BB%B6%E4%B8%89%E4%BB%A3%E7%A0%81.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/20/vue3%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/%E4%BC%A0%E5%80%BC%E5%89%8D%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br><img src="/2022/10/20/vue3%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/%E4%BC%A0%E5%80%BC%E5%90%8E%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
]]></content>
      <categories>
        <category>vue3</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>webpackä¹‹require.context</title>
    <url>/2023/05/06/webpack%E4%B9%8Brequire-context/</url>
    <content><![CDATA[<h1 id="äº†è§£webpackçš„require-context"><a href="#äº†è§£webpackçš„require-context" class="headerlink" title="äº†è§£webpackçš„require.context"></a>äº†è§£webpackçš„require.context</h1><h2 id="å…³é”®ä»£ç "><a href="#å…³é”®ä»£ç " class="headerlink" title="å…³é”®ä»£ç "></a>å…³é”®ä»£ç </h2><p>src/icons/index.js</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const context = require.context(&quot;./svg&quot;, true, /\.svg$/)</span><br><span class="line">context.keys().map(context)</span><br></pre></td></tr></table></figure>
<p>main.js</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#x27;@/icons&#x27;</span><br></pre></td></tr></table></figure>
<p>webpack.base.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: /\.svg$/,</span><br><span class="line">    loader: &quot;svg-sprite-loader&quot;,</span><br><span class="line">    include: [resolve(&quot;src/icons&quot;)],</span><br><span class="line">    options: &#123;</span><br><span class="line">        symbolId: &quot;icon-[name]&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    test: /\.(png|jpe?g|gif|svg)(\?.*)?$/,</span><br><span class="line">    loader: &quot;url-loader&quot;,</span><br><span class="line">    exclude: [resolve(&quot;src/icons&quot;)],</span><br><span class="line">    options: &#123;</span><br><span class="line">        limit: 10000,</span><br><span class="line">        name: utils.assetsPath(&quot;img/[name].[hash:7].[ext]&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ"></a>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</h2><p>å¾ˆå¤šäººè·Ÿæˆ‘ä¸€æ ·ï¼Œä¸€å¼€å§‹åªæƒ³è¯´ï¼Œä¸ºä»€ä¹ˆè¿™æ ·å°±å¯ä»¥ï¼Œwhy???</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const context = require.context(&quot;./svg&quot;, true, /\.svg$/)</span><br><span class="line">// çœ‹çœ‹ä½ æ˜¯ä½•æ–¹ç¥åœ£</span><br><span class="line">console.log(context)</span><br><span class="line">context.keys().map(context)</span><br></pre></td></tr></table></figure>
<p>çœ‹ä¸‹é¢çš„å›¾ï¼Œç†è§£ä¸€ä¸‹<br><img src="/2023/05/06/webpack%E4%B9%8Brequire-context/image.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
]]></content>
      <categories>
        <category>webpack</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>webpackå‡çº§</title>
    <url>/2023/04/05/webpack%E5%8D%87%E7%BA%A7/</url>
    <content><![CDATA[<h1 id="ä¸€ã€èƒŒæ™¯"><a href="#ä¸€ã€èƒŒæ™¯" class="headerlink" title="ä¸€ã€èƒŒæ™¯"></a>ä¸€ã€èƒŒæ™¯</h1><p>ç”±äºé¡¹ç›®è¶Šæ¥è¶Šåºå¤§å¤æ‚ï¼Œæ‰“åŒ…æ—¶é—´ä¹Ÿéå¸¸é•¿ï¼Œæœ¬åœ°å¼€å‘ç¯å¢ƒæ¯æ¬¡é‡å¯éƒ½è¦æ‰“åŒ…å¥½ä¹…ï¼Œæ­£å¥½å€Ÿæ­¤å¥‘æœºå¯¹webpackåšäº†ä¸€ä¸ªå‡çº§ã€‚</p>
<h1 id="äºŒã€webpack5-å’Œ-webpack4-çš„åŒºåˆ«æœ‰å“ªäº›-ï¼Ÿ"><a href="#äºŒã€webpack5-å’Œ-webpack4-çš„åŒºåˆ«æœ‰å“ªäº›-ï¼Ÿ" class="headerlink" title="äºŒã€webpack5 å’Œ webpack4 çš„åŒºåˆ«æœ‰å“ªäº› ï¼Ÿ"></a>äºŒã€webpack5 å’Œ webpack4 çš„åŒºåˆ«æœ‰å“ªäº› ï¼Ÿ</h1><h2 id="Tree-Shaking"><a href="#Tree-Shaking" class="headerlink" title="Tree Shaking"></a>Tree Shaking</h2><h3 id="ä½œç”¨ï¼š"><a href="#ä½œç”¨ï¼š" class="headerlink" title="ä½œç”¨ï¼š"></a>ä½œç”¨ï¼š</h3><p>å¦‚æœæˆ‘ä»¬çš„é¡¹ç›®ä¸­å¼•å…¥äº†lodashåŒ…ï¼Œä½†æ˜¯æˆ‘åªç”¨äº†å…¶ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚å…¶ä»–æ²¡æœ‰ç”¨åˆ°çš„æ–¹æ³•æ˜¯ä¸æ˜¯å†—ä½™çš„ï¼Ÿæ­¤æ—¶tree-shakingå°±å¯ä»¥æŠŠæ²¡æœ‰ç”¨çš„é‚£äº›ä¸œè¥¿å‰”é™¤æ‰ï¼Œæ¥å‡å°‘æœ€ç»ˆçš„bundleä½“ç§¯ã€‚<br>usedExports : true, æ ‡è®°æ²¡æœ‰ç”¨çš„å¶å­<br>minimize: true, æ‘‡æ‰é‚£äº›æ²¡æœ‰ç”¨çš„å¶å­</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// webpack.config.jsä¸­</span><br><span class="line">  module.exports = &#123;</span><br><span class="line">     optimization: &#123;</span><br><span class="line">       usedExports: true, //åªå¯¼å‡ºè¢«ä½¿ç”¨çš„æ¨¡å—</span><br><span class="line">       minimize : true // å¯åŠ¨å‹ç¼©</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>ç”±äºtree shakingåªæ”¯æŒesmodule ï¼Œå¦‚æœä½ æ‰“åŒ…å‡ºæ¥çš„æ˜¯commonjsï¼Œæ­¤æ—¶tree-shakingå°±å¤±æ•ˆäº†ã€‚ä¸è¿‡å½“å‰å¤§å®¶éƒ½ç”¨çš„æ˜¯vueï¼Œreactç­‰æ¡†æ¶ï¼Œä»–ä»¬éƒ½æ˜¯ç”¨babel-loaderç¼–è¯‘ï¼Œä»¥ä¸‹é…ç½®å°±èƒ½å¤Ÿä¿è¯ä»–ä¸€å®šæ˜¯esmoduleã€‚<br><img src="/2023/04/05/webpack%E5%8D%87%E7%BA%A7/webpack4.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>webpack5çš„ mode=â€œproductionâ€ è‡ªåŠ¨å¼€å¯ tree-shakingã€‚</p>
<h2 id="å‹ç¼©ä»£ç "><a href="#å‹ç¼©ä»£ç " class="headerlink" title="å‹ç¼©ä»£ç "></a>å‹ç¼©ä»£ç </h2><ul>
<li>webpack4<br>webpack4éœ€è¦ä¸‹è½½å®‰è£…terser-webpack-plugin æ’ä»¶ï¼Œå¹¶ä¸”éœ€è¦ä»¥ä¸‹é…ç½®<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const TerserPlugin = require(&#x27;terser-webpack-plugin&#x27;)</span><br><span class="line">module.exports = &#123; </span><br><span class="line">// ...other config</span><br><span class="line">optimization: &#123;</span><br><span class="line">  minimize: !isDev,</span><br><span class="line">  minimizer: [</span><br><span class="line">    new TerserPlugin(&#123;</span><br><span class="line">      extractComments: false, </span><br><span class="line">      terserOptions: &#123; </span><br><span class="line">        compress: &#123; </span><br><span class="line">          pure_funcs: [&#x27;console.log&#x27;] </span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;) </span><br><span class="line">   ]</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>webpack5<br>å†…éƒ¨æœ¬èº«å°±è‡ªå¸¦ js å‹ç¼©åŠŸèƒ½ï¼Œä»–å†…ç½®äº† terser-webpack-plugin æ’ä»¶ï¼Œæˆ‘ä»¬ä¸ç”¨å†ä¸‹è½½å®‰è£…ã€‚è€Œä¸”åœ¨ mode=â€œproductionâ€ çš„æ—¶å€™ä¼šè‡ªåŠ¨å¼€å¯ js å‹ç¼©åŠŸèƒ½ã€‚<br>å¦‚æœä½ è¦åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œå°±ç”¨ä¸‹é¢ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// webpack.config.jsä¸­</span><br><span class="line">  module.exports = &#123;</span><br><span class="line">     optimization: &#123;</span><br><span class="line">       usedExports: true, //åªå¯¼å‡ºè¢«ä½¿ç”¨çš„æ¨¡å—</span><br><span class="line">       minimize : true // å¯åŠ¨å‹ç¼©</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
<li>js å‹ç¼©å¤±æ•ˆé—®é¢˜<br>å½“ä½ ä¸‹è½½ optimize-css-assets-webpack-plugin ï¼Œæ‰§è¡Œ css å‹ç¼©ä»¥åï¼Œä½ ä¼šå‘ç° webpack5 é»˜è®¤çš„ js å‹ç¼©åŠŸèƒ½å¤±æ•ˆäº†ã€‚å…ˆè¯´ optimize-css-assets-webpack-plugin çš„é…ç½®ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install optimize-css-assets-webpack-plugin -D</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123; </span><br><span class="line">  optimization: &#123; </span><br><span class="line">    minimizer: [ </span><br><span class="line">      new OptimizeCssAssetsPlugin() </span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
æ­¤æ—¶çš„å‹ç¼©æ’ä»¶optimize-css-assets-webpack-pluginå¯ä»¥é…ç½®åˆ°pluginsé‡Œé¢å»ï¼Œä¹Ÿå¯ä»¥å¦‚å›¾é…ç½®åˆ°åˆ° optimizationé‡Œé¢ã€‚åŒºåˆ«å¦‚ä¸‹ï¼š<br>é…ç½®åˆ°pluginsä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªæ’ä»¶åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šå·¥ä½œã€‚è€Œé…ç½®åœ¨optimizationè¡¨ç¤ºåªæœ‰minimizeä¸º true çš„æ—¶å€™æ‰èƒ½å·¥ä½œã€‚<br>å½“å®‰è£… optimize-css-assets-webpack-plugin ä»¥åä½ å»æ‰“åŒ…ä¼šå‘ç°åŸæ¥å¯ä»¥å‹ç¼©çš„ js æ–‡ä»¶ï¼Œç°åœ¨ä¸èƒ½å‹ç¼©äº†ã€‚åŸå› æ˜¯ä½ æŒ‡å®šçš„å‹ç¼©å™¨æ˜¯optimize-css-assets-webpack-plugin<br>å¯¼è‡´é»˜è®¤çš„terser-webpack-pluginå°±ä¼šå¤±æ•ˆã€‚è§£å†³åŠæ³•å¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install terser-webpack-plugin -D</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      new TerserPlugin(&#123;</span><br><span class="line">        extractComments: false,</span><br><span class="line">        terserOptions: &#123;</span><br><span class="line">          compress: &#123; pure_funcs: [&#x27;console.log&#x27;] &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">      new OptimiazeCssAssetPlugin(),</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
å³ä¾¿åœ¨webpack5ä¸­ï¼Œä½ ä¹Ÿè¦åƒwebpack4ä¸­ä¸€æ ·ä½¿ç”¨jså‹ç¼©ã€‚</li>
<li>æ³¨æ„äº‹é¡¹<br>åœ¨webpack5é‡Œé¢ä½¿ç”¨optimize-css-assets-webpack-pluginä¼šæŠ¥é”™ï¼Œå› ä¸ºå®˜æ–¹å·²ç»æ‰“ç®—è¦åºŸé™¤äº†ï¼Œè¯·ä½¿ç”¨æ›¿æ¢æ–¹æ¡ˆï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i css-assets-webpack-plugin -D</span><br></pre></td></tr></table></figure>
<h2 id="åˆå¹¶æ¨¡å—"><a href="#åˆå¹¶æ¨¡å—" class="headerlink" title="åˆå¹¶æ¨¡å—"></a>åˆå¹¶æ¨¡å—</h2>æ™®é€šæ‰“åŒ…åªæ˜¯å°†ä¸€ä¸ªæ¨¡å—æœ€ç»ˆæ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„ç«‹å³æ‰§è¡Œå‡½æ•°ä¸­ï¼Œå¦‚æœä½ æœ‰å¾ˆå¤šæ¨¡å—ï¼Œé‚£ä¹ˆå°±æœ‰å¾ˆå¤šç«‹å³æ‰§è¡Œå‡½æ•°ã€‚concatenateModuleså¯ä»¥è¦æ‰€æœ‰çš„æ¨¡å—éƒ½åˆå¹¶åˆ°ä¸€ä¸ªå‡½æ•°é‡Œé¢å»ã€‚<br>optimization.concatenateModules = true<br>é…ç½®å¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    usedExports: true,</span><br><span class="line">    concatenateModules: true,</span><br><span class="line">    minimize: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
æ­¤æ—¶é…åˆ tree-shaking ä½ ä¼šå‘ç°æ‰“åŒ…çš„ä½“ç§¯ä¼šå‡å°å¾ˆå¤šã€‚<h2 id="å‰¯ä½œç”¨sideEffects"><a href="#å‰¯ä½œç”¨sideEffects" class="headerlink" title="å‰¯ä½œç”¨sideEffects"></a>å‰¯ä½œç”¨sideEffects</h2></li>
<li>webpack4 æ–°å¢äº†ä¸€ä¸ªsideEffectsçš„åŠŸèƒ½ï¼Œå…è®¸æˆ‘ä»¬é€šè¿‡é…ç½®æ¥æ ‡è¯†æˆ‘ä»¬çš„ä»£ç æ˜¯å¦æœ‰å‰¯ä½œç”¨ã€‚è¿™ä¸ªç‰¹æ€§åªæœ‰åœ¨å¼€å‘npmåŒ…çš„æ—¶å€™ç”¨åˆ°ã€‚</li>
<li>å‰¯ä½œç”¨çš„è§£é‡Šï¼š åœ¨utilsæ–‡ä»¶å¤¹ä¸‹é¢æœ‰index.jsæ–‡ä»¶ï¼Œç”¨äºç³»ç»Ÿå¯¼å‡ºutilsé‡Œé¢å…¶ä»–æ–‡ä»¶ï¼Œä½œç”¨å°±æ˜¯å†™çš„å°‘ï¼Œä¸ç®¡utilsé‡Œé¢æœ‰å¤šå°‘æ–¹æ³•ï¼Œæˆ‘éƒ½åªéœ€è¦å¼•å…¥utilså³å¯ã€‚<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// utils/index.js</span><br><span class="line">  export * from &#x27;./getXXX.js&#x27;;</span><br><span class="line">  export * from &#x27;./getAAA.js&#x27;;</span><br><span class="line">  export * from &#x27;./getBBB.js&#x27;;</span><br><span class="line">  export * from &#x27;./getCCC.js&#x27;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// åœ¨å…¶ä»–æ–‡ä»¶ä½¿ç”¨ getXXX å¼•å…¥</span><br><span class="line"> import &#123;getXX&#125; from &#x27;../utils&#x27;</span><br></pre></td></tr></table></figure></li>
<li>æ­¤æ—¶ï¼Œå¦‚æœæ–‡ä»¶getAAAåœ¨å¤–ç•Œæ²¡æœ‰ç”¨åˆ°ï¼Œè€Œtree-shakingåˆä¸èƒ½æŠŠå®ƒæ‘‡æ‰æ€ä¹ˆåŠï¼Ÿ</li>
<li>è¿™ä¸ªgetAAAå°±æ˜¯å‰¯ä½œç”¨ã€‚ä½ æˆ–è®¸è¦é—®tree-shakingä¸ºä»€ä¹ˆä¸èƒ½æŠŠå®ƒæ‘‡æ‰ï¼Ÿ</li>
<li>åŸå› å°±æ˜¯ï¼šä»–åœ¨utils/index.js é‡Œé¢ä½¿ç”¨äº†ã€‚åªèƒ½å¼€å¯å‰¯ä½œç”¨ç‰¹æ€§ã€‚å¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// package.jsonä¸­</span><br><span class="line">&#123;</span><br><span class="line">  nameï¼šâ€œé¡¹ç›®åç§°â€,</span><br><span class="line">  ....</span><br><span class="line">  sideEffects: false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// webpack.config.js</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  mode: &#x27;none&#x27;,</span><br><span class="line">  ....</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    sideEffects: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>å‰¯ä½œç”¨å¼€å¯ï¼š<br>(1)optimization.sideEffects = true å¼€å¯å‰¯ä½œç”¨åŠŸèƒ½<br>(2)package.json ä¸­è®¾ç½® sideEffects : false æ ‡è®°æ‰€æœ‰æ¨¡å—æ— å‰¯ä½œç”¨</li>
<li>è¯´æ˜ï¼š<br>webpackæ‰“åŒ…å‰éƒ½ä¼šæ£€æŸ¥é¡¹ç›®æ‰€å±çš„package.jsonæ–‡ä»¶ä¸­çš„sideEffectsæ ‡è¯†ï¼Œå¦‚æœæ²¡æœ‰å‰¯ä½œç”¨ï¼Œé‚£äº›æ²¡æœ‰ç”¨åˆ°çš„æ¨¡å—å°±ä¸éœ€è¦æ‰“åŒ…ï¼Œåä¹‹äº¦ç„¶ã€‚æ­¤æ—¶ï¼Œåœ¨webpack.config.jsé‡Œé¢å¼€å¯sideEffectsã€‚<h2 id="webpack-ç¼“å­˜"><a href="#webpack-ç¼“å­˜" class="headerlink" title="webpack ç¼“å­˜"></a>webpack ç¼“å­˜</h2></li>
<li>webpack4ç¼“å­˜é…ç½®<br>æ”¯æŒç¼“å­˜åœ¨å†…å­˜ä¸­<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hard-source-webpack-plugin -D</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const HardSourceWebpackPlugin = require(&#x27;hard-source-webpack-plugin&#x27;) </span><br><span class="line">module.exports = &#123; </span><br><span class="line">plugins: [</span><br><span class="line">  // å…¶å®ƒ plugin... </span><br><span class="line">  new HardSourceWebpackPlugin(), </span><br><span class="line">] &#125;</span><br></pre></td></tr></table></figure></li>
<li>webpack5ç¼“å­˜é…ç½®<br>webpack5å†…éƒ¨å†…ç½®äº†cacheç¼“å­˜æœºåˆ¶ï¼Œç›´æ¥é…ç½®å³å¯ã€‚<br>cacheä¼šåœ¨å¼€å‘æ¨¡å¼ä¸‹è¢«è®¾ç½®æˆtypeï¼šmemoryè€Œä¸”ä¼šåœ¨ç”Ÿäº§æ¨¡å¼æŠŠcacheç»™ç¦ç”¨æ‰ã€‚<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// webpack.config.js</span><br><span class="line">module.exports= &#123;</span><br><span class="line">  // ä½¿ç”¨æŒä¹…åŒ–ç¼“å­˜</span><br><span class="line">  cache: &#123;</span><br><span class="line">    type: &#x27;filesystem&#x27;ï¼Œ</span><br><span class="line">    cacheDirectory: path.join(__dirname, &#x27;node_modules/.cac/webpack&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>typeçš„å¯é€‰å€¼ä¸ºï¼šmemoryä½¿ç”¨å†…å®¹ç¼“å­˜ï¼Œfilesystemä½¿ç”¨æ–‡ä»¶ç¼“å­˜ã€‚</li>
<li>å½“type=filesystemçš„æ—¶å€™è®¾ç½®cacheDirectoryæ‰ç”Ÿæ•ˆã€‚ç”¨äºè®¾ç½®ä½ éœ€è¦çš„ä¸œè¥¿ç¼“å­˜æ”¾åœ¨å“ªé‡Œã€‚<h2 id="å¯¹loaderçš„ä¼˜åŒ–"><a href="#å¯¹loaderçš„ä¼˜åŒ–" class="headerlink" title="å¯¹loaderçš„ä¼˜åŒ–"></a>å¯¹loaderçš„ä¼˜åŒ–</h2>webpack4åŠ è½½èµ„æºéœ€è¦ç”¨ä¸åŒçš„loader</li>
<li>raw-loaderå°†æ–‡ä»¶å¯¼å…¥ä¸ºå­—ç¬¦ä¸²</li>
<li>url-loaderå°†æ–‡ä»¶ä½œä¸ºdata urlå†…è”åˆ°bundleæ–‡ä»¶ä¸­</li>
<li>file-loaderå°†æ–‡ä»¶å‘é€åˆ°è¾“å‡ºç›®å½•ä¸­<br><img src="/2023/04/05/webpack%E5%8D%87%E7%BA%A7/webpack4-1.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>webpack5 çš„èµ„æºæ¨¡å—ç±»å‹æ›¿æ¢ loader<br>èµ„æºæ¨¡å—ç±»å‹(asset module type)ï¼Œé€šè¿‡æ·»åŠ 4ç§æ–°çš„æ¨¡å—ç±»å‹ï¼Œæ¥æ›¿æ¢æ‰€æœ‰è¿™äº› loaderï¼š</li>
<li>asset/resource å‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¹¶å¯¼å‡º URLã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ file-loader å®ç°ã€‚</li>
<li>asset/inline å¯¼å‡ºä¸€ä¸ªèµ„æºçš„ data URIã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ url-loader å®ç°ã€‚</li>
<li>asset/source å¯¼å‡ºèµ„æºçš„æºä»£ç ã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ raw-loader å®ç°ã€‚</li>
<li>asset åœ¨å¯¼å‡ºä¸€ä¸ªdata URIå’Œå‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¹‹é—´è‡ªåŠ¨é€‰æ‹©ã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ url-loaderï¼Œå¹¶ä¸”é…ç½®èµ„æºä½“ç§¯é™åˆ¶å®ç°ã€‚<br><img src="/2023/04/05/webpack%E5%8D%87%E7%BA%A7/webpack4-2.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><h2 id="å¯åŠ¨æœåŠ¡çš„å·®åˆ«"><a href="#å¯åŠ¨æœåŠ¡çš„å·®åˆ«" class="headerlink" title="å¯åŠ¨æœåŠ¡çš„å·®åˆ«"></a>å¯åŠ¨æœåŠ¡çš„å·®åˆ«</h2></li>
<li>webpack4 å¯åŠ¨æœåŠ¡<br>é€šè¿‡webpack-dev-serverå¯åŠ¨æœåŠ¡</li>
<li>webpack5 å¯åŠ¨æœåŠ¡<br>å†…ç½®ä½¿ç”¨webpack serveå¯åŠ¨ï¼Œä½†æ˜¯å®ƒçš„æ—¥å¿—ä¸æ˜¯å¾ˆå¥½ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½åŠ éƒ½å–œæ¬¢ç”¨webpack-dev-serverä¼˜åŒ–ã€‚<h2 id="devtoolçš„å·®åˆ«"><a href="#devtoolçš„å·®åˆ«" class="headerlink" title="devtoolçš„å·®åˆ«"></a>devtoolçš„å·®åˆ«</h2>sourceMapéœ€è¦åœ¨webpack.config.jsé‡Œé¢ç›´æ¥é…ç½®devtoolå°±å¯ä»¥å®ç°äº†ã€‚è€Œ devtoolæœ‰å¾ˆå¤šä¸ªé€‰é¡¹å€¼ï¼Œä¸åŒçš„é€‰é¡¹å€¼ï¼Œä¸åŒçš„é€‰é¡¹äº§ç”Ÿçš„ .map æ–‡ä»¶ä¸åŒï¼Œæ‰“åŒ…é€Ÿåº¦ä¸åŒã€‚<br>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨å¼€å‘ç¯å¢ƒé…ç½®ç”¨â€œcheap-eval-module-source-mapâ€ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒç”¨â€˜noneâ€™ã€‚<br>devtoolåœ¨webpack4å’Œwebpack5ä¸Šä¹Ÿæ˜¯æœ‰åŒºåˆ«çš„<br>v4: devtool: â€˜cheap-eval-module-source-mapâ€™<br>v5: devtool: â€˜eval-cheap-module-source-mapâ€™<h2 id="çƒ­æ›´æ–°å·®åˆ«"><a href="#çƒ­æ›´æ–°å·®åˆ«" class="headerlink" title="çƒ­æ›´æ–°å·®åˆ«"></a>çƒ­æ›´æ–°å·®åˆ«</h2></li>
<li>webpack4è®¾ç½®<br><img src="/2023/04/05/webpack%E5%8D%87%E7%BA%A7/webpack4-3.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></li>
<li>webpack5è®¾ç½®<br>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯bable6ï¼ŒæŒ‰ç…§ä¸Šè¿°è®¾ç½®ï¼Œä½ ä¼šå‘ç°çƒ­æ›´æ–°æ— æ•ˆï¼Œéœ€è¦æ·»åŠ é…ç½®ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.hot.accept(&#x27;éœ€è¦çƒ­å¯åŠ¨çš„æ–‡ä»¶&#x27;,(source)=&gt;&#123;</span><br><span class="line">    //è‡ªå®šä¹‰çƒ­å¯åŠ¨</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
å½“å‰æœ€æ–°ç‰ˆçš„babelé‡Œé¢çš„ babel-loaderå·²ç»å¸®æˆ‘ä»¬å¤„ç†çš„çƒ­æ›´æ–°å¤±æ•ˆçš„é—®é¢˜ã€‚æ‰€ä»¥ä¸å¿…æ‹…å¿ƒï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚<br>å¦‚æœä½ å¼•å…¥ mini-css-extract-plugin ä»¥åä½ ä¼šå‘ç° æ ·å¼çš„çƒ­æ›´æ–°ä¹Ÿä¼šå¤±æ•ˆã€‚<br>åªèƒ½åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨style-loaderï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒç”¨MinicssExtractPlugin.loaderã€‚ å¦‚ä¸‹ï¼š<br><img src="/2023/04/05/webpack%E5%8D%87%E7%BA%A7/webpack5-1.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><h2 id="ä½¿ç”¨-webpack-merge-çš„å·®åˆ«"><a href="#ä½¿ç”¨-webpack-merge-çš„å·®åˆ«" class="headerlink" title="ä½¿ç”¨ webpack-merge çš„å·®åˆ«"></a>ä½¿ç”¨ webpack-merge çš„å·®åˆ«</h2></li>
<li>webpack4 å¯¼å…¥<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const merge = require(&#x27;webpack-merge);</span><br></pre></td></tr></table></figure></li>
<li>webpack 5 å¯¼å…¥<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const &#123;merge&#125; = require(&#x27;webpack-merge&#x27;);</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨-copy-webpack-plugin-çš„å·®åˆ«"><a href="#ä½¿ç”¨-copy-webpack-plugin-çš„å·®åˆ«" class="headerlink" title="ä½¿ç”¨ copy-webpack-plugin çš„å·®åˆ«"></a>ä½¿ç”¨ copy-webpack-plugin çš„å·®åˆ«</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//webpack.config.js</span><br><span class="line">const CopyWebpackPlugin = require(&#x27;copy-webpack-plugin&#x27;);</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    // webpack 4</span><br><span class="line">    new CopyWebpackPlugin([&#x27;public&#x27;]),   </span><br><span class="line">    // webpack 5</span><br><span class="line">    new CopyWebpackPlugin(&#123;</span><br><span class="line">      patterns: [&#123;</span><br><span class="line">        from: &#x27;./public&#x27;,</span><br><span class="line">        to: &#x27;./dist/public&#x27;</span><br><span class="line">      &#125;]</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
webpack5æ”¯æŒçš„æ–°ç‰ˆæœ¬é‡Œé¢éœ€è¦é…ç½®çš„æ›´åŠ æ¸…æ¥šã€‚<h1 id="ä¸‰ã€å‡çº§è¿‡ç¨‹"><a href="#ä¸‰ã€å‡çº§è¿‡ç¨‹" class="headerlink" title="ä¸‰ã€å‡çº§è¿‡ç¨‹"></a>ä¸‰ã€å‡çº§è¿‡ç¨‹</h1>Webpack5å¯¹Node.jsçš„ç‰ˆæœ¬è¦æ±‚è‡³å°‘æ˜¯10.13.0<h2 id="å…ˆå‡çº§-webpack-å’Œ-webpack-cli"><a href="#å…ˆå‡çº§-webpack-å’Œ-webpack-cli" class="headerlink" title="å…ˆå‡çº§ webpack å’Œ webpack-cli"></a>å…ˆå‡çº§ webpack å’Œ webpack-cli</h2><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">npm install <span class="attr">--save-dev</span> webpack<span class="keyword">@latest</span> webpack-cli<span class="keyword">@latest</span>  webpack-dev-server<span class="keyword">@latest</span> webpack-merge<span class="keyword">@latest</span></span><br></pre></td></tr></table></figure>
webpack-mergeå‡çº§ä»¥åï¼Œä½¿ç”¨æ–¹å¼æ”¹ä¸ºå¦‚ä¸‹ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> webpackMerge = <span class="built_in">require</span>(<span class="string">&quot;webpack-merge&quot;</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; merge &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>);</span><br></pre></td></tr></table></figure>
å‡çº§æ‰€æœ‰ä½¿ç”¨åˆ°çš„pluginå’Œloaderä¸ºæœ€æ–°çš„å¯ç”¨ç‰ˆæœ¬ã€‚<br>éƒ¨åˆ†pluginå’Œloaderå¯èƒ½ä¼šæœ‰ä¸€ä¸ªbetaç‰ˆæœ¬ï¼Œå¿…é¡»ä½¿ç”¨å®ƒä»¬æ‰èƒ½ä¸webpack 5å…¼å®¹ã€‚<h2 id="æ‰§è¡Œnpm-start"><a href="#æ‰§è¡Œnpm-start" class="headerlink" title="æ‰§è¡Œnpm start"></a>æ‰§è¡Œnpm start</h2>åœ¨ package.jsonä¸­scriptsçš„startå‘½ä»¤å¦‚ä¸‹ï¼š<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cross-env NODE_ENV=dev webpack-dev-server --hot --progress --colors  --config ./webpack.dev.js&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="â€“colors-æŠ¥é”™"><a href="#â€“colors-æŠ¥é”™" class="headerlink" title="â€“colors æŠ¥é”™"></a>â€“colors æŠ¥é”™</h3>åœ¨v4ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ â€“colorsæˆ–è€… â€“colorï¼Œä½†æ˜¯åœ¨v5ç‰ˆæœ¬ä¸­åªèƒ½ä½¿ç”¨ â€“color<br>è°ƒæ•´å‘½ä»¤ï¼š<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cross-env NODE_ENV=dev webpack-dev-server --hot --progress --color  --config ./webpack.dev.js&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="devServer-ä¸­-disableHostCheckæŠ¥é”™"><a href="#devServer-ä¸­-disableHostCheckæŠ¥é”™" class="headerlink" title="devServer ä¸­ disableHostCheckæŠ¥é”™"></a>devServer ä¸­ disableHostCheckæŠ¥é”™</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    ... </span><br><span class="line">    disableHostCheck: true, </span><br><span class="line">    ... </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
ä¿®æ”¹ä¸ºï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    ... </span><br><span class="line">    allowedHosts: &quot;all&quot;, </span><br><span class="line">    ... </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
å½“è®¾ç½®ä¸º â€˜allâ€™ æ—¶ä¼šè·³è¿‡hostæ£€æŸ¥ã€‚å¹¶ä¸æ¨èè¿™æ ·åšï¼Œå› ä¸ºä¸æ£€æŸ¥hostçš„åº”ç”¨ç¨‹åºå®¹æ˜“å—åˆ°DNSé‡ç»‘å®šæ”»å‡»ã€‚<h3 id="vue-loaderé—®é¢˜"><a href="#vue-loaderé—®é¢˜" class="headerlink" title="vue-loaderé—®é¢˜"></a>vue-loaderé—®é¢˜</h3>æ³¨æ„ vue-loaderä¸åŒçš„ç‰ˆæœ¬æ˜¯å¯¹åº”VUEä¸åŒç‰ˆæœ¬çš„ï¼Œè¿™é‡Œä¸€å®šè¦æ³¨æ„ï¼Œå¦‚æœä½ çš„VUEç‰ˆæœ¬æ˜¯2.xé‚£ä¹ˆä½ è¦ä½¿ç”¨<a href="mailto:&#x76;&#x75;&#101;&#x2d;&#x6c;&#111;&#97;&#x64;&#101;&#x72;&#64;&#x31;&#x35;&#46;&#x78;">&#x76;&#x75;&#101;&#x2d;&#x6c;&#111;&#97;&#x64;&#101;&#x72;&#64;&#x31;&#x35;&#46;&#x78;</a>ï¼Œå¦‚æœæ˜¯<a href="mailto:&#x76;&#117;&#101;&#64;&#x33;&#x2e;&#x78;">&#x76;&#117;&#101;&#64;&#x33;&#x2e;&#x78;</a>é‚£ä¹ˆè¦ä½¿ç”¨<a href="mailto:&#118;&#117;&#x65;&#x2d;&#x6c;&#x6f;&#x61;&#x64;&#x65;&#114;&#x40;&#49;&#x36;&#x2e;&#x78;">&#118;&#117;&#x65;&#x2d;&#x6c;&#x6f;&#x61;&#x64;&#x65;&#114;&#x40;&#49;&#x36;&#x2e;&#x78;</a><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// vue-loader@16.x</span></span><br><span class="line"><span class="comment">// å¯¹åº”vue@3.x</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">VueLoaderPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;vue-loader/dist/index&#x27;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">VueLoaderPlugin</span>(),</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// vue-loader@15.x</span></span><br><span class="line"><span class="comment">// å¯¹åº”vue@2.x</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">VueLoaderPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;vue-loader&#x27;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">VueLoaderPlugin</span>(),</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="119-x65-x62-112-97-99-107-64-53-46-120-ä¸-118-x75-x65-x2d-108-111-x61-100-x65-x72-64-x31-54-x2e-120-ç‰ˆæœ¬ä¸­é—´çš„ä¸€ä¸ªæŠ¥é”™é—®é¢˜-DescriptionDataMatcherRulePlugin-webpack5-æŠ¥é”™é—®é¢˜"><a href="#119-x65-x62-112-97-99-107-64-53-46-120-ä¸-118-x75-x65-x2d-108-111-x61-100-x65-x72-64-x31-54-x2e-120-ç‰ˆæœ¬ä¸­é—´çš„ä¸€ä¸ªæŠ¥é”™é—®é¢˜-DescriptionDataMatcherRulePlugin-webpack5-æŠ¥é”™é—®é¢˜" class="headerlink" title="&#119;&#x65;&#x62;&#112;&#97;&#99;&#107;&#64;&#53;&#46;&#120;ä¸&#118;&#x75;&#x65;&#x2d;&#108;&#111;&#x61;&#100;&#x65;&#x72;&#64;&#x31;&#54;&#x2e;&#120;ç‰ˆæœ¬ä¸­é—´çš„ä¸€ä¸ªæŠ¥é”™é—®é¢˜,DescriptionDataMatcherRulePlugin | webpack5 æŠ¥é”™é—®é¢˜"></a><a href="mailto:&#119;&#x65;&#x62;&#112;&#97;&#99;&#107;&#64;&#53;&#46;&#120;">&#119;&#x65;&#x62;&#112;&#97;&#99;&#107;&#64;&#53;&#46;&#120;</a>ä¸<a href="mailto:&#118;&#x75;&#x65;&#x2d;&#108;&#111;&#x61;&#100;&#x65;&#x72;&#64;&#x31;&#54;&#x2e;&#120;">&#118;&#x75;&#x65;&#x2d;&#108;&#111;&#x61;&#100;&#x65;&#x72;&#64;&#x31;&#54;&#x2e;&#120;</a>ç‰ˆæœ¬ä¸­é—´çš„ä¸€ä¸ªæŠ¥é”™é—®é¢˜,DescriptionDataMatcherRulePlugin | webpack5 æŠ¥é”™é—®é¢˜</h3>è§£å†³æ–¹æ¡ˆ</li>
</ul>
<ol>
<li>DescriptionDataMatcherRulePluginæ˜¯å‡ºç°åœ¨vue-loaderé‡Œé¢çš„</li>
<li>webpack@5é‡Œé¢ä¸ºå•¥ä¸è§äº†ï¼Œæˆ‘å»webpackæºç é‡Œæ‰¾ï¼Œç«Ÿç„¶æŠŠæ–‡ä»¶åç»™æ”¹äº†ï¼Œç„¶åvue-loaderé‚£è¾¹æ²¡æœ‰åŒæ­¥ä¿®æ”¹</li>
<li>è§£å†³æ–¹æ¡ˆï¼šnpm i <a href="mailto:&#119;&#101;&#98;&#x70;&#x61;&#x63;&#x6b;&#64;&#x35;&#x2e;&#x34;&#x34;&#x2e;&#48;">&#119;&#101;&#98;&#x70;&#x61;&#x63;&#x6b;&#64;&#x35;&#x2e;&#x34;&#x34;&#x2e;&#48;</a> -D æˆ–è€…ç­‰vue-loader æ›´æ–°<h3 id="postcss-loader-é—®é¢˜"><a href="#postcss-loader-é—®é¢˜" class="headerlink" title="postcss-loader é—®é¢˜"></a>postcss-loader é—®é¢˜</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install --save-dev autoprefixer</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–°çš„é…ç½®</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.(c|sa|sc)ss$/</span>,</span><br><span class="line">                <span class="attr">use</span>: [</span><br><span class="line">                     <span class="string">&#x27;vue-style-loader&#x27;</span>, <span class="comment">// &lt;style&gt;&lt;/style&gt; æ’å…¥é¡µé¢,developmentä¸‹ä½¿ç”¨</span></span><br><span class="line">                     <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">                     &#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">                        <span class="attr">options</span>: &#123;</span><br><span class="line">                            <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">                                <span class="attr">plugins</span>: [</span><br><span class="line">                                    [</span><br><span class="line">                                        <span class="comment">// &quot;postcss-preset-env&quot;, // postcss-preset-env åŒ…å«autoprefixer ï¼ˆnpm install postcss-preset-env --save-devï¼‰</span></span><br><span class="line">                                        <span class="comment">// &quot;postcss-nested&quot;,</span></span><br><span class="line">                                        <span class="string">&quot;autoprefixer&quot;</span>, <span class="comment">// css åŠ å‰ç¼€</span></span><br><span class="line">                                    ],</span><br><span class="line">                                ],</span><br><span class="line">                            &#125;,</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="string">&#x27;sass-loader&#x27;</span></span><br><span class="line">                     </span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="optimization-é…ç½®"><a href="#optimization-é…ç½®" class="headerlink" title="optimization é…ç½®"></a>optimization é…ç½®</h3>production<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">optimization</span>: &#123;</span><br><span class="line">        <span class="comment">// å‘ŠçŸ¥ webpack å½“é€‰æ‹©æ¨¡å— id æ—¶éœ€è¦ä½¿ç”¨å“ªç§ç®—æ³•</span></span><br><span class="line">        <span class="attr">moduleIds</span>: <span class="string">&#x27;deterministic&#x27;</span> <span class="comment">// è¢«å“ˆå¸Œè½¬åŒ–æˆçš„å°ä½æ•°å€¼æ¨¡å—åã€‚</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="webpack-manifest-plugin"><a href="#webpack-manifest-plugin" class="headerlink" title="webpack-manifest-plugin"></a>webpack-manifest-plugin</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">WebpackManifestPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack-manifest-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">WebpackManifestPlugin</span>(&#123;</span><br><span class="line">    <span class="attr">publicPath</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">filter</span>: <span class="keyword">function</span> (<span class="params">FileDescriptor</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">FileDescriptor</span>.<span class="property">isChunk</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>webpack</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>webpackè¿ç§»vite</title>
    <url>/2023/03/29/webpack%E8%BF%81%E7%A7%BBvite/</url>
    <content><![CDATA[<h1 id="ä¸€ã€è¿ç§»æµç¨‹"><a href="#ä¸€ã€è¿ç§»æµç¨‹" class="headerlink" title="ä¸€ã€è¿ç§»æµç¨‹"></a>ä¸€ã€è¿ç§»æµç¨‹</h1><p>1.å…ˆåˆ›å»ºæ–°çš„viteé¡¹ç›®<br>2.æ–°ç‰ˆviteé¡¹ç›®é»˜è®¤æ˜¯æ”¯æŒvue3çš„ï¼Œéœ€è¦æŠŠvueæ”¹æˆvue2ç‰ˆæœ¬åé…ç½®vite-plugin-vue2æ’ä»¶æ¥æ”¯æŒvue2<br>3.æŠŠé¡¹ç›®ä»£ç æ”¹æˆvue2å†™æ³•ï¼Œç¡®ä¿æ–°viteé¡¹ç›®å¯ä»¥æ­£å¸¸è¿è¡Œvue2<br>4.æŠŠåŸwebpacké¡¹ç›®ç”Ÿäº§ç¯å¢ƒä¾èµ–å¤åˆ¶åˆ°viteé¡¹ç›®ï¼Œå‰”é™¤æ‰webpackç›¸å…³çš„æ’ä»¶ä¾èµ–<br>5.å¤åˆ¶åŸé¡¹ç›®srcæ–‡ä»¶ä»£ç å’Œå…¶ä»–ä¸šåŠ¡ç›¸å…³ä»£ç åˆ°æ–°viteé¡¹ç›®ã€‚<br>6.æ–°viteé¡¹ç›®é…ç½®å¼€å‘ç¯å¢ƒå¯åŠ¨å‘½ä»¤ï¼Œæ ¹æ®æŠ¥é”™ä¿¡æ¯æ¥è¿›è¡Œè°ƒæ•´ã€‚<br>7.åœ¨æµ‹è¯•å¼€å‘å’Œæ‰“åŒ…ç¯å¢ƒéƒ½æ²¡é—®é¢˜åï¼Œæ›¿æ¢åŸå…ˆçš„é¡¹ç›®ã€‚</p>
<h1 id="äºŒã€è¿ç§»ä¸šåŠ¡ä»£ç åˆ°viteé¡¹ç›®"><a href="#äºŒã€è¿ç§»ä¸šåŠ¡ä»£ç åˆ°viteé¡¹ç›®" class="headerlink" title="äºŒã€è¿ç§»ä¸šåŠ¡ä»£ç åˆ°viteé¡¹ç›®"></a>äºŒã€è¿ç§»ä¸šåŠ¡ä»£ç åˆ°viteé¡¹ç›®</h1><h2 id="2-1åˆ›å»ºæ–°çš„viteé¡¹ç›®"><a href="#2-1åˆ›å»ºæ–°çš„viteé¡¹ç›®" class="headerlink" title="2.1åˆ›å»ºæ–°çš„viteé¡¹ç›®"></a>2.1åˆ›å»ºæ–°çš„viteé¡¹ç›®</h2><p>ç”±äºåŸå…ˆé¡¹ç›®æ²¡æœ‰ç”¨tsï¼Œæ‰€ä»¥åˆ›å»ºé¡¹ç›®ä¸é€‰tsç‰ˆæœ¬ï¼ŒåŒ…ç®¡ç†å·¥å…·ä¹Ÿä¾ç„¶é€‰æ‹©æ˜¯npmã€‚<br>npm init vite@latest my-vue-app â€“ â€“template vue<br>åˆ›å»ºå®Œæˆåï¼Œä½¿ç”¨vs codeæ‰“å¼€ï¼Œæ‰“å¼€å‘½ä»¤è¡Œï¼Œæ‰§è¡Œnpm iå®‰è£…ä¾èµ–<br>npm i<br>å®‰è£…ä¾èµ–å®Œæˆåï¼Œä½¿ç”¨npm run devå¯åŠ¨é¡¹ç›®<br>æ­¤æ—¶åŸºæœ¬çš„vite2+vue3é¡¹ç›®å·²ç»å¯åŠ¨æˆåŠŸäº†ï¼Œä½†æ­¤æ—¶viteæ”¯æŒçš„è¿˜æ˜¯vue3ç‰ˆæœ¬çš„ï¼Œæˆ‘ä»¬éœ€è¦è®©viteæ”¯æŒvue2ç‰ˆæœ¬ã€‚</p>
<h2 id="2-2é…ç½®viteæ”¯æŒvue2"><a href="#2-2é…ç½®viteæ”¯æŒvue2" class="headerlink" title="2.2é…ç½®viteæ”¯æŒvue2"></a>2.2é…ç½®viteæ”¯æŒvue2</h2><p>æ­¤æ—¶æ‰“å¼€vite.config.js,é‡Œé¢çš„ä»£ç ä¸º</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#x27;vite&#x27;</span><br><span class="line">import vue from &#x27;@vitejs/plugin-vue&#x27;</span><br><span class="line">// https://vitejs.dev/config/</span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line"> Â plugins: [vue()]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>@vitejs/plugin-vueæ’ä»¶æ˜¯å¯¹vue3è¯­æ³•åšæ”¯æŒï¼Œå¦‚æœè¦æ”¯æŒvue2ï¼Œéœ€è¦ç”¨vite-plugin-vue2<br>ç¬¬ä¸€æ­¥ï¼Œä»viteä¸­åˆ é™¤ @vitejs/plugin-vueé…ç½®ï¼Œä»package.jsonæ–‡ä»¶ä¸­ä¹Ÿåˆ é™¤ã€‚<br>npm uninstall @vitejs/plugin-vue -D<br>ç¬¬äºŒæ­¥,å®‰è£…vite-plugin-vue2ä¾èµ–<br>npm install vite-plugin-vue2 -D<br>ç¬¬ä¸‰æ­¥,åœ¨vite.config.jsæ–‡ä»¶é…ç½®vite-plugin-vue2</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#x27;vite&#x27;</span><br><span class="line">import &#123; createVuePlugin &#125; from &quot;vite-plugin-vue2&quot;;</span><br><span class="line">// https://vitejs.dev/config/</span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line"> Â plugins: [createVuePlugin()]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ç¬¬å››æ­¥ï¼Œä¿®æ”¹vueç‰ˆæœ¬ç”±3æ”¹ä¸º2ç‰ˆæœ¬<br>npm install vue@2 -S<br>ç¬¬äº”æ­¥, ä¿®æ”¹main.jsï¼Œåˆ›å»ºæ ¹vueå®ä¾‹å†™æ³•æ”¹ä¸ºvue2å†™æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  render: h =&gt; h(App),</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>
<p>ç¬¬å…­æ­¥ï¼Œä¿®æ”¹main.jså®Œæˆåï¼Œä¿®æ”¹App.vueæ–‡ä»¶ä»£ç ä¸ºvue2æ ¼å¼ä»£ç <br>æ‰§è¡Œnpm run devï¼Œå³å¯çœ‹åˆ°å¯åŠ¨æˆåŠŸ,ä»£è¡¨æ­¤æ—¶viteå·²ç»æ”¯æŒvue2è¯­æ³•äº†ï¼Œå¯ä»¥å¼€å§‹é¡¹ç›®è¿ç§»å·¥ä½œäº†ã€‚</p>
<h2 id="2-3å¤åˆ¶åŸé¡¹ç›®ä¸šåŠ¡ä»£ç "><a href="#2-3å¤åˆ¶åŸé¡¹ç›®ä¸šåŠ¡ä»£ç " class="headerlink" title="2.3å¤åˆ¶åŸé¡¹ç›®ä¸šåŠ¡ä»£ç "></a>2.3å¤åˆ¶åŸé¡¹ç›®ä¸šåŠ¡ä»£ç </h2><p>ç¬¬ä¸€æ­¥ï¼Œå¤åˆ¶åŸé¡¹ç›®é™æ€ç›®å½•staticä¸‹æ–‡ä»¶åˆ°viteé¡¹ç›®publicæ–‡ä»¶å¤¹ä¸‹<br>ç¬¬äºŒæ­¥ï¼Œå¤åˆ¶åŸé¡¹ç›®index.htmlæ–‡ä»¶å†…å®¹æ›¿æ¢viteé¡¹ç›®çš„index.htmlå†…å®¹(æ³¨æ„æœ¬åœ°é™æ€èµ„æºå¼•å…¥çš„è·¯å¾„)æ›¿æ¢åéœ€è¦åœ¨bodyç»“æŸæ ‡ç­¾å‰æ·»åŠ  <script type="module" src="/src/main.js"></script><br>ç¬¬ä¸‰æ­¥, å¤åˆ¶package.jsonä¸­ç”Ÿäº§ç¯å¢ƒä¾èµ–åˆ°æ–°viteé¡¹ç›®,å»é™¤webpackç›¸å…³é…ç½®ä¾èµ–<br>ç¬¬å››æ­¥ï¼Œå¤åˆ¶åŸé¡¹ç›®srcä¸šåŠ¡æ–‡ä»¶ä»£ç ï¼Œç›´æ¥æ›¿æ¢viteé¡¹ç›®srcæ–‡ä»¶</p>
<h1 id="ä¸‰ã€é¡¹ç›®å¼€å‘é˜¶æ®µæŠ¥é”™å¤„ç†"><a href="#ä¸‰ã€é¡¹ç›®å¼€å‘é˜¶æ®µæŠ¥é”™å¤„ç†" class="headerlink" title="ä¸‰ã€é¡¹ç›®å¼€å‘é˜¶æ®µæŠ¥é”™å¤„ç†"></a>ä¸‰ã€é¡¹ç›®å¼€å‘é˜¶æ®µæŠ¥é”™å¤„ç†</h1>]]></content>
      <categories>
        <category>çŸ¥è¯†ç‚¹</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€vite+vue3+Ts+element-plus1ã€‘</title>
    <url>/2023/04/26/%E3%80%90vite-vue3-Ts-element-plus1%E3%80%91/</url>
    <content><![CDATA[<h1 id="ä½¿ç”¨viteåˆå§‹åŒ–é¡¹ç›®"><a href="#ä½¿ç”¨viteåˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="ä½¿ç”¨viteåˆå§‹åŒ–é¡¹ç›®"></a>ä½¿ç”¨viteåˆå§‹åŒ–é¡¹ç›®</h1><p>é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨viteæ¥åˆå§‹åŒ–é¡¹ç›®ï¼Œviteæ”¯æŒä½¿ç”¨npmã€yarnå’Œpnpmæ¥åˆå§‹åŒ–é¡¹ç›®ï¼Œæœ¬æ–‡é‡‡ç”¨npmçš„æ–¹å¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ä½¿ç”¨npm</span><br><span class="line">npm create vite@latest</span><br><span class="line">// ä½¿ç”¨yarn</span><br><span class="line">yarn create vite</span><br><span class="line">// ä½¿ç”¨pnpm</span><br><span class="line">pnpm create vite</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥å‘½ä»¤ä¹‹åä¼šæç¤ºæˆ‘ä»¬è¾“å…¥é¡¹ç›®åï¼Œå¦‚æœæˆ‘ä»¬å·²ç»å»ºå¥½é¡¹ç›®ï¼Œå¹¶ä¸”æ˜¯åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œçš„å‘½ä»¤çš„è¯ï¼Œåªéœ€è¾“å…¥ä¸€ä¸ªç‚¹è¡¨ç¤ºåœ¨å½“å‰ç›®å½•åˆ›å»ºå°±è¡Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å½“å‰é¡¹ç›®æ–‡ä»¶å¤¹å¿…é¡»æ˜¯ç©ºæ–‡ä»¶å¤¹ï¼Œå¦åˆ™viteä¼šæç¤ºä½ æ˜¯å¦æ¸…ç©ºå·²å­˜åœ¨çš„æ–‡ä»¶ç»§ç»­ã€‚<br>å¦‚æœè¿˜æ²¡å»ºé¡¹ç›®ï¼Œæ˜¯åœ¨çˆ¶ç›®å½•æ‰§è¡Œçš„å‘½ä»¤ï¼Œåˆ™éœ€è¾“å…¥è¦åˆ›å»ºçš„é¡¹ç›®å<br>ä¹‹åä¼šè®©æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨çš„æ¡†æ¶å’Œé€‰æ‹©ä½¿ç”¨jsè¿˜æ˜¯tsï¼Œæˆ‘ä»¬é€‰æ‹©vueå’Œtsã€‚<br>ä¹‹åæˆ‘ä»¬æŒ‰ç…§æç¤ºå‘½ä»¤è¿›å…¥é¡¹ç›®ç›®å½•æ‰§è¡Œå‘½ä»¤å®‰è£…ä¾èµ–ï¼Œè¿è¡Œé¡¹ç›®å³å¯ã€‚<br>ä¹‹åæˆ‘ä»¬æŠŠä¸€äº›é»˜è®¤çš„æ²¡ç”¨çš„æ–‡ä»¶ç»™å¹²æ‰ï¼Œå†åœ¨ç›¸å…³å¼•ç”¨çš„åœ°æ–¹æŠŠå¼•ç”¨ç»™æ¸…ç©ºã€‚<br><img src="/2023/04/26/%E3%80%90vite-vue3-Ts-element-plus1%E3%80%91/qingkong.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>å†æŠŠAPP.vueé‡Œé¢çš„å†…å®¹ç»™æ¸…ç©ºï¼Œè¿™ä¸ªæ—¶å€™æ•´ä¸ªé¡¹ç›®å°±æ˜¯å¹²å¹²å‡€å‡€çš„äº†ã€‚<br><img src="/2023/04/26/%E3%80%90vite-vue3-Ts-element-plus1%E3%80%91/qingkongapp.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h1 id="vscodeæ¨èæ’ä»¶"><a href="#vscodeæ¨èæ’ä»¶" class="headerlink" title="vscodeæ¨èæ’ä»¶"></a>vscodeæ¨èæ’ä»¶</h1><p>ä½¿ç”¨vscodeçš„ç”¨æˆ·æ³¨æ„äº†ï¼Œä¹‹å‰æˆ‘ä»¬å¼€å‘vueå¯èƒ½ä½¿ç”¨çš„æ˜¯veturæ’ä»¶ï¼Œä½†æ˜¯ä»vue3å¼€å§‹ï¼Œå®˜æ–¹å·²ç»æ¨èä½¿ç”¨Volaräº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠæ—§çš„æ’ä»¶ç»™ç¦ç”¨æˆ–è€…ç›´æ¥å¸è½½æ‰ã€‚<br><img src="/2023/04/26/%E3%80%90vite-vue3-Ts-element-plus1%E3%80%91/vetur.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>å†å»æ‰©å±•é‡Œæœç´¢volarè¿›è¡Œå®‰è£…å°±å¯ä»¥äº†ã€‚<br><img src="/2023/04/26/%E3%80%90vite-vue3-Ts-element-plus1%E3%80%91/volar.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h1 id="viteé…ç½®ç›®å½•åˆ«å"><a href="#viteé…ç½®ç›®å½•åˆ«å" class="headerlink" title="viteé…ç½®ç›®å½•åˆ«å"></a>viteé…ç½®ç›®å½•åˆ«å</h1><p>åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå¼•ç”¨å…¶ä»–ç›®å½•çš„æ–‡ä»¶ï¼Œä½†å¦‚æœæ–‡ä»¶ä¸åœ¨ä¸€ä¸ªç›®å½•çš„è¯ï¼Œå°±ä¼šä½¿ç”¨../çš„æ–¹å¼å»æŸ¥æ‰¾ï¼Œå¦‚æœå±‚çº§å¤šçš„è¯å¾ˆä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¼šç»™ä¸€äº›å¸¸ç”¨ç›®å½•é…ç½®ä¸€ä¸ªåˆ«åï¼Œæ¯”å¦‚ä¸‹é¢æˆ‘ä»¬å°±åœ¨viteä¸­ç»™srcç›®å½•é…ç½®ä¸€ä¸ªâ€˜@â€™åˆ«å<br>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…nodeçš„ç±»å‹å£°æ˜æ–‡ä»¶ï¼Œè¦ä¸ç„¶tså¯èƒ½ä¼šæŠ¥è­¦å‘Šã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yarn add @types/node -D</span><br></pre></td></tr></table></figure>
<p>ä¹‹åæˆ‘ä»¬åœ¨vite.config.tsä¸­è¿›è¡Œç›¸å…³é…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#x27;vite&#x27;</span><br><span class="line">import vue from &#x27;@vitejs/plugin-vue&#x27;</span><br><span class="line">import path from &#x27;path&#x27;                   // å¢åŠ æ­¤è¡Œä»£ç </span><br><span class="line">const pathSrc = path.resolve(__dirname, &#x27;src&#x27;)</span><br><span class="line">// https://vitejs.dev/config/</span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    vue(),</span><br><span class="line">  ],</span><br><span class="line">  resolve: &#123;                              </span><br><span class="line">    alias: &#123;              // å¢åŠ æ­¤è¡Œä»£ç                 </span><br><span class="line">      &#x27;@&#x27;: pathSrc,</span><br><span class="line">    &#125;,                                </span><br><span class="line">  &#125;,  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ä¹‹åè¿˜è¦åœ¨tsconfig.jsonä¸­å¢åŠ ä»¥ä¸‹é…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;paths&quot;: &#123;</span><br><span class="line">     &quot;@/*&quot;: [&quot;./src/*&quot;]</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h1 id="é‡ç½®é»˜è®¤æ ·å¼"><a href="#é‡ç½®é»˜è®¤æ ·å¼" class="headerlink" title="é‡ç½®é»˜è®¤æ ·å¼"></a>é‡ç½®é»˜è®¤æ ·å¼</h1><p>æˆ‘ä»¬è¿™é‡Œç›´æ¥åœ¨assets/styleæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªnormalize.cssï¼Œå†™å…¥é‡ç½®æ ·å¼ã€‚<br>ç„¶ååœ¨main.tsä¸­å¼•å…¥å³å¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// main.ts</span><br><span class="line">import &#x27;@/assets/style/normalize.css&#x27;</span><br></pre></td></tr></table></figure>
<h1 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h1><p>é¦–å…ˆæˆ‘ä»¬æ¥å®‰è£…ä¸€ä¸‹vue-router</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yarn add vue-router@4</span><br></pre></td></tr></table></figure>
<p>ä¹‹ååœ¨srcç›®å½•ä¸‹æ–°å»ºrouter/index.tsï¼Œå†™å…¥ä¸€äº›åŸºæœ¬è·¯ç”±ã€‚<br>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œvue-routeræŒ‡å®šè·¯ç”±æ¨¡å¼ä»å­—ç¬¦ä¸²å˜ä¸ºäº†ä½¿ç”¨æ–¹æ³•ï¼Œhistoryæ˜¯createWebHistory(åœ°å€æ ä¸å¸¦#)ï¼Œhashæ˜¯createWebHashHistoryï¼ˆåœ°å€æ å¸¦#ï¼‰ã€‚<br>è¿™æ—¶å€™æˆ‘ä»¬å¯èƒ½è¿˜ä¼šå‘ç°ï¼Œç¼–è¾‘å™¨ä¸­tsä¼šæŠ¥æ‰¾ä¸åˆ°vueæ–‡ä»¶ç›¸å…³ç±»å‹å£°æ˜çš„é”™è¯¯ã€‚<br><img src="/2023/04/26/%E3%80%90vite-vue3-Ts-element-plus1%E3%80%91/router.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h2 id="è§£å†³åŠæ³•ï¼šæˆ‘ä»¬å¯ä»¥åœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªenv-d-tsï¼Œåœ¨é‡Œé¢å†™å…¥ä»¥ä¸‹å†…å®¹"><a href="#è§£å†³åŠæ³•ï¼šæˆ‘ä»¬å¯ä»¥åœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªenv-d-tsï¼Œåœ¨é‡Œé¢å†™å…¥ä»¥ä¸‹å†…å®¹" class="headerlink" title="è§£å†³åŠæ³•ï¼šæˆ‘ä»¬å¯ä»¥åœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªenv.d.tsï¼Œåœ¨é‡Œé¢å†™å…¥ä»¥ä¸‹å†…å®¹"></a>è§£å†³åŠæ³•ï¼šæˆ‘ä»¬å¯ä»¥åœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªenv.d.tsï¼Œåœ¨é‡Œé¢å†™å…¥ä»¥ä¸‹å†…å®¹</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/// &lt;reference types=&quot;vite/client&quot; /&gt;</span><br><span class="line">declare module &#x27;*.vue&#x27; &#123;</span><br><span class="line">  //å¼•å…¥vueæ¨¡å—ä¸­tsçš„æ–¹æ³•</span><br><span class="line">  import type &#123; DefineComponent &#125; from &#x27;vue&#x27;</span><br><span class="line">  // å®šä¹‰vueçµ„ä»¶ä»¥åŠç±»å‹æ³¨è§£</span><br><span class="line">  const component: DefineComponent&lt;&#123;&#125;, &#123;&#125;, any&gt;</span><br><span class="line">  export default component</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹‹åè¿˜è¦è®°å¾—åœ¨tsconfig.tsä¸­å¼•å…¥ã€‚<br><img src="/2023/04/26/%E3%80%90vite-vue3-Ts-element-plus1%E3%80%91/ts.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ç°åœ¨æŠ¥é”™æ²¡æœ‰äº†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨main.tsä¸­è¿›è¡Œå¼•å…¥</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import router from &#x27;./router&#x27;</span><br><span class="line">createApp(App).use(router).mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>vite</category>
      </categories>
      <tags>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºnpm run xxxçš„äº‹</title>
    <url>/2023/04/23/%E5%85%B3%E4%BA%8Enpm%20run%20xxx%E7%9A%84%E4%BA%8B/</url>
    <content><![CDATA[<p>å¤§å®¶åœ¨æ¯å¤©å¼€å§‹ä¸€å¤©æ–°çš„å·¥ä½œçš„æ—¶å€™ï¼Œç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ‰“å¼€vs codeï¼Œç„¶åå°±åœ¨å‘½ä»¤è¡Œè¾“å…¥npm run start,emmmâ€¦ä¹‹åå†ç­‰å¾…ä¸ªä¸€å°ä¼šï¼Œé¡¹ç›®å°±è·‘èµ·æ¥äº†ï¼Œå°±å¼€å§‹æ„‰å¿«çš„ä¸€å¤©äº†ã€‚<br>é‚£é—®é¢˜æ¥äº†ï¼Œä½ æƒ³è¿‡npm run xxxä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆå—ï¼Ÿ<br>å‡ ä¹æ¯ä¸€ä¸ªå‰ç«¯é¡¹ç›®éƒ½ä¸€ä¸ªpackage.jsonæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é‡Œé¢æ€»æ˜¯èƒ½çœ‹åˆ°ä¸€ä¸ªå…³é”®å­— scripts</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">Â Â ...,</span><br><span class="line">Â &quot;scripts&quot;:Â &#123;</span><br><span class="line">Â Â Â &quot;webpack&quot;:Â &quot;webpackÂ --configÂ webpack.config.js&quot;,</span><br><span class="line">Â Â Â &quot;postinstall&quot;:Â &quot;nodeÂ ./scripts/postinstall.js&quot;</span><br><span class="line">Â &#125;,</span><br><span class="line">Â Â ...,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ npm run xxx æ¥æ‰§è¡Œ scripts ä¸­çš„å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ npm run webpack æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ‰§è¡Œ scripts ä¸­çš„ webpack å‘½ä»¤ï¼Œå³ webpack â€“config webpack.config.js</p>
<h1 id="ä¸€ã€npm-run-xxx-çš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ã€npm-run-xxx-çš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ã€npm  run xxx çš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ"></a>ä¸€ã€npm  run xxx çš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h1><p>npm run xxx çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå»é¡¹ç›®çš„ package.json æ–‡ä»¶é‡Œæ‰¾ scripts é‡Œæ‰¾å¯¹åº”çš„ xxxï¼Œç„¶åæ‰§è¡Œ xxx çš„å‘½ä»¤ï¼Œä¾‹å¦‚å¯åŠ¨ vue é¡¹ç›® npm run serve çš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±æ˜¯æ‰§è¡Œäº† vue-cli-service serve è¿™æ¡å‘½ä»¤ã€‚<br>package.json æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;serve&quot;: &quot;vue-cli-service serve&quot;,</span><br><span class="line">  &quot;build&quot;: &quot;vue-cli-service build&quot;,</span><br><span class="line">  &quot;lint&quot;: &quot;vue-cli-service lint&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h1 id="äºŒã€é‚£ä¸ºä»€ä¹ˆä¸ç›´æ¥æ‰§è¡Œvue-cli-service-serveè€Œè¦æ‰§è¡Œnpm-run-serve-å‘¢ï¼Ÿ"><a href="#äºŒã€é‚£ä¸ºä»€ä¹ˆä¸ç›´æ¥æ‰§è¡Œvue-cli-service-serveè€Œè¦æ‰§è¡Œnpm-run-serve-å‘¢ï¼Ÿ" class="headerlink" title="äºŒã€é‚£ä¸ºä»€ä¹ˆä¸ç›´æ¥æ‰§è¡Œvue-cli-service serveè€Œè¦æ‰§è¡Œnpm run serve å‘¢ï¼Ÿ"></a>äºŒã€é‚£ä¸ºä»€ä¹ˆä¸ç›´æ¥æ‰§è¡Œvue-cli-service serveè€Œè¦æ‰§è¡Œnpm run serve å‘¢ï¼Ÿ</h1><p>å› ä¸ºç›´æ¥æ‰§è¡Œvue-cli-service serveï¼Œä¼šæŠ¥é”™ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿä¸­æ²¡æœ‰å­˜åœ¨vue-cli-serviceè¿™ä¸€æ¡æŒ‡ä»¤<br>æ—¢ç„¶vue-cli-serviceè¿™æ¡æŒ‡ä»¤ä¸å­˜åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œä¸ºä»€ä¹ˆæ‰§è¡Œnpm run serveçš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºæ‰§è¡Œäº†vue-cli-service serve ï¼Œä¸ºä»€ä¹ˆè¿™æ ·å®ƒå°±èƒ½æˆåŠŸï¼Œè€Œä¸”ä¸æŠ¥æŒ‡ä»¤ä¸å­˜åœ¨çš„é”™è¯¯å‘¢ï¼Ÿ</p>
<h1 id="ä¸‰ã€ä¸ºä»€ä¹ˆæ‰§è¡Œ-npm-run-serve-çš„èƒ½æˆåŠŸï¼Ÿ"><a href="#ä¸‰ã€ä¸ºä»€ä¹ˆæ‰§è¡Œ-npm-run-serve-çš„èƒ½æˆåŠŸï¼Ÿ" class="headerlink" title="ä¸‰ã€ä¸ºä»€ä¹ˆæ‰§è¡Œ npm run serve çš„èƒ½æˆåŠŸï¼Ÿ"></a>ä¸‰ã€ä¸ºä»€ä¹ˆæ‰§è¡Œ npm run serve çš„èƒ½æˆåŠŸï¼Ÿ</h1><p>åœ¨æˆ‘ä»¬åœ¨å®‰è£…ä¾èµ–çš„æ—¶å€™ï¼Œæ˜¯é€šè¿‡npm i xxx æ¥æ‰§è¡Œçš„ï¼Œä¾‹å¦‚ npm i @vue/cli-serviceï¼Œnpm åœ¨ å®‰è£…è¿™ä¸ªä¾èµ–çš„æ—¶å€™ï¼Œå°±ä¼šnode_modules/.bin/ ç›®å½•ä¸­åˆ›å»º å¥½vue-cli-service ä¸ºåçš„å‡ ä¸ªå¯æ‰§è¡Œæ–‡ä»¶äº†ã€‚<br>.bin ç›®å½•ï¼Œè¿™ä¸ªç›®å½•ä¸æ˜¯ä»»ä½•ä¸€ä¸ª npm åŒ…ã€‚ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªä¸ªè½¯é“¾æ¥ï¼Œæ‰“å¼€æ–‡ä»¶å¯ä»¥çœ‹åˆ°æ–‡ä»¶é¡¶éƒ¨å†™ç€ #!/bin/sh ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè„šæœ¬ã€‚<br>å½“ä½¿ç”¨ npm run serve æ‰§è¡Œ vue-cli-service serve æ—¶ï¼Œè™½ç„¶æ²¡æœ‰å®‰è£… vue-cli-serviceçš„å…¨å±€å‘½ä»¤ï¼Œä½†æ˜¯ npm ä¼šåˆ° ./node_modules/.bin ä¸­æ‰¾åˆ°vue-cli-service æ–‡ä»¶ä½œä¸ºè„šæœ¬æ¥æ‰§è¡Œã€‚</p>
<h1 id="å››ã€ä½ è¯´-bin-ç›®å½•ä¸‹çš„æ–‡ä»¶è¡¨ç¤ºè½¯è¿æ¥ï¼Œé‚£è¿™ä¸ªbinç›®å½•ä¸‹çš„é‚£äº›è½¯è¿æ¥æ–‡ä»¶æ˜¯å“ªé‡Œæ¥çš„å‘¢ï¼Ÿå®ƒåˆæ˜¯æ€ä¹ˆçŸ¥é“è¿™æ¡è½¯è¿æ¥æ˜¯æ‰§è¡Œå“ªé‡Œçš„å‘¢ï¼Ÿ"><a href="#å››ã€ä½ è¯´-bin-ç›®å½•ä¸‹çš„æ–‡ä»¶è¡¨ç¤ºè½¯è¿æ¥ï¼Œé‚£è¿™ä¸ªbinç›®å½•ä¸‹çš„é‚£äº›è½¯è¿æ¥æ–‡ä»¶æ˜¯å“ªé‡Œæ¥çš„å‘¢ï¼Ÿå®ƒåˆæ˜¯æ€ä¹ˆçŸ¥é“è¿™æ¡è½¯è¿æ¥æ˜¯æ‰§è¡Œå“ªé‡Œçš„å‘¢ï¼Ÿ" class="headerlink" title="å››ã€ä½ è¯´.bin ç›®å½•ä¸‹çš„æ–‡ä»¶è¡¨ç¤ºè½¯è¿æ¥ï¼Œé‚£è¿™ä¸ªbinç›®å½•ä¸‹çš„é‚£äº›è½¯è¿æ¥æ–‡ä»¶æ˜¯å“ªé‡Œæ¥çš„å‘¢ï¼Ÿå®ƒåˆæ˜¯æ€ä¹ˆçŸ¥é“è¿™æ¡è½¯è¿æ¥æ˜¯æ‰§è¡Œå“ªé‡Œçš„å‘¢ï¼Ÿ"></a>å››ã€ä½ è¯´.bin ç›®å½•ä¸‹çš„æ–‡ä»¶è¡¨ç¤ºè½¯è¿æ¥ï¼Œé‚£è¿™ä¸ªbinç›®å½•ä¸‹çš„é‚£äº›è½¯è¿æ¥æ–‡ä»¶æ˜¯å“ªé‡Œæ¥çš„å‘¢ï¼Ÿå®ƒåˆæ˜¯æ€ä¹ˆçŸ¥é“è¿™æ¡è½¯è¿æ¥æ˜¯æ‰§è¡Œå“ªé‡Œçš„å‘¢ï¼Ÿ</h1><p>ä» package-lock.json ä¸­å¯çŸ¥ï¼Œå½“æˆ‘ä»¬ npm i æ•´ä¸ªæ–°å»ºçš„ vue é¡¹ç›®çš„æ—¶å€™ï¼Œnpm å°† bin/vue-cli-service.js ä½œä¸º bin å£°æ˜äº†<br>æ‰€ä»¥åœ¨ npm install æ—¶ï¼Œnpm è¯»åˆ°è¯¥é…ç½®åï¼Œå°±å°†è¯¥æ–‡ä»¶è½¯é“¾æ¥åˆ° ./node_modules/.bin ç›®å½•ä¸‹ï¼Œè€Œ npm è¿˜ä¼šè‡ªåŠ¨æŠŠ node_modules/.bin åŠ å…¥$PATHï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥ä½œä¸ºå‘½ä»¤è¿è¡Œä¾èµ–ç¨‹åºå’Œå¼€å‘ä¾èµ–ç¨‹åºï¼Œä¸ç”¨å…¨å±€å®‰è£…äº†<br>å‡å¦‚æˆ‘ä»¬åœ¨å®‰è£…åŒ…æ—¶ï¼Œä½¿ç”¨ Â npm install -g xxxÂ  æ¥å®‰è£…ï¼Œé‚£ä¹ˆä¼šå°†å…¶ä¸­çš„ bin æ–‡ä»¶åŠ å…¥åˆ°å…¨å±€<br>npm i çš„æ—¶å€™ï¼Œnpm å°±å¸®æˆ‘ä»¬æŠŠè¿™ç§è½¯è¿æ¥é…ç½®å¥½äº†ï¼Œå…¶å®è¿™ç§è½¯è¿æ¥ç›¸å½“äºä¸€ç§æ˜ å°„ï¼Œæ‰§è¡Œ npm run xxx çš„æ—¶å€™ï¼Œå°±ä¼šåˆ° node_modules/bin ä¸­æ‰¾å¯¹åº”çš„æ˜ å°„æ–‡ä»¶ï¼Œç„¶åå†æ‰¾åˆ°ç›¸åº”çš„ js æ–‡ä»¶æ¥æ‰§è¡Œã€‚</p>
<h1 id="äº”ã€ä¸ºä»€ä¹ˆåœ¨-node-modules-bin-ä¸­-æœ‰ä¸‰ä¸ª-vue-cli-service-æ–‡ä»¶ï¼Ÿ"><a href="#äº”ã€ä¸ºä»€ä¹ˆåœ¨-node-modules-bin-ä¸­-æœ‰ä¸‰ä¸ª-vue-cli-service-æ–‡ä»¶ï¼Ÿ" class="headerlink" title="äº”ã€ä¸ºä»€ä¹ˆåœ¨ node_modules/bin ä¸­ æœ‰ä¸‰ä¸ª vue-cli-service æ–‡ä»¶ï¼Ÿ"></a>äº”ã€ä¸ºä»€ä¹ˆåœ¨ node_modules/bin ä¸­ æœ‰ä¸‰ä¸ª vue-cli-service æ–‡ä»¶ï¼Ÿ</h1><p>å¦‚æœæˆ‘ä»¬åœ¨ cmd é‡Œè¿è¡Œçš„æ—¶å€™ï¼Œwindows ä¸€èˆ¬æ˜¯è°ƒç”¨äº† vue-cli-service.cmdï¼Œè¿™ä¸ªæ–‡ä»¶ï¼Œè¿™æ˜¯ windows ä¸‹çš„æ‰¹å¤„ç†è„šæœ¬ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@ECHO off</span><br><span class="line">GOTO start</span><br><span class="line">:find_dp0</span><br><span class="line">SET dp0=%~dp0</span><br><span class="line">EXIT /b</span><br><span class="line">:start</span><br><span class="line">SETLOCAL</span><br><span class="line">CALL :find_dp0</span><br><span class="line">IF EXIST &quot;%dp0%\node.exe&quot; (</span><br><span class="line">  SET &quot;_prog=%dp0%\node.exe&quot;</span><br><span class="line">) ELSE (</span><br><span class="line">  SET &quot;_prog=node&quot;</span><br><span class="line">  SET PATHEXT=%PATHEXT:;.JS;=;%</span><br><span class="line">)</span><br><span class="line">endLocal &amp; goto #_undefined_# 2&gt;NUL || title %COMSPEC% &amp; &quot;%_prog%&quot;  &quot;%dp0%\..\@vue\cli-service\bin\vue-cli-service.js&quot; %*</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥å½“æˆ‘ä»¬è¿è¡Œvue-cli-service serveè¿™æ¡å‘½ä»¤çš„æ—¶å€™ï¼Œå°±ç›¸å½“äºè¿è¡Œ node_modules/.bin/vue-cli-service.cmd serveã€‚<br>ç„¶åè¿™ä¸ªè„šæœ¬ä¼šä½¿ç”¨ node å»è¿è¡Œ vue-cli-service.jsè¿™ä¸ª js æ–‡ä»¶<br>ç”±äº node ä¸­å¯ä»¥ä½¿ç”¨ä¸€ç³»åˆ—ç³»ç»Ÿç›¸å…³çš„ api ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ª js ä¸­å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œä¾‹å¦‚è¯»å–å¹¶åˆ†æè¿è¡Œè¿™æ¡å‘½ä»¤çš„ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œæ ¹æ®æ¨¡æ¿ç”Ÿæˆæ–‡ä»¶ç­‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># unix ç³»é»˜è®¤çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¿…é¡»è¾“å…¥å®Œæ•´æ–‡ä»¶å</span><br><span class="line">vue-cli-service</span><br><span class="line"># windows cmd ä¸­é»˜è®¤çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå½“æˆ‘ä»¬ä¸æ·»åŠ åç¼€åæ—¶ï¼Œè‡ªåŠ¨æ ¹æ® pathext æŸ¥æ‰¾æ–‡ä»¶</span><br><span class="line">vue-cli-service.cmd</span><br><span class="line"># Windows PowerShell ä¸­å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä»¥è·¨å¹³å°</span><br><span class="line">vue-cli-service.ps1</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ‰§è¡Œnpm run xxxæ—¶ï¼Œä¼šå…ˆä»å½“å‰ç›®å½•ä¸‹çš„node_modules/.binä¸­å»æŸ¥æ‰¾å¯¹åº”çš„å¯æ‰§è¡Œç¨‹åºæ‰§è¡Œï¼›<br>å¦‚æœæ— æ³•æ‰¾åˆ°ï¼Œå°±ä¼šåœ¨npmçš„å…¨å±€å®‰è£…è·¯å¾„è¿›è¡ŒæŸ¥æ‰¾ï¼Œä¹Ÿå°±æ˜¯npm i -g xxxæ—¶å®‰è£…çš„è·¯å¾„ï¼›<br>å¦‚æœè¿˜æ‰¾ä¸åˆ°ï¼Œå°±ä¼šä»ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­æŸ¥æ‰¾ï¼›<br>å†æ‰¾ä¸åˆ°å°±ä¼šæŠ¥é”™äº†ï¼›</p>
]]></content>
      <categories>
        <category>npm</category>
      </categories>
      <tags>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title>åšå®¢æ­å»º</title>
    <url>/2022/08/16/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<h1 id="1-å®‰è£…hexo"><a href="#1-å®‰è£…hexo" class="headerlink" title="1.å®‰è£…hexo"></a>1.å®‰è£…hexo</h1><h1 id="2-åˆå§‹åŒ–é¡¹ç›®"><a href="#2-åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="2.åˆå§‹åŒ–é¡¹ç›®"></a>2.åˆå§‹åŒ–é¡¹ç›®</h1><h2 id="ç°åœ¨æˆ‘ä»¬å·²ç»å®‰è£…å®Œæˆhexoäº†ã€‚æ¥ä¸‹æ¥ä½¿ç”¨hexoåˆå§‹åŒ–åšå®¢é¡¹ç›®ã€‚"><a href="#ç°åœ¨æˆ‘ä»¬å·²ç»å®‰è£…å®Œæˆhexoäº†ã€‚æ¥ä¸‹æ¥ä½¿ç”¨hexoåˆå§‹åŒ–åšå®¢é¡¹ç›®ã€‚" class="headerlink" title="ç°åœ¨æˆ‘ä»¬å·²ç»å®‰è£…å®Œæˆhexoäº†ã€‚æ¥ä¸‹æ¥ä½¿ç”¨hexoåˆå§‹åŒ–åšå®¢é¡¹ç›®ã€‚"></a>ç°åœ¨æˆ‘ä»¬å·²ç»å®‰è£…å®Œæˆhexoäº†ã€‚æ¥ä¸‹æ¥ä½¿ç”¨hexoåˆå§‹åŒ–åšå®¢é¡¹ç›®ã€‚</h2><h2 id="åˆå§‹åŒ–ç”Ÿæˆblogé¡¹ç›®"><a href="#åˆå§‹åŒ–ç”Ÿæˆblogé¡¹ç›®" class="headerlink" title="// åˆå§‹åŒ–ç”Ÿæˆblogé¡¹ç›®"></a>// åˆå§‹åŒ–ç”Ÿæˆblogé¡¹ç›®</h2><p>hexo init blog</p>
<h1 id="3-é…ç½®ä¸»é¢˜"><a href="#3-é…ç½®ä¸»é¢˜" class="headerlink" title="3.é…ç½®ä¸»é¢˜"></a>3.é…ç½®ä¸»é¢˜</h1><h2 id="hexoé»˜è®¤çš„ä¸»é¢˜æ˜¯-landscapeï¼Œç°åœ¨æˆ‘ä»¬å°†ä¸»é¢˜é…ç½®ä¸º-keepã€‚"><a href="#hexoé»˜è®¤çš„ä¸»é¢˜æ˜¯-landscapeï¼Œç°åœ¨æˆ‘ä»¬å°†ä¸»é¢˜é…ç½®ä¸º-keepã€‚" class="headerlink" title="hexoé»˜è®¤çš„ä¸»é¢˜æ˜¯_landscapeï¼Œç°åœ¨æˆ‘ä»¬å°†ä¸»é¢˜é…ç½®ä¸º keepã€‚"></a>hexoé»˜è®¤çš„ä¸»é¢˜æ˜¯_landscapeï¼Œç°åœ¨æˆ‘ä»¬å°†ä¸»é¢˜é…ç½®ä¸º keepã€‚</h2><h2 id="ç¡®è®¤ç›®å½•æ˜¯å¦åˆ‡æ¢åˆ°äº†blogä¸­ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å°†ç›®å½•åˆ‡æ¢åˆ°blogä¸­"><a href="#ç¡®è®¤ç›®å½•æ˜¯å¦åˆ‡æ¢åˆ°äº†blogä¸­ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å°†ç›®å½•åˆ‡æ¢åˆ°blogä¸­" class="headerlink" title="// ç¡®è®¤ç›®å½•æ˜¯å¦åˆ‡æ¢åˆ°äº†blogä¸­ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å°†ç›®å½•åˆ‡æ¢åˆ°blogä¸­"></a>// ç¡®è®¤ç›®å½•æ˜¯å¦åˆ‡æ¢åˆ°äº†blogä¸­ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å°†ç›®å½•åˆ‡æ¢åˆ°blogä¸­</h2><p>cd blog</p>
<h2 id="å®‰è£…keepä¸»é¢˜"><a href="#å®‰è£…keepä¸»é¢˜" class="headerlink" title="// å®‰è£…keepä¸»é¢˜"></a>// å®‰è£…keepä¸»é¢˜</h2><p>npm install hexo-theme-keep</p>
<h2 id="ä¿®æ”¹-config-ymlé…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹-config-ymlé…ç½®æ–‡ä»¶" class="headerlink" title="// ä¿®æ”¹_config.ymlé…ç½®æ–‡ä»¶"></a>// ä¿®æ”¹_config.ymlé…ç½®æ–‡ä»¶</h2><p>theme: keep<br>##// é¢„è§ˆç½‘ç«™<br>hexo server<br>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€<a href="http://localhost:4000/">http://localhost:4000</a></p>
<h1 id="4-æ·»åŠ æ–‡ç« "><a href="#4-æ·»åŠ æ–‡ç« " class="headerlink" title="4.æ·»åŠ æ–‡ç« "></a>4.æ·»åŠ æ–‡ç« </h1><h2 id="ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ–°å»ºä¸€ç¯‡åšå®¢"><a href="#ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ–°å»ºä¸€ç¯‡åšå®¢" class="headerlink" title="ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ–°å»ºä¸€ç¯‡åšå®¢"></a>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ–°å»ºä¸€ç¯‡åšå®¢</h2><h2 id="åœ¨blogé¡¹ç›®ä¸­ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼šæ–°å»ºæ–‡ç« "><a href="#åœ¨blogé¡¹ç›®ä¸­ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼šæ–°å»ºæ–‡ç« " class="headerlink" title="// åœ¨blogé¡¹ç›®ä¸­ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼šæ–°å»ºæ–‡ç« "></a>// åœ¨blogé¡¹ç›®ä¸­ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼šæ–°å»ºæ–‡ç« </h2><p>hexo new post xxxx</p>
<h2 id="æ–°å»ºçš„è¿™ç¯‡åšå®¢ä»¥markdownçš„æ ¼å¼å½¢å¼å­˜å‚¨åœ¨äº†blog-source-postsç›®å½•ä¸‹ã€‚"><a href="#æ–°å»ºçš„è¿™ç¯‡åšå®¢ä»¥markdownçš„æ ¼å¼å½¢å¼å­˜å‚¨åœ¨äº†blog-source-postsç›®å½•ä¸‹ã€‚" class="headerlink" title="æ–°å»ºçš„è¿™ç¯‡åšå®¢ä»¥markdownçš„æ ¼å¼å½¢å¼å­˜å‚¨åœ¨äº†blog/source/_postsç›®å½•ä¸‹ã€‚"></a>æ–°å»ºçš„è¿™ç¯‡åšå®¢ä»¥markdownçš„æ ¼å¼å½¢å¼å­˜å‚¨åœ¨äº†blog/source/_postsç›®å½•ä¸‹ã€‚</h2><h2 id="ç¼–è¾‘"><a href="#ç¼–è¾‘" class="headerlink" title="ç¼–è¾‘"></a>ç¼–è¾‘</h2><h2 id="æ·»åŠ æ­£æ–‡"><a href="#æ·»åŠ æ­£æ–‡" class="headerlink" title="æ·»åŠ æ­£æ–‡"></a>æ·»åŠ æ­£æ–‡</h2><h2 id="ç°åœ¨æˆ‘ä»¬æ‰“å¼€ã€xxxx-mdã€‘ï¼Œå†™ä¸‹æˆ‘ä»¬çš„xxxxxã€‚"><a href="#ç°åœ¨æˆ‘ä»¬æ‰“å¼€ã€xxxx-mdã€‘ï¼Œå†™ä¸‹æˆ‘ä»¬çš„xxxxxã€‚" class="headerlink" title="ç°åœ¨æˆ‘ä»¬æ‰“å¼€ã€xxxx.mdã€‘ï¼Œå†™ä¸‹æˆ‘ä»¬çš„xxxxxã€‚"></a>ç°åœ¨æˆ‘ä»¬æ‰“å¼€ã€xxxx.mdã€‘ï¼Œå†™ä¸‹æˆ‘ä»¬çš„xxxxxã€‚</h2><h2 id="ç„¶åä¿å­˜ã€‚åˆ·æ–°http-localhost-4000è¯¥é“¾æ¥ã€‚ä¾¿å¯ä»¥çœ‹åˆ°çœ‹åˆ°æˆ‘ä»¬åˆšåˆšæ›´æ–°çš„æœ€æ–°æ–‡ç« äº†"><a href="#ç„¶åä¿å­˜ã€‚åˆ·æ–°http-localhost-4000è¯¥é“¾æ¥ã€‚ä¾¿å¯ä»¥çœ‹åˆ°çœ‹åˆ°æˆ‘ä»¬åˆšåˆšæ›´æ–°çš„æœ€æ–°æ–‡ç« äº†" class="headerlink" title="ç„¶åä¿å­˜ã€‚åˆ·æ–°http://localhost:4000è¯¥é“¾æ¥ã€‚ä¾¿å¯ä»¥çœ‹åˆ°çœ‹åˆ°æˆ‘ä»¬åˆšåˆšæ›´æ–°çš„æœ€æ–°æ–‡ç« äº†"></a>ç„¶åä¿å­˜ã€‚åˆ·æ–°<a href="http://localhost:4000è¯¥é“¾æ¥ã€‚ä¾¿å¯ä»¥çœ‹åˆ°çœ‹åˆ°æˆ‘ä»¬åˆšåˆšæ›´æ–°çš„æœ€æ–°æ–‡ç« äº†">http://localhost:4000è¯¥é“¾æ¥ã€‚ä¾¿å¯ä»¥çœ‹åˆ°çœ‹åˆ°æˆ‘ä»¬åˆšåˆšæ›´æ–°çš„æœ€æ–°æ–‡ç« äº†</a></h2><h2 id="æ·»åŠ åˆ†ç±»å’Œæ ‡ç­¾"><a href="#æ·»åŠ åˆ†ç±»å’Œæ ‡ç­¾" class="headerlink" title="æ·»åŠ åˆ†ç±»å’Œæ ‡ç­¾"></a>æ·»åŠ åˆ†ç±»å’Œæ ‡ç­¾</h2><p>æ¥ç€æˆ‘ä»¬ä¸ºæ–‡ç« æ·»åŠ åˆ†ç±»å’Œæ ‡ç­¾ï¼šæ‰“å¼€ã€xxxx.mdã€‘ï¼Œä¿®æ”¹å¦‚ä¸‹<br>tags:xxxx<br>categories: xxxx</p>
<h2 id="ç„¶åï¼Œæ‰“å¼€ç»ˆç«¯åˆ†åˆ«æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚"><a href="#ç„¶åï¼Œæ‰“å¼€ç»ˆç«¯åˆ†åˆ«æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚" class="headerlink" title="ç„¶åï¼Œæ‰“å¼€ç»ˆç«¯åˆ†åˆ«æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚"></a>ç„¶åï¼Œæ‰“å¼€ç»ˆç«¯åˆ†åˆ«æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚</h2><p>hexo new page categories<br>hexo new page tags</p>
<h2 id="hexoä¼šåœ¨souceç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªcategorieså’Œtagsæ–‡ä»¶å¤¹ï¼Œé‡Œé¢éƒ½åŒ…å«ä¸€ä¸ªindex-mdæ–‡ä»¶ã€‚ç°åœ¨æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­åˆ†åˆ«è®¿é—®å¦‚ä¸‹åœ°å€ï¼Œä¾¿å¯ä»¥åˆ†åˆ«çœ‹åˆ°æˆ‘ä»¬æ·»åŠ çš„åˆ†ç±»å’Œæ ‡ç­¾äº†ã€‚ç‚¹å‡»ã€xxxxã€‘åˆ†ç±»å’Œã€xxxxã€‘æ ‡ç­¾ä¾¿å¯ä»¥çœ‹åˆ°å±äºå®ƒä»¬çš„æ–‡ç« ã€‚http-localhost-4000-categories-å›¾ç‰‡-http-localhost-4000-tags-å›¾ç‰‡"><a href="#hexoä¼šåœ¨souceç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªcategorieså’Œtagsæ–‡ä»¶å¤¹ï¼Œé‡Œé¢éƒ½åŒ…å«ä¸€ä¸ªindex-mdæ–‡ä»¶ã€‚ç°åœ¨æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­åˆ†åˆ«è®¿é—®å¦‚ä¸‹åœ°å€ï¼Œä¾¿å¯ä»¥åˆ†åˆ«çœ‹åˆ°æˆ‘ä»¬æ·»åŠ çš„åˆ†ç±»å’Œæ ‡ç­¾äº†ã€‚ç‚¹å‡»ã€xxxxã€‘åˆ†ç±»å’Œã€xxxxã€‘æ ‡ç­¾ä¾¿å¯ä»¥çœ‹åˆ°å±äºå®ƒä»¬çš„æ–‡ç« ã€‚http-localhost-4000-categories-å›¾ç‰‡-http-localhost-4000-tags-å›¾ç‰‡" class="headerlink" title="hexoä¼šåœ¨souceç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªcategorieså’Œtagsæ–‡ä»¶å¤¹ï¼Œé‡Œé¢éƒ½åŒ…å«ä¸€ä¸ªindex.mdæ–‡ä»¶ã€‚ç°åœ¨æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­åˆ†åˆ«è®¿é—®å¦‚ä¸‹åœ°å€ï¼Œä¾¿å¯ä»¥åˆ†åˆ«çœ‹åˆ°æˆ‘ä»¬æ·»åŠ çš„åˆ†ç±»å’Œæ ‡ç­¾äº†ã€‚ç‚¹å‡»ã€xxxxã€‘åˆ†ç±»å’Œã€xxxxã€‘æ ‡ç­¾ä¾¿å¯ä»¥çœ‹åˆ°å±äºå®ƒä»¬çš„æ–‡ç« ã€‚http://localhost:4000/categories/å›¾ç‰‡, http://localhost:4000/tags/å›¾ç‰‡"></a>hexoä¼šåœ¨souceç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªcategorieså’Œtagsæ–‡ä»¶å¤¹ï¼Œé‡Œé¢éƒ½åŒ…å«ä¸€ä¸ªindex.mdæ–‡ä»¶ã€‚ç°åœ¨æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­åˆ†åˆ«è®¿é—®å¦‚ä¸‹åœ°å€ï¼Œä¾¿å¯ä»¥åˆ†åˆ«çœ‹åˆ°æˆ‘ä»¬æ·»åŠ çš„åˆ†ç±»å’Œæ ‡ç­¾äº†ã€‚ç‚¹å‡»ã€xxxxã€‘åˆ†ç±»å’Œã€xxxxã€‘æ ‡ç­¾ä¾¿å¯ä»¥çœ‹åˆ°å±äºå®ƒä»¬çš„æ–‡ç« ã€‚<a href="http://localhost:4000/categories/%E5%9B%BE%E7%89%87">http://localhost:4000/categories/å›¾ç‰‡</a>, <a href="http://localhost:4000/tags/%E5%9B%BE%E7%89%87">http://localhost:4000/tags/å›¾ç‰‡</a></h2><h2 id="ä¸ºäº†èƒ½åœ¨ä¸»é¡µç›´æ¥è®¿é—®æ ‡ç­¾å’Œåˆ†ç±»ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹node-moduels-hexo-theme-keep-config-ymlé…ç½®æ–‡ä»¶åšå¦‚ä¸‹ä¿®æ”¹"><a href="#ä¸ºäº†èƒ½åœ¨ä¸»é¡µç›´æ¥è®¿é—®æ ‡ç­¾å’Œåˆ†ç±»ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹node-moduels-hexo-theme-keep-config-ymlé…ç½®æ–‡ä»¶åšå¦‚ä¸‹ä¿®æ”¹" class="headerlink" title="ä¸ºäº†èƒ½åœ¨ä¸»é¡µç›´æ¥è®¿é—®æ ‡ç­¾å’Œåˆ†ç±»ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹node_moduels/hexo-theme-keep/_config.ymlé…ç½®æ–‡ä»¶åšå¦‚ä¸‹ä¿®æ”¹:"></a>ä¸ºäº†èƒ½åœ¨ä¸»é¡µç›´æ¥è®¿é—®æ ‡ç­¾å’Œåˆ†ç±»ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹node_moduels/hexo-theme-keep/_config.ymlé…ç½®æ–‡ä»¶åšå¦‚ä¸‹ä¿®æ”¹:</h2><p>menu:<br>  ä¸»é¡µ: /<br>  å½’æ¡£: /archives<br>  åˆ†ç±»: /categories<br>  æ ‡ç­¾: /tags<br>å†æ¬¡åˆ·æ–°<a href="http://localhost:4000/">http://localhost:4000</a></p>
<h1 id="5-å‘å¸ƒè‰ç¨¿"><a href="#5-å‘å¸ƒè‰ç¨¿" class="headerlink" title="5.å‘å¸ƒè‰ç¨¿"></a>5.å‘å¸ƒè‰ç¨¿</h1><h2 id="å¦‚æœä½ æš‚æ—¶è¿˜ä¸æƒ³è¦æ–‡ç« è¢«å…¬å¼€è®¿é—®ï¼Œå¯ä»¥å…ˆåˆ›å»ºè‰ç¨¿ã€‚å¦‚ä¸‹"><a href="#å¦‚æœä½ æš‚æ—¶è¿˜ä¸æƒ³è¦æ–‡ç« è¢«å…¬å¼€è®¿é—®ï¼Œå¯ä»¥å…ˆåˆ›å»ºè‰ç¨¿ã€‚å¦‚ä¸‹" class="headerlink" title="å¦‚æœä½ æš‚æ—¶è¿˜ä¸æƒ³è¦æ–‡ç« è¢«å…¬å¼€è®¿é—®ï¼Œå¯ä»¥å…ˆåˆ›å»ºè‰ç¨¿ã€‚å¦‚ä¸‹"></a>å¦‚æœä½ æš‚æ—¶è¿˜ä¸æƒ³è¦æ–‡ç« è¢«å…¬å¼€è®¿é—®ï¼Œå¯ä»¥å…ˆåˆ›å»ºè‰ç¨¿ã€‚å¦‚ä¸‹</h2><p>hexo new draft xxxx<br>å›¾ç‰‡åˆ·æ–°<a href="http://localhost:4000æš‚æ—¶è¿˜æ— æ³•è®¿é—®æˆ‘ä»¬æ–°åˆ›å»ºçš„è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœæƒ³è¦è®¿é—®è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬åˆ™éœ€è¦å‘å¸ƒè¯¥æ–‡ç« ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤">http://localhost:4000æš‚æ—¶è¿˜æ— æ³•è®¿é—®æˆ‘ä»¬æ–°åˆ›å»ºçš„è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœæƒ³è¦è®¿é—®è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬åˆ™éœ€è¦å‘å¸ƒè¯¥æ–‡ç« ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</a></p>
<h2 id="å‘å¸ƒè‰ç¨¿"><a href="#å‘å¸ƒè‰ç¨¿" class="headerlink" title="// å‘å¸ƒè‰ç¨¿"></a>// å‘å¸ƒè‰ç¨¿</h2><p>hexo publish draft xxxx</p>
<h2 id="ç°åœ¨è¿™ç¯‡æ–‡ç« ä»-draftç›®å½•ç§»åŠ¨åˆ°äº†-postç›®å½•ã€‚å›¾ç‰‡æ¥ç€ï¼Œæˆ‘ä»¬å†åˆ·æ–°http-localhost-4000ï¼Œä¾¿å¯ä»¥çœ‹åˆ°è¿™ç¯‡æ–‡ç« äº†å›¾ç‰‡"><a href="#ç°åœ¨è¿™ç¯‡æ–‡ç« ä»-draftç›®å½•ç§»åŠ¨åˆ°äº†-postç›®å½•ã€‚å›¾ç‰‡æ¥ç€ï¼Œæˆ‘ä»¬å†åˆ·æ–°http-localhost-4000ï¼Œä¾¿å¯ä»¥çœ‹åˆ°è¿™ç¯‡æ–‡ç« äº†å›¾ç‰‡" class="headerlink" title="ç°åœ¨è¿™ç¯‡æ–‡ç« ä»_draftç›®å½•ç§»åŠ¨åˆ°äº†_postç›®å½•ã€‚å›¾ç‰‡æ¥ç€ï¼Œæˆ‘ä»¬å†åˆ·æ–°http://localhost:4000ï¼Œä¾¿å¯ä»¥çœ‹åˆ°è¿™ç¯‡æ–‡ç« äº†å›¾ç‰‡"></a>ç°åœ¨è¿™ç¯‡æ–‡ç« ä»_draftç›®å½•ç§»åŠ¨åˆ°äº†_postç›®å½•ã€‚å›¾ç‰‡æ¥ç€ï¼Œæˆ‘ä»¬å†åˆ·æ–°<a href="http://localhost:4000ï¼Œä¾¿å¯ä»¥çœ‹åˆ°è¿™ç¯‡æ–‡ç« äº†å›¾ç‰‡">http://localhost:4000ï¼Œä¾¿å¯ä»¥çœ‹åˆ°è¿™ç¯‡æ–‡ç« äº†å›¾ç‰‡</a></h2><h1 id="6-éƒ¨ç½²åšå®¢"><a href="#6-éƒ¨ç½²åšå®¢" class="headerlink" title="6.éƒ¨ç½²åšå®¢"></a>6.éƒ¨ç½²åšå®¢</h1><h2 id="ç°åœ¨æˆ‘ä»¬ä½¿ç”¨github-pageæ¥éƒ¨ç½²æˆ‘ä»¬çš„åšå®¢ã€‚é¦–å…ˆä½ éœ€è¦æœ‰ä¸€ä¸ªgithubè´¦å·ï¼Œå¦‚æœæ²¡æœ‰åˆ™éœ€è¦å…ˆå»æ³¨å†Œä¸€ä¸ªã€‚"><a href="#ç°åœ¨æˆ‘ä»¬ä½¿ç”¨github-pageæ¥éƒ¨ç½²æˆ‘ä»¬çš„åšå®¢ã€‚é¦–å…ˆä½ éœ€è¦æœ‰ä¸€ä¸ªgithubè´¦å·ï¼Œå¦‚æœæ²¡æœ‰åˆ™éœ€è¦å…ˆå»æ³¨å†Œä¸€ä¸ªã€‚" class="headerlink" title="ç°åœ¨æˆ‘ä»¬ä½¿ç”¨github pageæ¥éƒ¨ç½²æˆ‘ä»¬çš„åšå®¢ã€‚é¦–å…ˆä½ éœ€è¦æœ‰ä¸€ä¸ªgithubè´¦å·ï¼Œå¦‚æœæ²¡æœ‰åˆ™éœ€è¦å…ˆå»æ³¨å†Œä¸€ä¸ªã€‚"></a>ç°åœ¨æˆ‘ä»¬ä½¿ç”¨github pageæ¥éƒ¨ç½²æˆ‘ä»¬çš„åšå®¢ã€‚é¦–å…ˆä½ éœ€è¦æœ‰ä¸€ä¸ªgithubè´¦å·ï¼Œå¦‚æœæ²¡æœ‰åˆ™éœ€è¦å…ˆå»æ³¨å†Œä¸€ä¸ªã€‚</h2><h2 id="æ–°å»ºä»“åº“"><a href="#æ–°å»ºä»“åº“" class="headerlink" title="æ–°å»ºä»“åº“"></a>æ–°å»ºä»“åº“</h2><p>1.æˆ‘ä»¬æ‰“å¼€ githubï¼Œç„¶åç‚¹å‡»New repositoryæŒ‰é’®<br>2.åˆ›å»ºä¸€ä¸ªåä¸ºã€Œusername .github.ioã€çš„å­˜å‚¨åº“ï¼Œå…¶ä¸­usernameæ˜¯ä½ åœ¨GitHubä¸Šçš„ç”¨æˆ·åå›¾ç‰‡3.æˆåŠŸåˆ›å»ºé•¿ä»“åº“åï¼Œå¤åˆ¶ä»“åº“çš„httpsåœ°å€</p>
<h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><p>// ç¡®è®¤ç›®å½•æ˜¯å¦åˆ‡æ¢åˆ°äº†blogä¸­ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å°†ç›®å½•åˆ‡æ¢åˆ°blogä¸­<br>cd blog<br>// å®‰è£…éƒ¨ç½²æ’ä»¶<br>npm install hexo-deployer-git â€“save<br>// ä¿®æ”¹_config.ymlé…ç½®æ–‡ä»¶<br>// å°†å¤åˆ¶çš„åœ°å€ï¼Œé»è´´åˆ°å¦‚ä¸‹repoå­—æ®µä¸­<br>deploy:<br> type: git<br>  repo: <a href="https://github.com/xxxx/xxxx.github.io.git">https://github.com/xxxx/xxxx.github.io.git</a><br> branch: master<br>// éƒ¨ç½²ç½‘ç«™åˆ°åˆ›å»ºçš„ä»“åº“<br>hexo deploy<br>éƒ¨ç½²å®Œæˆåï¼Œæˆ‘ä»¬åˆ·æ–°one-cheese.github.ioä»“åº“ï¼Œæœ¬åœ°ç”Ÿæˆçš„publicä¸­çš„é™æ€èµ„æºå…¨éƒ½ä¸Šä¼ åˆ°äº†è¯¥ä»“åº“ä¸­ï¼Œå¦‚å›¾ã€‚å›¾ç‰‡ç°åœ¨ï¼Œè®¿é—®github pageåœ°å€one-cheese.github.ioï¼Œä¾¿å¯ä»¥çœ‹åˆ°éƒ¨ç½²æˆåŠŸçš„åšå®¢äº†ã€‚</p>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>æ­å»ºåšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title>webpack</title>
    <url>/2022/08/30/webpack/</url>
    <content><![CDATA[<h1 id="webpack-æ‰“åŒ…åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#webpack-æ‰“åŒ…åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="webpack æ‰“åŒ…åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>webpack æ‰“åŒ…åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h1><h2 id="æ‰“åŒ…åŸç†"><a href="#æ‰“åŒ…åŸç†" class="headerlink" title="æ‰“åŒ…åŸç†"></a>æ‰“åŒ…åŸç†</h2><p>webpackæ‰“åŒ…åŸç†æ˜¯æ ¹æ®æ–‡ä»¶é—´çš„ä¾èµ–å…³ç³»å¯¹å…¶è¿›è¡Œé™æ€åˆ†æï¼Œå°†è¿™äº›æ¨¡å—æŒ‰æŒ‡å®šè§„åˆ™ç”Ÿæˆé™æ€èµ„æºï¼Œå½“webpackå¤„ç†ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚</p>
<h2 id="webpackæ„å»ºæµç¨‹ï¼š"><a href="#webpackæ„å»ºæµç¨‹ï¼š" class="headerlink" title="webpackæ„å»ºæµç¨‹ï¼š"></a>webpackæ„å»ºæµç¨‹ï¼š</h2><p>åˆå§‹åŒ–å‚æ•°â€”&gt;å¼€å§‹ç¼–è¯‘â€”-&gt;ç¡®å®šå…¥å£â€”-&gt;ç¼–è¯‘æ¨¡å—â€”&gt;å®Œæˆç¼–è¯‘â€”-&gt;è¾“å‡ºæ•°æ®â€”-&gt;è¾“å‡ºå®Œæˆ</p>
<h2 id="ä¼˜åŠ¿ï¼š"><a href="#ä¼˜åŠ¿ï¼š" class="headerlink" title="ä¼˜åŠ¿ï¼š"></a>ä¼˜åŠ¿ï¼š</h2><p>ä»£ç å±‚é¢ï¼š</p>
<ol>
<li>ä½“ç§¯æ›´å°ï¼ŒåŠ è½½æ›´å¿«</li>
<li>ç¼–è¯‘é«˜çº§è¯­è¨€å’Œè¯­æ³•</li>
<li>å…¼å®¹æ€§å’Œé”™è¯¯æ£€æŸ¥<h2 id="ç ”å‘æµç¨‹å±‚é¢ï¼š"><a href="#ç ”å‘æµç¨‹å±‚é¢ï¼š" class="headerlink" title="ç ”å‘æµç¨‹å±‚é¢ï¼š"></a>ç ”å‘æµç¨‹å±‚é¢ï¼š</h2></li>
<li>ç»Ÿä¸€é«˜æ•ˆçš„å¼€å‘ç¯å¢ƒ</li>
<li>ç»Ÿä¸€çš„æ„å»ºæµç¨‹å’Œäº§å‡ºæ ‡å‡†</li>
<li>é›†æˆå…¬å¸æ„å»ºè§„èŒƒï¼ˆææµ‹ã€ä¸Šçº¿ï¼‰<h2 id="æ ¸å¿ƒæ¦‚å¿µï¼š"><a href="#æ ¸å¿ƒæ¦‚å¿µï¼š" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µï¼š"></a>æ ¸å¿ƒæ¦‚å¿µï¼š</h2>entryï¼šå…¥å£ï¼Œwebpackçš„æ‰§è¡Œä»entryå¼€å§‹ï¼Œ<br>outputï¼šå‡ºå£ï¼Œè¾“å‡ºç»“æœï¼Œwebpackçš„è¾“å‡ºä½ç½®ï¼Œ<br>loaderï¼šæ¨¡å—è½¬æ¢å™¨ï¼Œç”¨äºæŠŠwebpackä¸èƒ½ç›´æ¥æ‰“åŒ…çš„æ–‡ä»¶ç±»å‹è½¬æ¢<br>pluginsï¼šæ’ä»¶ï¼Œç”¨äºæŠŠæ¨¡å—åŸå†…å®¹æŒ‰éœ€æ±‚è½¬æ¢æˆæ–°å†…å®¹,modeï¼šé€šè¿‡é€‰æ‹©developmentæˆ–è€…productionæ¥è®¾ç½®modeå‚æ•°<br>chunkï¼šä»£ç å—ï¼Œå³æ‰“åŒ…åè¾“å‡ºçš„æ–‡ä»¶<h2 id="åŸºæœ¬åŠŸèƒ½å’Œå·¥ä½œåŸç†"><a href="#åŸºæœ¬åŠŸèƒ½å’Œå·¥ä½œåŸç†" class="headerlink" title="åŸºæœ¬åŠŸèƒ½å’Œå·¥ä½œåŸç†"></a>åŸºæœ¬åŠŸèƒ½å’Œå·¥ä½œåŸç†</h2>å½“æºä»£ç æ²¡åŠæ³•ç›´æ¥è¿è¡Œçš„æ—¶å€™ï¼Œé€šè¿‡è½¬åŒ–å°†æºä»£ç æ¢æˆå¯æ‰§è¡Œçš„ä»£ç ï¼Œä¸€èˆ¬åŒ…æ‹¬</li>
<li>ä»£ç è½¬æ¢ï¼šå°†æ— æ³•ç›´æ¥è¿è¡Œçš„æ–‡ä»¶ä»£ç ç¼–è¯‘æˆå¯ä»¥æ‰§è¡Œçš„ä»£ç </li>
<li>æ–‡ä»¶ä¼˜åŒ–ï¼šå‹ç¼©æ–‡ä»¶ä»£ç ã€å‹ç¼©åˆå¹¶å›¾ç‰‡ç­‰</li>
<li>ä»£ç åˆ†å‰²ï¼šæå–å¤šä¸ªé¡µé¢çš„å…¬å…±ä»£ç ã€æå–é¦–å±ä¸éœ€è¦æ‰§è¡Œçš„éƒ¨åˆ†çš„ä»£ç è®©å…¶å¼‚æ­¥åŠ è½½</li>
<li>æ¨¡å—åˆå¹¶ï¼šåœ¨æœ‰å¾ˆå¤šæ¨¡å—æ–‡ä»¶çš„ç¯å¢ƒä¸­ï¼Œéœ€è¦å°†æ¨¡å—åˆ†ç±»åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶</li>
<li>è‡ªåŠ¨åˆ·æ–°ï¼šç›‘å¬æœ¬åœ°æºä»£ç å˜åŒ–ï¼Œè‡ªåŠ¨é‡æ–°æ„å»ºã€åˆ·æ–°æµè§ˆå™¨</li>
<li>ä»£ç æ ¡éªŒï¼šåœ¨ä»£ç è¢«æäº¤å‰éœ€è¦æ ¡éªŒä»£ç æ ¼å¼ç­‰æ˜¯å¦ç¬¦åˆè§„èŒƒ</li>
<li>è‡ªåŠ¨å‘å¸ƒï¼šæ›´æ–°å®Œä»£ç åï¼Œè‡ªåŠ¨æ„å»ºå‡ºçº¿ä¸Šå‘å¸ƒä»£ç å¹¶ä¼ è¾“ç»™å‘å¸ƒç³»ç»Ÿ<h1 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h1><h3 id="1ã€loaderå’Œpluginçš„åŒºåˆ«ï¼š"><a href="#1ã€loaderå’Œpluginçš„åŒºåˆ«ï¼š" class="headerlink" title="1ã€loaderå’Œpluginçš„åŒºåˆ«ï¼š"></a>1ã€loaderå’Œpluginçš„åŒºåˆ«ï¼š</h3><h3 id="ä¸åŒçš„ä½œç”¨ï¼š"><a href="#ä¸åŒçš„ä½œç”¨ï¼š" class="headerlink" title="ä¸åŒçš„ä½œç”¨ï¼š"></a>ä¸åŒçš„ä½œç”¨ï¼š</h3>loaderï¼šwebpackå°†ä¸€åˆ‡æ–‡ä»¶è§†ä¸ºæ¨¡å—ï¼Œä½†æ˜¯webpackåŸç”Ÿåªèƒ½è§£æJSæ–‡ä»¶ï¼Œå¦‚æœæƒ³æ‰“åŒ…å…¶ä»–æ–‡ä»¶çš„è¯ï¼Œå°±ä¼šç”¨åˆ°ç›¸åº”çš„loaderï¼Œå®ƒæ˜¯ç”¨æ¥è®©webpackæ‹¥æœ‰åŠ è½½è§£æéJSæ–‡ä»¶çš„å·¥å…·<br>pluginsï¼šæ’ä»¶ï¼Œå¯ä»¥æ‰©å±•fwebpackçš„åŠŸèƒ½ï¼Œè®©å…¶æ›´å…·æœ‰çµæ´»æ€§<h3 id="ä¸åŒçš„ç”¨æ³•ï¼š"><a href="#ä¸åŒçš„ç”¨æ³•ï¼š" class="headerlink" title="ä¸åŒçš„ç”¨æ³•ï¼š"></a>ä¸åŒçš„ç”¨æ³•ï¼š</h3>loaderï¼šåœ¨module.rulesä¸­é…ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä½œä¸ºæ¨¡å—çš„è§„åˆ™å­˜åœ¨ï¼Œç±»å‹æ˜¯æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹æ˜¯å¯¹è±¡ï¼Œ<br>pluginsæ˜¯åœ¨æ’ä»¶ä¸­å•ç‹¬é…ç½®ï¼Œç±»å‹æ˜¯æ•°ç»„ï¼Œæ¯ä¸€é¡¹æ˜¯æ’ä»¶å®ä¾‹ï¼Œå‚æ•°éƒ½é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥<h3 id="2ã€ä»€ä¹ˆäº‹æ¨¡å—åŒ–ï¼Œä¸ºä»€ä¹ˆè¦ç”¨æ¨¡å—åŒ–"><a href="#2ã€ä»€ä¹ˆäº‹æ¨¡å—åŒ–ï¼Œä¸ºä»€ä¹ˆè¦ç”¨æ¨¡å—åŒ–" class="headerlink" title="2ã€ä»€ä¹ˆäº‹æ¨¡å—åŒ–ï¼Œä¸ºä»€ä¹ˆè¦ç”¨æ¨¡å—åŒ–"></a>2ã€ä»€ä¹ˆäº‹æ¨¡å—åŒ–ï¼Œä¸ºä»€ä¹ˆè¦ç”¨æ¨¡å—åŒ–</h3>æ¨¡å—åŒ–æ˜¯æŒ‡æŠŠä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿåˆ†è§£åˆ°å¤šä¸ªæ¨¡å—ä»¥æ–¹ä¾¿ç¼–ç <br>ä¸ç”¨æ¨¡å—åŒ–çš„è¯ï¼Œä¼šå‡ºç°å–å¤šé—®é¢˜ï¼Œæ¯”å¦‚æ— æ³•åˆç†åœ°ç®¡ç†é¡¹ç›®ä¾èµ–è·Ÿç‰ˆæœ¬ï¼Œä¹Ÿæ— æ³•æ–¹ä¾¿çš„æ§åˆ¶ä¾èµ–çš„åŠ è½½é¡ºåºï¼Œå½“é¡¹ç›®å˜å¤§æ—¶éš¾ä»¥ç»´æŠ¤ï¼Œè¿™æ—¶å€™éœ€è¦æ¨¡å—åŒ–æ¥ç»„ç»‡ä»£ç <h3 id="3ã€DevServerå¼€å‘å·¥å…·ç”¨æ¥è‡ªåŠ¨åŒ–ï¼ˆè‡ªåŠ¨ç¼–è¯‘ï¼Œè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ï¼‰Webpack-åœ¨å¯åŠ¨æ—¶å¯ä»¥å¼€å¯ç›‘å¬æ¨¡å¼ï¼Œå¼€å¯ç›‘å¬æ¨¡å¼å-Webpack-ä¼šç›‘å¬æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„å˜åŒ–ï¼Œå‘ç”Ÿå˜åŒ–æ—¶é‡æ–°æ„å»ºå‡ºæ–°çš„ç»“æœã€‚"><a href="#3ã€DevServerå¼€å‘å·¥å…·ç”¨æ¥è‡ªåŠ¨åŒ–ï¼ˆè‡ªåŠ¨ç¼–è¯‘ï¼Œè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ï¼‰Webpack-åœ¨å¯åŠ¨æ—¶å¯ä»¥å¼€å¯ç›‘å¬æ¨¡å¼ï¼Œå¼€å¯ç›‘å¬æ¨¡å¼å-Webpack-ä¼šç›‘å¬æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„å˜åŒ–ï¼Œå‘ç”Ÿå˜åŒ–æ—¶é‡æ–°æ„å»ºå‡ºæ–°çš„ç»“æœã€‚" class="headerlink" title="3ã€DevServerå¼€å‘å·¥å…·ç”¨æ¥è‡ªåŠ¨åŒ–ï¼ˆè‡ªåŠ¨ç¼–è¯‘ï¼Œè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ï¼‰Webpack åœ¨å¯åŠ¨æ—¶å¯ä»¥å¼€å¯ç›‘å¬æ¨¡å¼ï¼Œå¼€å¯ç›‘å¬æ¨¡å¼å Webpack ä¼šç›‘å¬æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„å˜åŒ–ï¼Œå‘ç”Ÿå˜åŒ–æ—¶é‡æ–°æ„å»ºå‡ºæ–°çš„ç»“æœã€‚"></a>3ã€DevServerå¼€å‘å·¥å…·ç”¨æ¥è‡ªåŠ¨åŒ–ï¼ˆè‡ªåŠ¨ç¼–è¯‘ï¼Œè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ï¼‰Webpack åœ¨å¯åŠ¨æ—¶å¯ä»¥å¼€å¯ç›‘å¬æ¨¡å¼ï¼Œå¼€å¯ç›‘å¬æ¨¡å¼å Webpack ä¼šç›‘å¬æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„å˜åŒ–ï¼Œå‘ç”Ÿå˜åŒ–æ—¶é‡æ–°æ„å»ºå‡ºæ–°çš„ç»“æœã€‚</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    contentBase: resolve(__dirname, &#x27;build&#x27;),</span><br><span class="line">    compress: true,</span><br><span class="line">    port: 3000,</span><br><span class="line">    open: true,</span><br><span class="line">    // å¼€å¯HMRåŠŸèƒ½</span><br><span class="line">    // å½“ä¿®æ”¹äº†webpacké…ç½®ï¼Œæ–°é…ç½®è¦æƒ³ç”Ÿæ•ˆï¼Œå¿…é¡»é‡æ–°webpackæœåŠ¡</span><br><span class="line">    hot: true</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="4ã€ä»€ä¹ˆæ˜¯HMRåŠŸèƒ½"><a href="#4ã€ä»€ä¹ˆæ˜¯HMRåŠŸèƒ½" class="headerlink" title="4ã€ä»€ä¹ˆæ˜¯HMRåŠŸèƒ½"></a>4ã€ä»€ä¹ˆæ˜¯HMRåŠŸèƒ½</h3>HMRåˆå«çƒ­æ›¿æ¢ï¼Œå®ƒèƒ½åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„å‰æä¸‹ï¼Œé€šè¿‡å°†æ›´æ”¹çš„æ¨¡å—æ›¿æ¢æ‰è¢«æ›´æ”¹çš„æ¨¡å—ï¼Œå†é‡æ–°æ‰§è¡Œå®ç°å®æ—¶é¢„è§ˆ<br>ä¼˜ç‚¹ï¼šåªæ›´æ–°å˜æ›´å†…å®¹ï¼Œä»¥èŠ‚çœå®è´µçš„å¼€å‘æ—¶é—´ã€‚è°ƒæ•´æ ·å¼æ›´åŠ å¿«é€Ÿï¼Œå‡ ä¹ç›¸å½“äºåœ¨æµè§ˆå™¨ä¸­æ›´æ”¹æ ·å¼<h3 id="5ã€ä»€ä¹ˆæ˜¯Tree-sharking"><a href="#5ã€ä»€ä¹ˆæ˜¯Tree-sharking" class="headerlink" title="5ã€ä»€ä¹ˆæ˜¯Tree-sharking?"></a>5ã€ä»€ä¹ˆæ˜¯Tree-sharking?</h3>æŒ‡æ‰“åŒ…ä¸­å»é™¤é‚£äº›å¼•å…¥äº†ä½†åœ¨ä»£ç ä¸­æ²¡ç”¨åˆ°çš„æ­»ä»£ç ï¼ˆä¼ ç»Ÿçš„DCEæ–¹æ³•æ˜¯é™¤å»ä¸å¯èƒ½æ‰§è¡Œçš„ä»£ç ï¼‰åŒ…æ‹¬ç©ºæ ¼ã€æ³¨é‡Šç­‰<h3 id="6ã€babelå’Œwebpackçš„åŒºåˆ«"><a href="#6ã€babelå’Œwebpackçš„åŒºåˆ«" class="headerlink" title="6ã€babelå’Œwebpackçš„åŒºåˆ«"></a>6ã€babelå’Œwebpackçš„åŒºåˆ«</h3>babel JSæ–°è¯­æ³•ç¼–è¯‘å·¥å…·ï¼Œåªå…³å¿ƒè¯­æ³•ï¼Œä¸å…³å¿ƒæ¨¡å—åŒ–<br>webpack -æ‰“åŒ…æ„å»ºå·¥å…·ï¼Œæ˜¯å¤šä¸ªLoader pluginçš„é›†åˆ<h3 id="7ã€ç±»ä¼¼webpackçš„å·¥å…·è¿˜æœ‰å“ªäº›"><a href="#7ã€ç±»ä¼¼webpackçš„å·¥å…·è¿˜æœ‰å“ªäº›" class="headerlink" title="7ã€ç±»ä¼¼webpackçš„å·¥å…·è¿˜æœ‰å“ªäº›"></a>7ã€ç±»ä¼¼webpackçš„å·¥å…·è¿˜æœ‰å“ªäº›</h3>(1)ã€webpacké€‚ç”¨äºå¤§å‹å¤æ‚çš„å‰ç«¯ç«™ç‚¹æ„å»º<br>(2)ã€rollupé€‚ç”¨äºåŸºç¡€åº“çš„æ‰“åŒ…ï¼Œå¦‚vueã€react<br>(3)ã€parcelé€‚ç”¨äºç®€å•çš„å®éªŒæ€§é¡¹ç›®ï¼Œä»–å¯ä»¥æ»¡è¶³ä½é—¨æ§›çš„å¿«é€Ÿçœ‹åˆ°æ•ˆæœç”±äºparcelåœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ç»™å‡ºçš„è°ƒè¯•ä¿¡æ¯ååˆ†æœ‰é™ï¼Œæ‰€ä»¥ä¸€æ—¦æ‰“åŒ…å‡ºé”™éš¾ä»¥è°ƒè¯•ï¼Œæ‰€ä»¥ä¸å»ºè®®å¤æ‚çš„é¡¹ç›®ä½¿ç”¨parcel<h3 id="8ã€å¸¸è§loader"><a href="#8ã€å¸¸è§loader" class="headerlink" title="8ã€å¸¸è§loader"></a>8ã€å¸¸è§loader</h3>file-loaderï¼šæŠŠæ–‡ä»¶è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡ç›¸å¯¹ URL å»å¼•ç”¨è¾“å‡ºçš„æ–‡ä»¶url-loaderï¼šå’Œ file-loader ç±»ä¼¼ï¼Œä½†æ˜¯èƒ½åœ¨æ–‡ä»¶å¾ˆå°çš„æƒ…å†µä¸‹ä»¥ base64 çš„æ–¹å¼æŠŠæ–‡ä»¶å†…å®¹æ³¨å…¥åˆ°ä»£ç ä¸­å»<br>babel-loaderï¼šæŠŠ ES6 è½¬æ¢æˆ ES5css-loaderï¼šåŠ è½½ CSSï¼Œæ”¯æŒæ¨¡å—åŒ–ã€å‹ç¼©ã€æ–‡ä»¶å¯¼å…¥ç­‰ç‰¹æ€§style-loaderï¼šæŠŠ CSS ä»£ç æ³¨å…¥åˆ° JavaScript ä¸­ï¼Œé€šè¿‡ DOM æ“ä½œå»åŠ è½½ CSSã€‚<h3 id="9ã€å¸¸è§çš„plugins"><a href="#9ã€å¸¸è§çš„plugins" class="headerlink" title="9ã€å¸¸è§çš„plugins"></a>9ã€å¸¸è§çš„plugins</h3>define-pluginï¼šå®šä¹‰ç¯å¢ƒå˜é‡<br>commons-chunk-pluginï¼šæå–å…¬å…±ä»£ç <br>uglifyjs-webpack-pluginï¼šé€šè¿‡UglifyESå‹ç¼©ES6ä»£ç </li>
</ol>
]]></content>
      <categories>
        <category>çŸ¥è¯†ç‚¹</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>å¼€å‘hexoä¸»é¢˜è®°å½•</title>
    <url>/2023/04/13/%E5%BC%80%E5%8F%91hexo%E4%B8%BB%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<h1 id="å…³äºHexoåŠå…¶å·¥ä½œåŸç†"><a href="#å…³äºHexoåŠå…¶å·¥ä½œåŸç†" class="headerlink" title="å…³äºHexoåŠå…¶å·¥ä½œåŸç†"></a>å…³äºHexoåŠå…¶å·¥ä½œåŸç†</h1><h2 id="ä»€ä¹ˆæ˜¯Hexo"><a href="#ä»€ä¹ˆæ˜¯Hexo" class="headerlink" title="ä»€ä¹ˆæ˜¯Hexo"></a>ä»€ä¹ˆæ˜¯Hexo</h2><p>Hexo.js å®˜ç½‘çš„æ¦‚è¿°æ˜¯ï¼šå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚å‡†ç¡®è€Œå…·ä½“åœ°æ¦‚è¿°åº”è¯¥æ˜¯ Hexo.js æ˜¯ä¸€ä¸ªåŸºäº Node.js ï¼Œå¯ä»¥å°† markdown æ–‡ä»¶è½¬æ¢ä¸ºhtmlé™æ€ç•Œé¢çš„åšå®¢æ¡†æ¶ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œhexo.js å¯ä»¥ä½¿ç”¨ hexo serve çš„å‘½ä»¤è¿è¡Œæä¾›ç½‘ç«™åŠŸèƒ½ï¼Œä½†å…¶æœ€ä¸»è¦çš„ä½œç”¨åº”å½“æ˜¯ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œç„¶åäº¤ç»™ nginx / tomcat ç­‰æœåŠ¡å™¨è½¯ä»¶è¿›è¡Œç»´æŠ¤ï¼Œå¯¹å¤–æä¾›ç½‘é¡µæœåŠ¡ã€‚</p>
<h2 id="Hexo-å·¥ä½œåŸç†"><a href="#Hexo-å·¥ä½œåŸç†" class="headerlink" title="Hexo å·¥ä½œåŸç†"></a>Hexo å·¥ä½œåŸç†</h2><p>åº”è¯¥æŠŠ Hexo.js çœ‹ä½œä¸€ä¸ªå·¥å…·ï¼Œä¸€ä¸ªæ ¹æ®é…ç½®æ–‡ä»¶ä¸markdownæ–‡ä»¶ä»¥åŠhtml/css/jsä»£ç è½¬æ¢ä¸ºå‰ç«¯ç•Œé¢çš„å·¥å…·ã€‚<br>é»˜è®¤æƒ…å†µä¸‹ Hexo.js è¿è¡Œåï¼Œå°†ä¼šé»˜è®¤ç”Ÿæˆå¤šä¸ªé¡µé¢ï¼Œå¹¶å…·æœ‰ç›¸åº”çš„è·¯å¾„ã€‚<br>å› æ­¤ï¼ŒHexo ä¸»é¢˜çš„ä½œç”¨å°±æ˜¯å°†æ¯ä¸ªé¡µé¢è¿›è¡Œç‰¹å®šæ ·å¼çš„æ¸²æŸ“ã€‚</p>
<h2 id="Hexo-å¿«é€Ÿå¼€å§‹"><a href="#Hexo-å¿«é€Ÿå¼€å§‹" class="headerlink" title="Hexo å¿«é€Ÿå¼€å§‹"></a>Hexo å¿«é€Ÿå¼€å§‹</h2><p>æŒ‰ç…§æ•™ç¨‹è¿›è¡Œåˆå§‹åŒ–é¡¹ç›®ï¼š<br>hexo init â€˜xxxxâ€™<br>cd â€˜xxxxâ€™<br>npm install<br>hexo serve<br>è®¿é—® 4000 ç«¯å£</p>
<h2 id="æ€»ä½“åˆ†æé»˜è®¤çš„-landscape-ä¸»é¢˜"><a href="#æ€»ä½“åˆ†æé»˜è®¤çš„-landscape-ä¸»é¢˜" class="headerlink" title="æ€»ä½“åˆ†æé»˜è®¤çš„ landscape ä¸»é¢˜"></a>æ€»ä½“åˆ†æé»˜è®¤çš„ landscape ä¸»é¢˜</h2><p>languages å›½é™…åŒ–<br>å³å¯¹äºåŒä¸€ä¸ªå˜é‡å¯¹åº”çš„è¯­è¨€è¡¨è¾¾æ–¹æ³•ï¼Œæ¯”å¦‚ è‹±æ–‡ home ç®€ä½“ä¸­æ–‡ ä¸»é¡µã€‚</p>
<p>layout ä¸»é¢˜å¸ƒå±€æ–‡ä»¶<br>åœ¨å¯åŠ¨hexoçš„æ—¶å€™ï¼Œåšå®¢æ¸²æŸ“çš„å…¥å£ä¸ºå…¶ä¸­çš„ layout.ejs æ–‡ä»¶ï¼Œå…¶ä»–çš„å†…å®¹å°†å¯¹åº”å…¶ä»– ejs æ–‡ä»¶ï¼Œæ¯”å¦‚åˆ†ç±»å¯¹åº”çš„æ˜¯ category.ejs ï¼Œæ ‡ç­¾å¯¹åº”çš„æ˜¯ tag.ejsã€‚</p>
<p>è¿™é‡Œè¯¦ç»†å±•å¼€layoutä¸­æ‰€æœ‰çš„æ–‡ä»¶ï¼š</p>
<p>_partial: å°†æ•´ä¸ªç½‘é¡µæ‹†æˆè‹¥å¹²ä¸ªå±€éƒ¨æ¨¡å—ï¼Œè¿™äº›å­æ¨¡å—å­˜å‚¨äºè¿™ä¸ªæ–‡ä»¶å¤¹ã€‚<br>_partial/postï¼šæŸ¥çœ‹åšå®¢æ—¶çš„æ‰€æœ‰ç»„ä»¶ï¼›<br>_partial/post/category.ejs: æŸ¥çœ‹åšå®¢è¯¦æƒ…æ—¶æ˜¾ç¤ºåšå®¢çš„ç±»åˆ«ï¼›<br>_partial/post/date.ejs: æŸ¥çœ‹åšå®¢è¯¦æƒ…æ—¶æ˜¾ç¤ºåšå®¢çš„æ—¥æœŸï¼›<br>_partial/post/gallery.ejs: æŸ¥çœ‹åšå®¢è¯¦æƒ…æ—¶æ˜¾ç¤ºåšå®¢çš„å›¾ç‰‡ï¼›<br>_partial/post/nav.ejs: æŸ¥çœ‹åšå®¢è¯¦æƒ…æ—¶æ˜¾ç¤ºåšå®¢çš„ä¸Šä¸€ç¯‡ä¸‹ä¸€ç¯‡çš„å¯¼èˆªï¼›<br>_partial/post/tag.ejs: æŸ¥çœ‹åšå®¢è¯¦æƒ…æ—¶æ˜¾ç¤ºåšå®¢çš„æ ‡ç­¾ï¼›<br>_partial/post/title.ejs: æŸ¥çœ‹åšå®¢è¯¦æƒ…æ—¶æ˜¾ç¤ºåšå®¢çš„æ ‡é¢˜ï¼›<br>_partial/after-footer.ejsï¼šæ‰€æœ‰é¡µé¢htmlçš„æœ€åé¢åº”ç”¨ js éƒ¨åˆ†ï¼›<br>_partial/archive-post.ejsï¼šå¯¹æ‰€æœ‰åšå®¢çš„å½’æ¡£ï¼›<br>_partital/archive.ejsï¼šåŒ…æ‹¬åˆ†ç±»ï¼Œæ ‡ç­¾ä»¥åŠåšå®¢çš„å½’æ¡£ï¼›<br>_partial/article.ejsï¼šå±•ç¤ºæ¯ç¯‡åšå®¢çš„å†…å®¹ï¼›<br>_partial/footer.ejsï¼šæ¯é¡µå†…å®¹çš„æœ€ä¸‹é¢å±•ç¤ºçš„å†…å®¹ï¼Œæ¯”å¦‚copyrightç­‰ï¼›<br>_partial/gauges_analyticsï¼šå¯¹æ¯ç¯‡åšå®¢çš„å­—æ•°ç»Ÿè®¡åˆ†æï¼›<br>_partial/google_analyticsï¼šå¯¹æ¯ç¯‡åšå®¢çš„è°·æ­Œç»Ÿè®¡åˆ†æï¼›<br>_partial/head.ejsï¼šhtmlçš„å¤´éƒ¨å†…å®¹ï¼›<br>_partial/mobile-nav.ejsï¼šç§»åŠ¨ç«¯æ—¶çš„å¯¼èˆªï¼›<br>_partial/sidebar.ejsï¼šä¾§è¾¹æ ï¼›<br>_widgetï¼šå°å·¥å…·ç±»ï¼Œä¹Ÿå°±æ˜¯ä¾§è¾¹å¯¼èˆªæ çš„ç»„ä»¶ï¼›<br>_widget/archive.ejsï¼šä¾§è¾¹æ çš„å½’æ¡£ï¼›<br>_widget/category.ejsï¼šä¾§è¾¹æ çš„åˆ†ç±»ï¼›<br>_widget/recent_posts.ejsï¼šä¾§è¾¹æ çš„æœ€è¿‘åšå®¢ï¼›<br>_widget/tag.ejsï¼šä¾§è¾¹æ çš„æ ‡ç­¾ï¼›<br>_widget/tagcloud.ejsï¼šä¾§è¾¹æ çš„æ ‡ç­¾äº‘ï¼ˆä½¿ç”¨è‡ªå¸¦çš„å‡½æ•°ï¼‰ï¼›<br>archive.ejs ï¼šåšå®¢çš„å½’æ¡£ï¼Œæ˜¯ç›´æ¥ç»‘å®š archives/ çš„å…¥å£ï¼Œæ ¹æ®å½’æ¡£çš„ä¸åŒä¼šåœ¨è¿™é‡Œè¿›è¡Œåˆ†å²”ã€‚æ¯”å¦‚åšå®¢çš„å½’æ¡£ï¼Œåˆ†ç±»çš„å½’æ¡£ï¼Œæ ‡ç­¾çš„å½’æ¡£ã€‚<br>category.ejsï¼šåšå®¢çš„åˆ†ç±»ï¼Œæ˜¯ç›´æ¥ç»‘å®š categories/æŸç±»åç§° çš„å…¥å£ï¼Œæ ¹æ®æŸç±»å çš„ä¸åŒè¿›è¡Œæ¸²æŸ“ã€‚<br>index.ejsï¼šç›´æ¥ç»‘å®šåšå®¢çš„ä¸»é¡µï¼Œåœ¨è®¿é—®æ ¹ç›®å½•æ—¶ï¼Œå¯¹åº”çš„ &lt;%- body %&gt; è¾“å‡ºçš„å†…å®¹ã€‚<br>layout.ejsï¼šæ•´ä¸ªä¸»é¢˜çš„å…¥å£ï¼ŒåŒ…æ‹¬ html çš„ <head> æ ‡ç­¾ç­‰æ‰€æœ‰å†…å®¹ã€‚ä¸€èˆ¬è€Œè¨€ä¸åŒé¡µé¢æ¸²æŸ“ç»“æœä¸åŒæ˜¯å› ä¸º &lt;%- body %&gt; è¾“å‡ºçš„å†…å®¹ä¸åŒã€‚&lt;%-body %&gt; æ˜¯è‡ªå¸¦çš„å†…å®¹ï¼Œä¼šæ ¹æ®è®¿é—®çš„æ˜¯ä¸»é¡µè¿˜æ˜¯åˆ†ç±»æˆ–è€…æ ‡ç­¾æˆ–è€…å½’æ¡£è¿›è¡Œæ¸²æŸ“ã€‚<br>page.ejsï¼šç‰¹æ®Šé¡µçš„æ¸²æŸ“ï¼Œé™¤äº†åˆ†ç±»ã€æ ‡ç­¾ã€ä¸»é¡µå’Œå½’æ¡£ï¼Œç”¨æˆ·å¯ä»¥è‡ªå·±å®šä¹‰é¡µé¢ï¼Œè‡ªå·±å®šä¹‰çš„é¡µé¢å¯¹åº”çš„ markdown æ–‡ä»¶çš„æ¸²æŸ“æ–¹æ³•ä¸ page.ejs å¯¹åº”ã€‚<br>post.ejsï¼šåšå®¢çš„è¯¦ç»†å†…å®¹æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”markdownæ–‡ä»¶è½¬æ¢å‡ºçš„ html ç•Œé¢ã€‚<br>tag.ejsï¼šæ ‡ç­¾çš„åˆ†ç±»ï¼Œç›´æ¥ç»‘å®šæŸä¸ªæ ‡ç­¾çš„å†…å®¹ï¼Œæ¯”å¦‚è®¿é—® tags/æŸæ ‡ç­¾ åˆ™è¿”å›è¿™ä¸ªæ ‡ç­¾çš„æ‰€æœ‰å†…å®¹ï¼Œå°±æ˜¯åœ¨è¿™é‡Œè¿›è¡Œæ§åˆ¶çš„ã€‚</p>
<p>scripts ä¸»é¢˜è‡ªå¸¦è„šæœ¬æ–‡ä»¶å¤¹<br>æ¥ä¸‹æ¥æŸ¥çœ‹ scripts æ–‡ä»¶å¤¹ï¼š</p>
<p>fancybox.jsï¼šåœ¨å¯åŠ¨ hexo æ—¶å€™ä¼šè¿è¡Œè¿™ä¸ªè„šæœ¬ã€‚<br>1.4.4 source ä¸»é¢˜è‡ªå¸¦çš„èµ„æºæ–‡ä»¶å¤¹<br>ä¸»é¢˜çš„æ¸²æŸ“è¿‡ç¨‹æ ·å¼éå¸¸é‡è¦ï¼Œä¸»é¢˜å¯¹åº”çš„ css æ ·å¼å­˜å‚¨äºè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œä»¥åŠç”¨å¾—åˆ°çš„ js è„šæœ¬ï¼Œä¹Ÿå­˜å‚¨äºæ­¤ï¼ˆä¸scriptsä¸åŒï¼Œé‚£ä¸ªä¼šå¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œï¼Œåªæ‰§è¡Œä¸€æ¬¡ï¼‰ã€‚</p>
<p>css ï¼šæ‰€æœ‰çš„æ ·å¼æ–‡ä»¶å¤¹ã€‚<br>fancyboxï¼šfancybox å¯¹åº”çš„æ ·å¼ä¸jsæ–‡ä»¶ï¼›<br>jsï¼šæ‰€æœ‰çš„js æ–‡ä»¶ã€‚<br>1.4.5 _config.yml ä¸»é¢˜é…ç½®æ–‡ä»¶<br>ç¼–å†™ä¸»é¢˜çš„æ—¶å€™å¿…é¡»è€ƒè™‘åˆ°ä¸åŒçš„äººå®¡ç¾ã€éœ€æ±‚æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸ºäº†è®©ç”¨æˆ·ç”¨èµ·æ¥ç®€å•ï¼ŒæŠŠå°½å¯èƒ½å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶é…ç½®çš„å†…å®¹å‡æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æ¯”è¾ƒåˆé€‚ã€‚æ¯”å¦‚ï¼Œä¸»é¢˜é»˜è®¤æƒ…å†µä¸‹ä¾§è¾¹æ çš„é¡ºåºæ˜¯ï¼š<br>widgets:</p>
<ul>
<li>category</li>
<li>tag</li>
<li>archive<h2 id="hexo-ä¸»é¢˜å·¥ä½œæ•´ä½“æµç¨‹"><a href="#hexo-ä¸»é¢˜å·¥ä½œæ•´ä½“æµç¨‹" class="headerlink" title="hexo ä¸»é¢˜å·¥ä½œæ•´ä½“æµç¨‹"></a>hexo ä¸»é¢˜å·¥ä½œæ•´ä½“æµç¨‹</h2>Hexo å¯åŠ¨åï¼Œ</li>
</ul>
<ol>
<li>è¯» scripts ä¸‹æ‰€æœ‰è„šæœ¬å¹¶æ‰§è¡Œè¿™äº›è„šæœ¬ï¼›</li>
<li>è¯»å– layout ç›®å½•ä¸‹ layout.ejs æ–‡ä»¶ï¼›</li>
<li>æ ¹æ® &lt;%-body%&gt; åœ¨ layout.ejs çš„ä½ç½®è¿›è¡Œæ¸²æŸ“ï¼ŒåŒ…æ‹¬ä¸»é¡µçš„æ¸²æŸ“ã€åˆ†ç±»çš„æ¸²æŸ“ã€å½’æ¡£çš„æ¸²æŸ“ä»¥åŠè‡ªå®šä¹‰é¡µé¢çš„æ¸²æŸ“ã€‚</li>
</ol>
<h1 id="Hexoä¸»é¢˜ç¼–å†™"><a href="#Hexoä¸»é¢˜ç¼–å†™" class="headerlink" title="Hexoä¸»é¢˜ç¼–å†™"></a>Hexoä¸»é¢˜ç¼–å†™</h1><h2 id="æ–°å»ºä¸»é¢˜å¹¶é…ç½®"><a href="#æ–°å»ºä¸»é¢˜å¹¶é…ç½®" class="headerlink" title="æ–°å»ºä¸»é¢˜å¹¶é…ç½®"></a>æ–°å»ºä¸»é¢˜å¹¶é…ç½®</h2><p>åœ¨ themes ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬çš„ä¸»é¢˜å¯¹åº”çš„å°±æ˜¯è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œç»™è‡ªå·±çš„ä¸»é¢˜èµ·ä¸ªåå­—ï¼Œæˆ‘ä»¬æš‚æ—¶èµ·åä¸º base å§ã€‚<br>ç›®å‰ base è¿˜æ˜¯ä¸ºç©ºçš„æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬ä¿®æ”¹æ ¹ç›®å½•çš„ _config.yml ä¹Ÿå°±æ˜¯Hexoçš„é…ç½®æ–‡ä»¶ï¼Œå°†ä¸»é¢˜ä¿®æ”¹ä¸ºæˆ‘ä»¬çš„ä¸»é¢˜åå­— baseã€‚<br>å¹¶ä¸”åœ¨ base ç›®å½•ä¸‹æ–°å»º layout æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨ layout ä¸‹æ–°å»º layout.ejs æ–‡ä»¶ä¸ index.ejs æ–‡ä»¶ï¼Œå‰é¢ç¬¬ä¸€ç« èŠ‚ä»‹ç»è¿‡ï¼Œlayout.ejs æ˜¯æ•´ä¸ªä¸»é¢˜çš„å…¥å£ï¼Œè€Œ index.ejs æ˜¯å¿…éœ€æ–‡ä»¶ï¼Œæš‚æ—¶ä¸ºç©ºç™½å³å¯ã€‚<br>ç¼–è¾‘ layout.ejs å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;wnxx&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    è¿™æ˜¯å…¥å£</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>é‡å¯ hexo ï¼Œå¯ä»¥çœ‹åˆ°æ•ˆæœä¸ºï¼š</p>
<h2 id="æ–°å»ºæ‰€æœ‰åŠŸèƒ½æ€§æ–‡ä»¶"><a href="#æ–°å»ºæ‰€æœ‰åŠŸèƒ½æ€§æ–‡ä»¶" class="headerlink" title="æ–°å»ºæ‰€æœ‰åŠŸèƒ½æ€§æ–‡ä»¶"></a>æ–°å»ºæ‰€æœ‰åŠŸèƒ½æ€§æ–‡ä»¶</h2><p>å…ˆç†æ¸…æ¥šæ‰€æœ‰åŠŸèƒ½å¯¹åº”çš„åŠŸèƒ½æ€§æ–‡ä»¶ï¼Œæ¦‚è¿°ä¸€ä¸‹å¦‚è¡¨æ ¼æ‰€ç¤ºã€‚<br>æ„åšå®¢è¯¦æƒ…é¡µæ—¶é»˜è®¤æ˜¯ posts/å¹´/æœˆ/æ—¥/åšå®¢æ ‡é¢˜ï¼Œä¹Ÿå¯ä»¥è‡ªè¡Œä¿®æ”¹ï¼Œè¿™é‡Œç»Ÿç§°ä¸º åšå®¢è·¯å¾„ã€‚<br>æˆ‘ä»¬æ ¹æ®è¿™ä¸ªè¡¨æ ¼æ–°å»ºç›¸åº”çš„æ–‡ä»¶ã€‚</p>
<h2 id="ç†Ÿæ‚‰hexoå†…ç½®çš„å˜é‡"><a href="#ç†Ÿæ‚‰hexoå†…ç½®çš„å˜é‡" class="headerlink" title="ç†Ÿæ‚‰hexoå†…ç½®çš„å˜é‡"></a>ç†Ÿæ‚‰hexoå†…ç½®çš„å˜é‡</h2><p>å®˜ç½‘æ–‡æ¡£åœ°å€ä¸ºï¼šä¸­æ–‡ <a href="https://hexo.io/zh-cn/docs/variables">https://hexo.io/zh-cn/docs/variables</a> | è‹±æ–‡ <a href="https://hexo.io/docs/variables">https://hexo.io/docs/variables</a> å»ºè®®ä¸¤ä¸ªéƒ½çœ‹ä¸€ä¸‹ã€‚</p>
<h2 id="layout-ejs"><a href="#layout-ejs" class="headerlink" title="layout.ejs"></a>layout.ejs</h2><p>layout.ejs æ˜¯ä¸»é¢˜çš„å…¥å£ï¼Œå› æ­¤æ•´ä¸ªåšå®¢ç½‘ç«™ä¸åŒé¡µé¢éƒ½å¯ä»¥è®¤ä¸ºæ˜¯ç”± layout.ejs â€œæ´¾ç”Ÿâ€ å¾—åˆ°çš„ã€‚æ¢å¥è¯è¯´ï¼Œlayout.ejs ä¸­ &lt;%- body %&gt; å…·ä½“è¾“å‡ºä»€ä¹ˆæ˜¯ç”±ç”¨æˆ·è®¿é—®çš„é¡µé¢å†³å®šçš„ï¼Œå…¶ä»–éƒ¨åˆ†å¯ä»¥æ ¹æ®å…·ä½“è®¿é—®çš„é¡µé¢è€Œå†³å®šæ˜¯å¦å±•ç¤ºï¼ˆæ¯”å¦‚è®¿é—®archiveå¯ä»¥è€ƒè™‘éšè—ä¾§è¾¹æ ç­‰ï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;wnxx&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"> </span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!-- ç½‘ç«™å --&gt;</span><br><span class="line">    &lt;h1&gt;</span><br><span class="line">        &lt;a href=&quot;/&quot;&gt;&lt;%= config.title  %&gt;&lt;/a&gt;</span><br><span class="line">        &lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt;</span><br><span class="line">        &lt;a href=&quot;&lt;%-url_for(config.archive_dir)%&gt;&quot;&gt;Archive&lt;/a&gt;</span><br><span class="line">    &lt;/h1&gt;</span><br><span class="line">    &lt;%- body %&gt; </span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;categories&lt;/h3&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;% site.categories.each(category=&gt;&#123; %&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">                &lt;a href=&quot;&lt;%- url_for(category.path) %&gt;&quot;&gt;</span><br><span class="line">                    &lt;%- category.name  %&gt; </span><br><span class="line">                &lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        &lt;% &#125;) %&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;tags&lt;/h3&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;% site.tags.each(tag=&gt;&#123; %&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">                &lt;a href=&quot;&lt;%- url_for(tag.path) %&gt;&quot;&gt;</span><br><span class="line">                    &lt;%- tag.name  %&gt; </span><br><span class="line">                &lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        &lt;% &#125;) %&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="index-ejs"><a href="#index-ejs" class="headerlink" title="index.ejs"></a>index.ejs</h2><p>ä¸»é¡µçš„å†…å®¹å±•ç¤ºå¸¦æœ‰åˆ†é¡µæ•ˆæœçš„åšå®¢ï¼Œå…·ä½“çš„æ–¹æ³•ä¸å‰é¢çš„ç±»ä¼¼ï¼Œè¯»å–pageå˜é‡çš„æ‰€æœ‰ postsç„¶åéå†ï¼Œæ¸²æŸ“ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- ä¸»é¡µ --&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&lt;% page.posts.each(post=&gt;&#123; %&gt;</span><br><span class="line">    &lt;li&gt;</span><br><span class="line">        &lt;a href=&quot;&lt;%=url_for(post.path)%&gt;&quot;&gt;</span><br><span class="line">            &lt;%= post.title %&gt;</span><br><span class="line">        &lt;/a&gt;</span><br><span class="line">        | &lt;%- date( post.date , &#x27;YYYY/MM/DD HH:mm&#x27;) %&gt; </span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;% &#125;) %&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">&lt;%- paginator(&#123;</span><br><span class="line">    prev_text: &#x27;&lt;&#x27;,</span><br><span class="line">    next_text: &#x27;&gt;&#x27;</span><br><span class="line">&#125;) %&gt;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®å‰ç«¯-qiankun</title>
    <url>/2023/03/29/%E5%BE%AE%E5%89%8D%E7%AB%AF-qiankun/</url>
    <content><![CDATA[<p>qiankun æ˜¯ä¸€ä¸ªåŸºäº single-spa çš„å¾®å‰ç«¯å®ç°åº“ï¼Œæ—¨åœ¨å¸®åŠ©å¤§å®¶èƒ½æ›´ç®€å•ã€æ— ç—›çš„æ„å»ºä¸€ä¸ªç”Ÿäº§å¯ç”¨å¾®å‰ç«¯æ¶æ„ç³»ç»Ÿã€‚</p>
<h1 id="qiankun-çš„æ ¸å¿ƒè®¾è®¡ç†å¿µ"><a href="#qiankun-çš„æ ¸å¿ƒè®¾è®¡ç†å¿µ" class="headerlink" title="qiankun çš„æ ¸å¿ƒè®¾è®¡ç†å¿µ"></a>qiankun çš„æ ¸å¿ƒè®¾è®¡ç†å¿µ</h1><ol>
<li>ç®€å•<br>ç”±äºä¸»åº”ç”¨å¾®åº”ç”¨éƒ½èƒ½åšåˆ°æŠ€æœ¯æ ˆæ— å…³ï¼Œqiankun å¯¹äºç”¨æˆ·è€Œè¨€åªæ˜¯ä¸€ä¸ªç±»ä¼¼ jQuery çš„åº“ï¼Œä½ éœ€è¦è°ƒç”¨å‡ ä¸ª qiankun çš„ API å³å¯å®Œæˆåº”ç”¨çš„å¾®å‰ç«¯æ”¹é€ ã€‚åŒæ—¶ç”±äº qiankun çš„ HTML entry åŠæ²™ç®±çš„è®¾è®¡ï¼Œä½¿å¾—å¾®åº”ç”¨çš„æ¥å…¥åƒä½¿ç”¨ iframe ä¸€æ ·ç®€å•ã€‚</li>
<li>è§£è€¦/æŠ€æœ¯æ ˆæ— å…³<br>å¾®å‰ç«¯çš„æ ¸å¿ƒç›®æ ‡æ˜¯å°†å·¨çŸ³åº”ç”¨æ‹†è§£æˆè‹¥å¹²å¯ä»¥è‡ªæ²»çš„æ¾è€¦åˆå¾®åº”ç”¨ï¼Œè€Œ qiankun çš„è¯¸å¤šè®¾è®¡å‡æ˜¯ç§‰æŒè¿™ä¸€åŸåˆ™ï¼Œå¦‚ HTML entryã€æ²™ç®±ã€åº”ç”¨é—´é€šä¿¡ç­‰ã€‚è¿™æ ·æ‰èƒ½ç¡®ä¿å¾®åº”ç”¨çœŸæ­£å…·å¤‡ ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹è¿è¡Œ çš„èƒ½åŠ›ã€‚</li>
</ol>
<h1 id="ä¸ºä»€ä¹ˆä¸æ˜¯-iframe"><a href="#ä¸ºä»€ä¹ˆä¸æ˜¯-iframe" class="headerlink" title="ä¸ºä»€ä¹ˆä¸æ˜¯ iframe"></a>ä¸ºä»€ä¹ˆä¸æ˜¯ iframe</h1><p>ä¸€. ä¸ºä»€ä¹ˆä¸ç”¨ iframeï¼Œè¿™å‡ ä¹æ˜¯æ‰€æœ‰å¾®å‰ç«¯æ–¹æ¡ˆç¬¬ä¸€ä¸ªä¼šè¢« challenge çš„é—®é¢˜ã€‚ä½†æ˜¯å¤§éƒ¨åˆ†å¾®å‰ç«¯æ–¹æ¡ˆåˆä¸çº¦è€ŒåŒæ”¾å¼ƒäº† iframe æ–¹æ¡ˆï¼Œè‡ªç„¶æ˜¯æœ‰åŸå› çš„ï¼Œå¹¶ä¸æ˜¯ä¸ºäº† â€œç‚«æŠ€â€ æˆ–è€…åˆ»æ„è¿½æ±‚ â€œç‰¹ç«‹ç‹¬è¡Œâ€ã€‚<br>å¦‚æœä¸è€ƒè™‘ä½“éªŒé—®é¢˜ï¼Œiframe å‡ ä¹æ˜¯æœ€å®Œç¾çš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆäº†ã€‚<br>äºŒ. iframe æœ€å¤§çš„ç‰¹æ€§å°±æ˜¯æä¾›äº†æµè§ˆå™¨åŸç”Ÿçš„ç¡¬éš”ç¦»æ–¹æ¡ˆï¼Œä¸è®ºæ˜¯æ ·å¼éš”ç¦»ã€js éš”ç¦»è¿™ç±»é—®é¢˜ç»Ÿç»Ÿéƒ½èƒ½è¢«å®Œç¾è§£å†³ã€‚ä½†ä»–çš„æœ€å¤§é—®é¢˜ä¹Ÿåœ¨äºä»–çš„éš”ç¦»æ€§æ— æ³•è¢«çªç ´ï¼Œå¯¼è‡´åº”ç”¨é—´ä¸Šä¸‹æ–‡æ— æ³•è¢«å…±äº«ï¼Œéšä¹‹å¸¦æ¥çš„å¼€å‘ä½“éªŒã€äº§å“ä½“éªŒçš„é—®é¢˜ã€‚</p>
<ol>
<li>url ä¸åŒæ­¥ã€‚æµè§ˆå™¨åˆ·æ–° iframe url çŠ¶æ€ä¸¢å¤±ã€åé€€å‰è¿›æŒ‰é’®æ— æ³•ä½¿ç”¨ã€‚</li>
<li>UI ä¸åŒæ­¥ï¼ŒDOM ç»“æ„ä¸å…±äº«ã€‚æƒ³è±¡ä¸€ä¸‹å±å¹•å³ä¸‹è§’ 1/4 çš„ iframe é‡Œæ¥ä¸€ä¸ªå¸¦é®ç½©å±‚çš„å¼¹æ¡†ï¼ŒåŒæ—¶æˆ‘ä»¬è¦æ±‚è¿™ä¸ªå¼¹æ¡†è¦æµè§ˆå™¨å±…ä¸­æ˜¾ç¤ºï¼Œè¿˜è¦æµè§ˆå™¨ resize æ—¶è‡ªåŠ¨å±…ä¸­..</li>
<li>å…¨å±€ä¸Šä¸‹æ–‡å®Œå…¨éš”ç¦»ï¼Œå†…å­˜å˜é‡ä¸å…±äº«ã€‚iframe å†…å¤–ç³»ç»Ÿçš„é€šä¿¡ã€æ•°æ®åŒæ­¥ç­‰éœ€æ±‚ï¼Œä¸»åº”ç”¨çš„ cookie è¦é€ä¼ åˆ°æ ¹åŸŸåéƒ½ä¸åŒçš„å­åº”ç”¨ä¸­å®ç°å…ç™»æ•ˆæœã€‚</li>
<li>æ…¢ã€‚æ¯æ¬¡å­åº”ç”¨è¿›å…¥éƒ½æ˜¯ä¸€æ¬¡æµè§ˆå™¨ä¸Šä¸‹æ–‡é‡å»ºã€èµ„æºé‡æ–°åŠ è½½çš„è¿‡ç¨‹ã€‚<br>å…¶ä¸­æœ‰çš„é—®é¢˜æ¯”è¾ƒå¥½è§£å†³(é—®é¢˜1)ï¼Œæœ‰çš„é—®é¢˜æˆ‘ä»¬å¯ä»¥çä¸€åªçœ¼é—­ä¸€åªçœ¼(é—®é¢˜4)ï¼Œä½†æœ‰çš„é—®é¢˜æˆ‘ä»¬åˆ™å¾ˆéš¾è§£å†³(é—®é¢˜3)ç”šè‡³æ— æ³•è§£å†³(é—®é¢˜2)ï¼Œè€Œè¿™äº›æ— æ³•è§£å†³çš„é—®é¢˜æ°æ°åˆä¼šç»™äº§å“å¸¦æ¥éå¸¸ä¸¥é‡çš„ä½“éªŒé—®é¢˜ï¼Œ æœ€ç»ˆå¯¼è‡´æˆ‘ä»¬èˆå¼ƒäº† iframe æ–¹æ¡ˆã€‚</li>
</ol>
<h1 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h1><ol>
<li>åŸºäº single-spa å°è£…ï¼Œæä¾›äº†æ›´åŠ å¼€ç®±å³ç”¨çš„ APIã€‚</li>
<li>æŠ€æœ¯æ ˆæ— å…³ï¼Œä»»æ„æŠ€æœ¯æ ˆçš„åº”ç”¨å‡å¯ ä½¿ç”¨/æ¥å…¥ï¼Œä¸è®ºæ˜¯ React/Vue/Angular/JQuery è¿˜æ˜¯å…¶ä»–ç­‰æ¡†æ¶ã€‚</li>
<li>HTML Entry æ¥å…¥æ–¹å¼ï¼Œè®©ä½ æ¥å…¥å¾®åº”ç”¨åƒä½¿ç”¨ iframe ä¸€æ ·ç®€å•ã€‚</li>
<li>æ ·å¼éš”ç¦»ï¼Œç¡®ä¿å¾®åº”ç”¨ä¹‹é—´æ ·å¼äº’ç›¸ä¸å¹²æ‰°ã€‚</li>
<li>JS æ²™ç®±ï¼Œç¡®ä¿å¾®åº”ç”¨ä¹‹é—´ å…¨å±€å˜é‡/äº‹ä»¶ ä¸å†²çªã€‚</li>
<li>èµ„æºé¢„åŠ è½½ï¼Œåœ¨æµè§ˆå™¨ç©ºé—²æ—¶é—´é¢„åŠ è½½æœªæ‰“å¼€çš„å¾®åº”ç”¨èµ„æºï¼ŒåŠ é€Ÿå¾®åº”ç”¨æ‰“å¼€é€Ÿåº¦ã€‚</li>
<li>umi æ’ä»¶ï¼Œæä¾›äº† @umijs/plugin-qiankun ä¾› umi åº”ç”¨ä¸€é”®åˆ‡æ¢æˆå¾®å‰ç«¯æ¶æ„ç³»ç»Ÿã€‚</li>
</ol>
<h1 id="å¿«é€Ÿæ„å»ºä¸€ä¸ªqiankunå¾®å‰ç«¯åº”ç”¨"><a href="#å¿«é€Ÿæ„å»ºä¸€ä¸ªqiankunå¾®å‰ç«¯åº”ç”¨" class="headerlink" title="å¿«é€Ÿæ„å»ºä¸€ä¸ªqiankunå¾®å‰ç«¯åº”ç”¨"></a>å¿«é€Ÿæ„å»ºä¸€ä¸ªqiankunå¾®å‰ç«¯åº”ç”¨</h1><h2 id="ä¸»åº”ç”¨çš„é…ç½®"><a href="#ä¸»åº”ç”¨çš„é…ç½®" class="headerlink" title="ä¸»åº”ç”¨çš„é…ç½®"></a>ä¸»åº”ç”¨çš„é…ç½®</h2><ol>
<li>é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªä¸»åº”ç”¨å’Œè‡³å°‘ä¸€ä¸ªå¾®åº”ç”¨</li>
<li>ç„¶ååœ¨ä¸»åº”ç”¨ä¸­å®‰è£…å¾®å‰ç«¯åº“ï¼šqiankunï¼Œyarn add qiankun # æˆ–è€… npm i qiankun -S</li>
<li>åœ¨ä¸»åº”ç”¨çš„å…¥å£å¤„å¯¼å…¥qiankunä¸­çš„ä¸¤ä¸ªæ–¹æ³•registerMicroAppså’Œstartæ–¹æ³•</li>
<li>è°ƒç”¨registerMicroAppsæ–¹æ³•æ³¨å†Œå„ä¸ªå¾®åº”ç”¨ï¼Œæœ€åè°ƒç”¨startæ–¹æ³•æ¥å¯åŠ¨qiankun</li>
</ol>
<h2 id="å¾®åº”ç”¨é…ç½®"><a href="#å¾®åº”ç”¨é…ç½®" class="headerlink" title="å¾®åº”ç”¨é…ç½®"></a>å¾®åº”ç”¨é…ç½®</h2><ol>
<li>å¾®åº”ç”¨ä¸éœ€è¦å®‰è£…qiankunï¼Œä½†å¿…é¡»è¦åœ¨è‡ªå·±çš„å…¥å£å¤„å¯¼å‡ºä¸‰ä¸ªæ–¹æ³•ï¼š<br>bootstrapï¼šåœ¨å¾®åº”ç”¨å¯åŠ¨ï¼ˆåˆå§‹åŒ–ï¼‰çš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡ï¼ˆåªä¼šè°ƒç”¨ä¸€æ¬¡ï¼‰<br>mountï¼šå¾®åº”ç”¨æ¸²æŸ“å‡½æ•°ï¼Œæ¯æ¬¡å¾®åº”ç”¨è¿›å…¥æ—¶éƒ½ä¼šè°ƒç”¨<br>unmountï¼šæ¯æ¬¡å¾®åº”ç”¨åˆ‡å‡ºæˆ–å¸è½½æ—¶éƒ½ä¼šè°ƒç”¨</li>
</ol>
<p><strong>æ³¨æ„ï¼š</strong>ä»¥ä¸Šä¸‰ä¸ªæ–¹æ³•å³ä½¿ä¸åšä»»ä½•äº‹ä¹Ÿå¿…é¡»è¦å¯¼å‡ºï¼Œå¦åˆ™ä¼šæŠ¥é”™<br>2. ä¸ºäº†ä¿è¯æ¯ä¸ªå¾®åº”ç”¨è¿˜èƒ½ç‹¬ç«‹è¿è¡Œï¼Œè¿˜éœ€è¦åœ¨å…¥å£å¤„æ ¹æ®å…¨å±€å±æ€§window.__ POWERED_BY_QIANKUN __ æ¥åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯ç”±ä¸»åº”ç”¨å¯åŠ¨è¿˜æ˜¯è‡ªå·±ç‹¬ç«‹è¿è¡Œï¼Œä»è€Œåšå‡ºç›¸åº”çš„é€»è¾‘å¤„ç†ã€‚</p>
<ul>
<li>å¦‚æœæ˜¯ç‹¬ç«‹è¿è¡Œåˆ™ä¸éœ€é¢å¤–å¤„ç†ï¼Œåªæ˜¯æŒ‰ç…§åŸæœ‰é€»è¾‘è¿›è¡Œæ¸²æŸ“å³å¯</li>
<li>å¦‚æœæ˜¯ç”±ä¸»åº”ç”¨å¯åŠ¨çš„ï¼Œåˆ™éœ€å°†å…¨å±€å˜é‡window.__ INJECTED_PUBLIC_PATH_BY_QIANKUN __ çš„å€¼èµ‹ç»™å˜é‡ __ webpack_public_path __</li>
</ul>
<ol start="3">
<li>å¦‚æœæ˜¯webpackç­‰å·¥å…·æ„å»ºçš„åº”ç”¨ï¼ˆå¦‚vueæˆ–reactç­‰ï¼‰åˆ™è¿˜éœ€è¦ç»™å¾®åº”ç”¨çš„æ‰“åŒ…å·¥å…·ï¼ˆwebpackï¼‰å¢åŠ ä¸€äº›ç›¸åº”çš„é…ç½®ï¼Œä¸€èˆ¬éœ€è¦é…ç½®outputçš„libraryå’ŒlibraryTargetã€‚</li>
<li>æœ€åå› ä¸ºä¸åŒåº”ç”¨ä¼šéƒ¨ç½²åœ¨ä¸åŒçš„åŸŸä¸‹ï¼Œæ‰€ä»¥è‚¯å®šè¿˜ä¼šæœ‰ä¸ªè·¨åŸŸé—®é¢˜ï¼Œä¸€èˆ¬ä¼šåœ¨æœåŠ¡å™¨ç«¯å†è¿›è¡Œä¸€ä¸ªå…è®¸è·¨åŸŸçš„é…ç½®ã€‚</li>
</ol>
<h1 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h1><h2 id="ä¸»åº”ç”¨"><a href="#ä¸»åº”ç”¨" class="headerlink" title="ä¸»åº”ç”¨"></a>ä¸»åº”ç”¨</h2><ol>
<li>åˆ©ç”¨vueè„šæ‰‹æ¶åˆ›å»ºä¸€ä¸ªvue2.0é¡¹ç›®ï¼šmain-appï¼ˆvue create main-appï¼‰ï¼Œå»ºè®®é€‰æ‹©æ‰‹åŠ¨æ¨¡å¼å¯ä»¥å°†Routerå‹¾é€‰ä¸Šï¼Œå¹¶ä¸”éœ€è¦ä½¿ç”¨historyè·¯ç”±æ¨¡å¼ã€‚</li>
<li>æ‰“å¼€é¡¹ç›®main-appï¼Œå®‰è£…qiankunï¼ˆnpm install qiankun â€“saveï¼‰</li>
<li>ä¿®æ”¹App.vueï¼Œæ–°å¢ä¸€ä¸ªsubappçš„router-linkï¼Œtoå€¼ä¸ºâ€œ/subappâ€ï¼Œå¹¶åœ¨router-viewçš„ä¸‹æ–¹æ–°å¢ä¸€ä¸ªidä¸ºvueContainerçš„divç›’å­ï¼ˆç”¨äºæ‰¿è½½å­åº”ç”¨ï¼‰ã€‚</li>
<li>ä¿®æ”¹views/Home.vueï¼Œå°†é»˜è®¤å†…å®¹åˆ é™¤ï¼Œå¹¶æ”¹ä¸ºï¼š This is a home page in qiankun-mainï¼ˆéå¿…é¡»ï¼Œå¯æ ¹æ®è‡ªå·±å–œå¥½éšä¾¿æ”¹åŠ¨ï¼Œä¹Ÿå¯ä½¿ç”¨é»˜è®¤å†…å®¹ï¼‰</li>
<li>ä¿®æ”¹views/About.vueï¼Œå°†å†…å®¹æ”¹ä¸ºï¼šThis is an about page in qiankun-mainï¼ˆéå¿…é¡»ï¼Œå¯æ ¹æ®è‡ªå·±å–œå¥½éšä¾¿æ”¹åŠ¨ï¼Œä¹Ÿå¯ä½¿ç”¨é»˜è®¤å†…å®¹ï¼‰</li>
<li>ä¿®æ”¹main.jsï¼Œå¯¼å…¥qiankunä¸­çš„registerMicroAppså’Œstartä¸¤ä¸ªæ–¹æ³•ï¼Œæ³¨å†Œå­åº”ç”¨å¹¶å¯åŠ¨qiankun<br>ä¸‹é¢çœ‹ä¸‹ä¿®æ”¹åçš„å®Œæ•´ä»£ç ï¼ˆåˆ›å»ºé¡¹ç›®å’Œå®‰è£…qiankunçš„æ­¥éª¤å°±çœç•¥äº†ï¼‰<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- App.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">		&lt;div id=&quot;nav&quot;&gt;</span><br><span class="line">			&lt;router-link to=&quot;/&quot;&gt;Home&lt;/router-link&gt;</span><br><span class="line">			&lt;router-link to=&quot;/about&quot;&gt;About&lt;/router-link&gt;</span><br><span class="line">			&lt;router-link to=&quot;/subapp&quot;&gt;sub-app&lt;/router-link&gt; &lt;!--æ–°å¢éƒ¨åˆ†--&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;router-view /&gt;</span><br><span class="line">		&lt;div id=&quot;vueContainer&quot;&gt;&lt;/div&gt;&lt;!--æ–°å¢éƒ¨åˆ†ï¼Œç”¨äºæ‰¿è½½å­åº”ç”¨--&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- views/Home.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class=&quot;home&quot;&gt;This is a home page in qiankun-main&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- views/About.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class=&quot;home&quot;&gt;This is an about page in qiankun-main&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- main.js --&gt;</span><br><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">import router from &#x27;./router&#x27;</span><br><span class="line">&lt;!-- ======================æ–°å¢å†…å®¹å¼€å§‹=============================== --&gt;</span><br><span class="line">import &#123;registerMicroApps, start&#125; from &#x27;qiankun&#x27; //æ–°å¢éƒ¨åˆ†ï¼Œå¯¼å…¥qiankunä¸­çš„ä¸¤ä¸ªæ–¹æ³•</span><br><span class="line">const apps = [</span><br><span class="line">&#123;</span><br><span class="line">	name:&#x27;subApp&#x27;, //å­åº”ç”¨çš„åç§°</span><br><span class="line">	entry:&#x27;//localhost:8081&#x27;,//å­åº”ç”¨çš„åŸŸå</span><br><span class="line">	container:&#x27;#vueContainer&#x27;,//æ‰¿è½½å­åº”ç”¨çš„å®¹å™¨ï¼Œåœ¨ä¸Šé¢App.vueä¸­å®šä¹‰</span><br><span class="line">	activeRule:&#x27;/subapp&#x27;, // è¢«æ¿€æ´»çš„å­åº”ç”¨çš„è·¯ç”±</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">registerMicroApps(apps);//æ³¨å†Œå­åº”ç”¨</span><br><span class="line">start();//å¯åŠ¨qiankun</span><br><span class="line">&lt;!-- ======================æ–°å¢å†…å®¹ç»“æŸ=============================== --&gt;</span><br><span class="line">new Vue(&#123;</span><br><span class="line">	router,</span><br><span class="line">	render: h =&gt; h(App)</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- router/index.js --&gt;</span><br><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import VueRouter from &#x27;vue-router&#x27;</span><br><span class="line">import Home from &quot;../views/Home&quot;;</span><br><span class="line">import About from &quot;../views/About&quot;;</span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line">const routes = [&#123;</span><br><span class="line">        path: &#x27;/&#x27;,</span><br><span class="line">        name: &#x27;Home&#x27;,</span><br><span class="line">        // redirect: &#x27;/home&#x27;,</span><br><span class="line">        component: Home,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path: &#x27;/about&#x27;,</span><br><span class="line">        name: &#x27;About&#x27;,</span><br><span class="line">        component: About,</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line">&lt;!-- ä»¥ä¸‹æ˜¯ä¿®æ”¹åçš„ä»£ç  --&gt;</span><br><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">	mode:&#x27;history&#x27;,</span><br><span class="line">	base: &#x27;&#x27;,</span><br><span class="line">	routes</span><br><span class="line">&#125;)</span><br><span class="line">export default router;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="å¾®åº”ç”¨"><a href="#å¾®åº”ç”¨" class="headerlink" title="å¾®åº”ç”¨"></a>å¾®åº”ç”¨</h2><p>å¾®åº”ç”¨ä¸­ä¸»è¦éœ€è¦ä¿®æ”¹çš„åœ°æ–¹æœ‰ï¼šmain.jsã€vue.config.jså’Œrouter/index.jsï¼Œå…¶ä½™é¡µé¢éƒ¨åˆ†æ ¹æ®è‡ªå·±å–œå¥½å¯æ”¹å¯ä¸æ”¹ï¼Œæœ¬æ–‡ä¸ºäº†ä¾¿äºåŒºåˆ†ä¸»å­åº”ç”¨çš„å†…å®¹å°†å¯¹Home.vueå’ŒAbout.vueé¡µé¢è¿›è¡Œå¾®å°çš„æ”¹åŠ¨</p>
<ol>
<li>åˆ©ç”¨vueè„šæ‰‹æ¶åˆ›å»ºä¸€ä¸ªvue2.0é¡¹ç›®ï¼šsub-appï¼ˆvue create sub-appï¼‰ï¼Œå»ºè®®é€‰æ‹©æ‰‹åŠ¨æ¨¡å¼å¯ä»¥å°†Routerå‹¾é€‰ä¸Šï¼Œå¹¶ä¸”éœ€è¦ä½¿ç”¨historyè·¯ç”±æ¨¡å¼</li>
<li>ä¿®æ”¹views/Home.vueï¼Œåœ¨åŸæœ‰å†…å®¹çš„åŸºç¡€ä¸Šæ–°å¢è¯­å¥ï¼šâ€œThis is a home page in sub-appâ€ï¼ˆæ ¹æ®ä¸ªäººå–œå¥½ï¼Œå¯æ”¹å¯ä¸æ”¹ï¼‰<br>ä¿®æ”¹views/About.vueï¼Œå°†å†…å®¹æ”¹ä¸ºï¼šâ€œThis is an about page in sub-appâ€ï¼ˆæ ¹æ®ä¸ªäººå–œå¥½ï¼Œå¯æ”¹å¯ä¸æ”¹ï¼‰</li>
<li>ä¿®æ”¹main.jsï¼ˆå¿…éœ€ï¼‰</li>
</ol>
<ul>
<li>å°†åˆ›å»ºVueå®ä¾‹çš„ä»£ç éƒ¨åˆ†æå–åˆ°ä¸€ä¸ªå‡½æ•°renderä¸­ï¼Œrenderå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°props</li>
<li>åˆ¤æ–­window.__ POWERED_BY_QIANKUN __ï¼Œå¦‚æœæ˜¯ä»qiankunå¯åŠ¨åˆ™å°†window. __ INJECTED_PUBLIC_PATH_BY_QIANKUN __ çš„å€¼èµ‹å€¼ç»™ __ webpack_public_path __ ï¼Œå¦åˆ™ç›´æ¥è°ƒç”¨renderæ–¹æ³•è¡¨ç¤ºå­åº”ç”¨æ˜¯ç‹¬ç«‹è¿è¡Œ</li>
<li>å¯¼å‡º3ä¸ªå¿…éœ€çš„æ–¹æ³•bootstrapï¼Œmountå’Œunmountï¼›bootstrapå‡½æ•°ä½“å†…å®¹å¯ä¸ºç©ºä½†å‡½æ•°å¿…é¡»è¦å¯¼å‡ºã€‚mountå‡½æ•°ä¸­è°ƒç”¨renderæ–¹æ³•è¿›è¡Œå­åº”ç”¨æ¸²æŸ“ã€‚unmountå‡½æ•°ä¸­å°†renderæ–¹æ³•ä¸­åˆ›å»ºçš„vueå®ä¾‹é”€æ¯ã€‚</li>
</ul>
<ol start="4">
<li>ä¿®æ”¹router/index.jsï¼ŒæŒ‡å®šbaseå€¼ä¸ºï¼šâ€œ/vueChildâ€</li>
<li>åˆ›å»ºvue.config.jsï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­é…ç½®å…è®¸è·¨åŸŸï¼šâ€œ Access-Control-Allow-Originï¼šâ€™*â€™ â€ï¼Œå¹¶é…ç½®webpackçš„output.libraryå’Œoutput.libraryTarget</li>
</ol>
<p>å„éƒ¨åˆ†å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!--======================== views/Home.vue ====================--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class=&quot;home&quot;&gt;</span><br><span class="line">		&lt;img alt=&quot;Vue logo&quot; src=&quot;../assets/logo.png&quot; /&gt;</span><br><span class="line">		&lt;h1 style=&quot;color:red;&quot;&gt;This is a home page in sub-app&lt;/h1&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!--======================== views/About.vue ====================--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class=&quot;About&quot;&gt;		</span><br><span class="line">		This is an about page in sub-app</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!--  main.js --&gt;</span><br><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">import router from &#x27;./router&#x27;</span><br><span class="line">let instance = null; //è®¾ç½®å…¨å±€å˜é‡ï¼Œç”¨äºä¿å­˜æˆ–é”€æ¯Vueå®ä¾‹</span><br><span class="line">function render(props = &#123;&#125;)&#123;</span><br><span class="line">	const &#123; container &#125; = props</span><br><span class="line">	instance = new Vue(&#123;</span><br><span class="line">		router,</span><br><span class="line">		render: h =&gt; h(App)</span><br><span class="line">	&#125;).$mount(container ? container.querySelector(&quot;#app&quot;) : &quot;#app&quot;);//ç”¨äºé™å®šå½“å‰ä¸Šä¸‹æ–‡ä¸‹çš„#appï¼Œé˜²æ­¢ä¸ä¸»åº”ç”¨ä¸­çš„#appå†²çª</span><br><span class="line">&#125;</span><br><span class="line">if(window.__POWERED_BY_QIANKUN__)&#123;</span><br><span class="line">	__webpack_public_path__ = window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__</span><br><span class="line">&#125;else&#123;</span><br><span class="line">	render();</span><br><span class="line">	console.log(&#x27;å­åº”ç”¨ç‹¬ç«‹è¿è¡Œ&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">export async function bootstrap(props)&#123;</span><br><span class="line">	console.log(&#x27;è¿™é‡Œæš‚æ—¶å¯ä»¥ä»€ä¹ˆéƒ½ä¸ç”¨åšï¼Œä½†æ–¹æ³•å¿…é¡»è¦å¯¼å‡º&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">export async function mount(props)&#123;</span><br><span class="line">	render(props);//ä»qiankunå¯åŠ¨</span><br><span class="line">&#125;</span><br><span class="line">export async function unmount(props)&#123;</span><br><span class="line">	instance.$destroy();//é”€æ¯å­åº”ç”¨å®ä¾‹</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- vue.config.js --&gt;</span><br><span class="line">module.exports = &#123;</span><br><span class="line">	lintOnSave: false,</span><br><span class="line">	devServer:&#123;</span><br><span class="line">		port:8081,</span><br><span class="line">		headers:&#123;</span><br><span class="line">			&quot;Access-Control-Allow-Origin&quot;: &quot;*&quot;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	configureWebpack:&#123;</span><br><span class="line">		output:&#123;</span><br><span class="line">			library:&#x27;subApp&#x27;,</span><br><span class="line">			libraryTarget:&#x27;umd&#x27;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- router/index.js --&gt;</span><br><span class="line">// ...åŸæœ‰ä»£ç çœç•¥</span><br><span class="line">//ä¿®æ”¹åçš„ä»£ç </span><br><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">	mode:&#x27;history&#x27;,</span><br><span class="line">	base:&#x27;/subapp&#x27;,</span><br><span class="line">	routes</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>çŸ¥è¯†ç‚¹</category>
      </categories>
      <tags>
        <tag>å¾®å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®å‰ç«¯</title>
    <url>/2023/03/27/%E5%BE%AE%E5%89%8D%E7%AB%AF/</url>
    <content><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯å¾®å‰ç«¯"><a href="#ä»€ä¹ˆæ˜¯å¾®å‰ç«¯" class="headerlink" title="ä»€ä¹ˆæ˜¯å¾®å‰ç«¯"></a>ä»€ä¹ˆæ˜¯å¾®å‰ç«¯</h1><p>å¾®å‰ç«¯æ˜¯ä¸€ç§å¤šä¸ªå›¢é˜Ÿé€šè¿‡ç‹¬ç«‹å‘å¸ƒåŠŸèƒ½çš„æ–¹å¼æ¥å…±åŒæ„å»ºç°ä»£åŒ–webåº”ç”¨çš„æŠ€æœ¯æ‰‹æ®µåŠæ–¹æ³•ç­–ç•¥ã€‚<br>å¾®å‰ç«¯å¯ä»¥å°†å¤šä¸ªå°å‹åº”ç”¨æ•´åˆæˆä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ã€‚æ¯ä¸ªå°å‹åº”ç”¨éƒ½æ˜¯ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹è¿è¡Œã€ç‹¬ç«‹éƒ¨ç½²çš„ï¼Œè¿™å°±æ„å‘³ç€å¯ä»¥å¤šå›¢é˜Ÿå¹¶è¡Œå¼€å‘ ä¸”æœ‰æ— å†²çªã€æ— é˜»å¡ç­‰ç‰¹ç‚¹ã€‚</p>
<h1 id="å¾®å‰ç«¯æ¶æ„å…·å¤‡ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒä»·å€¼ï¼š"><a href="#å¾®å‰ç«¯æ¶æ„å…·å¤‡ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒä»·å€¼ï¼š" class="headerlink" title="å¾®å‰ç«¯æ¶æ„å…·å¤‡ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒä»·å€¼ï¼š"></a>å¾®å‰ç«¯æ¶æ„å…·å¤‡ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒä»·å€¼ï¼š</h1><p>1.æŠ€æœ¯æ ˆæ— å…³<br>ä¸»æ¡†æ¶ä¸é™åˆ¶æ¥å…¥åº”ç”¨çš„æŠ€æœ¯æ ˆï¼Œå¾®åº”ç”¨å…·å¤‡å®Œå…¨è‡ªä¸»æƒ<br>2.ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²<br>å¾®åº”ç”¨ä»“åº“ç‹¬ç«‹ï¼Œå‰åç«¯å¯ç‹¬ç«‹å¼€å‘ï¼Œéƒ¨ç½²å®Œæˆåä¸»æ¡†æ¶è‡ªåŠ¨å®ŒæˆåŒæ­¥æ›´æ–°<br>3.å¢é‡å‡çº§<br>åœ¨é¢å¯¹å„ç§å¤æ‚åœºæ™¯æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å¾ˆéš¾å¯¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç³»ç»Ÿåšå…¨é‡çš„æŠ€æœ¯æ ˆå‡çº§æˆ–é‡æ„ï¼Œè€Œå¾®å‰ç«¯æ˜¯ä¸€ç§éå¸¸å¥½çš„å®æ–½æ¸è¿›å¼é‡æ„çš„æ‰‹æ®µå’Œç­–ç•¥<br>4.ç‹¬ç«‹è¿è¡Œæ—¶<br>æ¯ä¸ªå¾®åº”ç”¨ä¹‹é—´çŠ¶æ€éš”ç¦»ï¼Œè¿è¡Œæ—¶çŠ¶æ€ä¸å…±äº«</p>
<h1 id="å¸¸è§çš„å¾®å‰ç«¯å®ç°æ–¹å¼"><a href="#å¸¸è§çš„å¾®å‰ç«¯å®ç°æ–¹å¼" class="headerlink" title="å¸¸è§çš„å¾®å‰ç«¯å®ç°æ–¹å¼"></a>å¸¸è§çš„å¾®å‰ç«¯å®ç°æ–¹å¼</h1><p>1.è·¯ç”±åˆ†å‘<br>ç®€å•æ¥è¯´ï¼Œå…¶å®å°±æ˜¯é€šè¿‡ç½‘å…³/ä»£ç†å¯¹è·¯ç”±è¿›è¡Œç›‘å¬ï¼Œå¯¹ä¸åŒçš„è·¯ç”±è·¯å¾„å¯¼å‘ä¸åŒçš„å‰ç«¯èµ„æºå…¥å£ã€‚<br>ä¾‹å¦‚ï¼š<br>ä½¿ç”¨ Nginx ä»£ç†äº† localhost:80ï¼›<br>ç„¶åè®¿é—®è·¯å¾„ä¸º /app1 çš„æ—¶å€™ï¼Œè¿”å› html/app1/index.html çš„æ–‡ä»¶ï¼›<br>è®¿é—®è·¯å¾„ä¸º /app2 çš„æ—¶å€™ï¼Œè¿”å› html/app2/index.html çš„æ–‡ä»¶ã€‚<br>è¿™ç§æ–¹å¼ç”±äºæ˜¯å¤šé¡µé¢åº”ç”¨ï¼Œæ‰€ä»¥ç”¨æˆ·ä½“éªŒä¸å¥½ï¼Œè€Œä¸”æ¯”è¾ƒä¾èµ–äºåç«¯ï¼Œåº”ç”¨ä¹‹é—´å­˜åœ¨ç€è€¦åˆé—®é¢˜ã€‚</p>
<h2 id="ä¼˜ç‚¹ï¼š"><a href="#ä¼˜ç‚¹ï¼š" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h2><p>å¼€å‘æˆæœ¬ä½<br>é…ç½®ç®€å•</p>
<h2 id="ç¼ºç‚¹ï¼š"><a href="#ç¼ºç‚¹ï¼š" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h2><p>å¤šåº”ç”¨ä¹‹é—´åˆ‡æ¢æ—¶ï¼Œæ¯ä¸ªåº”ç”¨éƒ½ä¼šé‡æ–°åŠ è½½ï¼Œå½±å“ä½“éªŒï¼ˆå¯ä»¥æ€è€ƒ ä¼ ç»Ÿé¡µé¢ å’Œ SPA åŒºåˆ«ï¼‰<br>å¤šåº”ç”¨é—´ä¸èƒ½å…±äº«æ•°æ®<br>å¤šåº”ç”¨é—´é€šä¿¡å›°éš¾<br>å¤šåº”ç”¨å…¬å…±ä¾èµ–é‡å¤åŠ è½½</p>
<h2 id="2-iframe"><a href="#2-iframe" class="headerlink" title="2.iframe"></a>2.iframe</h2><p>å®ƒçš„ä½œç”¨å°±æ˜¯åœ¨ç½‘é¡µä¸­åµŒå¥—å¦ä¸€ä¸ªç½‘é¡µï¼Œé‚£ä¹ˆé€šè¿‡è¿™ç§ç‰¹æ€§å°±å¯ä»¥å®ç°å¾®å‰ç«¯äº†ã€‚<br>ä½†å®é™…ä¸Šä¸ªå¤§å¾®å‰ç«¯æ¡†æ¶ï¼Œå°±æ²¡æœ‰ä¸€ä¸ªæ˜¯ç”¨iframeå»åšçš„ï¼Œå› ä¸ºiframeæœ‰ç€å¾ˆå¤šçš„é—®é¢˜ï¼Œå…¶ä¸­ä¸€äº›ç”šè‡³æ˜¯æ— æ³•è§£å†³çš„ã€‚</p>
<h2 id="ä¼˜ç‚¹ï¼šå®Œç¾æ”¯æŒjséš”ç¦»ï¼Œæ ·å¼éš”ç¦»"><a href="#ä¼˜ç‚¹ï¼šå®Œç¾æ”¯æŒjséš”ç¦»ï¼Œæ ·å¼éš”ç¦»" class="headerlink" title="ä¼˜ç‚¹ï¼šå®Œç¾æ”¯æŒjséš”ç¦»ï¼Œæ ·å¼éš”ç¦»"></a>ä¼˜ç‚¹ï¼šå®Œç¾æ”¯æŒjséš”ç¦»ï¼Œæ ·å¼éš”ç¦»</h2><h2 id="ç¼ºç‚¹ï¼š-1"><a href="#ç¼ºç‚¹ï¼š-1" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h2><p>url ä¸åŒæ­¥ï¼Œ æµè§ˆå™¨åˆ·æ–°æ—¶ï¼Œiframeä¸­çš„url çŠ¶æ€ä¼šä¸¢å¤±<br>iframeå±€éƒ¨å¼¹æ¡†<br>å†…å¤–é€šä¿¡æ•ˆç‡ä½ä¸‹ï¼Œå˜é‡ä¸èƒ½å…±äº«<br>æ¯æ¬¡è¿›å…¥ï¼Œèµ„æºéƒ½ä¼šè¢«é‡æ–°åŠ è½½ï¼Œé€Ÿåº¦è¾ƒæ…¢</p>
<h2 id="3-Web-Components"><a href="#3-Web-Components" class="headerlink" title="3.Web Components"></a>3.Web Components</h2><p>Web Components å®ƒç”±ä¸‰é¡¹ä¸»è¦æŠ€æœ¯ç»„æˆï¼Œå®ƒä»¬å¯ä»¥ä¸€èµ·ä½¿ç”¨æ¥åˆ›å»ºå°è£…åŠŸèƒ½çš„å®šåˆ¶å…ƒç´ ï¼Œå¯ä»¥åœ¨ä½ å–œæ¬¢çš„ä»»ä½•åœ°æ–¹é‡ç”¨ï¼Œä¸å¿…æ‹…å¿ƒä»£ç å†²çªã€‚<br>(1)Custom elementsï¼ˆè‡ªå®šä¹‰å…ƒç´ ï¼‰ ä¸€ç»„ JavaScript APIï¼Œå…è®¸æ‚¨å®šä¹‰custom elements åŠå…¶è¡Œä¸ºï¼Œç„¶åå¯ä»¥åœ¨æ‚¨çš„ç”¨æˆ·ç•Œé¢ä¸­æŒ‰ç…§éœ€è¦ä½¿ç”¨å®ƒä»¬ã€‚<br>(2)Shadow DOMï¼ˆå½±å­ DOMï¼‰ ï¼šä¸€ç»„JavaScript APIï¼Œç”¨äºå°†å°è£…çš„â€œå½±å­â€DOM æ ‘é™„åŠ åˆ°å…ƒç´ ï¼ˆä¸ä¸»æ–‡æ¡£ DOM åˆ†å¼€å‘ˆç°ï¼‰å¹¶æ§åˆ¶å…¶å…³è”çš„åŠŸèƒ½ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨å¯ä»¥ä¿æŒå…ƒç´ çš„åŠŸèƒ½ç§æœ‰ï¼Œè¿™æ ·å®ƒä»¬å°±å¯ä»¥è¢«è„šæœ¬åŒ–å’Œæ ·å¼åŒ–ï¼Œè€Œä¸ç”¨æ‹…å¿ƒä¸æ–‡æ¡£çš„å…¶ä»–éƒ¨åˆ†å‘ç”Ÿå†²çªã€‚<br>(3)HTML templatesï¼ˆHTML æ¨¡æ¿ï¼‰ï¼š <template>Â å’ŒÂ <slot>Â å…ƒç´ ä½¿æ‚¨å¯ä»¥ç¼–å†™ä¸åœ¨å‘ˆç°é¡µé¢ä¸­æ˜¾ç¤ºçš„æ ‡è®°æ¨¡æ¿ã€‚ç„¶åå®ƒä»¬å¯ä»¥ä½œä¸ºè‡ªå®šä¹‰å…ƒç´ ç»“æ„çš„åŸºç¡€è¢«å¤šæ¬¡é‡ç”¨ã€‚</p>
<h2 id="ä¼˜ç‚¹ï¼š-1"><a href="#ä¼˜ç‚¹ï¼š-1" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h2><p>æ¯ä¸ªæœåŠ¡æ‹¥æœ‰ç‹¬ç«‹çš„è„šæœ¬å’Œæ ·å¼</p>
<h2 id="ç¼ºç‚¹ï¼š-2"><a href="#ç¼ºç‚¹ï¼š-2" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h2><p>æ”¹é€ æˆæœ¬å¤§<br>å„ä¸ªæµè§ˆå™¨å…¼å®¹ä¸å‹å¥½<br>å¤šåº”ç”¨å…¬å…±ä¾èµ–é‡å¤åŠ è½½</p>
<h2 id="4-single-SPA"><a href="#4-single-SPA" class="headerlink" title="4.single-SPA"></a>4.single-SPA</h2><p>single-spa æä¾›äº†ä¸€ç§åŸºäºè·¯ç”±çš„åŸºåº§åŒ–çš„å¾®å‰ç«¯æ–¹æ¡ˆï¼Œå®ƒå°†åº”ç”¨åˆ†ä¸ºä¸¤ç±»ï¼šåŸºåº§åº”ç”¨å’Œå­åº”ç”¨ã€‚å…¶ä¸­ï¼Œå­åº”ç”¨å¯¹åº”å‰é¢æˆ‘ä»¬è®²åˆ°çš„éœ€è¦èšåˆçš„åº”ç”¨ï¼ŒåŸºåº§åº”ç”¨æ˜¯å¦å¤–ä¸€ä¸ªå•ç‹¬çš„åº”ç”¨ï¼Œç”¨äºèšåˆå­åº”ç”¨ã€‚åœ¨åŸºåº§åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¼šç»´æŠ¤ä¸€ä¸ªè·¯ç”±æ³¨å†Œè¡¨ - æ¯ä¸ªè·¯ç”±å¯¹åº”ä¸€ä¸ªå­åº”ç”¨ã€‚åŸºåº§åº”ç”¨å¯åŠ¨ä»¥åï¼Œå½“æˆ‘ä»¬åˆ‡æ¢è·¯ç”±æ—¶ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªæ–°çš„å­åº”ç”¨ï¼Œä¼šåŠ¨æ€è·å–å­åº”ç”¨çš„ js è„šæœ¬ï¼Œç„¶åæ‰§è¡Œè„šæœ¬å¹¶æ¸²æŸ“å‡ºç›¸åº”çš„é¡µé¢ï¼›å¦‚æœæ˜¯ä¸€ä¸ªå·²ç»è®¿é—®è¿‡çš„å­åº”ç”¨ï¼Œé‚£ä¹ˆå°±ä¼šä»åŸºåº§åº”ç”¨çš„ç¼“å­˜ä¸­è·å–å·²ç»ç¼“å­˜çš„å­åº”ç”¨ï¼Œæ¿€æ´»å­åº”ç”¨å¹¶æ¸²æŸ“å‡ºå¯¹åº”çš„é¡µé¢ã€‚</p>
<h2 id="ä¼˜ç‚¹ï¼š-2"><a href="#ä¼˜ç‚¹ï¼š-2" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h2><p>è‰¯å¥½çš„ä½“éªŒï¼Œå¤šæœåŠ¡åˆ‡æ¢å¦‚åŒå•ä½“SPA<br>å…·å¤‡æœåŠ¡çš„ç”Ÿå‘½å‘¨æœŸ<br>å…±äº«æ•°æ®<br>å…¼å®¹ä¸åŒæŠ€æœ¯æ ˆè¿è¡Œ</p>
<h2 id="ç¼ºç‚¹ï¼š-3"><a href="#ç¼ºç‚¹ï¼š-3" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h2><p>å¤šåº”ç”¨é—´ï¼Œæ— å¤šåº”ç”¨æ²™ç®±æœºåˆ¶<br>å¤šåº”ç”¨é—´ï¼Œæ ·å¼å‘½åä¸æ…ä¼šå¯¼è‡´å†²çª<br>js entry å¯¼è‡´å­æœåŠ¡å’ŒåŸºåº§å¼ºè€¦åˆ</p>
<h2 id="5-qiankun"><a href="#5-qiankun" class="headerlink" title="5.qiankun"></a>5.qiankun</h2><p>ä¹¾å¤æ˜¯ @kuitos å¤§ä½¬å¼€å‘çš„ï¼Œé˜¿é‡Œå‡ºå“ã€‚ç›®å‰æ¥è¯´ï¼Œæ˜¯æœ€å®Œç¾çš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿæ˜¯startæœ€å¤šçš„ã€‚<br>å…¶ä»£ç å†™çš„å¾ˆæ¼‚äº®ï¼Œå»ºè®®å¤§å®¶å»é˜…è¯»ï¼Œå­¦ä¹ ã€‚</p>
<h2 id="ä¼˜ç‚¹ï¼š-3"><a href="#ä¼˜ç‚¹ï¼š-3" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h2><p>åŸºäºsingle-SPAå°è£…ï¼Œå¼€ç®±å³ç”¨<br>æŠ€æœ¯æ— å…³ï¼Œå¤šæŠ€æœ¯æ ˆå¯ä»¥å…±å­˜<br>html entryæ¥å…¥ï¼Œè§£è€¦åŸºåº§å’Œå­æœåŠ¡<br>æ ·å¼éš”ç¦»<br>jsæ²™ç®±æœºåˆ¶<br>èµ„æºé¢„åŠ è½½<br>æä¾›å…¨å±€é”™è¯¯æœºåˆ¶<br>æä¾›è·¨æœåŠ¡é€šä¿¡æœºåˆ¶<br>æä¾›æœåŠ¡çš„ç”Ÿå‘½å‘¨æœŸ<br>è„±ç¦»åŸºåº§ï¼Œå•ä¸ªæœåŠ¡é™çº§è¿è¡Œç­–ç•¥å¤„ç†</p>
<h2 id="ç¼ºç‚¹ï¼š-4"><a href="#ç¼ºç‚¹ï¼š-4" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h2><p>å…±äº«è¿è¡Œæ—¶ç¼“å­˜æ”¯æŒ<br>ä¸å…¼å®¹ieç³»åˆ— </p>
<h1 id="ç°æœ‰å¸‚é¢æ¡†æ¶"><a href="#ç°æœ‰å¸‚é¢æ¡†æ¶" class="headerlink" title="ç°æœ‰å¸‚é¢æ¡†æ¶"></a>ç°æœ‰å¸‚é¢æ¡†æ¶</h1><p>1.single-spa å°†å¤šä¸ªå•é¡µé¢åº”ç”¨èšåˆä¸ºä¸€ä¸ªæ•´ä½“åº”ç”¨çš„JavaScript å¾®å‰ç«¯æ¡†æ¶<br>2.qiankun èš‚èšé‡‘æœï¼Œåœ¨ single-spa çš„åŸºç¡€ä¸Šå°è£…<br>3.MicroApp äº¬ä¸œï¼Œä¸€æ¬¾åŸºäºWebComponentçš„æ€æƒ³ï¼Œè½»é‡ã€é«˜æ•ˆã€åŠŸèƒ½å¼ºå¤§çš„å¾®å‰ç«¯æ¡†æ¶<br>4.æ— ç•Œ è…¾è®¯æ— ç•Œå¾®å‰ç«¯æ–¹æ¡ˆåŸºäº WebComponent å®¹å™¨ + iframe æ²™ç®±<br>5.EMP YYè¯­éŸ³ï¼ŒåŸºäºWebpack5 Module Federation é™¤äº†å…·å¤‡å¾®å‰ç«¯çš„èƒ½åŠ›å¤–ï¼Œè¿˜å®ç°äº†è·¨åº”ç”¨çŠ¶æ€å…±äº«ã€è·¨æ¡†æ¶ç»„ä»¶è°ƒç”¨çš„èƒ½åŠ›<br>6.icestark é˜¿é‡Œå‡ºå“ï¼Œæ˜¯ä¸€ä¸ªé¢å‘å¤§å‹ç³»ç»Ÿçš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆ<br>7.garfish å­—èŠ‚è·³åŠ¨<br>8.magic-microservices ä¸€æ¬¾åŸºäº Web Components çš„è½»é‡çº§çš„å¾®å‰ç«¯å·¥å‚å‡½æ•°</p>
<h1 id="ç›¸å…³"><a href="#ç›¸å…³" class="headerlink" title="ç›¸å…³"></a>ç›¸å…³</h1><p>å¾®å‰ç«¯æ¶æ„æ—¨åœ¨è§£å†³å•ä½“åº”ç”¨åœ¨ä¸€ä¸ªç›¸å¯¹é•¿çš„æ—¶é—´è·¨åº¦ä¸‹ï¼Œç”±äºå‚ä¸çš„äººå‘˜ã€å›¢é˜Ÿçš„å¢å¤šã€å˜è¿ï¼Œä»ä¸€ä¸ªæ™®é€šåº”ç”¨æ¼”å˜æˆä¸€ä¸ªå·¨çŸ³åº”ç”¨(Frontend Monolith)åï¼Œéšä¹‹è€Œæ¥çš„åº”ç”¨ä¸å¯ç»´æŠ¤çš„é—®é¢˜ã€‚è¿™ç±»é—®é¢˜åœ¨ä¼ä¸šçº§ Web åº”ç”¨ä¸­å°¤å…¶å¸¸è§ã€‚<br>æ›´å¤šå…³äºå¾®å‰ç«¯çš„ç›¸å…³ä»‹ç»ï¼Œæ¨èå¤§å®¶å¯ä»¥å»çœ‹è¿™å‡ ç¯‡æ–‡ç« ï¼š<br>Micro Frontends [<a href="https://micro-frontends.org/]">https://micro-frontends.org/]</a><br>Micro Frontends from martinfowler.com [<a href="https://martinfowler.com/articles/micro-frontends.html]">https://martinfowler.com/articles/micro-frontends.html]</a></p>
]]></content>
      <categories>
        <category>çŸ¥è¯†ç‚¹</category>
      </categories>
      <tags>
        <tag>å¾®å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>æ€§èƒ½ä¼˜åŒ–</title>
    <url>/2023/04/03/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<h1 id="ä¸€ã€ä»£ç å±‚é¢çš„ä¼˜åŒ–"><a href="#ä¸€ã€ä»£ç å±‚é¢çš„ä¼˜åŒ–" class="headerlink" title="ä¸€ã€ä»£ç å±‚é¢çš„ä¼˜åŒ–"></a>ä¸€ã€ä»£ç å±‚é¢çš„ä¼˜åŒ–</h1><h2 id="1-1ã€-v-if-å’Œ-v-show-åŒºåˆ†ä½¿ç”¨åœºæ™¯"><a href="#1-1ã€-v-if-å’Œ-v-show-åŒºåˆ†ä½¿ç”¨åœºæ™¯" class="headerlink" title="1.1ã€ v-if å’Œ v-show åŒºåˆ†ä½¿ç”¨åœºæ™¯"></a>1.1ã€ v-if å’Œ v-show åŒºåˆ†ä½¿ç”¨åœºæ™¯</h2><p>v-if æ˜¯ çœŸæ­£ çš„æ¡ä»¶æ¸²æŸ“ï¼Œå› ä¸ºå®ƒä¼šç¡®ä¿åœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­æ¡ä»¶å—å†…çš„äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶é€‚å½“åœ°è¢«é”€æ¯å’Œé‡å»ºï¼›ä¹Ÿæ˜¯æƒ°æ€§çš„ï¼šå¦‚æœåœ¨åˆå§‹æ¸²æŸ“æ—¶æ¡ä»¶ä¸ºå‡ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åšâ€”â€”ç›´åˆ°æ¡ä»¶ç¬¬ä¸€æ¬¡å˜ä¸ºçœŸæ—¶ï¼Œæ‰ä¼šå¼€å§‹æ¸²æŸ“æ¡ä»¶å—ã€‚<br>v-show å°±ç®€å•å¾—å¤šï¼Œ ä¸ç®¡åˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Œå…ƒç´ æ€»æ˜¯ä¼šè¢«æ¸²æŸ“ï¼Œå¹¶ä¸”åªæ˜¯ç®€å•åœ°åŸºäº CSS çš„ display å±æ€§è¿›è¡Œåˆ‡æ¢ã€‚<br>æ‰€ä»¥ï¼Œv-if é€‚ç”¨äºåœ¨è¿è¡Œæ—¶å¾ˆå°‘æ”¹å˜æ¡ä»¶ï¼Œä¸éœ€è¦é¢‘ç¹åˆ‡æ¢æ¡ä»¶çš„åœºæ™¯ï¼›v-show åˆ™é€‚ç”¨äºéœ€è¦éå¸¸é¢‘ç¹åˆ‡æ¢æ¡ä»¶çš„åœºæ™¯ã€‚</p>
<h2 id="1-2ã€computed-å’Œ-watch-åŒºåˆ†ä½¿ç”¨åœºæ™¯"><a href="#1-2ã€computed-å’Œ-watch-åŒºåˆ†ä½¿ç”¨åœºæ™¯" class="headerlink" title="1.2ã€computed å’Œ watch åŒºåˆ†ä½¿ç”¨åœºæ™¯"></a>1.2ã€computed å’Œ watch åŒºåˆ†ä½¿ç”¨åœºæ™¯</h2><p>computedï¼š æ˜¯è®¡ç®—å±æ€§ï¼Œä¾èµ–å…¶å®ƒå±æ€§å€¼ï¼Œå¹¶ä¸” computed çš„å€¼æœ‰ç¼“å­˜ï¼Œåªæœ‰å®ƒä¾èµ–çš„å±æ€§å€¼å‘ç”Ÿæ”¹å˜ï¼Œä¸‹ä¸€æ¬¡è·å– computed çš„å€¼æ—¶æ‰ä¼šé‡æ–°è®¡ç®— computed çš„å€¼ï¼›<br>watchï¼š æ›´å¤šçš„æ˜¯ã€Œè§‚å¯Ÿã€çš„ä½œç”¨ï¼Œç±»ä¼¼äºæŸäº›æ•°æ®çš„ç›‘å¬å›è°ƒ ï¼Œæ¯å½“ç›‘å¬çš„æ•°æ®å˜åŒ–æ—¶éƒ½ä¼šæ‰§è¡Œå›è°ƒè¿›è¡Œåç»­æ“ä½œï¼›<br>è¿ç”¨åœºæ™¯ï¼š<br>å½“æˆ‘ä»¬éœ€è¦è¿›è¡Œæ•°å€¼è®¡ç®—ï¼Œå¹¶ä¸”ä¾èµ–äºå…¶å®ƒæ•°æ®æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ computedï¼Œå› ä¸ºå¯ä»¥åˆ©ç”¨ computed çš„ç¼“å­˜ç‰¹æ€§ï¼Œé¿å…æ¯æ¬¡è·å–å€¼æ—¶ï¼Œéƒ½è¦é‡æ–°è®¡ç®—ï¼›<br>å½“æˆ‘ä»¬éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶ï¼Œåº”è¯¥ä½¿ç”¨ watchï¼Œä½¿ç”¨ watch é€‰é¡¹å…è®¸æˆ‘ä»¬æ‰§è¡Œå¼‚æ­¥æ“ä½œ ( è®¿é—®ä¸€ä¸ª API )ï¼Œé™åˆ¶æˆ‘ä»¬æ‰§è¡Œè¯¥æ“ä½œçš„é¢‘ç‡ï¼Œå¹¶åœ¨æˆ‘ä»¬å¾—åˆ°æœ€ç»ˆç»“æœå‰ï¼Œè®¾ç½®ä¸­é—´çŠ¶æ€ã€‚è¿™äº›éƒ½æ˜¯è®¡ç®—å±æ€§æ— æ³•åšåˆ°çš„ã€‚</p>
<h2 id="1-3ã€v-for-éå†å¿…é¡»ä¸º-item-æ·»åŠ -keyï¼Œä¸”é¿å…åŒæ—¶ä½¿ç”¨-v"><a href="#1-3ã€v-for-éå†å¿…é¡»ä¸º-item-æ·»åŠ -keyï¼Œä¸”é¿å…åŒæ—¶ä½¿ç”¨-v" class="headerlink" title="1.3ã€v-for éå†å¿…é¡»ä¸º item æ·»åŠ  keyï¼Œä¸”é¿å…åŒæ—¶ä½¿ç”¨ v-"></a>1.3ã€v-for éå†å¿…é¡»ä¸º item æ·»åŠ  keyï¼Œä¸”é¿å…åŒæ—¶ä½¿ç”¨ v-</h2><p>ï¼ˆ1ï¼‰v-for éå†å¿…é¡»ä¸º item æ·»åŠ  key<br>åœ¨åˆ—è¡¨æ•°æ®è¿›è¡Œéå†æ¸²æŸ“æ—¶ï¼Œéœ€è¦ä¸ºæ¯ä¸€é¡¹ item è®¾ç½®å”¯ä¸€ key å€¼ï¼Œæ–¹ä¾¿ Vue.js å†…éƒ¨æœºåˆ¶ç²¾å‡†æ‰¾åˆ°è¯¥æ¡åˆ—è¡¨æ•°æ®ã€‚å½“ state æ›´æ–°æ—¶ï¼Œæ–°çš„çŠ¶æ€å€¼å’Œæ—§çš„çŠ¶æ€å€¼å¯¹æ¯”ï¼Œè¾ƒå¿«åœ°å®šä½åˆ° diff ã€‚<br>ï¼ˆ2ï¼‰v-for éå†é¿å…åŒæ—¶ä½¿ç”¨ v-if<br>v-for æ¯” v-if ä¼˜å…ˆçº§é«˜ï¼Œå¦‚æœæ¯ä¸€æ¬¡éƒ½éœ€è¦éå†æ•´ä¸ªæ•°ç»„ï¼Œå°†ä¼šå½±å“é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯å½“ä¹‹éœ€è¦æ¸²æŸ“å¾ˆå°ä¸€éƒ¨åˆ†çš„æ—¶å€™ï¼Œå¿…è¦æƒ…å†µä¸‹åº”è¯¥æ›¿æ¢æˆ computed å±æ€§ã€‚<br>æ¨èï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li</span><br><span class="line">    v-for=&quot;user in activeUsers&quot;</span><br><span class="line">    :key=&quot;user.id&quot;&gt;</span><br><span class="line">    &#123;&#123; user.name &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">computed: &#123;</span><br><span class="line">  activeUsers: function () &#123;</span><br><span class="line">    return this.users.filter(function (user) &#123;</span><br><span class="line">	 return user.isActive</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸æ¨èï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li</span><br><span class="line">    v-for=&quot;user in users&quot;</span><br><span class="line">    v-if=&quot;user.isActive&quot;</span><br><span class="line">    :key=&quot;user.id&quot;&gt;</span><br><span class="line">    &#123;&#123; user.name &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<h2 id="1-4ã€é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–"><a href="#1-4ã€é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="1.4ã€é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–"></a>1.4ã€é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–</h2><p>Vue ä¼šé€šè¿‡ Object.defineProperty å¯¹æ•°æ®è¿›è¡ŒåŠ«æŒï¼Œæ¥å®ç°è§†å›¾å“åº”æ•°æ®çš„å˜åŒ–ï¼Œç„¶è€Œæœ‰äº›æ—¶å€™æˆ‘ä»¬çš„ç»„ä»¶å°±æ˜¯çº¯ç²¹çš„æ•°æ®å±•ç¤ºï¼Œä¸ä¼šæœ‰ä»»ä½•æ”¹å˜ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ Vue æ¥åŠ«æŒæˆ‘ä»¬çš„æ•°æ®ï¼Œåœ¨å¤§é‡æ•°æ®å±•ç¤ºçš„æƒ…å†µä¸‹ï¼Œè¿™èƒ½å¤Ÿå¾ˆæ˜æ˜¾çš„å‡å°‘ç»„ä»¶åˆå§‹åŒ–çš„æ—¶é—´ï¼Œé‚£å¦‚ä½•ç¦æ­¢ Vue åŠ«æŒæˆ‘ä»¬çš„æ•°æ®å‘¢ï¼Ÿå¯ä»¥é€šè¿‡ Object.freeze æ–¹æ³•æ¥å†»ç»“ä¸€ä¸ªå¯¹è±¡ï¼Œä¸€æ—¦è¢«å†»ç»“çš„å¯¹è±¡å°±å†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹äº†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  data: () =&gt; (&#123;</span><br><span class="line">    users: &#123;&#125;</span><br><span class="line">  &#125;),</span><br><span class="line">  async created() &#123;</span><br><span class="line">    const users = await axios.get(&quot;/api/users&quot;);</span><br><span class="line">    this.users = Object.freeze(users);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-5ã€äº‹ä»¶çš„é”€æ¯"><a href="#1-5ã€äº‹ä»¶çš„é”€æ¯" class="headerlink" title="1.5ã€äº‹ä»¶çš„é”€æ¯"></a>1.5ã€äº‹ä»¶çš„é”€æ¯</h2><p>Vue ç»„ä»¶é”€æ¯æ—¶ï¼Œä¼šè‡ªåŠ¨æ¸…ç†å®ƒä¸å…¶å®ƒå®ä¾‹çš„è¿æ¥ï¼Œè§£ç»‘å®ƒçš„å…¨éƒ¨æŒ‡ä»¤åŠäº‹ä»¶ç›‘å¬å™¨ï¼Œä½†æ˜¯ä»…é™äºç»„ä»¶æœ¬èº«çš„äº‹ä»¶ã€‚ å¦‚æœåœ¨ js å†…ä½¿ç”¨ addEventListene ç­‰æ–¹å¼æ˜¯ä¸ä¼šè‡ªåŠ¨é”€æ¯çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç»„ä»¶é”€æ¯æ—¶æ‰‹åŠ¨ç§»é™¤è¿™äº›äº‹ä»¶çš„ç›‘å¬ï¼Œä»¥å…é€ æˆå†…å­˜æ³„éœ²ï¼Œå¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">created() &#123;</span><br><span class="line">  addEventListener(&#x27;click&#x27;, this.click, false)</span><br><span class="line">&#125;,</span><br><span class="line">beforeDestroy() &#123;</span><br><span class="line">  removeEventListener(&#x27;click&#x27;, this.click, false)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-6ã€å›¾ç‰‡èµ„æºæ‡’åŠ è½½"><a href="#1-6ã€å›¾ç‰‡èµ„æºæ‡’åŠ è½½" class="headerlink" title="1.6ã€å›¾ç‰‡èµ„æºæ‡’åŠ è½½"></a>1.6ã€å›¾ç‰‡èµ„æºæ‡’åŠ è½½</h2><p>å¯¹äºå›¾ç‰‡è¿‡å¤šçš„é¡µé¢ï¼Œä¸ºäº†åŠ é€Ÿé¡µé¢åŠ è½½é€Ÿåº¦ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦å°†é¡µé¢å†…æœªå‡ºç°åœ¨å¯è§†åŒºåŸŸå†…çš„å›¾ç‰‡å…ˆä¸åšåŠ è½½ï¼Œ ç­‰åˆ°æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸåå†å»åŠ è½½ã€‚è¿™æ ·å¯¹äºé¡µé¢åŠ è½½æ€§èƒ½ä¸Šä¼šæœ‰å¾ˆå¤§çš„æå‡ï¼Œä¹Ÿæé«˜äº†ç”¨æˆ·ä½“éªŒã€‚æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Vue çš„ vue-lazyload æ’ä»¶ï¼š<br>ï¼ˆ1ï¼‰å®‰è£…æ’ä»¶<br>npm install vue-lazyload â€“save-dev<br>ï¼ˆ2ï¼‰åœ¨å…¥å£æ–‡ä»¶ man.js ä¸­å¼•å…¥å¹¶ä½¿ç”¨<br>import VueLazyload from â€˜vue-lazyloadâ€™<br>ç„¶åå† vue ä¸­ç›´æ¥ä½¿ç”¨<br>Vue.use(VueLazyload)<br>æˆ–è€…æ·»åŠ è‡ªå®šä¹‰é€‰é¡¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Vue.use(VueLazyload, &#123;</span><br><span class="line">  preLoad: 1.3,</span><br><span class="line">  error: &#x27;dist/error.png&#x27;,</span><br><span class="line">  loading: &#x27;dist/loading.gif&#x27;,</span><br><span class="line">  attempt: 1</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>3ï¼‰åœ¨ vue æ–‡ä»¶ä¸­å°† img æ ‡ç­¾çš„ src å±æ€§ç›´æ¥æ”¹ä¸º v-lazy ï¼Œä»è€Œå°†å›¾ç‰‡æ˜¾ç¤ºæ–¹å¼æ›´æ”¹ä¸ºæ‡’åŠ è½½æ˜¾ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;img v-lazy=&quot;/static/img/1.png&quot;&gt;</span><br></pre></td></tr></table></figure>
<h2 id="1-7ã€è·¯ç”±æ‡’åŠ è½½"><a href="#1-7ã€è·¯ç”±æ‡’åŠ è½½" class="headerlink" title="1.7ã€è·¯ç”±æ‡’åŠ è½½"></a>1.7ã€è·¯ç”±æ‡’åŠ è½½</h2><p>Vue æ˜¯å•é¡µé¢åº”ç”¨ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šçš„è·¯ç”±å¼•å…¥ ï¼Œè¿™æ ·ä½¿ç”¨ webpcak æ‰“åŒ…åçš„æ–‡ä»¶å¾ˆå¤§ï¼Œå½“è¿›å…¥é¦–é¡µæ—¶ï¼ŒåŠ è½½çš„èµ„æºè¿‡å¤šï¼Œé¡µé¢ä¼šå‡ºç°ç™½å±çš„æƒ…å†µï¼Œä¸åˆ©äºç”¨æˆ·ä½“éªŒã€‚å¦‚æœæˆ‘ä»¬èƒ½æŠŠä¸åŒè·¯ç”±å¯¹åº”çš„ç»„ä»¶åˆ†å‰²æˆä¸åŒçš„ä»£ç å—ï¼Œç„¶åå½“è·¯ç”±è¢«è®¿é—®çš„æ—¶å€™æ‰åŠ è½½å¯¹åº”çš„ç»„ä»¶ï¼Œè¿™æ ·å°±æ›´åŠ é«˜æ•ˆäº†ã€‚è¿™æ ·ä¼šå¤§å¤§æé«˜é¦–å±æ˜¾ç¤ºçš„é€Ÿåº¦ï¼Œä½†æ˜¯å¯èƒ½å…¶ä»–çš„é¡µé¢çš„é€Ÿåº¦å°±ä¼šé™ä¸‹æ¥ã€‚<br>è·¯ç”±æ‡’åŠ è½½ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const Foo = () =&gt; import(&#x27;./Foo.vue&#x27;)</span><br><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123; path: &#x27;/foo&#x27;, component: Foo &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="1-8ã€ç¬¬ä¸‰æ–¹æ’ä»¶çš„æŒ‰éœ€å¼•å…¥"><a href="#1-8ã€ç¬¬ä¸‰æ–¹æ’ä»¶çš„æŒ‰éœ€å¼•å…¥" class="headerlink" title="1.8ã€ç¬¬ä¸‰æ–¹æ’ä»¶çš„æŒ‰éœ€å¼•å…¥"></a>1.8ã€ç¬¬ä¸‰æ–¹æ’ä»¶çš„æŒ‰éœ€å¼•å…¥</h2><p>æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ç»å¸¸ä¼šéœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥å¼•å…¥æ•´ä¸ªæ’ä»¶ï¼Œä¼šå¯¼è‡´é¡¹ç›®çš„ä½“ç§¯å¤ªå¤§ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© babel-plugin-component ï¼Œç„¶åå¯ä»¥åªå¼•å…¥éœ€è¦çš„ç»„ä»¶ï¼Œä»¥è¾¾åˆ°å‡å°é¡¹ç›®ä½“ç§¯çš„ç›®çš„ã€‚ä»¥ä¸‹ä¸ºé¡¹ç›®ä¸­å¼•å…¥ element-ui ç»„ä»¶åº“ä¸ºä¾‹ï¼š<br>ï¼ˆ1ï¼‰é¦–å…ˆï¼Œå®‰è£… babel-plugin-component ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install babel-plugin-component -D</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰ç„¶åï¼Œå°† .babelrc ä¿®æ”¹ä¸ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [[&quot;es2015&quot;, &#123; &quot;modules&quot;: false &#125;]],</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    [</span><br><span class="line">      &quot;component&quot;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;libraryName&quot;: &quot;element-ui&quot;,</span><br><span class="line">        &quot;styleLibraryName&quot;: &quot;theme-chalk&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ3ï¼‰åœ¨ main.js ä¸­å¼•å…¥éƒ¨åˆ†ç»„ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;;</span><br><span class="line">import &#123; Button, Select &#125; from &#x27;element-ui&#x27;;</span><br><span class="line">Vue.use(Button)</span><br><span class="line">Vue.use(Select)</span><br></pre></td></tr></table></figure>
<h2 id="1-9ã€ä¼˜åŒ–æ— é™åˆ—è¡¨æ€§èƒ½"><a href="#1-9ã€ä¼˜åŒ–æ— é™åˆ—è¡¨æ€§èƒ½" class="headerlink" title="1.9ã€ä¼˜åŒ–æ— é™åˆ—è¡¨æ€§èƒ½"></a>1.9ã€ä¼˜åŒ–æ— é™åˆ—è¡¨æ€§èƒ½</h2><p>å¦‚æœä½ çš„åº”ç”¨å­˜åœ¨éå¸¸é•¿æˆ–è€…æ— é™æ»šåŠ¨çš„åˆ—è¡¨ï¼Œé‚£ä¹ˆéœ€è¦é‡‡ç”¨çª—å£åŒ–çš„æŠ€æœ¯æ¥ä¼˜åŒ–æ€§èƒ½ï¼Œåªéœ€è¦æ¸²æŸ“å°‘éƒ¨åˆ†åŒºåŸŸçš„å†…å®¹ï¼Œå‡å°‘é‡æ–°æ¸²æŸ“ç»„ä»¶å’Œåˆ›å»ºdomèŠ‚ç‚¹çš„æ—¶é—´ã€‚ ä½ å¯ä»¥å‚è€ƒä»¥ä¸‹å¼€æºé¡¹ç›® vue-virtual-scroll-list å’Œ vue-virtual-scrolleræ¥ä¼˜åŒ–è¿™ç§æ— é™åˆ—è¡¨çš„åœºæ™¯çš„ã€‚</p>
<h2 id="1-10ã€æœåŠ¡ç«¯æ¸²æŸ“-SSR-or-é¢„æ¸²æŸ“"><a href="#1-10ã€æœåŠ¡ç«¯æ¸²æŸ“-SSR-or-é¢„æ¸²æŸ“" class="headerlink" title="1.10ã€æœåŠ¡ç«¯æ¸²æŸ“ SSR or é¢„æ¸²æŸ“"></a>1.10ã€æœåŠ¡ç«¯æ¸²æŸ“ SSR or é¢„æ¸²æŸ“</h2><p>æœåŠ¡ç«¯æ¸²æŸ“æ˜¯æŒ‡ Vue åœ¨å®¢æˆ·ç«¯å°†æ ‡ç­¾æ¸²æŸ“æˆçš„æ•´ä¸ª html ç‰‡æ®µçš„å·¥ä½œåœ¨æœåŠ¡ç«¯å®Œæˆï¼ŒæœåŠ¡ç«¯å½¢æˆçš„ html ç‰‡æ®µç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯è¿™ä¸ªè¿‡ç¨‹å°±å«åšæœåŠ¡ç«¯æ¸²æŸ“ã€‚<br>ï¼ˆ1ï¼‰æœåŠ¡ç«¯æ¸²æŸ“çš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ›´å¥½çš„ SEOï¼š å› ä¸º SPA é¡µé¢çš„å†…å®¹æ˜¯é€šè¿‡ Ajax è·å–ï¼Œè€Œæœç´¢å¼•æ“çˆ¬å–å·¥å…·å¹¶ä¸ä¼šç­‰å¾… Ajax å¼‚æ­¥å®Œæˆåå†æŠ“å–é¡µé¢å†…å®¹ï¼Œæ‰€ä»¥åœ¨ SPA ä¸­æ˜¯æŠ“å–ä¸åˆ°é¡µé¢é€šè¿‡ Ajax è·å–åˆ°çš„å†…å®¹ï¼›è€Œ SSR æ˜¯ç›´æ¥ç”±æœåŠ¡ç«¯è¿”å›å·²ç»æ¸²æŸ“å¥½çš„é¡µé¢ï¼ˆæ•°æ®å·²ç»åŒ…å«åœ¨é¡µé¢ä¸­ï¼‰ï¼Œæ‰€ä»¥æœç´¢å¼•æ“çˆ¬å–å·¥å…·å¯ä»¥æŠ“å–æ¸²æŸ“å¥½çš„é¡µé¢ï¼›</li>
<li>æ›´å¿«çš„å†…å®¹åˆ°è¾¾æ—¶é—´ï¼ˆé¦–å±åŠ è½½æ›´å¿«ï¼‰ï¼š SPA ä¼šç­‰å¾…æ‰€æœ‰ Vue ç¼–è¯‘åçš„ js æ–‡ä»¶éƒ½ä¸‹è½½å®Œæˆåï¼Œæ‰å¼€å§‹è¿›è¡Œé¡µé¢çš„æ¸²æŸ“ï¼Œæ–‡ä»¶ä¸‹è½½ç­‰éœ€è¦ä¸€å®šçš„æ—¶é—´ç­‰ï¼Œæ‰€ä»¥é¦–å±æ¸²æŸ“éœ€è¦ä¸€å®šçš„æ—¶é—´ï¼›SSR ç›´æ¥ç”±æœåŠ¡ç«¯æ¸²æŸ“å¥½é¡µé¢ç›´æ¥è¿”å›æ˜¾ç¤ºï¼Œæ— éœ€ç­‰å¾…ä¸‹è½½ js æ–‡ä»¶åŠå†å»æ¸²æŸ“ç­‰ï¼Œæ‰€ä»¥ SSR æœ‰æ›´å¿«çš„å†…å®¹åˆ°è¾¾æ—¶é—´ï¼›<br>ï¼ˆ2ï¼‰æœåŠ¡ç«¯æ¸²æŸ“çš„ç¼ºç‚¹ï¼š</li>
<li>æ›´å¤šçš„å¼€å‘æ¡ä»¶é™åˆ¶ï¼š ä¾‹å¦‚æœåŠ¡ç«¯æ¸²æŸ“åªæ”¯æŒ beforCreate å’Œ created ä¸¤ä¸ªé’©å­å‡½æ•°ï¼Œè¿™ä¼šå¯¼è‡´ä¸€äº›å¤–éƒ¨æ‰©å±•åº“éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œæ‰èƒ½åœ¨æœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨ç¨‹åºä¸­è¿è¡Œï¼›å¹¶ä¸”ä¸å¯ä»¥éƒ¨ç½²åœ¨ä»»ä½•é™æ€æ–‡ä»¶æœåŠ¡å™¨ä¸Šçš„å®Œå…¨é™æ€å•é¡µé¢åº”ç”¨ç¨‹åº SPA ä¸åŒï¼ŒæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨ç¨‹åºï¼Œéœ€è¦å¤„äº Node.js server è¿è¡Œç¯å¢ƒï¼›</li>
<li>æ›´å¤šçš„æœåŠ¡å™¨è´Ÿè½½ï¼šåœ¨ Node.js ä¸­æ¸²æŸ“å®Œæ•´çš„åº”ç”¨ç¨‹åºï¼Œæ˜¾ç„¶ä¼šæ¯”ä»…ä»…æä¾›é™æ€æ–‡ä»¶çš„ server æ›´åŠ å¤§é‡å ç”¨CPU èµ„æºï¼Œå› æ­¤å¦‚æœä½ é¢„æ–™åœ¨é«˜æµé‡ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œè¯·å‡†å¤‡ç›¸åº”çš„æœåŠ¡å™¨è´Ÿè½½ï¼Œå¹¶æ˜æ™ºåœ°é‡‡ç”¨ç¼“å­˜ç­–ç•¥ã€‚<br>å¦‚æœä½ çš„é¡¹ç›®çš„ SEO å’Œ é¦–å±æ¸²æŸ“æ˜¯è¯„ä»·é¡¹ç›®çš„å…³é”®æŒ‡æ ‡ï¼Œé‚£ä¹ˆä½ çš„é¡¹ç›®å°±éœ€è¦æœåŠ¡ç«¯æ¸²æŸ“æ¥å¸®åŠ©ä½ å®ç°æœ€ä½³çš„åˆå§‹åŠ è½½æ€§èƒ½å’Œ SEOï¼Œå…·ä½“çš„ Vue SSR å¦‚ä½•å®ç°ï¼Œå¯ä»¥å‚è€ƒä½œè€…çš„å¦ä¸€ç¯‡æ–‡ç« ã€ŠVue SSR è¸©å‘ä¹‹æ—…ã€‹ã€‚å¦‚æœä½ çš„ Vue é¡¹ç›®åªéœ€æ”¹å–„å°‘æ•°è¥é”€é¡µé¢ï¼ˆä¾‹å¦‚ /ï¼Œ /aboutï¼Œ /contact ç­‰ï¼‰çš„ SEOï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦é¢„æ¸²æŸ“ï¼Œåœ¨æ„å»ºæ—¶ (build time) ç®€å•åœ°ç”Ÿæˆé’ˆå¯¹ç‰¹å®šè·¯ç”±çš„é™æ€ HTML æ–‡ä»¶ã€‚ä¼˜ç‚¹æ˜¯è®¾ç½®é¢„æ¸²æŸ“æ›´ç®€å•ï¼Œå¹¶å¯ä»¥å°†ä½ çš„å‰ç«¯ä½œä¸ºä¸€ä¸ªå®Œå…¨é™æ€çš„ç«™ç‚¹ï¼Œå…·ä½“ä½ å¯ä»¥ä½¿ç”¨ prerender-spa-plugin å°±å¯ä»¥è½»æ¾åœ°æ·»åŠ é¢„æ¸²æŸ“ ã€‚</li>
</ul>
<h1 id="äºŒã€Webpack-å±‚é¢çš„ä¼˜åŒ–"><a href="#äºŒã€Webpack-å±‚é¢çš„ä¼˜åŒ–" class="headerlink" title="äºŒã€Webpack å±‚é¢çš„ä¼˜åŒ–"></a>äºŒã€Webpack å±‚é¢çš„ä¼˜åŒ–</h1><h2 id="2-1ã€Webpack-å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©"><a href="#2-1ã€Webpack-å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©" class="headerlink" title="2.1ã€Webpack å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©"></a>2.1ã€Webpack å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©</h2><p>åœ¨vueé¡¹ç›®ä¸­é™¤äº†å¯ä»¥åœ¨webpack.base.conf.jsä¸­url-loaderä¸­è®¾ç½®limitå¤§å°æ¥å¯¹å›¾ç‰‡å¤„ç†ï¼Œå¯¹å°limit çš„å›¾ç‰‡è½¬åŒ–ä¸ºbase64 æ ¼å¼ï¼Œå…¶ä½™çš„ä¸åšæ“ä½œã€‚æ‰€ä»¥å¯¹æœ‰äº›è¾ƒå¤§çš„å›¾ç‰‡èµ„æºï¼Œåœ¨è¯·æ±‚èµ„æºçš„æ—¶å€™ï¼ŒåŠ è½½ä¼šå¾ˆæ…¢ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ image-webpack-loaderæ¥å‹ç¼©å›¾ç‰‡ï¼š<br>ï¼ˆ1ï¼‰é¦–å…ˆï¼Œå®‰è£… image-webpack-loader ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install image-webpack-loader --save-dev</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰ç„¶åï¼Œåœ¨ webpack.base.conf.js ä¸­è¿›è¡Œé…ç½®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: /.(png|jpe?g|gif|svg)(?.*)?$/,</span><br><span class="line">  use:[</span><br><span class="line">    &#123;</span><br><span class="line">    loader: &#x27;url-loader&#x27;,</span><br><span class="line">    options: &#123;</span><br><span class="line">      limit: 10000,</span><br><span class="line">      name: utils.assetsPath(&#x27;img/[name].[hash:7].[ext]&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      loader: &#x27;image-webpack-loader&#x27;,</span><br><span class="line">      options: &#123;</span><br><span class="line">        bypassOnDebug: true,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-2ã€å‡å°‘-ES6-è½¬ä¸º-ES5-çš„å†—ä½™ä»£ç "><a href="#2-2ã€å‡å°‘-ES6-è½¬ä¸º-ES5-çš„å†—ä½™ä»£ç " class="headerlink" title="2.2ã€å‡å°‘ ES6 è½¬ä¸º ES5 çš„å†—ä½™ä»£ç "></a>2.2ã€å‡å°‘ ES6 è½¬ä¸º ES5 çš„å†—ä½™ä»£ç </h2><p>Babel æ’ä»¶ä¼šåœ¨å°† ES6 ä»£ç è½¬æ¢æˆ ES5 ä»£ç æ—¶ä¼šæ³¨å…¥ä¸€äº›è¾…åŠ©å‡½æ•°ï¼Œä¾‹å¦‚ä¸‹é¢çš„ ES6 ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class HelloWebpack extends Component&#123;...&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç å†è¢«è½¬æ¢æˆèƒ½æ­£å¸¸è¿è¡Œçš„ ES5 ä»£ç æ—¶éœ€è¦ä»¥ä¸‹ä¸¤ä¸ªè¾…åŠ©å‡½æ•°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">babel-runtime/helpers/createClass  // ç”¨äºå®ç° class è¯­æ³•</span><br><span class="line">babel-runtime/helpers/inherits  // ç”¨äºå®ç° extends è¯­æ³•  </span><br></pre></td></tr></table></figure>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ Babel ä¼šåœ¨æ¯ä¸ªè¾“å‡ºæ–‡ä»¶ä¸­å†…åµŒè¿™äº›ä¾èµ–çš„è¾…åŠ©å‡½æ•°ä»£ç ï¼Œå¦‚æœå¤šä¸ªæºä»£ç æ–‡ä»¶éƒ½ä¾èµ–è¿™äº›è¾…åŠ©å‡½æ•°ï¼Œé‚£ä¹ˆè¿™äº›è¾…åŠ©å‡½æ•°çš„ä»£ç å°†ä¼šå‡ºç°å¾ˆå¤šæ¬¡ï¼Œé€ æˆä»£ç å†—ä½™ã€‚ä¸ºäº†ä¸è®©è¿™äº›è¾…åŠ©å‡½æ•°çš„ä»£ç é‡å¤å‡ºç°ï¼Œå¯ä»¥åœ¨ä¾èµ–å®ƒä»¬æ—¶é€šè¿‡ require(â€˜babel-runtime/helpers/createClassâ€™) çš„æ–¹å¼å¯¼å…¥ï¼Œè¿™æ ·å°±èƒ½åšåˆ°åªè®©å®ƒä»¬å‡ºç°ä¸€æ¬¡ã€‚babel-plugin-transform-runtime æ’ä»¶å°±æ˜¯ç”¨æ¥å®ç°è¿™ä¸ªä½œç”¨çš„ï¼Œå°†ç›¸å…³è¾…åŠ©å‡½æ•°è¿›è¡Œæ›¿æ¢æˆå¯¼å…¥è¯­å¥ï¼Œä»è€Œå‡å° babel ç¼–è¯‘å‡ºæ¥çš„ä»£ç çš„æ–‡ä»¶å¤§å°ã€‚<br>ï¼ˆ1ï¼‰é¦–å…ˆï¼Œå®‰è£… babel-plugin-transform-runtime ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install babel-plugin-transform-runtime --save-dev</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰ç„¶åï¼Œä¿®æ”¹ .babelrc é…ç½®æ–‡ä»¶ä¸ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;plugins&quot;: [</span><br><span class="line">    &quot;transform-runtime&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¦çœ‹æ’ä»¶çš„æ›´å¤šè¯¦ç»†å†…å®¹ï¼Œå¯ä»¥æŸ¥çœ‹babel-plugin-transform-runtimeçš„è¯¦ç»†ä»‹ç»ã€‚</p>
<h2 id="2-3ã€æå–å…¬å…±ä»£ç "><a href="#2-3ã€æå–å…¬å…±ä»£ç " class="headerlink" title="2.3ã€æå–å…¬å…±ä»£ç "></a>2.3ã€æå–å…¬å…±ä»£ç </h2><p>å¦‚æœé¡¹ç›®ä¸­æ²¡æœ‰å»å°†æ¯ä¸ªé¡µé¢çš„ç¬¬ä¸‰æ–¹åº“å’Œå…¬å…±æ¨¡å—æå–å‡ºæ¥ï¼Œåˆ™é¡¹ç›®ä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>ç›¸åŒçš„èµ„æºè¢«é‡å¤åŠ è½½ï¼Œæµªè´¹ç”¨æˆ·çš„æµé‡å’ŒæœåŠ¡å™¨çš„æˆæœ¬ã€‚</li>
<li>æ¯ä¸ªé¡µé¢éœ€è¦åŠ è½½çš„èµ„æºå¤ªå¤§ï¼Œå¯¼è‡´ç½‘é¡µé¦–å±åŠ è½½ç¼“æ…¢ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚<br>æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å¤šä¸ªé¡µé¢çš„å…¬å…±ä»£ç æŠ½ç¦»æˆå•ç‹¬çš„æ–‡ä»¶ï¼Œæ¥ä¼˜åŒ–ä»¥ä¸Šé—®é¢˜ ã€‚Webpack å†…ç½®äº†ä¸“é—¨ç”¨äºæå–å¤šä¸ªChunkä¸­çš„å…¬å…±éƒ¨åˆ†çš„æ’ä»¶CommonsChunkPluginï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­CommonsChunkPlugin çš„é…ç½®å¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// æ‰€æœ‰åœ¨ package.json é‡Œé¢ä¾èµ–çš„åŒ…ï¼Œéƒ½ä¼šè¢«æ‰“åŒ…è¿› vendor.js è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚</span><br><span class="line">new webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">  name: &#x27;vendor&#x27;,</span><br><span class="line">  minChunks: function(module, count) &#123;</span><br><span class="line">    return (</span><br><span class="line">      module.resource &amp;&amp;</span><br><span class="line">      /.js$/.test(module.resource) &amp;&amp;</span><br><span class="line">      module.resource.indexOf(</span><br><span class="line">        path.join(__dirname, &#x27;../node_modules&#x27;)</span><br><span class="line">      ) === 0</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;),</span><br><span class="line">// æŠ½å–å‡ºä»£ç æ¨¡å—çš„æ˜ å°„å…³ç³»</span><br><span class="line">new webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">  name: &#x27;manifest&#x27;,</span><br><span class="line">  chunks: [&#x27;vendor&#x27;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
å¦‚æœè¦çœ‹æ’ä»¶çš„æ›´å¤šè¯¦ç»†å†…å®¹ï¼Œå¯ä»¥æŸ¥çœ‹CommonsChunkPluginçš„è¯¦ç»†ä»‹ç»ã€‚<h2 id="2-4ã€æ¨¡æ¿é¢„ç¼–è¯‘"><a href="#2-4ã€æ¨¡æ¿é¢„ç¼–è¯‘" class="headerlink" title="2.4ã€æ¨¡æ¿é¢„ç¼–è¯‘"></a>2.4ã€æ¨¡æ¿é¢„ç¼–è¯‘</h2>å½“ä½¿ç”¨DOMå†…æ¨¡æ¿æˆ– JavaScript å†…çš„å­—ç¬¦ä¸²æ¨¡æ¿æ—¶ï¼Œæ¨¡æ¿ä¼šåœ¨è¿è¡Œæ—¶è¢«ç¼–è¯‘ä¸ºæ¸²æŸ“å‡½æ•°ã€‚é€šå¸¸æƒ…å†µä¸‹è¿™ä¸ªè¿‡ç¨‹å·²ç»è¶³å¤Ÿå¿«äº†ï¼Œä½†å¯¹æ€§èƒ½æ•æ„Ÿçš„åº”ç”¨è¿˜æ˜¯æœ€å¥½é¿å…è¿™ç§ç”¨æ³•ã€‚<br>é¢„ç¼–è¯‘æ¨¡æ¿æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶â€”â€”ç›¸å…³çš„æ„å»ºè®¾ç½®ä¼šè‡ªåŠ¨æŠŠé¢„ç¼–è¯‘å¤„ç†å¥½ï¼Œæ‰€ä»¥æ„å»ºå¥½çš„ä»£ç å·²ç»åŒ…å«äº†ç¼–è¯‘å‡ºæ¥çš„æ¸²æŸ“å‡½æ•°è€Œä¸æ˜¯åŸå§‹çš„æ¨¡æ¿å­—ç¬¦ä¸²ã€‚<br>å¦‚æœä½ ä½¿ç”¨ webpackï¼Œå¹¶ä¸”å–œæ¬¢åˆ†ç¦» JavaScript å’Œæ¨¡æ¿æ–‡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ vue-template-loaderï¼Œå®ƒä¹Ÿå¯ä»¥åœ¨æ„å»ºè¿‡ç¨‹ä¸­æŠŠæ¨¡æ¿æ–‡ä»¶è½¬æ¢æˆä¸º JavaScript æ¸²æŸ“å‡½æ•°ã€‚<h2 id="2-5ã€æå–ç»„ä»¶çš„-CSS"><a href="#2-5ã€æå–ç»„ä»¶çš„-CSS" class="headerlink" title="2.5ã€æå–ç»„ä»¶çš„ CSS"></a>2.5ã€æå–ç»„ä»¶çš„ CSS</h2>å½“ä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶æ—¶ï¼Œç»„ä»¶å†…çš„CSS ä¼šä»¥ style æ ‡ç­¾çš„æ–¹å¼é€šè¿‡ JavaScript åŠ¨æ€æ³¨å…¥ã€‚è¿™æœ‰ä¸€äº›å°å°çš„è¿è¡Œæ—¶å¼€é”€ï¼Œå¦‚æœä½ ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼Œè¿™ä¼šå¯¼è‡´ä¸€æ®µ â€œæ— æ ·å¼å†…å®¹é—ªçƒ (fouc) â€ ã€‚å°†æ‰€æœ‰ç»„ä»¶çš„ CSS æå–åˆ°åŒä¸€ä¸ªæ–‡ä»¶å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿä¼šè®© CSS æ›´å¥½åœ°è¿›è¡Œå‹ç¼©å’Œç¼“å­˜ã€‚<br>æŸ¥é˜…è¿™ä¸ªæ„å»ºå·¥å…·å„è‡ªçš„æ–‡æ¡£æ¥äº†è§£æ›´å¤šï¼š<br>webpack + vue-loader ( vue-cli çš„ webpack æ¨¡æ¿å·²ç»é¢„å…ˆé…ç½®å¥½)<br>Browserify + vueify<br>Rollup + rollup-plugin-vue<h2 id="2-6ã€ä¼˜åŒ–-SourceMap"><a href="#2-6ã€ä¼˜åŒ–-SourceMap" class="headerlink" title="2.6ã€ä¼˜åŒ– SourceMap"></a>2.6ã€ä¼˜åŒ– SourceMap</h2>æˆ‘ä»¬åœ¨é¡¹ç›®è¿›è¡Œæ‰“åŒ…åï¼Œä¼šå°†å¼€å‘ä¸­çš„å¤šä¸ªæ–‡ä»¶ä»£ç æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”ç»è¿‡å‹ç¼©ã€å»æ‰å¤šä½™çš„ç©ºæ ¼ã€babelç¼–è¯‘åŒ–åï¼Œæœ€ç»ˆå°†ç¼–è¯‘å¾—åˆ°çš„ä»£ç ä¼šç”¨äºçº¿ä¸Šç¯å¢ƒï¼Œé‚£ä¹ˆè¿™æ ·å¤„ç†åçš„ä»£ç å’Œæºä»£ç ä¼šæœ‰å¾ˆå¤§çš„å·®åˆ«ï¼Œå½“æœ‰ bugçš„æ—¶å€™ï¼Œæˆ‘ä»¬åªèƒ½å®šä½åˆ°å‹ç¼©å¤„ç†åçš„ä»£ç ä½ç½®ï¼Œæ— æ³•å®šä½åˆ°å¼€å‘ç¯å¢ƒä¸­çš„ä»£ç ï¼Œå¯¹äºå¼€å‘æ¥è¯´ä¸å¥½è°ƒå¼å®šä½é—®é¢˜ï¼Œå› æ­¤ sourceMap å‡ºç°äº†ï¼Œå®ƒå°±æ˜¯ä¸ºäº†è§£å†³ä¸å¥½è°ƒå¼ä»£ç é—®é¢˜çš„ã€‚<br>å¼€å‘ç¯å¢ƒæ¨èï¼š cheap-module-eval-source-map<br>ç”Ÿäº§ç¯å¢ƒæ¨èï¼š cheap-module-source-map<br>åŸå› å¦‚ä¸‹ï¼š</li>
<li>cheapï¼š æºä»£ç ä¸­çš„åˆ—ä¿¡æ¯æ˜¯æ²¡æœ‰ä»»ä½•ä½œç”¨ï¼Œå› æ­¤æˆ‘ä»¬æ‰“åŒ…åçš„æ–‡ä»¶ä¸å¸Œæœ›åŒ…å«åˆ—ç›¸å…³ä¿¡æ¯ï¼Œåªæœ‰è¡Œä¿¡æ¯èƒ½å»ºç«‹æ‰“åŒ…å‰åçš„ä¾èµ–å…³ç³»ã€‚å› æ­¤ä¸ç®¡æ˜¯å¼€å‘ç¯å¢ƒæˆ–ç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›æ·»åŠ  cheap çš„åŸºæœ¬ç±»å‹æ¥å¿½ç•¥æ‰“åŒ…å‰åçš„åˆ—ä¿¡æ¯ï¼›</li>
<li>module ï¼šä¸ç®¡æ˜¯å¼€å‘ç¯å¢ƒè¿˜æ˜¯æ­£å¼ç¯å¢ƒï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›èƒ½å®šä½åˆ°bugçš„æºä»£ç å…·ä½“çš„ä½ç½®ï¼Œæ¯”å¦‚è¯´æŸä¸ª Vue æ–‡ä»¶æŠ¥é”™äº†ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å®šä½åˆ°å…·ä½“çš„ Vue æ–‡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿéœ€è¦ module é…ç½®ï¼›</li>
<li>soure-map ï¼šsource-map ä¼šä¸ºæ¯ä¸€ä¸ªæ‰“åŒ…åçš„æ¨¡å—ç”Ÿæˆç‹¬ç«‹çš„ soucemap æ–‡ä»¶ ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¢åŠ source-map å±æ€§ï¼›</li>
<li>eval-source-mapï¼ševal æ‰“åŒ…ä»£ç çš„é€Ÿåº¦éå¸¸å¿«ï¼Œå› ä¸ºå®ƒä¸ç”Ÿæˆ map æ–‡ä»¶ï¼Œä½†æ˜¯å¯ä»¥å¯¹ eval ç»„åˆä½¿ç”¨ eval-source-map ä½¿ç”¨ä¼šå°† map æ–‡ä»¶ä»¥ DataURL çš„å½¢å¼å­˜åœ¨æ‰“åŒ…åçš„ js æ–‡ä»¶ä¸­ã€‚åœ¨æ­£å¼ç¯å¢ƒä¸­ä¸è¦ä½¿ç”¨ eval-source-map, å› ä¸ºå®ƒä¼šå¢åŠ æ–‡ä»¶çš„å¤§å°ï¼Œä½†æ˜¯åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œå¯ä»¥è¯•ç”¨ä¸‹ï¼Œå› ä¸ºä»–ä»¬æ‰“åŒ…çš„é€Ÿåº¦å¾ˆå¿«ã€‚<h2 id="2-7ã€æ„å»ºç»“æœè¾“å‡ºåˆ†æ"><a href="#2-7ã€æ„å»ºç»“æœè¾“å‡ºåˆ†æ" class="headerlink" title="2.7ã€æ„å»ºç»“æœè¾“å‡ºåˆ†æ"></a>2.7ã€æ„å»ºç»“æœè¾“å‡ºåˆ†æ</h2>Webpack è¾“å‡ºçš„ä»£ç å¯è¯»æ€§éå¸¸å·®è€Œä¸”æ–‡ä»¶éå¸¸å¤§ï¼Œè®©æˆ‘ä»¬éå¸¸å¤´ç–¼ã€‚ä¸ºäº†æ›´ç®€å•ã€ç›´è§‚åœ°åˆ†æè¾“å‡ºç»“æœï¼Œç¤¾åŒºä¸­å‡ºç°äº†è®¸å¤šå¯è§†åŒ–åˆ†æå·¥å…·ã€‚è¿™äº›å·¥å…·ä»¥å›¾å½¢çš„æ–¹å¼å°†ç»“æœæ›´ç›´è§‚åœ°å±•ç¤ºå‡ºæ¥ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿäº†è§£é—®é¢˜æ‰€åœ¨ã€‚æ¥ä¸‹æ¥è®²è§£æˆ‘ä»¬åœ¨ Vue é¡¹ç›®ä¸­ç”¨åˆ°çš„åˆ†æå·¥å…·ï¼šwebpack-bundle-analyzer ã€‚<br>æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ webpack.prod.conf.js è¿›è¡Œé…ç½®ï¼š<br>if (config.build.bundleAnalyzerReport) { var BundleAnalyzerPlugin = require(â€˜webpack-bundle-analyzerâ€™).BundleAnalyzerPlugin; webpackConfig.plugins.push(new BundleAnalyzerPlugin()); } <h2 id="2-8ã€Vue-é¡¹ç›®çš„ç¼–è¯‘ä¼˜åŒ–"><a href="#2-8ã€Vue-é¡¹ç›®çš„ç¼–è¯‘ä¼˜åŒ–" class="headerlink" title="2.8ã€Vue é¡¹ç›®çš„ç¼–è¯‘ä¼˜åŒ–"></a>2.8ã€Vue é¡¹ç›®çš„ç¼–è¯‘ä¼˜åŒ–</h2>å¦‚æœä½ çš„Vueé¡¹ç›®ä½¿ç”¨Webpackç¼–è¯‘ï¼Œéœ€è¦ä½ å–ä¸€æ¯å’–å•¡çš„æ—¶é—´ï¼Œé‚£ä¹ˆä¹Ÿè®¸ä½ éœ€è¦å¯¹é¡¹ç›®çš„Webpacké…ç½®è¿›è¡Œä¼˜åŒ–ï¼Œæé«˜ Webpack çš„æ„å»ºæ•ˆç‡ã€‚å…·ä½“å¦‚ä½•è¿›è¡ŒVueé¡¹ç›®çš„Webpackæ„å»ºä¼˜åŒ–ï¼Œå¯ä»¥å‚è€ƒä½œè€…çš„å¦ä¸€ç¯‡æ–‡ç« ã€Š Vue é¡¹ç›® Webpack ä¼˜åŒ–å®è·µã€‹</li>
</ul>
]]></content>
      <categories>
        <category>æ€§èƒ½ä¼˜åŒ–</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰“å¼€viteå¤§é—¨</title>
    <url>/2023/04/24/%E6%89%93%E5%BC%80vite%E5%A4%A7%E9%97%A8/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å…³äºå‰ç«¯æ„å»ºå·¥å…·ï¼Œå…ˆæœ‰ gulpã€gruntã€webpackï¼Œç°åœ¨å°¤å¤§å¤§åˆæ•´äº†ä¸€ä¸ª viteï¼›<br>æˆ–è®¸æœ‰åŒå­¦ä¼šç–‘é—®ï¼Œè¿™ä¹ˆå¤šæ„å»ºå·¥å…·ä¸ºä»€ä¹ˆåªæœ‰ vite å¿«ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ viteï¼Œä»¥åŠåˆ°åº•è¯¥é€‰å“ªä¸€ä¸ªå‘¢ï¼Ÿ</p>
<h1 id="Vite-ç®€ä»‹"><a href="#Vite-ç®€ä»‹" class="headerlink" title="Vite ç®€ä»‹"></a>Vite ç®€ä»‹</h1><h2 id="ä»€ä¹ˆæ˜¯-Vite"><a href="#ä»€ä¹ˆæ˜¯-Vite" class="headerlink" title="ä»€ä¹ˆæ˜¯ Vite"></a>ä»€ä¹ˆæ˜¯ Vite</h2><p>Viteæ˜¯ä¸€ä¸ªç”±åŸç”ŸES Moduleé©±åŠ¨çš„Webå¼€å‘å‰ç«¯æ„å»ºå·¥å…·ã€‚<br>åœ¨å¼€å‘ç¯å¢ƒï¼ˆDevelopmentï¼‰ ä¸‹åŸºäºæµè§ˆå™¨åŸç”Ÿ ES Module å¼€å‘ï¼Œå®Œå…¨è·³è¿‡äº†æ‰“åŒ…è¿™ä¸ªæ¦‚å¿µï¼›<br>åœ¨ç”Ÿäº§ç¯å¢ƒï¼ˆProductionï¼‰ ä¸‹åŸºäº Rollup æ‰“åŒ…æ¥æ„å»ºä»£ç ã€‚</p>
<h2 id="Vite-çš„ä¸»è¦ç‰¹æ€§"><a href="#Vite-çš„ä¸»è¦ç‰¹æ€§" class="headerlink" title="Vite çš„ä¸»è¦ç‰¹æ€§"></a>Vite çš„ä¸»è¦ç‰¹æ€§</h2><ul>
<li>ğŸ’¡ æé€Ÿçš„æœåŠ¡å¯åŠ¨ï¼š ä½¿ç”¨åŸç”Ÿ ESM æ–‡ä»¶ï¼Œæ— éœ€æ‰“åŒ…ï¼</li>
<li>âš¡ï¸ è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼š æ— è®ºåº”ç”¨ç¨‹åºå¤§å°å¦‚ä½•ï¼Œéƒ½å§‹ç»ˆæå¿«çš„æ¨¡å—çƒ­é‡è½½ï¼ˆHMRï¼‰</li>
<li>ğŸ› ï¸ ä¸°å¯Œçš„åŠŸèƒ½ï¼š å¯¹ TypeScriptã€JSXã€CSS ç­‰æ”¯æŒå¼€ç®±å³ç”¨ã€‚</li>
<li>ğŸ“¦ ä¼˜åŒ–çš„æ„å»ºï¼šå¯é€‰ â€œå¤šé¡µåº”ç”¨â€ æˆ– â€œåº“â€ æ¨¡å¼çš„é¢„é…ç½® Rollup æ„å»º</li>
<li>ğŸ”© é€šç”¨çš„æ’ä»¶ï¼š åœ¨å¼€å‘å’Œæ„å»ºä¹‹é—´å…±äº« Rollup-superset æ’ä»¶æ¥å£ã€‚</li>
<li>ğŸ”‘ å®Œå…¨ç±»å‹åŒ–çš„APIï¼šçµæ´»çš„ API å’Œå®Œæ•´ TypeScript ç±»å‹<h1 id="Vite-çš„ä¼˜åŠ¿"><a href="#Vite-çš„ä¼˜åŠ¿" class="headerlink" title="Vite çš„ä¼˜åŠ¿"></a>Vite çš„ä¼˜åŠ¿</h1></li>
<li>ä¸Šæ‰‹éå¸¸ç®€å•</li>
<li>å¼€å‘æ•ˆç‡æé«˜</li>
<li>ç¤¾åŒºæˆæœ¬ä½ï¼ˆå…¼å®¹ç»å¤§éƒ¨åˆ† rollup æ’ä»¶ï¼‰<h2 id="å¼€å‘æ•ˆç‡æé«˜-â€”â€”-ğŸš€-èˆ¬çš„é€Ÿåº¦"><a href="#å¼€å‘æ•ˆç‡æé«˜-â€”â€”-ğŸš€-èˆ¬çš„é€Ÿåº¦" class="headerlink" title="å¼€å‘æ•ˆç‡æé«˜ â€”â€” ğŸš€ èˆ¬çš„é€Ÿåº¦"></a>å¼€å‘æ•ˆç‡æé«˜ â€”â€” ğŸš€ èˆ¬çš„é€Ÿåº¦</h2><img src="/2023/04/24/%E6%89%93%E5%BC%80vite%E5%A4%A7%E9%97%A8/vite%E9%80%9F%E5%BA%A6.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>ä»å›¾ä¸­å¯¹æ¯”æˆ‘ä»¬å¯ä»¥å¾ˆæ˜æ˜¾çš„å‘ç°ï¼Œä¸ºä»€ä¹ˆ Vite ä¼šè¾ƒäº Webpack å¿«é‚£ä¹ˆå¤šäº†<br>Vite åœ¨å¼€å‘ç¯å¢ƒå†·å¯åŠ¨æ— éœ€æ‰“åŒ…ï¼Œæ— éœ€åˆ†ææ¨¡å—ä¹‹é—´çš„ä¾èµ–ï¼ŒåŒæ—¶ä¹Ÿæ— éœ€åœ¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨å‰è¿›è¡Œç¼–è¯‘ï¼Œå¯åŠ¨æ—¶è¿˜ä¼šä½¿ç”¨ esbuild æ¥è¿›è¡Œé¢„æ„å»ºï¼›ï¼ˆå¦‚ä¸‹å›¾åŸºäºåŸç”Ÿ ESM çš„å¼€å‘æœåŠ¡æµç¨‹å›¾ï¼‰<br><img src="/2023/04/24/%E6%89%93%E5%BC%80vite%E5%A4%A7%E9%97%A8/esm.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>Webpack åœ¨å¯åŠ¨åä¼šåšä¸€å †äº‹æƒ…ï¼Œç»å†ä¸€æ¡å¾ˆé•¿çš„ç¼–è¯‘æ‰“åŒ…é“¾æ¡ï¼Œä»å…¥å£å¼€å§‹éœ€è¦é€æ­¥ç»å†è¯­æ³•è§£æã€ä¾èµ–æ”¶é›†ã€ä»£ç è½¬è¯‘ã€æ‰“åŒ…åˆå¹¶ã€ä»£ç ä¼˜åŒ–ï¼Œæœ€ç»ˆå°†é«˜ç‰ˆæœ¬çš„ã€ç¦»æ•£çš„æºç ç¼–è¯‘æ‰“åŒ…æˆä½ç‰ˆæœ¬ã€é«˜å…¼å®¹æ€§çš„äº§ç‰©ä»£ç ï¼Œè¿™å¯æ»¡æ»¡éƒ½æ˜¯ CPUã€IO æ“ä½œå•Šï¼Œåœ¨ Node è¿è¡Œæ—¶ä¸‹æ€§èƒ½å¿…ç„¶æ˜¯æœ‰é—®é¢˜ã€‚ï¼ˆå¦‚ä¸‹å›¾åŸºäº bundle çš„å¼€å‘æœåŠ¡æµç¨‹å›¾ï¼‰<br><img src="/2023/04/24/%E6%89%93%E5%BC%80vite%E5%A4%A7%E9%97%A8/bundle.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'><br>å½“ç„¶æˆ‘ä»¬åªåšäº†ä¸å‰ç«¯ä½¿ç”¨ç‡æœ€é«˜ï¼Œåæ°”æœ€å¤§çš„ webpack çš„å¯¹æ¯”ï¼Œåƒå…¶å®ƒæ„å»ºå·¥å…·å¦‚ Browserifyã€Gulpã€Parcelã€Rollupã€Snowpack å‡ ä¹éƒ½æ˜¯å¯ä»¥ç±»ä¼¼å¯¹æ¯”å¤„ç†ã€‚<h2 id="ä¸Šæ‰‹æå…¶ç®€å•"><a href="#ä¸Šæ‰‹æå…¶ç®€å•" class="headerlink" title="ä¸Šæ‰‹æå…¶ç®€å•"></a>ä¸Šæ‰‹æå…¶ç®€å•</h2>å‘½ä»¤åˆå§‹åŒ–<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Vite2.x éœ€è¦ Node.js ç‰ˆæœ¬ &gt;= 12.0.0</span><br><span class="line">Vite3.x ä¸å†æ”¯æŒ Node.js 12ï¼Œç°åœ¨éœ€è¦ Node.js 14.18+</span><br></pre></td></tr></table></figure>
ç®€å•ä¸€å¥è¯æ¦‚æ‹¬ï¼Œå¦‚æœè¯´ä½ ä¼šä½¿ç”¨ vue-cli è„šæ‰‹æ¶ï¼Œé‚£ä¹ˆè¿™ä¸ª Vite æ„å»ºå·¥å…·ä½ å‡ ä¹å¯ä»¥æ— ç¼æ’å…¥ï¼›<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Â # npm</span><br><span class="line">Â npm init vite@latest</span><br><span class="line">Â â€‹</span><br><span class="line">Â # yarn</span><br><span class="line">Â yarn create vite</span><br><span class="line">Â â€‹</span><br><span class="line">Â # pnpm</span><br><span class="line">Â pnpm create vite</span><br></pre></td></tr></table></figure>
ç„¶åæŒ‰ç…§æç¤ºé€‰æ‹©ä½ æ‰€éœ€è¦åˆ›å»ºçš„é¡¹ç›®å³å¯ã€‚<br>é…ç½®æå…¶ç®€å•<br>ç›¸æ¯” webpackï¼ˆæˆ–è€…åº•å±‚ä¾èµ– Webpack çš„ vue-cliï¼‰ï¼Œ éœ€è¦å¯¹ entryã€loaderã€plugin ç­‰è¿›è¡Œè¯¸å¤šé…ç½®ï¼Œå®é™…çš„æ„å»ºå·¥ä½œé€šå¸¸ç”±å„ç§ webpack loaderã€plugin å®ç°ï¼›<br>Vite çš„ä½¿ç”¨å¯è°“æ˜¯ç›¸å½“ç®€å•äº†ï¼›åªéœ€æ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªé¢„è®¾å¥½çš„å¼€å‘ç¯å¢ƒï¼Œå¼€ç®±å³è·å¾—ä¸€å †åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼šcss é¢„å¤„ç†ã€html é¢„å¤„ç†ã€å¼‚æ­¥åŠ è½½ã€åˆ†åŒ…ã€å‹ç¼©ã€HMRæ”¯æŒã€é»˜è®¤ chunk hash å‘½å ç­‰ã€‚<br>ç®€å•è¯´å§ï¼ŒVite çš„å®šä½å°±æ˜¯å‚»ç“œä¸”å¼ºå¤§çš„æ„å»ºå·¥å…·ã€‚<h2 id="ç¤¾åŒºæˆæœ¬ä½"><a href="#ç¤¾åŒºæˆæœ¬ä½" class="headerlink" title="ç¤¾åŒºæˆæœ¬ä½"></a>ç¤¾åŒºæˆæœ¬ä½</h2>é™¤äº†æè‡´çš„è¿è¡Œæ€§èƒ½ä¸ç®€æ˜“çš„ä½¿ç”¨æ–¹æ³•å¤–ï¼ŒVite å¯¹å·²æœ‰ç”Ÿæ€çš„å…¼å®¹æ€§ä¹Ÿä¸å®¹å¿½ç•¥ï¼Œä¸»è¦ä½“ç°åœ¨<br>ä¸¤ä¸ªç‚¹ï¼š</li>
<li>ä¸ Vue è§£è€¦ï¼Œå…¼å®¹æ”¯æŒ Reactã€Svelteã€Preactã€Vanilla ç­‰ï¼Œè¿™æ„å‘³ç€ Vite å¯ä»¥è¢«åº”ç”¨åœ¨å¤§å¤šæ•°ç°ä»£æŠ€æœ¯æ ˆä¸­</li>
<li>ä¸ Rollup æå…¶æ¥è¿‘çš„æ’ä»¶æ¥å£ï¼Œè¿™æ„å‘³ç€å¯ä»¥å¤ç”¨ Rollup ç”Ÿæ€ä¸­å¤§éƒ¨åˆ†å·²ç»è¢«åå¤é”¤ç‚¼çš„å·¥å…·<br>è®²çœŸçš„ï¼Œè¿™ä¸¤æ¡æ‘†ä¸Šæ¡Œé¢ï¼ŒåŠ ä¸Šå‰é¢è®¨è®ºçš„ æ€§èƒ½ä¼˜åŠ¿ å’Œ è¶…ä½å­¦ä¹ æˆæœ¬ï¼Œä½ è¿˜æœ‰ä»€ä¹ˆæ‹’ç»çš„ç†ç”±å‘¢ï¼Ÿ<h1 id="Vite-4-3-æ­£å¼å‘å¸ƒï¼Œæ„å»ºé€Ÿåº¦å…¨é¢æå‡"><a href="#Vite-4-3-æ­£å¼å‘å¸ƒï¼Œæ„å»ºé€Ÿåº¦å…¨é¢æå‡" class="headerlink" title="Vite 4.3 æ­£å¼å‘å¸ƒï¼Œæ„å»ºé€Ÿåº¦å…¨é¢æå‡"></a>Vite 4.3 æ­£å¼å‘å¸ƒï¼Œæ„å»ºé€Ÿåº¦å…¨é¢æå‡</h1>æœ€æ–°å‘å¸ƒçš„ Vite 4.3 æ˜¾è‘—æå‡äº†æ€§èƒ½ã€‚å‘å¸ƒå…¬å‘Šå†™é“ï¼ŒVite å›¢é˜Ÿåœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­å°†å·¥ä½œé‡å¿ƒæ”¾åœ¨æå‡å¼€å‘æœåŠ¡å™¨çš„æ€§èƒ½ä¸Šï¼Œå…¶ä¸­åŒ…æ‹¬ç®€åŒ–è§£æé€»è¾‘ã€æ”¹è¿›çƒ­è·¯å¾„ã€å®ç°æ›´æ™ºèƒ½çš„ç¼“å­˜ä»¥æŸ¥æ‰¾ package.json,TS é…ç½®æ–‡ä»¶å’Œè§£æçš„ URLã€‚  <h1 id="ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«"><a href="#ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«" class="headerlink" title="ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«"></a>ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«</h1><h2 id="æ›´æ™ºèƒ½çš„è§£æç­–ç•¥"><a href="#æ›´æ™ºèƒ½çš„è§£æç­–ç•¥" class="headerlink" title="æ›´æ™ºèƒ½çš„è§£æç­–ç•¥"></a>æ›´æ™ºèƒ½çš„è§£æç­–ç•¥</h2>Viteä¼šå°†æ‰€æœ‰æ¥æ”¶åˆ°çš„URLå’Œè·¯å¾„è§£æä¸ºç›®æ ‡æ¨¡å—ã€‚åœ¨ Vite 4.2 ä¸­ï¼Œå­˜åœ¨å¾ˆå¤šå†—ä½™çš„è§£æé€»è¾‘å’Œä¸å¿…è¦çš„æ¨¡å—æœç´¢ã€‚ä¸ºäº†å‡å°‘è®¡ç®—å’Œæ–‡ä»¶ç³»ç»Ÿè°ƒç”¨ï¼ŒVite 4.3 ä½¿è§£æé€»è¾‘æ›´ç®€å•ã€æ›´ä¸¥æ ¼å’Œæ›´å‡†ç¡®ã€‚<h2 id="æ›´ç®€å•çš„è§£æ"><a href="#æ›´ç®€å•çš„è§£æ" class="headerlink" title="æ›´ç®€å•çš„è§£æ"></a>æ›´ç®€å•çš„è§£æ</h2>Vite 4.2ä¸¥é‡ä¾èµ– resolve åŒ…æ¥è§£æä¾èµ–çš„ package.jsonï¼ŒæŸ¥çœ‹ resolve çš„æºç å‘ç°è§£æ package.json æ—¶æœ‰å¾ˆå¤šæ— ç”¨çš„é€»è¾‘ã€‚Vite 4.3 æ‘’å¼ƒäº† resolveï¼Œéµå¾ªæ›´ç®€å•çš„ resolve é€»è¾‘ï¼šç›´æ¥æ£€æŸ¥åµŒå¥—çˆ¶ç›®å½•ä¸­æ˜¯å¦å­˜åœ¨ package.jsonã€‚<h2 id="æ›´ä¸¥æ ¼çš„è§£æ"><a href="#æ›´ä¸¥æ ¼çš„è§£æ" class="headerlink" title="æ›´ä¸¥æ ¼çš„è§£æ"></a>æ›´ä¸¥æ ¼çš„è§£æ</h2>Vite å¿…é¡»è°ƒç”¨ Nodejs fs API æ¥æŸ¥æ‰¾æ¨¡å—ã€‚ä½†æ˜¯ IO å¾ˆæ˜‚è´µã€‚Vite 4.3 ç¼©å°äº†æ–‡ä»¶æœç´¢èŒƒå›´ï¼Œå¹¶è·³è¿‡æœç´¢ä¸€äº›ç‰¹æ®Šè·¯å¾„ï¼Œä»¥å°½å¯èƒ½å‡å°‘ fs è°ƒç”¨ã€‚ä¾‹å¦‚ï¼š</li>
<li>ç”±äº # ç¬¦å·ä¸ä¼šå‡ºç°åœ¨ URL ä¸­ï¼Œç”¨æˆ·å¯ä»¥æ§åˆ¶æºæ–‡ä»¶è·¯å¾„ä¸­æ²¡æœ‰ # ç¬¦å·ï¼Œå› æ­¤ Vite 4.3 ä¸å†æ£€æŸ¥ç”¨æˆ·æºæ–‡ä»¶ä¸­å¸¦æœ‰ # ç¬¦å·çš„è·¯å¾„ï¼Œè€Œæ˜¯ä»…åœ¨ node_modules ä¸­æœç´¢å®ƒä»¬ã€‚</li>
<li>åœ¨Unixç³»ç»Ÿä¸­ï¼ŒVite 4.2 ä¼šå…ˆæ£€æŸ¥æ ¹ç›®å½•ä¸‹çš„æ¯ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œå¯¹å¤§å¤šæ•°è·¯å¾„éƒ½å¯ä»¥ï¼Œä½†æ˜¯å¦‚æœç»å¯¹è·¯å¾„ä»¥æ ¹å¼€å¤´å°±å¾ˆå®¹æ˜“å¤±è´¥ã€‚ä¸ºäº†åœ¨ /root/root ä¸å­˜åœ¨çš„æƒ…å†µä¸‹è·³è¿‡æœç´¢ /root/root/path-to-fileï¼ŒVite 4.3 ä¼šåœ¨å¼€å¤´åˆ¤æ–­ /root/root ä½œä¸ºç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¹¶é¢„å…ˆç¼“å­˜ç»“æœã€‚</li>
<li>å½“ Vite æœåŠ¡å™¨æ”¶åˆ° @fs/xxxâ€‹ å’Œ @vite/xxx æ—¶ï¼Œå°±ä¸éœ€è¦å†è§£æè¿™äº› URLã€‚Vite 4.3 ç›´æ¥è¿”å›ä¹‹å‰ç¼“å­˜çš„ç»“æœï¼Œä¸å†é‡æ–°è§£æã€‚<h2 id="æ›´å‡†ç¡®çš„è§£æ"><a href="#æ›´å‡†ç¡®çš„è§£æ" class="headerlink" title="æ›´å‡†ç¡®çš„è§£æ"></a>æ›´å‡†ç¡®çš„è§£æ</h2>Vite 4.2 åœ¨æ–‡ä»¶è·¯å¾„ä¸ºç›®å½•æ—¶é€’å½’è§£ææ¨¡å—ï¼Œä¼šå¯¼è‡´ä¸å¿…è¦çš„é‡å¤è®¡ç®—ã€‚Vite 4.3 å°†é€’å½’è§£ææ‰å¹³åŒ–ï¼Œå¹¶å¯¹ä¸åŒç±»å‹çš„è·¯å¾„åº”ç”¨é€‚å½“çš„è§£æï¼Œå±•å¹³åç¼“å­˜ä¸€äº› fs è°ƒç”¨ä¹Ÿæ›´å®¹æ˜“ã€‚<h2 id="åŒ…è§£æ"><a href="#åŒ…è§£æ" class="headerlink" title="åŒ…è§£æ"></a>åŒ…è§£æ</h2>Vite 4.3 æ‰“ç ´äº†è§£æ node_modules åŒ…æ•°æ®çš„æ€§èƒ½ç“¶é¢ˆã€‚Vite 4.2 ä½¿ç”¨ç»å¯¹æ–‡ä»¶è·¯å¾„ä½œä¸ºåŒ…æ•°æ®ç¼“å­˜é”®ã€‚è¿™è¿˜ä¸å¤Ÿï¼Œå› ä¸º Vite å¿…é¡»éå† pkg/foo/barâ€‹ å’Œ pkg/foo/baz ä¸­çš„åŒä¸€ä¸ªç›®å½•ã€‚<br>Vite 4.3 ä¸ä»…ä½¿ç”¨äº†ç»å¯¹è·¯å¾„(/root/node_modules/pkg/foo/bar.jsâ€‹ &amp; /root/node_modules/pkg/foo/baz.jsâ€‹)ï¼Œè¿˜ä½¿ç”¨äº†éå†ç›®å½•(/root/node_modules/pkg/fooâ€‹ &amp; /root/node_modules/pkgâ€‹) ä½œä¸º pkg ç¼“å­˜çš„é”®ã€‚<br>å¦ä¸€ç§æƒ…å†µæ˜¯ï¼ŒVite 4.2 åœ¨å•ä¸ªå‡½æ•°ä¸­æŸ¥æ‰¾æ·±å±‚å¯¼å…¥è·¯å¾„çš„ package.jsonâ€‹ï¼Œä¾‹å¦‚ Vite 4.2 è§£æ a/b/c/dâ€‹ ç­‰æ–‡ä»¶è·¯å¾„æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥æ ¹ a/package.jsonâ€‹ æ˜¯å¦å­˜åœ¨ï¼Œ å¦‚æœæ²¡æœ‰ï¼Œåˆ™æŒ‰ç…§a/b/c/package.jsonâ€‹ -&gt; a/b/package.jsonâ€‹çš„é¡ºåºæŸ¥æ‰¾æœ€è¿‘çš„package.jsonâ€‹ï¼Œä½†äº‹å®æ˜¯æŸ¥æ‰¾æ ¹package.jsonâ€‹å’Œæœ€è¿‘çš„package.jsonâ€‹åº”è¯¥åˆ†å¼€å¤„ç† ï¼Œå› ä¸ºåœ¨ä¸åŒçš„è§£æä¸Šä¸‹æ–‡ä¸­éœ€è¦å®ƒä»¬ã€‚Vite 4.3 å°†æ ¹ package.jsonâ€‹ å’Œæœ€è¿‘çš„ package.json è§£æåˆ†æˆä¸¤éƒ¨åˆ†ï¼Œè¿™æ ·å®ƒä»¬å°±ä¸ä¼šæ··åœ¨ä¸€èµ·ã€‚Â <h2 id="fs-realpathSync"><a href="#fs-realpathSync" class="headerlink" title="fs.realpathSync"></a>fs.realpathSync</h2>Nodejs ä¸­æœ‰ä¸€ä¸ªæœ‰è¶£çš„ realpathSync é—®é¢˜ï¼Œå®ƒæŒ‡å‡º fs.realpathSyncâ€‹ æ¯” fs.realpathSync.nativeâ€‹ æ…¢ 70 å€ã€‚ä½† Vite 4.2 ä»…åœ¨é Windows ç³»ç»Ÿä¸Šä½¿ç”¨ fs.realpathSync.nativeâ€‹ï¼Œå› ä¸ºå®ƒåœ¨ Windows ä¸Šçš„è¡Œä¸ºä¸åŒã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒVite 4.3 åœ¨ Windows ä¸Šè°ƒç”¨ fs.realpathSync.native æ—¶æ·»åŠ äº†ç½‘ç»œé©±åŠ¨å™¨éªŒè¯ã€‚<h2 id="éé˜»å¡ä»»åŠ¡"><a href="#éé˜»å¡ä»»åŠ¡" class="headerlink" title="éé˜»å¡ä»»åŠ¡"></a>éé˜»å¡ä»»åŠ¡</h2>ä½œä¸ºä¸€ä¸ªæŒ‰éœ€æœåŠ¡ï¼ŒVite dev server å¯ä»¥åœ¨æ²¡æœ‰å‡†å¤‡å¥½æ‰€æœ‰ä¸œè¥¿çš„æƒ…å†µä¸‹å¯åŠ¨ã€‚<h2 id="éé˜»å¡-tsconfig-è§£æ"><a href="#éé˜»å¡-tsconfig-è§£æ" class="headerlink" title="éé˜»å¡ tsconfig è§£æ"></a>éé˜»å¡ tsconfig è§£æ</h2>Vite æœåŠ¡å™¨åœ¨é¢„ç»‘å®š ts æˆ– tsx æ—¶éœ€è¦ tsconfig æ•°æ®ã€‚<br>Vite 4.2 åœ¨æœåŠ¡ç«¯å¯åŠ¨ä¹‹å‰ï¼Œåœ¨æ’ä»¶é’©å­ configResolvedâ€‹ ä¸­ç­‰å¾… tsconfigâ€‹ æ•°æ®è§£æå®Œæˆã€‚ä¸€æ—¦æœåŠ¡å™¨å¯åŠ¨è€Œæ²¡æœ‰å‡†å¤‡å¥½ tsconfigâ€‹ æ•°æ®ï¼Œé¡µé¢è¯·æ±‚å°±å¯ä»¥è®¿é—®æœåŠ¡å™¨ï¼Œå³ä½¿è¯·æ±‚å¯èƒ½éœ€è¦ç¨åç­‰å¾… tsconfig è§£æã€‚<br>Vite 4.3 ä¼šåœ¨æœåŠ¡å™¨å¯åŠ¨å‰åˆå§‹åŒ– tsconfigâ€‹ è§£æï¼Œä½†æœåŠ¡å™¨ä¸ä¼šç­‰å¾…ã€‚è§£æè¿‡ç¨‹åœ¨åå°è¿è¡Œã€‚ä¸€æ—¦æœ‰tsç›¸å…³çš„è¯·æ±‚è¿›æ¥ï¼Œå°±å¾—ç­‰tsconfigè§£æå®Œäº†ã€‚<h2 id="éé˜»å¡æ–‡ä»¶å¤„ç†"><a href="#éé˜»å¡æ–‡ä»¶å¤„ç†" class="headerlink" title="éé˜»å¡æ–‡ä»¶å¤„ç†"></a>éé˜»å¡æ–‡ä»¶å¤„ç†</h2>Vite ä¸­æœ‰å¤§é‡çš„ fs è°ƒç”¨ï¼Œå…¶ä¸­ä¸€äº›æ˜¯åŒæ­¥çš„ã€‚è¿™äº›åŒæ­¥ fs è°ƒç”¨å¯èƒ½ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚Vite 4.3 å°†å®ƒä»¬æ”¹ä¸ºå¼‚æ­¥ã€‚æ­¤å¤–ï¼Œå¹¶è¡ŒåŒ–å¼‚æ­¥å‡½æ•°ä¹Ÿæ›´å®¹æ˜“ã€‚å…³äºå¼‚æ­¥å‡½æ•°ï¼Œå¯èƒ½æœ‰è®¸å¤š Promise å¯¹è±¡åœ¨è§£æåè¦é‡Šæ”¾ã€‚ç”±äºæ›´æ™ºèƒ½çš„è§£æç­–ç•¥ï¼Œé‡Šæ”¾ fs-Promise å¯¹è±¡çš„æˆæœ¬è¦ä½å¾—å¤šã€‚<h2 id="HMR-é˜²æŠ–"><a href="#HMR-é˜²æŠ–" class="headerlink" title="HMR é˜²æŠ–"></a>HMR é˜²æŠ–</h2>è€ƒè™‘ä¸¤ä¸ªç®€å•çš„ä¾èµ–é“¾ C &lt;- B &lt;- A &amp; D &lt;- B &lt;- Aï¼Œå½“ A è¢«ç¼–è¾‘æ—¶ï¼ŒHMR å°†ä» A ä¼ æ’­åˆ° C å’Œ A ä¼ æ’­åˆ° Dã€‚è¿™å¯¼è‡´ A å’Œ B åœ¨ Vite 4.2 ä¸­è¢«æ›´æ–°ä¸¤æ¬¡ã€‚<br>Vite 4.3 ç¼“å­˜äº†è¿™äº›éå†çš„æ¨¡å—ï¼Œä»¥é¿å…å¤šæ¬¡æœç´¢å®ƒä»¬ï¼Œå®ƒé€‚ç”¨äºç”± git checkout è§¦å‘çš„ HMRã€‚<h2 id="å¹¶è¡ŒåŒ–"><a href="#å¹¶è¡ŒåŒ–" class="headerlink" title="å¹¶è¡ŒåŒ–"></a>å¹¶è¡ŒåŒ–</h2>å¹¶è¡ŒåŒ–å§‹ç»ˆæ˜¯è·å¾—æ›´å¥½æ€§èƒ½çš„å¥½é€‰æ‹©ã€‚åœ¨ Vite 4.3 ä¸­ï¼Œæˆ‘ä»¬å¹¶è¡ŒåŒ–äº†ä¸€äº›æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬å¯¼å…¥åˆ†æã€æå– deps çš„å¯¼å‡ºã€è§£ææ¨¡å— url å’Œè¿è¡Œæ‰¹é‡ä¼˜åŒ–å™¨ã€‚<h2 id="Javascript-ä¼˜åŒ–"><a href="#Javascript-ä¼˜åŒ–" class="headerlink" title="Javascript ä¼˜åŒ–"></a>Javascript ä¼˜åŒ–</h2><h2 id="ç”¨å›è°ƒæ›¿æ¢-yield"><a href="#ç”¨å›è°ƒæ›¿æ¢-yield" class="headerlink" title="ç”¨å›è°ƒæ›¿æ¢ *yield"></a>ç”¨å›è°ƒæ›¿æ¢ *yield</h2>Vite ä½¿ç”¨ tsconfckâ€‹ æ¥æŸ¥æ‰¾å’Œè§£æ tsconfigâ€‹ æ–‡ä»¶ã€‚tsconfckâ€‹ æ›¾ç»é€šè¿‡ yieldâ€‹ éå†ç›®æ ‡ç›®å½•ï¼Œç”Ÿæˆå™¨çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯å®ƒéœ€è¦æ›´å¤šçš„å†…å­˜ç©ºé—´æ¥å­˜å‚¨å®ƒçš„ç”Ÿæˆå™¨å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨è¿è¡Œæ—¶ä¼šæœ‰å¤§é‡çš„ç”Ÿæˆå™¨ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚æ‰€ä»¥ä» v2.1.1 å¼€å§‹åœ¨æ ¸å¿ƒä¸­ç”¨å›è°ƒæ›¿æ¢ â€‹â€‹yieldâ€‹â€‹ã€‚</li>
</ul>
<p>3.2 ä½¿ç”¨ === ä»£æ›¿ startsWith å’Œ endsWith<br>Vite 4.2 ä½¿ç”¨ startsWithâ€‹ å’Œ endsWithâ€‹ æ£€æŸ¥çƒ­æ›´æ–° URL ä¸­çš„å¤´éƒ¨å’Œå°¾éƒ¨ â€˜/â€˜ã€‚æ¯”è¾ƒ str.startsWith(â€˜xâ€™)â€‹ å’Œ str[0] === â€˜xâ€™â€‹ çš„æ‰§è¡ŒåŸºå‡†å‘ç°ï¼Œ===â€‹ æ¯” startsWithâ€‹ å¿«çº¦ 20%ï¼ŒendsWith æ¯” === æ…¢çº¦ 60%ã€‚</p>
<h2 id="é¿å…é‡å¤åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼"><a href="#é¿å…é‡å¤åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="é¿å…é‡å¤åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼"></a>é¿å…é‡å¤åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼</h2><p>Vite éœ€è¦å¾ˆå¤šæ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…å­—ç¬¦ä¸²ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†éƒ½æ˜¯é™æ€çš„ï¼Œå› æ­¤åªä½¿ç”¨å®ƒä»¬çš„å•ä¾‹ä¼šæ›´å¥½ã€‚Vite 4.3 å°†æ­£åˆ™è¡¨è¾¾å¼æå‡ï¼Œä»¥ä¾¿å¯ä»¥é‡å¤ä½¿ç”¨å®ƒä»¬ã€‚</p>
<h2 id="æ”¾å¼ƒç”Ÿæˆè‡ªå®šä¹‰é”™è¯¯"><a href="#æ”¾å¼ƒç”Ÿæˆè‡ªå®šä¹‰é”™è¯¯" class="headerlink" title="æ”¾å¼ƒç”Ÿæˆè‡ªå®šä¹‰é”™è¯¯"></a>æ”¾å¼ƒç”Ÿæˆè‡ªå®šä¹‰é”™è¯¯</h2><p>åœ¨ Vite 4.2 ä¸­ï¼Œæœ‰ä¸€äº›è‡ªå®šä¹‰é”™è¯¯ä»¥æ”¹è¿›å¼€å‘ä½“éªŒã€‚è¿™äº›é”™è¯¯å¯èƒ½ä¼šå¯¼è‡´é¢å¤–çš„è®¡ç®—å’Œåƒåœ¾å›æ”¶ï¼Œä»è€Œé™ä½ Vite çš„é€Ÿåº¦ã€‚åœ¨ Vite 4.3 ä¸­ï¼Œæ”¾å¼ƒäº†ç”ŸæˆæŸäº›çƒ­æ›´æ–°è‡ªå®šä¹‰é”™è¯¯ï¼ˆä¾‹å¦‚Â package.jsonÂ NOT_FOUND é”™è¯¯ï¼‰ï¼Œç›´æ¥æŠ›å‡ºåŸå§‹é”™è¯¯ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚</p>
]]></content>
      <categories>
        <category>vite</category>
      </categories>
      <tags>
        <tag>vite</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°ç»„ï¼Œå¯¹è±¡éå†çš„ç”¨æ³•æ€»ç»“</title>
    <url>/2023/03/21/%E6%95%B0%E7%BB%84%EF%BC%8C%E5%AF%B9%E8%B1%A1%E9%81%8D%E5%8E%86%E7%9A%84%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<p>ä½œä¸ºä¸€ä¸ªå‰ç«¯å¼€å‘ï¼Œæˆ‘ä»¬åœ¨å®Œæˆå‰ç«¯å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°å¾ˆå¤šæ•°æ®å¤„ç†çš„éœ€æ±‚ï¼Œå¼€å‘è€…ä¼šæ ¹æ®ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚æ¥å®ç°å¯¹åº”çš„ä¸šåŠ¡åŠŸèƒ½ã€‚<br>å‰ç«¯åœ¨æ¸²æŸ“é¡µé¢æ—¶ï¼Œé€šå¸¸ä¼šæ¶‰åŠåˆ°è¦å¯¹æ‹¿åˆ°çš„æ•°æ®è¿›è¡Œå¤„ç†ã€‚è¿™é‡Œä»‹ç»å‡ ç§æ•°ç»„ï¼Œå¯¹è±¡éå†çš„æ•°æ®å¤„ç†æ–¹æ³•ã€‚</p>
<h1 id="ä¸€ã€éå†æ•°ç»„"><a href="#ä¸€ã€éå†æ•°ç»„" class="headerlink" title="ä¸€ã€éå†æ•°ç»„"></a>ä¸€ã€éå†æ•°ç»„</h1><h2 id="æ–¹æ³•ä¸€ï¼šforå¾ªç¯"><a href="#æ–¹æ³•ä¸€ï¼šforå¾ªç¯" class="headerlink" title="æ–¹æ³•ä¸€ï¼šforå¾ªç¯"></a>æ–¹æ³•ä¸€ï¼šforå¾ªç¯</h2><h3 id="for-å¾ªç¯æ˜¯ä½¿ç”¨æœ€å¤šï¼Œä¹Ÿæ˜¯æ€§èƒ½ä¼˜åŒ–æœ€å¥½çš„ä¸€ç§éå†æ–¹å¼ã€‚"><a href="#for-å¾ªç¯æ˜¯ä½¿ç”¨æœ€å¤šï¼Œä¹Ÿæ˜¯æ€§èƒ½ä¼˜åŒ–æœ€å¥½çš„ä¸€ç§éå†æ–¹å¼ã€‚" class="headerlink" title="for å¾ªç¯æ˜¯ä½¿ç”¨æœ€å¤šï¼Œä¹Ÿæ˜¯æ€§èƒ½ä¼˜åŒ–æœ€å¥½çš„ä¸€ç§éå†æ–¹å¼ã€‚"></a>for å¾ªç¯æ˜¯ä½¿ç”¨æœ€å¤šï¼Œä¹Ÿæ˜¯æ€§èƒ½ä¼˜åŒ–æœ€å¥½çš„ä¸€ç§éå†æ–¹å¼ã€‚</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span><br><span class="line">for (var i = 0; i &lt; arr.length; i++) &#123;</span><br><span class="line">  console.log(arr[i])</span><br><span class="line">&#125;</span><br><span class="line">// Expected output:a b c</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•äºŒï¼šfor-of-éå†"><a href="#æ–¹æ³•äºŒï¼šfor-of-éå†" class="headerlink" title="æ–¹æ³•äºŒï¼šfor-of éå†"></a>æ–¹æ³•äºŒï¼šfor-of éå†</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span><br><span class="line">for (let item of arr) &#123;</span><br><span class="line">  console.log(item)</span><br><span class="line">&#125;</span><br><span class="line">// Expected output:a b c</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•ä¸‰ï¼šæ•°ç»„æ–¹æ³•"><a href="#æ–¹æ³•ä¸‰ï¼šæ•°ç»„æ–¹æ³•" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šæ•°ç»„æ–¹æ³•"></a>æ–¹æ³•ä¸‰ï¼šæ•°ç»„æ–¹æ³•</h2><h3 id="1-forEach-æ–¹æ³•ï¼Œå¯¹åŸæ•°ç»„æ²¡æœ‰å½±å“"><a href="#1-forEach-æ–¹æ³•ï¼Œå¯¹åŸæ•°ç»„æ²¡æœ‰å½±å“" class="headerlink" title="1.forEach()æ–¹æ³•ï¼Œå¯¹åŸæ•°ç»„æ²¡æœ‰å½±å“"></a>1.forEach()æ–¹æ³•ï¼Œå¯¹åŸæ•°ç»„æ²¡æœ‰å½±å“</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span><br><span class="line">arr.forEach((index, item) =&gt; &#123;</span><br><span class="line">  console.log(index, item)</span><br><span class="line">&#125;)</span><br><span class="line">//Expected output:</span><br><span class="line">// a 0</span><br><span class="line">// b 1</span><br><span class="line">// c 2</span><br></pre></td></tr></table></figure>
<h3 id="2-map-æ–¹æ³•"><a href="#2-map-æ–¹æ³•" class="headerlink" title="2.map()æ–¹æ³•"></a>2.map()æ–¹æ³•</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [1, 2, 3]</span><br><span class="line">var newArr = arr.map(item =&gt; &#123;</span><br><span class="line">  return item * 2</span><br><span class="line">&#125;);</span><br><span class="line">console.log(newArr); </span><br><span class="line">// Expected output:[2, 4, 6]</span><br></pre></td></tr></table></figure>
<h3 id="3-filter-æ–¹æ³•ï¼Œä¸æ”¹å˜åŸå§‹æ•°ç»„"><a href="#3-filter-æ–¹æ³•ï¼Œä¸æ”¹å˜åŸå§‹æ•°ç»„" class="headerlink" title="3.filter()æ–¹æ³•ï¼Œä¸æ”¹å˜åŸå§‹æ•°ç»„"></a>3.filter()æ–¹æ³•ï¼Œä¸æ”¹å˜åŸå§‹æ•°ç»„</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [1, 2, 3]</span><br><span class="line">var newArr = arr.filter(item =&gt; &#123;</span><br><span class="line">  return item &gt; 1</span><br><span class="line">&#125;);</span><br><span class="line">console.log(newArr)</span><br><span class="line">// Expected output:[2, 3]</span><br></pre></td></tr></table></figure>
<h3 id="4-reduce-æ–¹æ³•"><a href="#4-reduce-æ–¹æ³•" class="headerlink" title="4.reduce()æ–¹æ³•"></a>4.reduce()æ–¹æ³•</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [1, 2, 3]</span><br><span class="line">var sum = arr.reduce((pre, cur) =&gt; &#123;</span><br><span class="line">  return pre + cur</span><br><span class="line">&#125;);</span><br><span class="line">console.log(sum)</span><br><span class="line">// Expected output:6</span><br></pre></td></tr></table></figure>
<h3 id="5-every-æ–¹æ³•ç”¨äºæ£€æµ‹æ•°ç»„å…ƒç´ æ˜¯å¦å…¨éƒ¨ç¬¦åˆæŒ‡å®šæ¡ä»¶ï¼Œåªæœ‰å…¨éƒ¨æ»¡è¶³æ¡ä»¶æ—¶æ‰ä¼šè¿”å›trueã€‚every-æ˜¯å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œå¦‚æœè¯¥å‡½æ•°å¯¹æ¯ä¸€é¡¹è¿”å›true-åˆ™è¿”å›true-åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°äº†falseçš„æƒ…å†µï¼Œå°±åœæ­¢ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼›ç›´æ¥è¿”å›falseã€‚"><a href="#5-every-æ–¹æ³•ç”¨äºæ£€æµ‹æ•°ç»„å…ƒç´ æ˜¯å¦å…¨éƒ¨ç¬¦åˆæŒ‡å®šæ¡ä»¶ï¼Œåªæœ‰å…¨éƒ¨æ»¡è¶³æ¡ä»¶æ—¶æ‰ä¼šè¿”å›trueã€‚every-æ˜¯å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œå¦‚æœè¯¥å‡½æ•°å¯¹æ¯ä¸€é¡¹è¿”å›true-åˆ™è¿”å›true-åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°äº†falseçš„æƒ…å†µï¼Œå°±åœæ­¢ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼›ç›´æ¥è¿”å›falseã€‚" class="headerlink" title="5.every()æ–¹æ³•ç”¨äºæ£€æµ‹æ•°ç»„å…ƒç´ æ˜¯å¦å…¨éƒ¨ç¬¦åˆæŒ‡å®šæ¡ä»¶ï¼Œåªæœ‰å…¨éƒ¨æ»¡è¶³æ¡ä»¶æ—¶æ‰ä¼šè¿”å›trueã€‚every()æ˜¯å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œå¦‚æœè¯¥å‡½æ•°å¯¹æ¯ä¸€é¡¹è¿”å›true,åˆ™è¿”å›true;åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°äº†falseçš„æƒ…å†µï¼Œå°±åœæ­¢ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼›ç›´æ¥è¿”å›falseã€‚"></a>5.every()æ–¹æ³•ç”¨äºæ£€æµ‹æ•°ç»„å…ƒç´ æ˜¯å¦å…¨éƒ¨ç¬¦åˆæŒ‡å®šæ¡ä»¶ï¼Œåªæœ‰å…¨éƒ¨æ»¡è¶³æ¡ä»¶æ—¶æ‰ä¼šè¿”å›trueã€‚every()æ˜¯å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œå¦‚æœè¯¥å‡½æ•°å¯¹æ¯ä¸€é¡¹è¿”å›true,åˆ™è¿”å›true;åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°äº†falseçš„æƒ…å†µï¼Œå°±åœæ­¢ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼›ç›´æ¥è¿”å›falseã€‚</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [1, 2, 3]</span><br><span class="line">var bool = arr.every(item =&gt; &#123;</span><br><span class="line">  return item &lt; 5</span><br><span class="line">&#125;);</span><br><span class="line">console.log(bool)</span><br><span class="line">// Expected output:true</span><br></pre></td></tr></table></figure>
<h3 id="6-some-æ–¹æ³•ç”¨äºæ£€æµ‹æ•°ç»„æ˜¯å¦å­˜åœ¨ä¸€ä¸ªç¬¦åˆæŒ‡å®šæ¡ä»¶çš„å…ƒç´ ï¼Œåªæœ‰ä¸€ä¸ªæ»¡è¶³æ¡ä»¶å°±è¿”å›trueã€‚some-æ˜¯å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡ŒæŒ‡å®šå‡½æ•°ï¼›è¯¥å‡½æ•°å¯¹å…¶ä¸­ä»»æ„ä¸€é¡¹è¿”å›true-å°±è¿”å›true-è¿”å›trueå°±ä¸å†å¾€ä¸‹æ‰§è¡Œã€‚"><a href="#6-some-æ–¹æ³•ç”¨äºæ£€æµ‹æ•°ç»„æ˜¯å¦å­˜åœ¨ä¸€ä¸ªç¬¦åˆæŒ‡å®šæ¡ä»¶çš„å…ƒç´ ï¼Œåªæœ‰ä¸€ä¸ªæ»¡è¶³æ¡ä»¶å°±è¿”å›trueã€‚some-æ˜¯å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡ŒæŒ‡å®šå‡½æ•°ï¼›è¯¥å‡½æ•°å¯¹å…¶ä¸­ä»»æ„ä¸€é¡¹è¿”å›true-å°±è¿”å›true-è¿”å›trueå°±ä¸å†å¾€ä¸‹æ‰§è¡Œã€‚" class="headerlink" title="6.some()æ–¹æ³•ç”¨äºæ£€æµ‹æ•°ç»„æ˜¯å¦å­˜åœ¨ä¸€ä¸ªç¬¦åˆæŒ‡å®šæ¡ä»¶çš„å…ƒç´ ï¼Œåªæœ‰ä¸€ä¸ªæ»¡è¶³æ¡ä»¶å°±è¿”å›trueã€‚some()æ˜¯å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡ŒæŒ‡å®šå‡½æ•°ï¼›è¯¥å‡½æ•°å¯¹å…¶ä¸­ä»»æ„ä¸€é¡¹è¿”å›true, å°±è¿”å›true; è¿”å›trueå°±ä¸å†å¾€ä¸‹æ‰§è¡Œã€‚"></a>6.some()æ–¹æ³•ç”¨äºæ£€æµ‹æ•°ç»„æ˜¯å¦å­˜åœ¨ä¸€ä¸ªç¬¦åˆæŒ‡å®šæ¡ä»¶çš„å…ƒç´ ï¼Œåªæœ‰ä¸€ä¸ªæ»¡è¶³æ¡ä»¶å°±è¿”å›trueã€‚some()æ˜¯å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡ŒæŒ‡å®šå‡½æ•°ï¼›è¯¥å‡½æ•°å¯¹å…¶ä¸­ä»»æ„ä¸€é¡¹è¿”å›true, å°±è¿”å›true; è¿”å›trueå°±ä¸å†å¾€ä¸‹æ‰§è¡Œã€‚</h3><h4 id="ä¸‹é¢çš„ä¾‹å­æ˜¯æ£€æµ‹æ•°ç»„å…ƒç´ æ˜¯å¦å­˜åœ¨-Number-ç±»å‹ã€‚"><a href="#ä¸‹é¢çš„ä¾‹å­æ˜¯æ£€æµ‹æ•°ç»„å…ƒç´ æ˜¯å¦å­˜åœ¨-Number-ç±»å‹ã€‚" class="headerlink" title="ä¸‹é¢çš„ä¾‹å­æ˜¯æ£€æµ‹æ•°ç»„å…ƒç´ æ˜¯å¦å­˜åœ¨ Number ç±»å‹ã€‚"></a>ä¸‹é¢çš„ä¾‹å­æ˜¯æ£€æµ‹æ•°ç»„å…ƒç´ æ˜¯å¦å­˜åœ¨ Number ç±»å‹ã€‚</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [&quot;a&quot;, 1, &quot;b&quot;]</span><br><span class="line">var bool = arr.some(item =&gt; &#123;</span><br><span class="line">  return typeof item === &quot;number&quot;</span><br><span class="line">&#125;)</span><br><span class="line">console.log(bool)</span><br><span class="line">// Expected output:true</span><br></pre></td></tr></table></figure>
<h3 id="7-find-è¿”å›æ•°ç»„ä¸­ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›æ²¡æœ‰å°±è¿”å›undefined-ä¸æ”¹å˜åŸå§‹æ•°ç»„-findå¯¹ç©ºæ•°ç»„ä¸æ‰§è¡Œã€‚"><a href="#7-find-è¿”å›æ•°ç»„ä¸­ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›æ²¡æœ‰å°±è¿”å›undefined-ä¸æ”¹å˜åŸå§‹æ•°ç»„-findå¯¹ç©ºæ•°ç»„ä¸æ‰§è¡Œã€‚" class="headerlink" title="7.find() è¿”å›æ•°ç»„ä¸­ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›æ²¡æœ‰å°±è¿”å›undefined,ä¸æ”¹å˜åŸå§‹æ•°ç»„,findå¯¹ç©ºæ•°ç»„ä¸æ‰§è¡Œã€‚"></a>7.find() è¿”å›æ•°ç»„ä¸­ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›æ²¡æœ‰å°±è¿”å›undefined,ä¸æ”¹å˜åŸå§‹æ•°ç»„,findå¯¹ç©ºæ•°ç»„ä¸æ‰§è¡Œã€‚</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let arr = [1, 2, 3, 4, 5]</span><br><span class="line">let find = arr.find((item) =&gt; &#123;</span><br><span class="line">  return item % 2 === 0</span><br><span class="line">&#125;)</span><br><span class="line">// Expected output:find =2</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [1, 2, 3]</span><br><span class="line">var ret = arr.find(ele =&gt; ele &gt; 2)</span><br><span class="line">console.log(ret)</span><br><span class="line">// Expected output:3</span><br><span class="line">console.log(arr)</span><br><span class="line">// Expected output:[1, 2, 3]</span><br></pre></td></tr></table></figure>
<h3 id="8-findIndex-è¿”å›ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡ï¼Œæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ åˆ™è¿”å›-1ï¼Œä¸æ”¹å˜åŸå§‹æ•°ç»„-findIndexå¯¹ç©ºæ•°ç»„ä¸æ‰§è¡Œã€‚"><a href="#8-findIndex-è¿”å›ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡ï¼Œæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ åˆ™è¿”å›-1ï¼Œä¸æ”¹å˜åŸå§‹æ•°ç»„-findIndexå¯¹ç©ºæ•°ç»„ä¸æ‰§è¡Œã€‚" class="headerlink" title="8.findIndex() è¿”å›ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡ï¼Œæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ åˆ™è¿”å›-1ï¼Œä¸æ”¹å˜åŸå§‹æ•°ç»„,findIndexå¯¹ç©ºæ•°ç»„ä¸æ‰§è¡Œã€‚"></a>8.findIndex() è¿”å›ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡ï¼Œæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ åˆ™è¿”å›-1ï¼Œä¸æ”¹å˜åŸå§‹æ•°ç»„,findIndexå¯¹ç©ºæ•°ç»„ä¸æ‰§è¡Œã€‚</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let arr = [1, 2, 3, 4, 5]</span><br><span class="line">let findIndex = arr.findIndex((item) =&gt; &#123;</span><br><span class="line">  return item % 2 === 0</span><br><span class="line">&#125;) </span><br><span class="line">// Expected output:findIndex = 1</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [1, 2, 3, 4 ,5]</span><br><span class="line">var ret = arr.findIndex(ele =&gt; ele &gt; 2) </span><br><span class="line">console.log(ret)</span><br><span class="line">// Expected output:2</span><br><span class="line"> console.log(arr)</span><br><span class="line">// Expected output:[1, 2, 3, 4, 5]</span><br></pre></td></tr></table></figure>

<h1 id="äºŒã€éå†å¯¹è±¡"><a href="#äºŒã€éå†å¯¹è±¡" class="headerlink" title="äºŒã€éå†å¯¹è±¡"></a>äºŒã€éå†å¯¹è±¡</h1><h2 id="æ–¹æ³•ä¸€ï¼šfor-in-å¾ªç¯"><a href="#æ–¹æ³•ä¸€ï¼šfor-in-å¾ªç¯" class="headerlink" title="æ–¹æ³•ä¸€ï¼šfor-in å¾ªç¯"></a>æ–¹æ³•ä¸€ï¼šfor-in å¾ªç¯</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var obj = &#123; a: 2, b: 4, c: 6 &#125;</span><br><span class="line">for (let key in obj) &#123;</span><br><span class="line">  console.log(key)</span><br><span class="line">&#125;</span><br><span class="line">// Expected output:a b c</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•äºŒï¼šObject-keys-å¯ç†è§£ä¸ºè¿”å›é‡Œé¢çš„keyå±æ€§"><a href="#æ–¹æ³•äºŒï¼šObject-keys-å¯ç†è§£ä¸ºè¿”å›é‡Œé¢çš„keyå±æ€§" class="headerlink" title="æ–¹æ³•äºŒï¼šObject.keys() å¯ç†è§£ä¸ºè¿”å›é‡Œé¢çš„keyå±æ€§"></a>æ–¹æ³•äºŒï¼šObject.keys() å¯ç†è§£ä¸ºè¿”å›é‡Œé¢çš„keyå±æ€§</h2><h3 id="1-å¤„ç†å¯¹è±¡æ—¶ï¼šè¿”å›å¯æšä¸¾çš„å±æ€§æ•°ç»„"><a href="#1-å¤„ç†å¯¹è±¡æ—¶ï¼šè¿”å›å¯æšä¸¾çš„å±æ€§æ•°ç»„" class="headerlink" title="1.å¤„ç†å¯¹è±¡æ—¶ï¼šè¿”å›å¯æšä¸¾çš„å±æ€§æ•°ç»„"></a>1.å¤„ç†å¯¹è±¡æ—¶ï¼šè¿”å›å¯æšä¸¾çš„å±æ€§æ•°ç»„</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var w_n = Object.keys(&#123;name: &quot;wn&quot;, address: &quot;ä¸­å›½&quot;&#125;) </span><br><span class="line">console.log(w_n)</span><br><span class="line">// Expected output:[&#x27;name&#x27;, &#x27;address&#x27;]</span><br></pre></td></tr></table></figure>
<h3 id="2-å¤„ç†æ•°ç»„æ—¶ï¼šè¿”å›ç´¢å¼•å€¼æ•°ç»„"><a href="#2-å¤„ç†æ•°ç»„æ—¶ï¼šè¿”å›ç´¢å¼•å€¼æ•°ç»„" class="headerlink" title="2.å¤„ç†æ•°ç»„æ—¶ï¼šè¿”å›ç´¢å¼•å€¼æ•°ç»„"></a>2.å¤„ç†æ•°ç»„æ—¶ï¼šè¿”å›ç´¢å¼•å€¼æ•°ç»„</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var w_n = Object.keys([11,22,33,44]) </span><br><span class="line">console.log(w_n)</span><br><span class="line">// Expected output:[&#x27;0&#x27;,&#x27;1&#x27;,&#x27;2&#x27;,&#x27;3&#x27;]</span><br></pre></td></tr></table></figure>
<h3 id="3-å¤„ç†å­—ç¬¦ä¸²æ•°æ®æ—¶ï¼šè¿”å›ç´¢å¼•å€¼æ•°ç»„"><a href="#3-å¤„ç†å­—ç¬¦ä¸²æ•°æ®æ—¶ï¼šè¿”å›ç´¢å¼•å€¼æ•°ç»„" class="headerlink" title="3.å¤„ç†å­—ç¬¦ä¸²æ•°æ®æ—¶ï¼šè¿”å›ç´¢å¼•å€¼æ•°ç»„"></a>3.å¤„ç†å­—ç¬¦ä¸²æ•°æ®æ—¶ï¼šè¿”å›ç´¢å¼•å€¼æ•°ç»„</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var str=&#x27;hello&#x27;;</span><br><span class="line">console.log(Object.keys(str))</span><br><span class="line">// Expected output:[&#x27;0&#x27;,&#x27;1&#x27;,&#x27;2&#x27;,&#x27;3&#x27;,&#x27;4&#x27;]</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•ä¸‰ï¼šObject-values-æ–¹æ³•ï¼Œå¯ç†è§£ä¸ºè¿”å›é‡Œé¢çš„valueå€¼ï¼ŒObject-valuesåªè¿”å›å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§ã€‚"><a href="#æ–¹æ³•ä¸‰ï¼šObject-values-æ–¹æ³•ï¼Œå¯ç†è§£ä¸ºè¿”å›é‡Œé¢çš„valueå€¼ï¼ŒObject-valuesåªè¿”å›å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§ã€‚" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šObject.values()æ–¹æ³•ï¼Œå¯ç†è§£ä¸ºè¿”å›é‡Œé¢çš„valueå€¼ï¼ŒObject.valuesåªè¿”å›å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§ã€‚"></a>æ–¹æ³•ä¸‰ï¼šObject.values()æ–¹æ³•ï¼Œå¯ç†è§£ä¸ºè¿”å›é‡Œé¢çš„valueå€¼ï¼ŒObject.valuesåªè¿”å›å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§ã€‚</h2><h3 id="1-å¤„ç†å¯¹è±¡æ•°æ®æ—¶ï¼šè¿”å›å¯æšä¸¾çš„å€¼ç»„æˆçš„æ•°ç»„"><a href="#1-å¤„ç†å¯¹è±¡æ•°æ®æ—¶ï¼šè¿”å›å¯æšä¸¾çš„å€¼ç»„æˆçš„æ•°ç»„" class="headerlink" title="1.å¤„ç†å¯¹è±¡æ•°æ®æ—¶ï¼šè¿”å›å¯æšä¸¾çš„å€¼ç»„æˆçš„æ•°ç»„"></a>1.å¤„ç†å¯¹è±¡æ•°æ®æ—¶ï¼šè¿”å›å¯æšä¸¾çš„å€¼ç»„æˆçš„æ•°ç»„</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var w_n = Object.values(&#123;name: &quot;wn&quot;, address: &quot;ä¸­å›½&quot;&#125;) </span><br><span class="line">console.log(w_n)</span><br><span class="line">// Expected output:[&#x27;wn&#x27;, &#x27;ä¸­å›½&#x27;]</span><br></pre></td></tr></table></figure>
<h3 id="2-å¤„ç†æ•°ç»„æ•°æ®æ—¶ï¼šè¿”å›åŸæ•°ç»„"><a href="#2-å¤„ç†æ•°ç»„æ•°æ®æ—¶ï¼šè¿”å›åŸæ•°ç»„" class="headerlink" title="2.å¤„ç†æ•°ç»„æ•°æ®æ—¶ï¼šè¿”å›åŸæ•°ç»„"></a>2.å¤„ç†æ•°ç»„æ•°æ®æ—¶ï¼šè¿”å›åŸæ•°ç»„</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var w_n = Object.values([11,22,33,44]) </span><br><span class="line">console.log(w_n)</span><br><span class="line">// Expected output:[11,22,33,44]</span><br></pre></td></tr></table></figure>
<h3 id="å±æ€§åä¸ºæ•°å€¼çš„å±æ€§ï¼Œæ˜¯æŒ‰ç…§æ•°å€¼å¤§å°ï¼Œä»å°åˆ°å¤§éå†çš„ã€‚"><a href="#å±æ€§åä¸ºæ•°å€¼çš„å±æ€§ï¼Œæ˜¯æŒ‰ç…§æ•°å€¼å¤§å°ï¼Œä»å°åˆ°å¤§éå†çš„ã€‚" class="headerlink" title="å±æ€§åä¸ºæ•°å€¼çš„å±æ€§ï¼Œæ˜¯æŒ‰ç…§æ•°å€¼å¤§å°ï¼Œä»å°åˆ°å¤§éå†çš„ã€‚"></a>å±æ€§åä¸ºæ•°å€¼çš„å±æ€§ï¼Œæ˜¯æŒ‰ç…§æ•°å€¼å¤§å°ï¼Œä»å°åˆ°å¤§éå†çš„ã€‚</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const obj = &#123;10 : &quot;a&quot;, 6 : &quot;b&quot;, 9 : &quot;c&quot;&#125;</span><br><span class="line">console.log(Object.values(obj))</span><br><span class="line">// Expected output:[&#x27;b&#x27;, &#x27;c&#x27;, &#x27;a&#x27;]</span><br></pre></td></tr></table></figure>
<h3 id="3-å¤„ç†å­—ç¬¦ä¸²æ•°æ®æ—¶ï¼šè¿”å›æ¯ä¸ªå­—ç¬¦ç»„æˆçš„æ•°ç»„"><a href="#3-å¤„ç†å­—ç¬¦ä¸²æ•°æ®æ—¶ï¼šè¿”å›æ¯ä¸ªå­—ç¬¦ç»„æˆçš„æ•°ç»„" class="headerlink" title="3.å¤„ç†å­—ç¬¦ä¸²æ•°æ®æ—¶ï¼šè¿”å›æ¯ä¸ªå­—ç¬¦ç»„æˆçš„æ•°ç»„"></a>3.å¤„ç†å­—ç¬¦ä¸²æ•°æ®æ—¶ï¼šè¿”å›æ¯ä¸ªå­—ç¬¦ç»„æˆçš„æ•°ç»„</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">console.log(Object.values(&#x27;hello&#x27;))</span><br><span class="line">// Expected output:[&#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;]</span><br></pre></td></tr></table></figure>
<h3 id="4-Object-valuesä¼šè¿‡æ»¤å±æ€§åä¸º-Symbol-å€¼çš„å±æ€§"><a href="#4-Object-valuesä¼šè¿‡æ»¤å±æ€§åä¸º-Symbol-å€¼çš„å±æ€§" class="headerlink" title="4.Object.valuesä¼šè¿‡æ»¤å±æ€§åä¸º Symbol å€¼çš„å±æ€§"></a>4.Object.valuesä¼šè¿‡æ»¤å±æ€§åä¸º Symbol å€¼çš„å±æ€§</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Object.values(&#123; [Symbol()]: 123, foo: &#x27;abc&#x27; &#125;)</span><br><span class="line">// Expected output:[&#x27;abc&#x27;]</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•å››ï¼šObject-entries-æ–¹æ³•"><a href="#æ–¹æ³•å››ï¼šObject-entries-æ–¹æ³•" class="headerlink" title="æ–¹æ³•å››ï¼šObject.entries()æ–¹æ³•"></a>æ–¹æ³•å››ï¼šObject.entries()æ–¹æ³•</h2><h3 id="1-å¤„ç†å¯¹è±¡æ•°æ®æ—¶ï¼šè¿”å›æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚æ¯ä¸€é¡¹æ˜¯-key-value-å½¢å¼ã€‚"><a href="#1-å¤„ç†å¯¹è±¡æ•°æ®æ—¶ï¼šè¿”å›æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚æ¯ä¸€é¡¹æ˜¯-key-value-å½¢å¼ã€‚" class="headerlink" title="1.å¤„ç†å¯¹è±¡æ•°æ®æ—¶ï¼šè¿”å›æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚æ¯ä¸€é¡¹æ˜¯[key, value]å½¢å¼ã€‚"></a>1.å¤„ç†å¯¹è±¡æ•°æ®æ—¶ï¼šè¿”å›æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚æ¯ä¸€é¡¹æ˜¯[key, value]å½¢å¼ã€‚</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var w_n = Object.entries(&#123;name: &quot;wn&quot;, address: &quot;ä¸­å›½&quot;&#125;) </span><br><span class="line">console.log(w_n)</span><br><span class="line">// Expected output:[[&#x27;name&#x27;, &#x27;wn&#x27;], [&#x27;address&#x27;, &#x27;ä¸­å›½&#x27;]]</span><br></pre></td></tr></table></figure>
<h3 id="2-å¤„ç†æ•°ç»„æ•°æ®æ—¶ï¼šè¿”å›ä¹Ÿæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæ•°ç»„é‡Œé¢çš„æ¯ä¸€é¡¹-index-value-å½¢å¼ã€‚"><a href="#2-å¤„ç†æ•°ç»„æ•°æ®æ—¶ï¼šè¿”å›ä¹Ÿæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæ•°ç»„é‡Œé¢çš„æ¯ä¸€é¡¹-index-value-å½¢å¼ã€‚" class="headerlink" title="2.å¤„ç†æ•°ç»„æ•°æ®æ—¶ï¼šè¿”å›ä¹Ÿæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæ•°ç»„é‡Œé¢çš„æ¯ä¸€é¡¹[index, value] å½¢å¼ã€‚"></a>2.å¤„ç†æ•°ç»„æ•°æ®æ—¶ï¼šè¿”å›ä¹Ÿæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæ•°ç»„é‡Œé¢çš„æ¯ä¸€é¡¹[index, value] å½¢å¼ã€‚</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var w_n = Object.entries([11,22,33,44]) </span><br><span class="line">console.log(w_n)</span><br><span class="line">// Expected output:[ [&#x27;0&#x27;,11], [&#x27;1&#x27;,22], [&#x27;2&#x27;,33], [&#x27;3&#x27;,44] ]</span><br></pre></td></tr></table></figure>
<h3 id="æ•°ç»„ä¸­åŒ…å«å¯¹è±¡ï¼š"><a href="#æ•°ç»„ä¸­åŒ…å«å¯¹è±¡ï¼š" class="headerlink" title="æ•°ç»„ä¸­åŒ…å«å¯¹è±¡ï¼š"></a>æ•°ç»„ä¸­åŒ…å«å¯¹è±¡ï¼š</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var w_n = Object.entries([&#123;a:11&#125;,22,33,44]) </span><br><span class="line">console.log(w_n)</span><br><span class="line">// Expected output:[ [&#x27;0&#x27;,&#123;a:11&#125;], [&#x27;1&#x27;,22], [&#x27;2&#x27;,33], [&#x27;3&#x27;,44] ]</span><br></pre></td></tr></table></figure>
<h3 id="3-å¤„ç†å­—ç¬¦ä¸²æ•°æ®æ—¶ï¼šè¿”å›ä¹Ÿæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚"><a href="#3-å¤„ç†å­—ç¬¦ä¸²æ•°æ®æ—¶ï¼šè¿”å›ä¹Ÿæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚" class="headerlink" title="3.å¤„ç†å­—ç¬¦ä¸²æ•°æ®æ—¶ï¼šè¿”å›ä¹Ÿæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚"></a>3.å¤„ç†å­—ç¬¦ä¸²æ•°æ®æ—¶ï¼šè¿”å›ä¹Ÿæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var str=&#x27;hello&#x27;</span><br><span class="line">console.log(Object.entries(str)) </span><br><span class="line">// Expected output:[ [&#x27;0&#x27;,&#x27;h&#x27;], [&#x27;1&#x27;,&#x27;e&#x27;], [&#x27;2&#x27;,&#x27;l&#x27;], [&#x27;3&#x27;,&#x27;l&#x27;] ,[&#x27;4&#x27;,&#x27;o&#x27;] ]</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•äº”ï¼šObject-assign-ï¼šObject-assign-æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œåé¢çš„å‚æ•°éƒ½æ˜¯æºå¯¹è±¡ã€‚"><a href="#æ–¹æ³•äº”ï¼šObject-assign-ï¼šObject-assign-æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œåé¢çš„å‚æ•°éƒ½æ˜¯æºå¯¹è±¡ã€‚" class="headerlink" title="æ–¹æ³•äº”ï¼šObject.assign()ï¼šObject.assign æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œåé¢çš„å‚æ•°éƒ½æ˜¯æºå¯¹è±¡ã€‚"></a>æ–¹æ³•äº”ï¼šObject.assign()ï¼šObject.assign æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œåé¢çš„å‚æ•°éƒ½æ˜¯æºå¯¹è±¡ã€‚</h2><h3 id="æ³¨æ„ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸æºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œæˆ–å¤šä¸ªæºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œåˆ™åé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§ã€‚"><a href="#æ³¨æ„ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸æºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œæˆ–å¤šä¸ªæºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œåˆ™åé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§ã€‚" class="headerlink" title="æ³¨æ„ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸æºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œæˆ–å¤šä¸ªæºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œåˆ™åé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§ã€‚"></a>æ³¨æ„ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸æºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œæˆ–å¤šä¸ªæºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œåˆ™åé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§ã€‚</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const target = &#123; a: 1, b: 2 &#125;;</span><br><span class="line">const source = &#123; b: 4, c: 5 &#125;;</span><br><span class="line">const returnedTarget = Object.assign(target, source);</span><br><span class="line">console.log(target);</span><br><span class="line">// Expected output: Object &#123; a: 1, b: 4, c: 5 &#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ³•å…­ï¼šObject-getOwnPropertyNames"><a href="#æ–¹æ³•å…­ï¼šObject-getOwnPropertyNames" class="headerlink" title="æ–¹æ³•å…­ï¼šObject.getOwnPropertyNames()"></a>æ–¹æ³•å…­ï¼šObject.getOwnPropertyNames()</h2><h3 id="Object-getOwnPropertyNames-è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„å¯¹å…ƒç´ æ˜¯-objè‡ªèº«æ‹¥æœ‰çš„æšä¸¾æˆ–ä¸å¯æšä¸¾å±æ€§åç§°å­—ç¬¦ä¸²ã€‚æ•°ç»„ä¸­æšä¸¾å±æ€§çš„é¡ºåºä¸é€šè¿‡-forâ€¦in-å¾ªç¯ï¼ˆæˆ–-Object-keysï¼‰è¿­ä»£è¯¥å¯¹è±¡å±æ€§æ—¶ä¸€è‡´ã€‚æ•°ç»„ä¸­ä¸å¯æšä¸¾å±æ€§çš„é¡ºåºæœªå®šä¹‰ã€‚"><a href="#Object-getOwnPropertyNames-è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„å¯¹å…ƒç´ æ˜¯-objè‡ªèº«æ‹¥æœ‰çš„æšä¸¾æˆ–ä¸å¯æšä¸¾å±æ€§åç§°å­—ç¬¦ä¸²ã€‚æ•°ç»„ä¸­æšä¸¾å±æ€§çš„é¡ºåºä¸é€šè¿‡-forâ€¦in-å¾ªç¯ï¼ˆæˆ–-Object-keysï¼‰è¿­ä»£è¯¥å¯¹è±¡å±æ€§æ—¶ä¸€è‡´ã€‚æ•°ç»„ä¸­ä¸å¯æšä¸¾å±æ€§çš„é¡ºåºæœªå®šä¹‰ã€‚" class="headerlink" title="Object.getOwnPropertyNames() è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„å¯¹å…ƒç´ æ˜¯ objè‡ªèº«æ‹¥æœ‰çš„æšä¸¾æˆ–ä¸å¯æšä¸¾å±æ€§åç§°å­—ç¬¦ä¸²ã€‚æ•°ç»„ä¸­æšä¸¾å±æ€§çš„é¡ºåºä¸é€šè¿‡ forâ€¦in å¾ªç¯ï¼ˆæˆ– Object.keysï¼‰è¿­ä»£è¯¥å¯¹è±¡å±æ€§æ—¶ä¸€è‡´ã€‚æ•°ç»„ä¸­ä¸å¯æšä¸¾å±æ€§çš„é¡ºåºæœªå®šä¹‰ã€‚"></a>Object.getOwnPropertyNames() è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„å¯¹å…ƒç´ æ˜¯ objè‡ªèº«æ‹¥æœ‰çš„æšä¸¾æˆ–ä¸å¯æšä¸¾å±æ€§åç§°å­—ç¬¦ä¸²ã€‚æ•°ç»„ä¸­æšä¸¾å±æ€§çš„é¡ºåºä¸é€šè¿‡ forâ€¦in å¾ªç¯ï¼ˆæˆ– Object.keysï¼‰è¿­ä»£è¯¥å¯¹è±¡å±æ€§æ—¶ä¸€è‡´ã€‚æ•°ç»„ä¸­ä¸å¯æšä¸¾å±æ€§çš„é¡ºåºæœªå®šä¹‰ã€‚</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var arr = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span><br><span class="line">console.log(Object.getOwnPropertyNames(arr).sort()) </span><br><span class="line">// [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;length&quot;]</span><br></pre></td></tr></table></figure>
<h3 id="ç±»æ•°ç»„å¯¹è±¡"><a href="#ç±»æ•°ç»„å¯¹è±¡" class="headerlink" title="// ç±»æ•°ç»„å¯¹è±¡"></a>// ç±»æ•°ç»„å¯¹è±¡</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var obj = &#123; 0: &quot;a&quot;, 1: &quot;b&quot;, 2: &quot;c&quot;&#125;</span><br><span class="line">console.log(Object.getOwnPropertyNames(obj).sort())</span><br><span class="line">// Expected output:[&quot;0&quot;, &quot;1&quot;, &quot;2&quot;]</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨-Array-forEach-è¾“å‡ºå±æ€§åå’Œå±æ€§å€¼"><a href="#ä½¿ç”¨-Array-forEach-è¾“å‡ºå±æ€§åå’Œå±æ€§å€¼" class="headerlink" title="// ä½¿ç”¨ Array.forEach è¾“å‡ºå±æ€§åå’Œå±æ€§å€¼"></a>// ä½¿ç”¨ Array.forEach è¾“å‡ºå±æ€§åå’Œå±æ€§å€¼</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Object.getOwnPropertyNames(obj).forEach(function(val, idx, array) &#123;</span><br><span class="line">  console.log(val + &quot; -&gt; &quot; + obj[val])</span><br><span class="line">&#125;)</span><br><span class="line">// Expected output:</span><br><span class="line">// 0 -&gt; a</span><br><span class="line">// 1 -&gt; b</span><br><span class="line">// 2 -&gt; c</span><br></pre></td></tr></table></figure>
<h3 id="ä¸å¯æšä¸¾å±æ€§"><a href="#ä¸å¯æšä¸¾å±æ€§" class="headerlink" title="//ä¸å¯æšä¸¾å±æ€§"></a>//ä¸å¯æšä¸¾å±æ€§</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var my_obj = Object.create(&#123;&#125;, &#123;</span><br><span class="line">  getFoo: &#123;</span><br><span class="line">    value: function() &#123; return this.foo; &#125;,</span><br><span class="line">    enumerable: false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">my_obj.foo = 1</span><br><span class="line">console.log(Object.getOwnPropertyNames(my_obj).sort())</span><br><span class="line">// Expected output:[&quot;foo&quot;, &quot;getFoo&quot;]</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¨¡å—åŒ–(ä¸€)</title>
    <url>/2023/04/11/%E6%A8%A1%E5%9D%97%E5%8C%96(%E4%B8%80)/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å½“ä½ å»é¢è¯•çš„æ—¶å€™ï¼Œè¢«é¢è¯•å®˜é—®åˆ°å‰ç«¯æ¨¡å—åŒ–çš„é—®é¢˜ï¼Œä½ çš„å›ç­”æ¢æ¥çš„æ˜¯é¢è¯•å®˜çš„ä¸€å¥â€œä½ è¯´äº†ï¼Œä½†æ˜¯å¥½åƒåˆæ²¡è¯´â€ã€‚æ­¤æ—¶ä¼šæ„Ÿåˆ°å¤‡å—æ‰“å‡»ï¼Œæ€€ç–‘äººç”Ÿçš„é—®å‰ç«¯æ¨¡å—åŒ–åˆ°åº•æ˜¯å•¥ï¼Ÿè¯´ä½ å¥½åƒçŸ¥é“ï¼Œåˆå¥½åƒè¯´ä¸å‡ºæ‰€ä»¥ç„¶æ¥ã€‚</p>
<h1 id="æ¨¡å—åŒ–ç®€è¿°"><a href="#æ¨¡å—åŒ–ç®€è¿°" class="headerlink" title="æ¨¡å—åŒ–ç®€è¿°"></a>æ¨¡å—åŒ–ç®€è¿°</h1><p>æŠŠå¤æ‚ä»£ç æŒ‰åŠŸèƒ½çš„ä¸åŒåˆ’åˆ†æˆä¸åŒçš„æ¨¡å—å•ç‹¬ç»´æŠ¤ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ æ¨¡å—åŒ–åªæ˜¯æ€æƒ³ã€ç†è®ºï¼Œä¸åŒ…å«å…·ä½“å®ç°ã€‚</p>
<h1 id="æ¨¡å—åŒ–çš„è¯ç”Ÿ"><a href="#æ¨¡å—åŒ–çš„è¯ç”Ÿ" class="headerlink" title="æ¨¡å—åŒ–çš„è¯ç”Ÿ"></a>æ¨¡å—åŒ–çš„è¯ç”Ÿ</h1><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸€ä¸ªäººåšä¸å®Œçš„äº‹ï¼Œåˆ†æˆäº†å¤šä¸ªäººåšï¼Œæ¯äººè´Ÿè´£ä¸€ä¸ªå—å†…å®¹ï¼ˆæ¨¡å—ï¼‰ï¼Œæœ€åæŠŠæ¯ä¸ªäººåšçš„ä¸œè¥¿ç»„è£…ä¸€èµ·æˆä¸ºæ•´ä½“ã€‚<br>å‰ç«¯æ¨¡å—åŒ–çš„æ¼”è¿›é“è·¯ä¸Šè™½ç„¶æœ‰å¾ˆå¤šé˜¶æ®µï¼Œä½†æ˜¯å…¶å®æœ€ç»ˆçš„ç›®æ ‡ï¼Œå°±æ˜¯æ‹†åˆ†æ¨¡å—ï¼Œåˆ†å·¥å¼€å‘ï¼Œæ¯ä¸ªäººåšå¥½ä¸€ä¸ªæ¨¡å—ä¹‹åï¼Œæš´éœ²ä¸€äº›å‚æ•°ã€æ–¹æ³•ç»™åˆ°è°ƒç”¨è€…ï¼Œæ¼”è¿›çš„é“è·¯æ— éæ˜¯ç§‰è¡Œå¦‚ä½•æ›´åŠ ä¼˜é›…ï¼Œé«˜è§£è€¦ï¼Œé«˜å…¼å®¹ç­‰æ–¹å‘ä¼˜åŒ–ã€‚</p>
<h1 id="æ¨¡å—åŒ–çš„æ¼”è¿›"><a href="#æ¨¡å—åŒ–çš„æ¼”è¿›" class="headerlink" title="æ¨¡å—åŒ–çš„æ¼”è¿›"></a>æ¨¡å—åŒ–çš„æ¼”è¿›</h1><h2 id="ç¬¬ä¸€é˜¶æ®µï¼šä»…ä»…åŸºäºæ–‡ä»¶çš„åˆ’åˆ†æ¨¡å—çš„æ–¹å¼"><a href="#ç¬¬ä¸€é˜¶æ®µï¼šä»…ä»…åŸºäºæ–‡ä»¶çš„åˆ’åˆ†æ¨¡å—çš„æ–¹å¼" class="headerlink" title="ç¬¬ä¸€é˜¶æ®µï¼šä»…ä»…åŸºäºæ–‡ä»¶çš„åˆ’åˆ†æ¨¡å—çš„æ–¹å¼"></a>ç¬¬ä¸€é˜¶æ®µï¼šä»…ä»…åŸºäºæ–‡ä»¶çš„åˆ’åˆ†æ¨¡å—çš„æ–¹å¼</h2><p>å…·ä½“åšæ³•å°±æ˜¯å°†æ¯ä¸ªåŠŸèƒ½åŠå…¶ç›¸å…³çŠ¶æ€æ•°æ®å„è‡ªå•ç‹¬æ”¾åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œçº¦å®šæ¯ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œä½¿ç”¨æŸä¸ªæ¨¡å—å°±æ˜¯å°†è¿™ä¸ªæ¨¡å—å¼•å…¥åˆ°é¡µé¢ä¸­ï¼Œç„¶åç›´æ¥è°ƒç”¨æ¨¡å—ä¸­çš„æˆå‘˜ï¼ˆå˜é‡ / å‡½æ•°ï¼‰ã€‚<br>ç¼ºç‚¹ï¼šæ‰€æœ‰æ¨¡å—éƒ½ç›´æ¥åœ¨å…¨å±€å·¥ä½œï¼Œæ²¡æœ‰ç§æœ‰ç©ºé—´ï¼Œæ‰€æœ‰æˆå‘˜éƒ½å¯ä»¥åœ¨æ¨¡å—å¤–éƒ¨è¢«è®¿é—®æˆ–è€…ä¿®æ”¹ï¼Œè€Œä¸”æ¨¡å—ä¸€æ®µå¤šäº†è¿‡åï¼Œå®¹æ˜“äº§ç”Ÿå‘½åå†²çªï¼Œå¦å¤–æ— æ³•ç®¡ç†æ¨¡å—ä¸æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p>
<h2 id="ç¬¬äºŒé˜¶æ®µï¼šæ¯ä¸ªæ¨¡å—æš´éœ²ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œæ‰€æœ‰æ¨¡å—æˆå‘˜éƒ½æŒ‚è½½åˆ°è¿™ä¸ªå¯¹è±¡ä¸­"><a href="#ç¬¬äºŒé˜¶æ®µï¼šæ¯ä¸ªæ¨¡å—æš´éœ²ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œæ‰€æœ‰æ¨¡å—æˆå‘˜éƒ½æŒ‚è½½åˆ°è¿™ä¸ªå¯¹è±¡ä¸­" class="headerlink" title="ç¬¬äºŒé˜¶æ®µï¼šæ¯ä¸ªæ¨¡å—æš´éœ²ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œæ‰€æœ‰æ¨¡å—æˆå‘˜éƒ½æŒ‚è½½åˆ°è¿™ä¸ªå¯¹è±¡ä¸­"></a>ç¬¬äºŒé˜¶æ®µï¼šæ¯ä¸ªæ¨¡å—æš´éœ²ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œæ‰€æœ‰æ¨¡å—æˆå‘˜éƒ½æŒ‚è½½åˆ°è¿™ä¸ªå¯¹è±¡ä¸­</h2><p>å…·ä½“åšæ³•å°±æ˜¯åœ¨ç¬¬ä¸€é˜¶æ®µçš„åŸºç¡€ä¸Šï¼Œé€šè¿‡å°†æ¯ä¸ªæ¨¡å—ã€ŒåŒ…è£¹ã€ä¸ºä¸€ä¸ªå…¨å±€å¯¹è±¡çš„å½¢å¼å®ç°ï¼Œæœ‰ç‚¹ç±»ä¼¼äºä¸ºæ¨¡å—å†…çš„æˆå‘˜æ·»åŠ äº†ã€Œå‘½åç©ºé—´ã€çš„æ„Ÿè§‰ã€‚<br>é€šè¿‡ã€Œå‘½åç©ºé—´ã€å‡å°äº†å‘½åå†²çªçš„å¯èƒ½ï¼Œä½†æ˜¯åŒæ ·æ²¡æœ‰ç§æœ‰ç©ºé—´ï¼Œæ‰€æœ‰æ¨¡å—æˆå‘˜ä¹Ÿå¯ä»¥åœ¨æ¨¡å—å¤–éƒ¨è¢«è®¿é—®æˆ–è€…ä¿®æ”¹ï¼Œè€Œä¸”ä¹Ÿæ— æ³•ç®¡ç†æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p>
<h2 id="ç¬¬ä¸‰é˜¶æ®µï¼šä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼šImmediately-Invoked-Function-Expressionï¼‰ä¸ºæ¨¡å—æä¾›ç§æœ‰ç©ºé—´"><a href="#ç¬¬ä¸‰é˜¶æ®µï¼šä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼šImmediately-Invoked-Function-Expressionï¼‰ä¸ºæ¨¡å—æä¾›ç§æœ‰ç©ºé—´" class="headerlink" title="ç¬¬ä¸‰é˜¶æ®µï¼šä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼šImmediately-Invoked Function Expressionï¼‰ä¸ºæ¨¡å—æä¾›ç§æœ‰ç©ºé—´"></a>ç¬¬ä¸‰é˜¶æ®µï¼šä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼šImmediately-Invoked Function Expressionï¼‰ä¸ºæ¨¡å—æä¾›ç§æœ‰ç©ºé—´</h2><p>å…·ä½“åšæ³•å°±æ˜¯å°†æ¯ä¸ªæ¨¡å—æˆå‘˜éƒ½æ”¾åœ¨ä¸€ä¸ªå‡½æ•°æä¾›çš„ç§æœ‰ä½œç”¨åŸŸä¸­ï¼Œå¯¹äºéœ€è¦æš´éœ²ç»™å¤–éƒ¨çš„æˆå‘˜ï¼Œé€šè¿‡æŒ‚åœ¨åˆ°å…¨å±€å¯¹è±¡ä¸Šçš„æ–¹å¼å®ç°ã€‚<br>æœ‰äº†ç§æœ‰æˆå‘˜çš„æ¦‚å¿µï¼Œç§æœ‰æˆå‘˜åªèƒ½åœ¨æ¨¡å—æˆå‘˜å†…é€šè¿‡é—­åŒ…çš„å½¢å¼è®¿é—®ã€‚</p>
<h2 id="ç¬¬å››é˜¶æ®µï¼š-åˆ©ç”¨-IIFE-å‚æ•°ä½œä¸ºä¾èµ–å£°æ˜ä½¿ç”¨"><a href="#ç¬¬å››é˜¶æ®µï¼š-åˆ©ç”¨-IIFE-å‚æ•°ä½œä¸ºä¾èµ–å£°æ˜ä½¿ç”¨" class="headerlink" title="ç¬¬å››é˜¶æ®µï¼š åˆ©ç”¨ IIFE å‚æ•°ä½œä¸ºä¾èµ–å£°æ˜ä½¿ç”¨"></a>ç¬¬å››é˜¶æ®µï¼š åˆ©ç”¨ IIFE å‚æ•°ä½œä¸ºä¾èµ–å£°æ˜ä½¿ç”¨</h2><p>å…·ä½“åšæ³•å°±æ˜¯åœ¨ç¬¬ä¸‰é˜¶æ®µçš„åŸºç¡€ä¸Šï¼Œåˆ©ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°çš„å‚æ•°ä¼ é€’æ¨¡å—ä¾èµ–é¡¹ã€‚<br>è¿™ä½¿å¾—æ¯ä¸€ä¸ªæ¨¡å—ä¹‹é—´çš„å…³ç³»å˜å¾—æ›´åŠ æ˜æ˜¾ã€‚</p>
<h2 id="ç¬¬äº”é˜¶æ®µï¼š-æ¨¡å—åŒ–è§„èŒƒ"><a href="#ç¬¬äº”é˜¶æ®µï¼š-æ¨¡å—åŒ–è§„èŒƒ" class="headerlink" title="ç¬¬äº”é˜¶æ®µï¼š æ¨¡å—åŒ–è§„èŒƒ"></a>ç¬¬äº”é˜¶æ®µï¼š æ¨¡å—åŒ–è§„èŒƒ</h2><p>Require.js æä¾›äº† AMD æ¨¡å—åŒ–è§„èŒƒï¼Œä»¥åŠä¸€ä¸ªè‡ªåŠ¨åŒ–æ¨¡å—åŠ è½½å™¨â€”æ¨¡å—åŒ–è§„èŒƒçš„å‡ºç°ï¼Œå†ä¹‹åä¾¿æœ‰äº†å…¶ä»–æ›´å¤šæ ‡å‡†ç´§æ¥è€Œæ¥ï¼ŒCommonJSã€CMDã€‚ã€‚ã€‚</p>
<h1 id="æ¨¡å—åŒ–è§„èŒƒçš„å‡ºç°"><a href="#æ¨¡å—åŒ–è§„èŒƒçš„å‡ºç°" class="headerlink" title="æ¨¡å—åŒ–è§„èŒƒçš„å‡ºç°"></a>æ¨¡å—åŒ–è§„èŒƒçš„å‡ºç°</h1><p>éœ€ï¼šæ¨¡å—åŒ–æ ‡å‡†+æ¨¡å—åŠ è½½å™¨</p>
<h2 id="CommonJSè§„èŒƒ-nodejsæå‡ºçš„ä¸€å¥—æ ‡å‡†"><a href="#CommonJSè§„èŒƒ-nodejsæå‡ºçš„ä¸€å¥—æ ‡å‡†" class="headerlink" title="CommonJSè§„èŒƒ(nodejsæå‡ºçš„ä¸€å¥—æ ‡å‡†)"></a>CommonJSè§„èŒƒ(nodejsæå‡ºçš„ä¸€å¥—æ ‡å‡†)</h2><ul>
<li>æ ‡å‡†ï¼š ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å— æ¯ä¸ªæ¨¡å—éƒ½æœ‰å•ç‹¬çš„ä½œç”¨åŸŸ é€šè¿‡ module.exports å¯¼å‡ºæˆå‘˜ é€šè¿‡ require å‡½æ•°è½½å…¥æ¨¡å—ã€‚</li>
<li>ç¼ºç‚¹ï¼šCommonJSæ˜¯ä»¥åŒæ­¥æ¨¡å¼åŠ è½½æ¨¡å—ï¼Œnodeæ‰§è¡Œæœºåˆ¶æ˜¯å¯åŠ¨æ—¶åŠ è½½æ¨¡å—ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­ä¸éœ€è¦åŠ è½½åªéœ€ä½¿ç”¨ï¼Œåœ¨nodeä¸­ä¸ä¼šæœ‰é—®é¢˜ï¼›ä½†æ˜¯åœ¨æµè§ˆå™¨ç«¯é¡µé¢åŠ è½½ä¼šå¯¼è‡´å¤§é‡åŒæ­¥è¯·æ±‚å‡ºç°ï¼Œè€Œæ•ˆç‡ä½ã€‚<h2 id="AMD-Asynchronous-Module-Definition-â€”-å¼‚æ­¥æ¨¡å—å®šä¹‰è§„èŒƒ"><a href="#AMD-Asynchronous-Module-Definition-â€”-å¼‚æ­¥æ¨¡å—å®šä¹‰è§„èŒƒ" class="headerlink" title="AMD(Asynchronous Module Definition) â€” å¼‚æ­¥æ¨¡å—å®šä¹‰è§„èŒƒ"></a>AMD(Asynchronous Module Definition) â€” å¼‚æ­¥æ¨¡å—å®šä¹‰è§„èŒƒ</h2>æ¨¡å—é€šè¿‡defineå‡½æ•°å®šä¹‰</li>
<li>ä¼˜åŠ¿ï¼šç›®å‰ç»å¤§å¤šæ•°ç¬¬ä¸‰æ–¹åº“éƒ½æ”¯æŒAMDè§„èŒƒ</li>
<li>ç¼ºç‚¹ï¼š ä½¿ç”¨å¤æ‚æ¨¡å—åˆ’åˆ†ç»†è‡´ï¼Œæ¨¡å—JSæ–‡ä»¶ä¼šå‡ºç°è¯·æ±‚é¢‘ç¹çš„æƒ…å†µ<h2 id="Sea-js-æ·˜å®æ¨å‡º-CMD-é€šç”¨æ¨¡å—å®šä¹‰è§„èŒƒ"><a href="#Sea-js-æ·˜å®æ¨å‡º-CMD-é€šç”¨æ¨¡å—å®šä¹‰è§„èŒƒ" class="headerlink" title="Sea.js(æ·˜å®æ¨å‡º) + CMD(é€šç”¨æ¨¡å—å®šä¹‰è§„èŒƒ)"></a>Sea.js(æ·˜å®æ¨å‡º) + CMD(é€šç”¨æ¨¡å—å®šä¹‰è§„èŒƒ)</h2>CMDè§„èŒƒç±»ä¼¼CommonJSè§„èŒƒ åæœŸä¹Ÿè¢«Require.jså…¼å®¹äº†<h2 id="Require-js"><a href="#Require-js" class="headerlink" title="Require.js"></a>Require.js</h2>æä¾›äº† AMD æ¨¡å—åŒ–è§„èŒƒï¼Œä»¥åŠä¸€ä¸ªè‡ªåŠ¨åŒ–æ¨¡å—åŠ è½½å™¨ æä¾›requireå‡½æ•°åŠ è½½æ¨¡å—<h1 id="æ¨¡å—åŒ–é»˜è®¤è§„èŒƒ"><a href="#æ¨¡å—åŒ–é»˜è®¤è§„èŒƒ" class="headerlink" title="æ¨¡å—åŒ–é»˜è®¤è§„èŒƒ"></a>æ¨¡å—åŒ–é»˜è®¤è§„èŒƒ</h1>æµè§ˆå™¨ç¯å¢ƒä½¿ç”¨ES Modules<br>nodejsä½¿ç”¨CommonJS<h1 id="å…³äºES-Modules"><a href="#å…³äºES-Modules" class="headerlink" title="å…³äºES Modules"></a>å…³äºES Modules</h1>é€šè¿‡ç»™ script æ·»åŠ  type = module çš„å±æ€§ä½¿ç”¨ ES Modules</li>
<li>ESM è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œå¿½ç•¥ â€˜use strictâ€™</li>
<li>æ¯ä¸ª ES Module éƒ½æ˜¯è¿è¡Œåœ¨å•ç‹¬çš„ç§æœ‰ä½œç”¨åŸŸä¸­</li>
<li>ESM æ˜¯é€šè¿‡ CORS çš„æ–¹å¼è¯·æ±‚å¤–éƒ¨ JS æ¨¡å—çš„</li>
<li>ESM çš„ script æ ‡ç­¾ä¼šå»¶è¿Ÿæ‰§è¡Œè„šæœ¬<br>å¯¹äºæˆ‘ä»¬å‰ç«¯å¹³æ—¶å¼€å‘ï¼Œå…¶å®ç”¨å¾—æœ€å¤šçš„æ˜¯es modulesï¼Œè¿™é‡Œä¹Ÿç®€å•ä»‹ç»ä¸€ä¸‹è¿™ç§è§„èŒƒçš„ä¸€äº›å¸¸ç”¨å†™æ³•<h2 id="ES-Modules-å¯¼å‡º"><a href="#ES-Modules-å¯¼å‡º" class="headerlink" title="ES Modules å¯¼å‡º"></a>ES Modules å¯¼å‡º</h2>å•ä¸ªå¯¼å‡º<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export const name = &#x27;foo module&#x27;</span><br><span class="line">export function hello () &#123;</span><br><span class="line">    console.log(&#x27;hello&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
åˆå¹¶å¯¼å‡º<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const name = &#x27;foo module&#x27;</span><br><span class="line">function hello () &#123;</span><br><span class="line">    console.log(&#x27;hello&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">class Person &#123;&#125;</span><br><span class="line">export &#123; name, hello, Person &#125;</span><br></pre></td></tr></table></figure>
åˆå¹¶å¯¼å‡ºï¼Œä¸”é‡å‘½å<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const name = &#x27;foo module&#x27;</span><br><span class="line">function hello () &#123;</span><br><span class="line">    console.log(&#x27;hello&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">class Person &#123;&#125;</span><br><span class="line">export &#123;</span><br><span class="line">    name1: name,</span><br><span class="line">    hello2: hello,</span><br><span class="line">    Person3: Person</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
é»˜è®¤å¯¼å‡º<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const name = &#x27;foo module&#x27;</span><br><span class="line">function hello () &#123;</span><br><span class="line">    console.log(&#x27;hello&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">class Person &#123;&#125;</span><br><span class="line">export default name;</span><br></pre></td></tr></table></figure>
<h2 id="ES-Modules-å¯¼å…¥å¯¼å‡ºçš„æ³¨æ„äº‹é¡¹"><a href="#ES-Modules-å¯¼å…¥å¯¼å‡ºçš„æ³¨æ„äº‹é¡¹" class="headerlink" title="ES Modules å¯¼å…¥å¯¼å‡ºçš„æ³¨æ„äº‹é¡¹"></a>ES Modules å¯¼å…¥å¯¼å‡ºçš„æ³¨æ„äº‹é¡¹</h2>å¯¼å‡ºå­—é¢é‡å’Œå¯¼å‡ºæ¨¡å—çš„åŒºåˆ«<br>å¯¼å‡ºå­—é¢é‡(å¦‚:å¯¹è±¡):export default { name, age }<br>æ³¨æ„: import {name, age} from â€˜modulenameâ€™å¯¼å…¥æ¨¡å—æ— æ³•ä½¿ç”¨åˆ°nameå’Œageçš„å€¼<br>å¯¼å‡ºæ¨¡å—:<br>export { name, age }<br>import {name, age} from â€˜modulenameâ€™ å¯¼å…¥æ¨¡å—å¯ä»¥ä½¿ç”¨åˆ°nameå’Œageçš„å€¼<br>åŸå› ï¼šimportå¯¼å…¥çš„æ˜¯å¯¹æ¨¡å—å†…éƒ¨çš„ä½¿ç”¨<h3 id="å¯¼å‡ºæ¨¡å—çš„å¼•ç”¨"><a href="#å¯¼å‡ºæ¨¡å—çš„å¼•ç”¨" class="headerlink" title="å¯¼å‡ºæ¨¡å—çš„å¼•ç”¨"></a>å¯¼å‡ºæ¨¡å—çš„å¼•ç”¨</h3>æ³¨æ„ï¼šexportæš´éœ²çš„æ˜¯æ¨¡å—çš„å¼•ç”¨å…³ç³»(åœ°å€)ï¼Œå¹¶ä¸”åªè¯»ä¸å¯ä¿®æ”¹(å°è¯•ä¿®æ”¹ä¼šæŠ¥é”™è¯¯â€”Uncaught TypeError:Assignment to constant variable)<br>æ³¨æ„ç‚¹</li>
<li>CommonJS ä¸­æ˜¯å…ˆå°†æ¨¡å—æ•´ä½“å¯¼å…¥ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åä»å¯¹è±¡ä¸­ç»“æ„å‡ºéœ€è¦çš„æˆå‘˜ const { name, age } = require(â€˜./module.jsâ€™)</li>
<li>ES Module ä¸­ { } æ˜¯å›ºå®šè¯­æ³•ï¼Œå°±æ˜¯ç›´æ¥æå–æ¨¡å—å¯¼å‡ºæˆå‘˜ import { name, age } from â€˜./module.jsâ€™</li>
<li>å¯¼å…¥æˆå‘˜å¹¶ä¸æ˜¯å¤åˆ¶ä¸€ä¸ªå‰¯æœ¬ï¼Œè€Œæ˜¯ç›´æ¥å¯¼å…¥æ¨¡å—æˆå‘˜çš„å¼•ç”¨åœ°å€ï¼Œä¹Ÿå°±æ˜¯è¯´ import å¾—åˆ°çš„å˜é‡ä¸ export å¯¼å…¥çš„å˜é‡åœ¨å†…å­˜ä¸­æ˜¯åŒä¸€å—ç©ºé—´ã€‚ä¸€æ—¦æ¨¡å—ä¸­æˆå‘˜ä¿®æ”¹äº†ï¼Œè¿™é‡Œä¹Ÿä¼šåŒæ—¶ä¿®æ”¹</li>
<li>å¯¼å…¥æ¨¡å—æˆå‘˜å˜é‡æ˜¯åªè¯»çš„ name = â€˜tomâ€™ // æŠ¥é”™</li>
<li>å¯¼å…¥çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„å±æ€§è¯»å†™ä¸å—å½±å“ name.xxx = â€˜xxxâ€™ // æ­£å¸¸</li>
</ul>
<h2 id="ES-Modules-å¯¼å…¥"><a href="#ES-Modules-å¯¼å…¥" class="headerlink" title="ES Modules å¯¼å…¥"></a>ES Modules å¯¼å…¥</h2><h3 id="å¯¼å…¥æ–‡ä»¶è·¯å¾„"><a href="#å¯¼å…¥æ–‡ä»¶è·¯å¾„" class="headerlink" title="å¯¼å…¥æ–‡ä»¶è·¯å¾„"></a>å¯¼å…¥æ–‡ä»¶è·¯å¾„</h3><p>éœ€è¦å¼•ç”¨çš„åç§°<br>ç›¸å¯¹è·¯å¾„ä¸Šçš„./ä¸èƒ½çœç•¥<br>å¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„å’Œå®Œæ•´çš„url</p>
<h3 id="å¯¼å…¥æ¨¡å—æ—¶æ˜¯å¦æå–æ¨¡å—æˆå‘˜"><a href="#å¯¼å…¥æ¨¡å—æ—¶æ˜¯å¦æå–æ¨¡å—æˆå‘˜" class="headerlink" title="å¯¼å…¥æ¨¡å—æ—¶æ˜¯å¦æå–æ¨¡å—æˆå‘˜"></a>å¯¼å…¥æ¨¡å—æ—¶æ˜¯å¦æå–æ¨¡å—æˆå‘˜</h3><p>å¯¼å…¥æ¨¡å—å¹¶æå–æ¨¡å—æˆå‘˜ import {} from â€˜./module.jsâ€™<br>å¯¼å…¥æ¨¡å—æš‚ä¸æå–æ¨¡å—æˆå‘˜ import â€˜./module.jsâ€™ (å¯¼å…¥ä¸éœ€è¦å¤–ç•Œæ§åˆ¶çš„å­åŠŸèƒ½æ¨¡å—æ—¶å¾ˆæœ‰ç”¨)</p>
<h3 id="åŒæ—¶å¯¼å…¥æ¨¡å—å¤šä¸ªæˆå‘˜æˆ–æ‰€æœ‰æˆå‘˜"><a href="#åŒæ—¶å¯¼å…¥æ¨¡å—å¤šä¸ªæˆå‘˜æˆ–æ‰€æœ‰æˆå‘˜" class="headerlink" title="åŒæ—¶å¯¼å…¥æ¨¡å—å¤šä¸ªæˆå‘˜æˆ–æ‰€æœ‰æˆå‘˜"></a>åŒæ—¶å¯¼å…¥æ¨¡å—å¤šä¸ªæˆå‘˜æˆ–æ‰€æœ‰æˆå‘˜</h3><p>import * as mod from â€˜./module.jsâ€™ éœ€è¦æŠŠæ‰€æœ‰æå–æˆå‘˜æ”¾åˆ°ä¸€ä¸ªå¯¹è±¡å½“ä¸­ï¼Œé€šè¿‡as,å¯¼å…¥çš„æˆå‘˜éƒ½ä¼šä½œä¸ºå¯¹è±¡å±æ€§å‡ºç°</p>
<h3 id="åŠ¨æ€å¯¼å…¥æ¨¡å—-åœ¨éœ€è¦æ»¡è¶³æŸäº›æ¡ä»¶æ‰èƒ½å¯¼å…¥æ—¶å¯ç”¨"><a href="#åŠ¨æ€å¯¼å…¥æ¨¡å—-åœ¨éœ€è¦æ»¡è¶³æŸäº›æ¡ä»¶æ‰èƒ½å¯¼å…¥æ—¶å¯ç”¨" class="headerlink" title="åŠ¨æ€å¯¼å…¥æ¨¡å—(åœ¨éœ€è¦æ»¡è¶³æŸäº›æ¡ä»¶æ‰èƒ½å¯¼å…¥æ—¶å¯ç”¨)"></a>åŠ¨æ€å¯¼å…¥æ¨¡å—(åœ¨éœ€è¦æ»¡è¶³æŸäº›æ¡ä»¶æ‰èƒ½å¯¼å…¥æ—¶å¯ç”¨)</h3><p>import (â€˜./module.jsâ€™) è¿”å›çš„æ˜¯promise å–æ¨¡å—æˆå‘˜çš„æ–¹å¼:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import(&#x27;./module.js&#x27;).then(function (module) &#123;</span><br><span class="line">    //æ‰€æœ‰æ¨¡å—æˆå‘˜éƒ½åœ¨moduleå‚æ•°é‡Œ</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="åŒæ—¶å¯¼å…¥å‘½åæˆå‘˜å’Œé»˜è®¤æˆå‘˜"><a href="#åŒæ—¶å¯¼å…¥å‘½åæˆå‘˜å’Œé»˜è®¤æˆå‘˜" class="headerlink" title="åŒæ—¶å¯¼å…¥å‘½åæˆå‘˜å’Œé»˜è®¤æˆå‘˜"></a>åŒæ—¶å¯¼å…¥å‘½åæˆå‘˜å’Œé»˜è®¤æˆå‘˜</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; name, age, default as other&#125; from &#x27;./module.js&#x27; </span><br><span class="line">æˆ–è€…</span><br><span class="line">import other,&#123; name, age&#125; from &#x27;./module.js&#x27;other   ä»£è¡¨moduleæ¨¡å—æ‰€æœ‰é»˜è®¤å¯¼å‡ºçš„æˆå‘˜</span><br></pre></td></tr></table></figure>
<h2 id="ES-Modules-in-Node-js"><a href="#ES-Modules-in-Node-js" class="headerlink" title="ES Modules in Node.js"></a>ES Modules in Node.js</h2><p>ES Modules in Node.js - ä¸ CommonJS äº¤äº’<br>ES Module ä¸­å¯ä»¥å¯¼å…¥ CommonJS æ¨¡å—</p>
<h3 id="es-module-mjs"><a href="#es-module-mjs" class="headerlink" title="es-module.mjs"></a>es-module.mjs</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import mod from &#x27;./commonjs.js&#x27;</span><br><span class="line">console.log(mod)</span><br></pre></td></tr></table></figure>
<p>ä¸èƒ½ç›´æ¥æå–æˆå‘˜ï¼Œæ³¨æ„ import ä¸æ˜¯è§£æ„å¯¼å‡ºå¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; foo &#125; from &#x27;./commonjs.js&#x27;</span><br><span class="line">console.log(foo)</span><br><span class="line">export const foo = &#x27;es module export value&#x27;</span><br></pre></td></tr></table></figure>
<h3 id="CommonJS-æ¨¡å—å§‹ç»ˆåªä¼šå¯¼å‡ºä¸€ä¸ªé»˜è®¤æˆå‘˜"><a href="#CommonJS-æ¨¡å—å§‹ç»ˆåªä¼šå¯¼å‡ºä¸€ä¸ªé»˜è®¤æˆå‘˜" class="headerlink" title="CommonJS æ¨¡å—å§‹ç»ˆåªä¼šå¯¼å‡ºä¸€ä¸ªé»˜è®¤æˆå‘˜"></a>CommonJS æ¨¡å—å§‹ç»ˆåªä¼šå¯¼å‡ºä¸€ä¸ªé»˜è®¤æˆå‘˜</h3><p>commonjs.js</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    foo: &#x27;commonjs exports value&#x27;</span><br><span class="line">&#125;</span><br><span class="line">exports.foo = &#x27;commonjs exports value&#x27;</span><br></pre></td></tr></table></figure>
<p>ä¸èƒ½åœ¨ CommonJS æ¨¡å—ä¸­é€šè¿‡ require è½½å…¥ ES Module</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const mod = require(&#x27;./es-module.mjs&#x27;)</span><br><span class="line">console.log(mod)</span><br></pre></td></tr></table></figure>
<h2 id="ES-Modules-in-Node-js-ä¸-CommonJS-çš„å·®å¼‚"><a href="#ES-Modules-in-Node-js-ä¸-CommonJS-çš„å·®å¼‚" class="headerlink" title="ES Modules in Node.js - ä¸ CommonJS çš„å·®å¼‚"></a>ES Modules in Node.js - ä¸ CommonJS çš„å·®å¼‚</h2><p>ç¤ºä¾‹:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// åŠ è½½æ¨¡å—å‡½æ•°</span><br><span class="line">console.log(require)</span><br><span class="line"></span><br><span class="line">// æ¨¡å—å¯¹è±¡</span><br><span class="line">console.log(module)</span><br><span class="line"></span><br><span class="line">// å¯¼å‡ºå¯¹è±¡åˆ«å</span><br><span class="line">console.log(exports)</span><br><span class="line"></span><br><span class="line">// å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„</span><br><span class="line">console.log(__filename)</span><br><span class="line"></span><br><span class="line">// å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•</span><br><span class="line">console.log(__dirname)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1ã€ESM ä¸­æ— æ³•å¼•ç”¨CommonJSä¸­çš„é‚£äº›æ¨¡å—å…¨å±€æˆå‘˜</span><br><span class="line">2ã€require, module, exports å¯é€šè¿‡import å’Œexport ä»£æ›¿</span><br><span class="line">3ã€__filename å’Œ __dirname é€šè¿‡import å¯¹è±¡çš„ meta å±æ€§è·å–</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const currentUrl = import.meta.url</span><br><span class="line">console.log(currentUrl)</span><br><span class="line">// é€šè¿‡ url æ¨¡å—çš„ fileURLToPath æ–¹æ³•è½¬æ¢ä¸ºè·¯å¾„</span><br><span class="line">import &#123; fileURLToPath &#125; from &#x27;url&#x27;</span><br><span class="line">import &#123; dirname &#125; from &#x27;path&#x27;</span><br><span class="line">const __filename = fileURLToPath(import.meta.url)</span><br><span class="line">const __dirname = dirname(__filename)</span><br><span class="line">console.log(__filename)</span><br><span class="line">console.log(__dirname)</span><br></pre></td></tr></table></figure>
<h3 id="ES-Modules-in-Node-js-æ–°ç‰ˆæœ¬è¿›ä¸€æ­¥æ”¯æŒ"><a href="#ES-Modules-in-Node-js-æ–°ç‰ˆæœ¬è¿›ä¸€æ­¥æ”¯æŒ" class="headerlink" title="ES Modules in Node.js - æ–°ç‰ˆæœ¬è¿›ä¸€æ­¥æ”¯æŒ"></a>ES Modules in Node.js - æ–°ç‰ˆæœ¬è¿›ä¸€æ­¥æ”¯æŒ</h3><p>Node v12 ä¹‹åçš„ç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡package.json ä¸­æ·»åŠ typeå­—æ®µä¸ºmoduleï¼Œå°†é»˜è®¤æ¨¡å—ç³»ç»Ÿä¿®æ”¹ä¸º ES Module<br>æ­¤æ—¶å°±ä¸éœ€è¦ä¿®æ”¹æ–‡ä»¶æ‰©å±•åä¸º .mjs äº†<br>å¦‚æœéœ€è¦åœ¨type=moduleçš„æƒ…å†µä¸‹ç»§ç»­ä½¿ç”¨CommonJSï¼Œéœ€è¦å°†æ–‡ä»¶æ‰©å±•åä¿®æ”¹ä¸º .cjs<br>package.json:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123; &quot;type&quot;: &quot;module&quot; &#125;</span><br></pre></td></tr></table></figure>
<h3 id="ES-Modules-in-Node-js-Babel-å…¼å®¹æ–¹æ¡ˆ"><a href="#ES-Modules-in-Node-js-Babel-å…¼å®¹æ–¹æ¡ˆ" class="headerlink" title="ES Modules in Node.js - Babel å…¼å®¹æ–¹æ¡ˆ"></a>ES Modules in Node.js - Babel å…¼å®¹æ–¹æ¡ˆ</h3><p>å®‰è£…babel:yarn add @babel/node @babel/core @babel/preset-env â€“dev<br>è¿è¡Œbabel-nodeæµ‹è¯•:yarn babel-node index.js --presets=@babel/preset-env<br>**.babelrc é…ç½® **</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123; &quot;plugins&quot;: [ &quot;@babel/plugin-transform-modules-commonjs&quot; ] &#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ¼”ç¤º"><a href="#æ¼”ç¤º" class="headerlink" title="æ¼”ç¤º"></a>æ¼”ç¤º</h1><p>é—®ï¼š ä½ è®²è®²å‰ç«¯æ¨¡å—åŒ–å§<br>ç­”ï¼š æ¨¡å—åŒ–çš„å¼€å‘æ–¹å¼å¯ä»¥æé«˜ä»£ç å¤ç”¨ç‡ï¼Œæ–¹ä¾¿è¿›è¡Œä»£ç çš„ç®¡ç†ã€‚é€šå¸¸ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œåªå‘å¤–æš´éœ²ç‰¹å®šçš„å˜é‡å’Œå‡½æ•°ã€‚<br>é—®ï¼šæ¨¡å—åŒ–æœ‰å“ªå‡ ç§æ ‡å‡†ï¼Ÿ<br>ç­”ï¼š ç›®å‰æµè¡Œçš„jsæ¨¡å—åŒ–è§„èŒƒæœ‰CommonJSã€AMDã€CMDä»¥åŠES6çš„æ¨¡å—ç³»ç»Ÿ<br>é—®ï¼šES Modules å’Œ CommonJSçš„ä¸€äº›åŒºåˆ«<br>ç­”ï¼š<br>ä½¿ç”¨è¯­æ³•å±‚é¢ï¼ŒCommonJsæ˜¯é€šè¿‡module.exportsï¼Œexportså¯¼å‡ºï¼Œrequireå¯¼å…¥ï¼›ESModuleåˆ™æ˜¯exportå¯¼å‡ºï¼Œimportå¯¼å…¥<br>CommonJsæ˜¯è¿è¡Œæ—¶åŠ è½½æ¨¡å—ï¼ŒESModuleæ˜¯åœ¨é™æ€ç¼–è¯‘æœŸé—´å°±ç¡®å®šæ¨¡å—çš„ä¾èµ–<br>ESModuleåœ¨ç¼–è¯‘æœŸé—´ä¼šå°†æ‰€æœ‰importæå‡åˆ°é¡¶éƒ¨ï¼ŒCommonJsä¸ä¼šæå‡require<br>CommonJså¯¼å‡ºçš„æ˜¯ä¸€ä¸ªå€¼æ‹·è´ï¼Œä¼šå¯¹åŠ è½½ç»“æœè¿›è¡Œç¼“å­˜ï¼Œä¸€æ—¦å†…éƒ¨å†ä¿®æ”¹è¿™ä¸ªå€¼ï¼Œåˆ™ä¸ä¼šåŒæ­¥åˆ°å¤–éƒ¨ã€‚ESModuleæ˜¯å¯¼å‡ºçš„ä¸€ä¸ªå¼•ç”¨ï¼Œå†…éƒ¨ä¿®æ”¹å¯ä»¥åŒæ­¥åˆ°å¤–éƒ¨<br>CommonJsä¸­é¡¶å±‚çš„thisæŒ‡å‘è¿™ä¸ªæ¨¡å—æœ¬èº«ï¼Œè€ŒESModuleä¸­é¡¶å±‚thisæŒ‡å‘undefined<br>CommonJSåŠ è½½çš„æ˜¯æ•´ä¸ªæ¨¡å—ï¼Œå°†æ‰€æœ‰çš„æ¥å£å…¨éƒ¨åŠ è½½è¿›æ¥ï¼ŒESModuleå¯ä»¥å•ç‹¬åŠ è½½å…¶ä¸­çš„æŸä¸ªæ¥å£</p>
]]></content>
      <categories>
        <category>æ¨¡å—åŒ–</category>
      </categories>
      <tags>
        <tag>æ¨¡å—åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>è·¨åŸŸ</title>
    <url>/2022/09/30/%E8%B7%A8%E5%9F%9F/</url>
    <content><![CDATA[<h1 id="ä¸€ã€è·¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ã€è·¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ã€è·¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸€ã€è·¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ</h1><h2 id="1-åŒæºç­–ç•¥"><a href="#1-åŒæºç­–ç•¥" class="headerlink" title="1.åŒæºç­–ç•¥"></a>1.åŒæºç­–ç•¥</h2><p>è·¨åŸŸé—®é¢˜å…¶å®å°±æ˜¯æµè§ˆå™¨çš„åŒæºç­–ç•¥æ‰€å¯¼è‡´çš„ã€‚<br>ã€ŒåŒæºç­–ç•¥ã€æ˜¯ä¸€ä¸ªé‡è¦çš„å®‰å…¨ç­–ç•¥ï¼Œå®ƒç”¨äºé™åˆ¶ä¸€ä¸ªoriginçš„æ–‡æ¡£æˆ–è€…å®ƒåŠ è½½çš„è„šæœ¬å¦‚ä½•èƒ½ä¸å¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚å®ƒèƒ½å¸®åŠ©é˜»éš”æ¶æ„æ–‡æ¡£ï¼Œå‡å°‘å¯èƒ½è¢«æ”»å‡»çš„åª’ä»‹ã€‚<br>åªæœ‰å½“ã€Œprotocolï¼ˆåè®®ï¼‰ã€domainï¼ˆåŸŸåï¼‰ã€portï¼ˆç«¯å£ï¼‰ä¸‰è€…ä¸€è‡´ã€‚ã€æ‰æ˜¯åŒæºã€‚</p>
<h1 id="äºŒã€å¦‚ä½•è§£å†³è·¨åŸŸï¼Ÿ"><a href="#äºŒã€å¦‚ä½•è§£å†³è·¨åŸŸï¼Ÿ" class="headerlink" title="äºŒã€å¦‚ä½•è§£å†³è·¨åŸŸï¼Ÿ"></a>äºŒã€å¦‚ä½•è§£å†³è·¨åŸŸï¼Ÿ</h1><p>æ–¹å¼ä¸€ï¼šä½¿ç”¨ ajax çš„ jsonp<br>ä½¿ç”¨è¯¥æ–¹å¼çš„ç¼ºç‚¹ï¼šè¯·æ±‚æ–¹å¼åªèƒ½æ˜¯ get è¯·æ±‚</p>
<h1 id="æ–¹å¼äºŒï¼šä½¿ç”¨-jQuery-çš„-jsonp-æ’ä»¶"><a href="#æ–¹å¼äºŒï¼šä½¿ç”¨-jQuery-çš„-jsonp-æ’ä»¶" class="headerlink" title="æ–¹å¼äºŒï¼šä½¿ç”¨ jQuery çš„ jsonp æ’ä»¶"></a>æ–¹å¼äºŒï¼šä½¿ç”¨ jQuery çš„ jsonp æ’ä»¶</h1><p>ç‰¹ç‚¹ï¼š get è¯·æ±‚ã€ post è¯·æ±‚ï¼›<br>ä½†ä»æœåŠ¡å™¨ä»è·å–çš„æ•°æ®ï¼Œä¾ç„¶æ˜¯ jsonp æ ¼å¼ã€‚</p>
<h1 id="æ–¹å¼ä¸‰ï¼šä½¿ç”¨-cors"><a href="#æ–¹å¼ä¸‰ï¼šä½¿ç”¨-cors" class="headerlink" title="æ–¹å¼ä¸‰ï¼šä½¿ç”¨ cors"></a>æ–¹å¼ä¸‰ï¼šä½¿ç”¨ cors</h1><p>ä½¿ç”¨è¯¥æ–¹å¼çš„ç‰¹ç‚¹ï¼šä¸å‰ä¸¤ç§æ–¹å¼ç›¸æ¯”ï¼Œå‰ç«¯ä»£ç å’Œæœªå¤„ç†è·¨åŸŸå‰ä¸€æ ·ï¼Œå³æ™®é€šçš„ ajax è¯·æ±‚ï¼Œä½†æœåŠ¡å™¨ä»£ç æ·»åŠ äº†ä¸€æ®µè§£å†³è·¨åŸŸçš„ä»£ç ã€‚</p>
<h1 id="æ–¹å¼å››ï¼šä½¿ç”¨-Nginx-åå‘ä»£ç†"><a href="#æ–¹å¼å››ï¼šä½¿ç”¨-Nginx-åå‘ä»£ç†" class="headerlink" title="æ–¹å¼å››ï¼šä½¿ç”¨ Nginx åå‘ä»£ç†"></a>æ–¹å¼å››ï¼šä½¿ç”¨ Nginx åå‘ä»£ç†</h1><p>Nginx åˆ™æ˜¯é€šè¿‡åå‘ä»£ç†çš„æ–¹å¼ï¼Œï¼ˆè¿™é‡Œä¹Ÿéœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªåŸŸåï¼‰è¿™é‡Œå°±æ˜¯ä¿è¯æˆ‘å½“å‰åŸŸï¼Œèƒ½è·å–åˆ°é™æ€èµ„æºå’Œæ¥å£ï¼Œä¸å…³å¿ƒæ˜¯æ€ä¹ˆè·å–çš„ã€‚</p>
]]></content>
      <categories>
        <category>çŸ¥è¯†ç‚¹</category>
      </categories>
      <tags>
        <tag>è·¨åŸŸ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±æµ…æ‹·è´</title>
    <url>/2022/08/25/%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D/</url>
    <content><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯æµ…æ‹·è´ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æµ…æ‹·è´ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æµ…æ‹·è´ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æµ…æ‹·è´ï¼Ÿ</h1><p>æµ…æ‹·è´ï¼šç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªå¯¹è±¡Bå¤åˆ¶å¦ä¸€ä¸ªå¯¹è±¡Aï¼Œå½“æ”¹å˜Bå¯¹è±¡çš„å€¼æ˜¯Aå¯¹è±¡çš„å€¼ä¹Ÿéšä¹‹æ”¹å˜ã€‚<br>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var  obj1=&#123;a:1,b:5,c:3&#125;;</span><br><span class="line">var  obj2=obj1;</span><br><span class="line">obj2.b=2;</span><br><span class="line">console.log(obj1.b);  //2</span><br><span class="line">console.log(obj2.b);  //2</span><br></pre></td></tr></table></figure>
<p>æµ…æ‹·è´ï¼šå°±æ˜¯æ‹·è´å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œä¸æ·±å±‚æ¬¡çš„æ‹·è´å¯¹è±¡çš„å€¼ï¼Œå¤šä¸ªå¯¹è±¡æŒ‡å‘å †å†…å­˜ä¸­çš„åŒä¸€å¯¹è±¡ï¼Œï¼Œä»»ä½•ä¸€ä¸ªä¿®æ”¹éƒ½ä¼šæ˜¯ä½¿å¾—æ‰€æœ‰å¯¹è±¡çš„å€¼è¢«ä¿®æ”¹ï¼Œå› ä¸ºå®ƒä»¬å…¬ç”¨ä¸€æ¡æ•°æ®ã€‚</p>
<h1 id="ä»€ä¹ˆæ˜¯æ·±æ‹·è´ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ·±æ‹·è´ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ·±æ‹·è´ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ·±æ‹·è´ï¼Ÿ</h1><p>æ·±æ‹·è´ï¼šç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªå¯¹è±¡Bå¤åˆ¶å¦ä¸€ä¸ªå¯¹è±¡Aï¼Œå½“æ”¹å˜Bå¯¹è±¡çš„å€¼æ˜¯Aå¯¹è±¡çš„å€¼ä¸ä¼šæ”¹å˜ã€‚<br>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var a=2;</span><br><span class="line">var b=a;</span><br><span class="line">b=3;</span><br><span class="line">console.log(a);//2</span><br><span class="line">console.log(b);//3</span><br></pre></td></tr></table></figure>
<p>æ·±æ‹·è´ï¼šæ·±æ‹·è´ä¸ä¼šæ‹·è´å¼•ç”¨ç±»å‹çš„å¼•ç”¨ï¼Œæ‹·è´çš„æ˜¯å¼•ç”¨ç±»å‹çš„å€¼ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„å¼•ç”¨ç±»å‹ã€‚</p>
<h1 id="å¦‚ä½•å®ç°æ·±æ‹·è´ï¼Ÿ"><a href="#å¦‚ä½•å®ç°æ·±æ‹·è´ï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°æ·±æ‹·è´ï¼Ÿ"></a>å¦‚ä½•å®ç°æ·±æ‹·è´ï¼Ÿ</h1><h2 id="â‘ JSON-Stringify-JSON-pare-ä¸æ”¯æŒå¤šå±‚å¼•ç”¨åµŒå¥—ï¼Œä¸æ”¯æŒå‡½æ•°Mapã€Sepç­‰ç±»å‹çš„æ•°æ®"><a href="#â‘ JSON-Stringify-JSON-pare-ä¸æ”¯æŒå¤šå±‚å¼•ç”¨åµŒå¥—ï¼Œä¸æ”¯æŒå‡½æ•°Mapã€Sepç­‰ç±»å‹çš„æ•°æ®" class="headerlink" title="â‘ JSON.Stringify(JSON.pare())   ä¸æ”¯æŒå¤šå±‚å¼•ç”¨åµŒå¥—ï¼Œä¸æ”¯æŒå‡½æ•°Mapã€Sepç­‰ç±»å‹çš„æ•°æ®"></a>â‘ JSON.Stringify(JSON.pare())   ä¸æ”¯æŒå¤šå±‚å¼•ç”¨åµŒå¥—ï¼Œä¸æ”¯æŒå‡½æ•°Mapã€Sepç­‰ç±»å‹çš„æ•°æ®</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var  obj1=&#123;a:1,b:5,c:3&#125;;</span><br><span class="line">var  obj2=JSON.Stringifyï¼ˆJSON.parseï¼ˆobj1ï¼‰ï¼‰;</span><br><span class="line">obj2.b=2;</span><br><span class="line">console.log(obj1.b);  //5</span><br><span class="line">console.log(obj2.b);  //2</span><br></pre></td></tr></table></figure>
<h2 id="â‘¡å±•å¼€è¿ç®—ç¬¦-â€¦"><a href="#â‘¡å±•å¼€è¿ç®—ç¬¦-â€¦" class="headerlink" title="â‘¡å±•å¼€è¿ç®—ç¬¦   â€¦"></a>â‘¡å±•å¼€è¿ç®—ç¬¦   â€¦</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var  obj1=&#123;a:1,b:5,c:3&#125;;</span><br><span class="line">var  obj2=(...obj1)</span><br><span class="line">obj2.b=2;</span><br><span class="line">console.log(obj1.b);  //5</span><br><span class="line">console.log(obj2.b);  //2</span><br></pre></td></tr></table></figure>
<h2 id="â‘¢Object-asssignï¼ˆtarget-sourseï¼‰"><a href="#â‘¢Object-asssignï¼ˆtarget-sourseï¼‰" class="headerlink" title="â‘¢Object.asssignï¼ˆtarget,sourseï¼‰"></a>â‘¢Object.asssignï¼ˆtarget,sourseï¼‰</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var  obj1=&#123;a:1,b:5,c:3&#125;;</span><br><span class="line">var  obj2=Object.assign(&#123;&#125;,obj1)</span><br><span class="line">obj2.b=2;</span><br><span class="line">console.log(obj1.b);  //5</span><br><span class="line">console.log(obj2.b);  //2</span><br></pre></td></tr></table></figure>
<h2 id="â‘£æ·±æ‹·è´å‡½æ•°ï¼Œé€’å½’"><a href="#â‘£æ·±æ‹·è´å‡½æ•°ï¼Œé€’å½’" class="headerlink" title="â‘£æ·±æ‹·è´å‡½æ•°ï¼Œé€’å½’"></a>â‘£æ·±æ‹·è´å‡½æ•°ï¼Œé€’å½’</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// target è¦æ‹·è´çš„å¯¹è±¡</span><br><span class="line">function deepClone(target)&#123;</span><br><span class="line">    //å®šä¹‰ä¸€ä¸ªæ‹·è´å¯¹è±¡</span><br><span class="line">    let result;</span><br><span class="line">    // åˆ¤æ–­æ‹·è´ç›®æ ‡æ˜¯ä¸æ˜¯Objectå¯¹è±¡</span><br><span class="line">    if(typeof target===&#x27;object&#x27;)&#123;</span><br><span class="line">        // åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„ç±»å‹</span><br><span class="line">        if(Array.isArray(target))&#123;</span><br><span class="line">            // å®šä¹‰ä¸ºæ•°ç»„</span><br><span class="line">            result=[];</span><br><span class="line">            for(let i in target)&#123;</span><br><span class="line">                result.push(deepClone(target[i]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;else if(target===null)&#123;</span><br><span class="line">            // ç›´æ¥èµ‹å€¼</span><br><span class="line">            result=null;</span><br><span class="line">        &#125;else if(target.constructor===RegExp)&#123;</span><br><span class="line">            // ç›´æ¥èµ‹å€¼</span><br><span class="line">            result=target;</span><br><span class="line">            // ä¸æ˜¯ç‰¹æ®Šçš„å¯¹è±¡</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            result=&#123;&#125;;</span><br><span class="line">            for(let i in target)&#123;</span><br><span class="line">                // é€’å½’</span><br><span class="line">                result[i]=deepClone(target[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        // åŸºæœ¬æ•°æ®ç±»å‹  ç›´æ¥èµ‹å€¼</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        result=target;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var obj1=&#123;</span><br><span class="line">a:&#123;z:1,c:null&#125;,</span><br><span class="line">b:[1,2,3,5],</span><br><span class="line">c:function()&#123;console.log(this.a)&#125;</span><br><span class="line">&#125;</span><br><span class="line">var obj2=deepClone(obj1);</span><br><span class="line">console.log(obj2);</span><br><span class="line">obj2.b[0]=2;</span><br><span class="line">obj2.a[0]=2;</span><br><span class="line">console.log(obj1.a)</span><br><span class="line">console.log(obj2.a)</span><br><span class="line">console.log(obj1.b)</span><br><span class="line">console.log(obj2.b)</span><br><span class="line">console.log(obj2.c())</span><br></pre></td></tr></table></figure>
<p><img src="/2022/08/25/%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D/%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D%E7%BB%93%E6%9E%9C.png" loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
]]></content>
      <categories>
        <category>çŸ¥è¯†ç‚¹</category>
      </categories>
      <tags>
        <tag>æ·±æµ…æ‹·è´</tag>
      </tags>
  </entry>
</search>
